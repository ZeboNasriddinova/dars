/*! For license information please see yasp.js.LICENSE.txt */
!function(){function e(n){var i=r[n];if(void 0!==i)return i.exports;var o=r[n]={exports:{}};return t[n].call(o.exports,o,o.exports,e),o.exports}var t={90719:function(e,t,r){"use strict";function n(e){return"number"===typeof e&&e===e}r.d(t,{hj:function(){return n}})},36307:function(e,t,r){"use strict";r.d(t,{H:function(){return n.H}});var n=r(69595)},61536:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{H:function(){return m}});var d=r(29840),p={},y=function(){},v=function(e){function t(e){var n;if(i(this,t),h(l(n=r.call(this)),"aborted",void 0),h(l(n),"reason",void 0),h(l(n),"_onabort",y),e!==p)throw new TypeError("Illegal constructor.");return n.aborted=!1,n}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e);var r=c(t);return a(t,[{key:"onabort",get:function(){return this._onabort},set:function(e){var t=this._onabort;t&&this.removeEventListener("abort",t),this._onabort=e,this.addEventListener("abort",e)}},{key:"throwIfAborted",value:function(){throw this.reason}}]),t}(d.Z),m=function(){function e(){i(this,e),h(this,"_signal",void 0),this._signal=new v(p)}return a(e,[{key:"signal",get:function(){return this._signal}},{key:"abort",value:function(e){var t=this.signal;t.aborted||(t.aborted=!0,t.reason=e,t.dispatchEvent(new Event("abort")))}}]),e}()},69595:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.d(t,{H:function(){return u}});var i=r(71729),o=r(61536),a="object"===("undefined"===typeof self?"undefined":n(self))?self:window,u=Boolean((0,i.Y)((function(){return new a.AbortController})))?a.AbortController:o.H},99002:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var i=s(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.d(t,{M:function(){return l}});var l=function(e){function t(){return i(this,t),s.apply(this,arguments)}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(t,e);var r,n,c,s=u(t);return r=t,(n=[{key:"destroy",value:function(){var e=this;this.emit("Destroy"),this.off("Destroy"),Object.keys(this.handlers).forEach((function(t){e.off(t)})),Object.keys(this.onceHandlers).forEach((function(t){e.off(t)}))}}])&&o(r.prototype,n),c&&o(r,c),Object.defineProperty(r,"prototype",{writable:!1}),t}(r(7179).v)},7179:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{v:function(){return o}});var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"handlers",Object.create(null)),i(this,"onceHandlers",Object.create(null)),i(this,"maxEventListeners",10)}var t,r,o;return t=e,(r=[{key:"setMaxListeners",value:function(e){!isFinite(e)||e<=0||(this.maxEventListeners=e)}},{key:"on",value:function(e,t){this.getHandlers(e).push(t),this.checkSubscriptions(e)}},{key:"once",value:function(e,t){this.getOnceHandlers(e).push(t),this.checkSubscriptions(e)}},{key:"off",value:function(e,t){var r=this.getHandlers(e),n=this.getOnceHandlers(e);if(void 0===t)return r.length=0,void(n.length=0);this.removeHandler(t,r),this.removeHandler(t,n)}},{key:"emit",value:function(e,t){var r=this.getHandlers(e),n=this.getOnceHandlers(e).slice();this.getOnceHandlers(e).length=0,r.slice().concat(n).forEach((function(e){try{e(t)}catch(r){setTimeout((function(){throw r}),0)}}))}},{key:"getHandlers",value:function(e){return void 0===this.handlers[e]&&(this.handlers[e]=[]),this.handlers[e]}},{key:"getOnceHandlers",value:function(e){return void 0===this.onceHandlers[e]&&(this.onceHandlers[e]=[]),this.onceHandlers[e]}},{key:"checkSubscriptions",value:function(e){var t=this.getHandlers(e).length+this.getOnceHandlers(e).length;t>this.maxEventListeners&&console.warn("There are ".concat(t," subscriptions on event named ").concat(String(e)))}},{key:"removeHandler",value:function(e,t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}}])&&n(t.prototype,r),o&&n(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},39525:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(){return"object"===("undefined"===typeof self?"undefined":n(self))?self:window}r.d(t,{I:function(){return i}})},55176:function(e,t,r){"use strict";function n(e){return e&&"function"===typeof e.catch&&e.catch((function(e){})),e}r.d(t,{v:function(){return n}})},16205:function(e,t,r){"use strict";r.d(t,{M:function(){return n.M}});var n=r(69015)},74997:function(e,t,r){"use strict";r.d(t,{i:function(){return n}});var n=!(0,r(52839).t)(Math.random)||Math.random()===Math.random()},69015:function(e,t,r){"use strict";r.d(t,{M:function(){return o}});var n=r(74997),i=r(15086),o=n.i?i.U:function(){return Math.random()}},15086:function(e,t,r){"use strict";function n(){return((o=16807*o%2147483647)-1)/2147483646}r.d(t,{U:function(){return n}});var i=r(28285),o=(0,i.m6)()*(0,i.no)()%2147483647},83429:function(e,t,r){"use strict";r.d(t,{t:function(){return n.t}});var n=r(22373)},22373:function(e,t,r){"use strict";r.d(t,{t:function(){return i}});var n=r(52741),i={getItem:function(e){try{return n.ZP.getItem(e)}catch(t){return null}},setItem:function(e,t){try{n.ZP.setItem(e,t)}catch(r){}},removeItem:function(e){try{n.ZP.removeItem(e)}catch(t){}},clear:function(){try{n.ZP.clear()}catch(e){}}}},28285:function(e,t,r){"use strict";r.d(t,{m6:function(){return n.m6},no:function(){return n.no}});var n=r(11674)},63223:function(e,t,r){"use strict";r.d(t,{M:function(){return o}});var n={}.toString,i=/\[object (\w+)\]/,o=function(e){var t=n.call(e);if(!t)return null;var r=t.match(i);if(!r)return null;var o=r[1];return o||null}},11674:function(e,t,r){"use strict";function n(e){return"function"===typeof e||"Function"===(0,i.M)(e)}r.d(t,{m6:function(){return o},no:function(){return f}});var i=r(63223),o=Date&&n(Date.now)?function(){return Date.now()}:function(){return(new Date).getTime()},a="undefined"===typeof window?void 0:window.performance,u=a&&n(a.now),c=a&&a.timing&&a.timing.navigationStart,s=a&&a.timeOrigin?a.timeOrigin:c?a.timing.navigationStart:o(),l=0,f=u?function(){return a.now()}:function(){return e=o()-s,l=Math.max(e,l);var e}},71729:function(e,t,r){"use strict";function n(e,t){try{return e()}catch(r){"function"===typeof t&&t(r)}}r.d(t,{Y:function(){return n}})},52839:function(e,t,r){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return!1;var r=t?Function.prototype.toString.call(e):e.toString?e.toString():"";return/\[native code\]/.test(r)||/\/\* source code not available \*\//.test(r)}r.d(t,{t:function(){return n}})},31247:function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;try{var t=e.navigator||{};return t.userAgent||""}catch(r){return""}}r.d(t,{i:function(){return n}})},35776:function(e,t,r){"use strict";r.d(t,{y:function(){return i}});var n=r(31247),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=(0,n.i)(e);return t.includes("Tizen")}},39881:function(e,t,r){"use strict";r.d(t,{F:function(){return i}});var n=r(31247),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=(0,n.i)(e);return t.includes("VIDAA")||t.includes("Hisense")}},46223:function(e,t,r){"use strict";r.d(t,{V:function(){return i}});var n=r(31247),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=(0,n.i)(e);return t.includes("Web0S")}},20563:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(){return"object"===("undefined"===typeof self?"undefined":n(self))?self:window}r.d(t,{I:function(){return i}})},54651:function(e,t,r){"use strict";var n;r.d(t,{Z:function(){return n}}),function(e){e.LIVE="LIVE",e.EVENT="EVENT",e.VOD="VOD"}(n||(n={}))},41771:function(e,t,r){"use strict";r.d(t,{j:function(){return n}});var n=new RegExp("^https?:\\/\\/([^\\/]+\\.)?"+"(".concat(["(an|strm)\\.yandex\\.(ru|net)","yastatic\\.net","strm-ott\\.akamaized\\.net","cdn\\.ngenix\\.net","strm\\.yandex\\.cdnga\\.net","strm-yandex\\.gcdn\\.co","(widevine|playready|fairplay)-proxy\\.ott\\.yandex\\.ru","drm\\.yandex-team\\.ru"].join("|"),")")+"\\/(?!log|perf|jstracer)")},36531:function(e,t,r){"use strict";function n(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){var t,r,n,i;return null!==(t=null===(r=e.performance)||void 0===r?void 0:r.timeOrigin)&&void 0!==t?t:null===(n=e.performance)||void 0===n||null===(i=n.timing)||void 0===i?void 0:i.navigationStart}r.d(t,{$:function(){return h}});r(97881);var c=r(88627),s=r(91482),l=r(41771),f=r(28285),h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t,a(this,"intervalId",void 0),a(this,"contexts",[])}var t,r,i;return t=e,(r=[{key:"attach",value:function(e){var t=this;(0,s.B)(e)&&-1===this.contexts.indexOf(e)&&(0===this.contexts.length&&(this.intervalId=setInterval((function(){return t.flush()}),3e4)),this.contexts.push(e))}},{key:"detach",value:function(e){var t=this.contexts.indexOf(e);-1!==t&&this.contexts.splice(t,1),0===this.contexts.length&&clearInterval(this.intervalId)}},{key:"destroy",value:function(){this.flush(),this.contexts.length=0,clearInterval(this.intervalId)}},{key:"flush",value:function(){var e=[],t=this.contexts.map(u),r=Math.min.apply(Math,n(t));this.contexts.forEach((function(n,i){(function(e){try{var t,r,n=null!==(t=e.performance.getEntriesByType)&&void 0!==t?t:e.performance.webkitGetEntriesByType,i=null!==(r=e.performance.clearResourceTimings)&&void 0!==r?r:e.performance.webkitClearResourceTimings,o=n.call(e.performance,"resource");return i.call(e.performance),o}catch(a){return[]}})(n).forEach((function(n){l.j.test(n.name)&&e.push((0,c.I)(n,t[i],r))}))})),0!==e.length&&this.config.sendLog(e,{perfnow:String((0,f.m6)()),navstart:String(r)})}}])&&o(t.prototype,r),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},91482:function(e,t,r){"use strict";function n(e){return e.performance&&((0,i.m)(e.performance.getEntriesByType)||(0,i.m)(e.performance.webkitGetEntriesByType))&&((0,i.m)(e.performance.clearResourceTimings)||(0,i.m)(e.performance.webkitClearResourceTimings))}r.d(t,{B:function(){return n}});var i=r(56789)},88627:function(e,t,r){"use strict";function n(e,t,r){return e&&"number"===typeof e?e+t-r:e}function i(e,t,r){var i=e.duration,o=e.entryType,a=e.name,u=e.startTime,c=e.connectEnd,s=e.connectStart,l=e.decodedBodySize,f=e.domainLookupEnd,h=e.domainLookupStart,d=e.encodedBodySize,p=e.fetchStart,y=e.initiatorType,v=e.nextHopProtocol,m=e.redirectEnd,b=e.redirectStart,g=e.requestStart,w=e.responseEnd,_=e.responseStart,E=e.secureConnectionStart,O=e.transferSize,S=e.workerStart,k=e.serverTiming,T=e.responseStatus,R=e.deliveryType,P=e.renderBlockingStatus,x=e.firstInterimResponseStart;return{duration:i,entryType:o,name:a,encodedBodySize:d,decodedBodySize:l,initiatorType:y,transferSize:O,nextHopProtocol:v,serverTiming:k,responseStatus:T,deliveryType:R,renderBlockingStatus:P,startTime:n(u,t,r),connectEnd:n(c,t,r),connectStart:n(s,t,r),domainLookupEnd:n(f,t,r),domainLookupStart:n(h,t,r),fetchStart:n(p,t,r),redirectEnd:n(m,t,r),redirectStart:n(b,t,r),requestStart:n(g,t,r),responseEnd:n(w,t,r),responseStart:n(_,t,r),secureConnectionStart:n(E,t,r),workerStart:n(S,t,r),firstInterimResponseStart:n(x,t,r)}}r.d(t,{I:function(){return i}})},47333:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{p:function(){return u}});r(97881);var o=r(12127),a=r(30371),u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"lastUpdate",void 0),i(this,"watchedTime",0)}var t,r,u;return t=e,(r=[{key:"calc",value:function(e,t,r){if(void 0!==this.lastUpdate){var n=(e-this.lastUpdate.videoTime)/t,i=(0,o.G)(n,this.lastUpdate.getElapsedTime()/1e3);this.watchedTime=this.watchedTime+i}this.lastUpdate=r?{getElapsedTime:(0,a.u)(),videoTime:e}:void 0}},{key:"get",value:function(){return this.watchedTime}},{key:"restoreLastUpdate",value:function(){this.lastUpdate=void 0}}])&&n(t.prototype,r),u&&n(t,u),Object.defineProperty(t,"prototype",{writable:!1}),e}()},12127:function(e,t,r){"use strict";function n(e,t){var r=e>=0&&e<=t+.5?e:t;return Math.max(0,r)}r.d(t,{G:function(){return n}});r(97881)},99761:function(e,t,r){"use strict";function n(e){for(var t="",r=0;r<e;r++)t+=(16*(0,i.M)()|0).toString(16);return t}r.d(t,{a:function(){return n}});var i=r(16205)},79951:function(e,t,r){"use strict";r.d(t,{M:function(){return o}});var n={}.toString,i=/\[object (\w+)\]/,o=function(e){var t=n.call(e);if(!t)return null;var r=t.match(i);if(!r)return null;var o=r[1];return o||null}},30371:function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.no,t=e();return function(){return Math.max(0,e()-t)}}r.d(t,{u:function(){return n}});r(97881);var i=r(28285)},56789:function(e,t,r){"use strict";function n(e){return"function"===typeof e||"Function"===(0,i.M)(e)}r.d(t,{m:function(){return n}});var i=r(79951)},63487:function(e,t,r){"use strict";function n(){}r.d(t,{Z:function(){return n}})},4364:function(e,t,r){"use strict";function n(e){setTimeout((function(){throw e}),0)}r.d(t,{L:function(){return n}})},94309:function(e,t,r){"use strict";r.d(t,{M:function(){return o}});var n={}.toString,i=/\[object (\w+)\]/,o=function(e){var t=n.call(e);if(!t)return null;var r=t.match(i);if(!r)return null;var o=r[1];return o||null}},28584:function(e,t,r){"use strict";function n(e){return"function"===typeof e||"Function"===(0,i.M)(e)}r.d(t,{no:function(){return f}});var i=r(94309),o=Date&&n(Date.now)?function(){return Date.now()}:function(){return(new Date).getTime()},a="undefined"===typeof window?void 0:window.performance,u=a&&n(a.now),c=a&&a.timing&&a.timing.navigationStart,s=a&&a.timeOrigin?a.timeOrigin:c?a.timing.navigationStart:o(),l=0,f=u?function(){return a.now()}:function(){return e=o()-s,l=Math.max(e,l);var e}},48325:function(e,t,r){"use strict";r.d(t,{v:function(){return n}});var n="vpuid"},3942:function(e,t,r){"use strict";r.d(t,{R:function(){return n}});r(97881);var n=function(e){return null===e?1/0:void 0===e?1280:e}},68940:function(e,t,r){"use strict";function n(e){if(!l.flagsInited){l.flagsInited=!0,(0,o.H)();var t=(0,s.L)()||{},r=t.flags,n=t.slots,i=t.testids;(0,u.K)(r)&&(0,c.Y)((function(){(0,a.M)(r,(function(e,t){l.flags[t]=String(e)}))})),l.slots=void 0!==n?String(n):void 0,l.testids=Array.isArray(i)?i.join(","):void 0!==i?String(i):void 0,(0,u.K)(e)&&(0,u.K)(e.flags)&&(0,c.Y)((function(){(0,a.M)(e.flags,(function(e,t){l.flags[t]=String(e)}))}))}}r.d(t,{V:function(){return n}});var i=r(47550),o=r(77789),a=r(47974),u=r(95689),c=r(71729),s=r(61479),l=(0,i.r)()},47550:function(e,t,r){"use strict";function n(){return o}r.d(t,{r:function(){return n}});var i=(0,r(39525).I)();i.Ya||(i.Ya={}),i.Ya.streamPlayer||(i.Ya.streamPlayer={}),i.Ya.streamPlayer.exp||(i.Ya.streamPlayer.exp={});var o=i.Ya.streamPlayer.exp;o.flags||(o.flags={})},55543:function(e,t,r){"use strict";function n(){return s(),p.flags||{}}function i(e){return s(e),p.flags[e]}function o(e){return"true"===e||"1"===e||"false"!==e&&"0"!==e&&void 0}function a(e){var t=o(i(e));return"undefined"===typeof t?o(d[e]):t}function u(e){if("undefined"!==typeof e){var t=parseFloat(e);if((0,l.z)(t))return t}}function c(e){var t=u(i(e));return"undefined"===typeof t?u(d[e]):t}function s(e){if(!p.flagsInited){var t=new Error(e?"Unexpected usage of player's flag ".concat(e," before any flag configuration"):"Unexpected usage of player's getFlagsJson before any flag configuration");setTimeout((function(){throw t}))}}r.d(t,{RW:function(){return a},Vc:function(){return f.V},jS:function(){return c},qm:function(){return n},r0:function(){return i}});var l=r(7989),f=r(68940),h=r(47550),d={use_correct_method_in_workershim_revert:"false",web_debug_log_calls:"false",web_debug_log_events:"false",web_debug_log_internals:"false",web_debug_panel:"false",web_destroy_yasp_only_with_no_instances:"true",web_forbid_allow_muted_autoplay:"false",web_ignore_render_stalled:"true",web_mp_ttfb_estimator:"false",web_userquality_ttl:"false",web_yasp_buffer_goal_bytes_size:"0",web_yasp_enable_network_traces:"false",web_yasp_enable_worker:"true",web_yasp_object_fit_in_resolution_rule:"false",web_yasp_screenshot_capturing:"false",web_yasp_static_timeout_for_low_latency:"true",web_yasp_target_latency_debug:"-1",web_yasp_time_to_start:"null",web_yasp_unify_abr_decision_hash_code:"true",yasp_abr_loading_segment:"false",yasp_body_timeout:"1000",yasp_decrease_mse_buffer_on_allocation_error:"false",yasp_decrease_mse_buffer_on_quota_exceeded_error:"false",yasp_enable_new_timeout:"false",yasp_fair_bandwidth:"false",yasp_headers_timeout:"5000",yasp_no_source_abort_on_fake_seek:"false",yasp_npr_by_segment_info:"false",yasp_preload_content_5_sec_before_ad_end:"false",yasp_preload_content_5_sec_before_ad_skip:"false",yasp_videosegment_expected_load_time_multiplier:"1"},p=(0,h.r)()},77789:function(e,t,r){"use strict";function n(){var e,t=null===(e=(0,a.L)())||void 0===e?void 0:e.vpuid;if(t){var r=function(){try{var e;return null===(e=u.localStorage)||void 0===e?void 0:e.getItem(o.v)}catch(t){return null}}();if(!r||r!==t)try{var n;null===(n=u.localStorage)||void 0===n||n.setItem(o.v,String(t))}catch(i){}}}r.d(t,{H:function(){return n}});var i=r(20563),o=r(48325),a=r(61479),u=(0,i.I)()},10123:function(e,t,r){"use strict";r.d(t,{g:function(){return n}});var n="source_index"},56633:function(e,t,r){"use strict";r.d(t,{s:function(){return n}});var n="__UAAS_CONFIG_INLINE__"},8825:function(e,t,r){"use strict";function n(e){function t(){if(0!==o.length){var e=o.slice();o.length=0,e.forEach((function(e){var t=e.task,i=e.onPromiseReject;if(u)i(n);else try{t(r)}catch(o){}})),o.length>0&&t()}}var r,n,o=[],a=!1,u=!1;return e.then((function(e){r=e,a=!0,t()})),e.catch((function(e){n=e,u=!0,t()})),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.Z;if(u)t(n);else if(!a||o.length>0)o.push({task:e,onPromiseReject:t});else try{e(r)}catch(c){}}}r.d(t,{P:function(){return n}});var i=r(10055)},33603:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){var t="function"===typeof Map?new Map:void 0;return(c=function(e){function r(){return s(e,arguments,h(this).constructor)}if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),f(r,e)})(e)}function s(e,t,r){return(s=l()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&f(i,r.prototype),i}).apply(null,arguments)}function l(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e){var t=e.url,r=e.line,n=e.col,i=e.fileName,o=e.columnNumber,a=e.lineNumber;return"".concat(t||i||"?",":").concat(r||a||"?",":").concat(n||o||"?")}r.d(t,{s:function(){return g}});var y=r(88468),v=r(73496),m=r(3525),b=r(28139),g=function(e){function t(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t);var a="object"===n(e)?e:{message:String(e||m.J.message)};d(u(r=_.call(this)),"message",void 0),d(u(r),"code",void 0),d(u(r),"category",void 0),d(u(r),"isFatal",void 0),d(u(r),"details",void 0),d(u(r),"stack",void 0),d(u(r),"toString",void 0),d(u(r),"toJSON",void 0),b(u(r),t.prototype),r.message=i.message||a.message||m.J.message,r.code=i.code||a.code||a.id||m.J.code,r.category=i.category||a.category||m.J.category,r.isFatal=Boolean((0,v.d)([i.isFatal,a.isFatal,m.J.isFatal])),r.details=i.details||a.details||m.J.details,Object.defineProperty(u(r),"stack",{enumerable:!0});var c=i.stack||a.stack||p(a),s=c===m.J.stack?r.stack:c;if(s&&s!==m.J.stack)r.stack=s;else if(!r.stack)try{throw new Error(r.message)}catch(l){r.stack=s=l.stack||m.J.stack}return r.toString=function(){return(0,y.Y)(r.toJSON())||"{}"},r.toJSON=function(){return{message:r.message,code:r.code,isFatal:r.isFatal,details:r.details,category:r.category,stack:s}},r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(t,e);var r,c,s,g,w,_=(r=t,c=l(),function(){var e,t=h(r);if(c){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return a(this,e)});return s=t,g&&i(s.prototype,g),w&&i(s,w),Object.defineProperty(s,"prototype",{writable:!1}),s}(c(Error))},3525:function(e,t,r){"use strict";r.d(t,{J:function(){return n}});var n={message:"DEFAULT_ERROR_MESSAGE",code:0,details:"",stack:"?:?:?",isFatal:!0,category:"DEFAULT"}},60520:function(e,t,r){"use strict";function n(e){var t=e.map((function(e){return{start:e.start,end:e.end}})).sort((function(e,t){return e.start-t.start}));if(t.length<=1)return t;var r=[t[0]];return t.slice(1).forEach((function(e,t){var n=r[r.length-1];n.end<e.start?r.push(e):n.end<e.end&&(n.end=e.end)})),r}r.d(t,{l:function(){return n}})},73480:function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=e.SourceBuffer||e.WebKitSourceBuffer;if(!t)return!1;var r=t.prototype&&(0,o.m)(t.prototype.appendBuffer)&&(0,o.m)(t.prototype.remove);return!r}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=e.ManagedMediaSource||e.MediaSource||e.WebKitMediaSource;return t&&(0,o.m)(t.isTypeSupported)&&!n(e)?t:void 0}r.d(t,{Q:function(){return i}});var o=r(84754)},93635:function(e,t,r){"use strict";function n(e,t){var r=e[t];if(!(0,i.t)(r)){var n=r;try{delete e[t];var o=e[t];"function"===typeof o&&(r=o),e[t]=n}catch(a){}}return r}r.d(t,{C:function(){return n}});var i=r(52839)},47974:function(e,t,r){"use strict";function n(e,t,r){for(var n in e)(0,i.n)(e,n)&&t.call(r,e[n],n,e)}r.d(t,{M:function(){return n}});var i=r(88870)},69229:function(e,t,r){"use strict";function n(e){return"function"===typeof Object.entries?Object.entries(e):(0,i.Z)(e).map((function(t){return[t,e[t]]}))}r.d(t,{J:function(){return n}});var i=r(79298)},79298:function(e,t,r){"use strict";function n(e){if("function"===typeof Object.keys)return Object.keys(e);var t=[];for(var r in e)(0,i.n)(e,r)&&t.push(r);return t}r.d(t,{Z:function(){return n}});var i=r(88870)},2615:function(e,t,r){"use strict";function n(e){var t=Object.values;if("function"===typeof t)return t(e);var r=[];for(var n in e)(0,i.n)(e,n)&&r.push(e[n]);return r}r.d(t,{z:function(){return n}});var i=r(88870)},88870:function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}r.d(t,{n:function(){return n}})},95689:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){var t=n(e);return Boolean(e)&&("object"===t||"function"===t)}r.d(t,{K:function(){return i}})},98834:function(e,t,r){"use strict";r.d(t,{I:function(){return n}});var n=Number.EPSILON||Math.pow(2,-52)},26295:function(e,t,r){"use strict";r.d(t,{h:function(){return n}});var n=function(e,t,r){for(var n=[],i=0;i<e.length;i++){var o=e[i];t.call(r,o,i,e)&&n.push(o)}return n}},95002:function(e,t,r){"use strict";r.d(t,{s:function(){return o}});var n=r(52839),i=[].find,o=(0,n.t)(i)?function(e,t){return i.call(e,t)}:function(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(t(n,r,e))return n}}},73496:function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e){return n((0,a.h)(e,(function(e){return void 0!==e})),1)[0]}r.d(t,{d:function(){return o}});var a=r(26295)},51312:function(e,t,r){"use strict";r.d(t,{k:function(){return o}});var n=r(79951),i=(0,r(93635).C)(Array,"isArray"),o=i?function(e){return i.call(Array,e)}:function(e){return"Array"===(0,n.M)(e)}},18243:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,r,i){var u=function(e){var t=!1,r=!1,i=!1;return!0===e?t=!0:"object"===n(e)&&(t=Boolean(e.capture),r=Boolean(e.passive),i=Boolean(e.once)),{capture:t,passive:r,once:i}}(i),c=a.FF?u:u.capture,s=u.once&&!a.vE?function(e){l(),r.call(this,e)}:r,l=function(){(0,o.f)(e,t,s,c)};return(0,o.h)(e,t,s,c),l}r.d(t,{O:function(){return i}});var o=r(43751),a=r(65531)},43751:function(e,t,r){"use strict";r.d(t,{f:function(){return a},h:function(){return o}});var n=r(93635),i=r(84754),o=function(e,t,r){(0,i.m)(e.attachEvent)&&e.attachEvent("on"+t,r)},a=function(e,t,r){(0,i.m)(e.detachEvent)&&e.detachEvent("on"+t,r)};(0,n.C)(EventTarget.prototype,"addEventListener")&&(0,n.C)(EventTarget.prototype,"removeEventListener")&&(o=function(e,t,r,i){var o=e&&(0,n.C)(e,"addEventListener");o&&o.call(e,t,r,i)},a=function(e,t,r,i){var o=e&&(0,n.C)(e,"removeEventListener");o&&o.call(e,t,r,i)})},65531:function(e,t,r){"use strict";r.d(t,{FF:function(){return a},vE:function(){return o}});var n=r(24612),i=r(43751),o=!1,a=!1;try{if(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=e.Object;try{var r={};return t.defineProperty(r,"sentinel",{}),"sentinel"in r}catch(n){return!1}}()){var u=document.createElement("div"),c={};Object.defineProperty(c,"once",{get:function(){return o=!0}}),Object.defineProperty(c,"passive",{get:function(){return!0}}),Object.defineProperty(c,"capture",{get:function(){return a=!0}}),(0,i.h)(u,"click",n.Z,c)}}catch(s){}},51153:function(e,t,r){"use strict";function n(e){var t=function(){var r;return t=function(){return r},r=e.apply(this,arguments)};return function(){return t.apply(this,arguments)}}r.d(t,{I:function(){return n}})},99117:function(e,t,r){"use strict";function n(e){return e instanceof Error||"Error"===(0,i.M)(e)}r.d(t,{V:function(){return n}});var i=r(79951)},84754:function(e,t,r){"use strict";function n(e){return"function"===typeof e||"Function"===(0,i.M)(e)}r.d(t,{m:function(){return n}});var i=r(79951)},85214:function(e,t,r){"use strict";function n(e){if(!e)return[];for(var t=[],r=0;r<e.length;r++)t.push(e[r]);return t}r.d(t,{w:function(){return n}})},19066:function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){var t=e.method,r=e.url,n=e.async,o=void 0===n||n,l=e.data,f=e.responseType,h=void 0===f?"text":f,d=e.onBeforeSend,p=void 0===d?c.Z:d,y=e.onRetry,v=void 0===y?c.Z:y,m=e.checkStatus,b=void 0===m?function(e){return 200===e}:m,g=e.headers,w=void 0===g?{}:g,_=e.xhrConstructor,E=void 0===_?XMLHttpRequest:_,O=e.retries,S=void 0===O?0:O,k=e.timeout,T=void 0===k?0:k,R=e.withCredentials,P=e.onAbort,x=e.onSetup;if(E){var j,A=e.onSuccess?(0,u.I)(e.onSuccess):c.Z,L=e.onError?(0,u.I)(e.onError):c.Z,I=!1,N=0,D=function(e){I=!0,D=c.Z,j=e,C(new Error("Abort request")),"function"===typeof P&&P(e)},C=function(t){if(M.onerror=null,M.onreadystatechange=null,N&&clearTimeout(N),N&&4!==M.readyState||I)try{M.abort()}catch(n){}if(!I)if(S>0){var r=v(t,M);if("boolean"!==typeof r||r||D(),I)return;a(i(i({},e),{},{onSetup:function(e){var t=e.abort;D=function(e){return t(e)},I&&t(j)},retries:S-1}))}else D=c.Z,L(t,M)},M=new E;try{M.open(t,r,o)}catch(F){return void C(F)}if(M.responseType=h,M.withCredentials=Boolean(R),(0,s.M)(w,(function(e,t){try{M.setRequestHeader(t,e)}catch(F){}})),T>0&&isFinite(T)&&(N=window.setTimeout((function(){C(new Error("Request timeout, ".concat(r)))}),T)),M.onerror=C,M.onreadystatechange=function(){if(4===M.readyState){var e=M.status;b(e)?(D=c.Z,clearTimeout(N),A(M)):C(new Error("Invalid request status ".concat(e,", ").concat(r)))}},("function"!==typeof x||(x({abort:function(e){return D(e)}}),!I))&&(p(M,e),!I))try{M.send(l)}catch(F){C(F)}}}r.d(t,{W:function(){return a}});var u=r(51153),c=r(24612),s=r(47974)},97668:function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){return new c((function(t,r){(0,u.W)(i(i({},e),{},{onSuccess:t,onError:r}))}))}r.d(t,{W:function(){return a}});var u=r(19066),c=r(88948)},24612:function(e,t,r){"use strict";function n(){}r.d(t,{Z:function(){return n}})},7989:function(e,t,r){"use strict";function n(e){return"number"===typeof e&&isFinite(e)}r.d(t,{z:function(){return n}})},33125:function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.no,t=e();return function(){return Math.max(0,e()-t)}}r.d(t,{u:function(){return n}});var i=r(28584)},4204:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,n,i){var a=t&&t.prototype instanceof o?t:o,u=Object.create(a.prototype),c=new p(i||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return v()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var c=f(u,n);if(c){if(c===S)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var s=r(e,t,n);if("normal"===s.type){if(i=n.done?"completed":"suspendedYield",s.arg===S)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(i="completed",n.method="throw",n.arg=s.arg)}}}(e,n,c),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function o(){}function u(){}function c(){}function s(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function l(e,t){var i;this._invoke=function(o,a){function u(){return new t((function(i,u){!function i(o,a,u,c){var s=r(e[o],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==n(f)&&g.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,u,c)}),(function(e){i("throw",e,u,c)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return i("throw",e,u,c)}))}c(s.arg)}(o,a,i,u)}))}return i=i?i.then(u,u):u()}}function f(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,f(e,t),"throw"===t.method))return S;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return S}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,S;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,S):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,S)}function h(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function d(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function p(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(h,this),this.reset(!0)}function y(e){if(e){var t=e[_];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(g.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:v}}function v(){return{value:void 0,done:!0}}i=function(){return m};var m={},b=Object.prototype,g=b.hasOwnProperty,w="function"==typeof Symbol?Symbol:{},_=w.iterator||"@@iterator",E=w.asyncIterator||"@@asyncIterator",O=w.toStringTag||"@@toStringTag";try{e({},"")}catch(x){e=function(e,t,r){return e[t]=r}}m.wrap=t;var S={},k={};e(k,_,(function(){return this}));var T=Object.getPrototypeOf,R=T&&T(T(y([])));R&&R!==b&&g.call(R,_)&&(k=R);var P=c.prototype=o.prototype=Object.create(k);return u.prototype=c,e(P,"constructor",c),e(c,"constructor",u),u.displayName=e(c,O,"GeneratorFunction"),m.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===u||"GeneratorFunction"===(t.displayName||t.name))},m.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,e(t,O,"GeneratorFunction")),t.prototype=Object.create(P),t},m.awrap=function(e){return{__await:e}},s(l.prototype),e(l.prototype,E,(function(){return this})),m.AsyncIterator=l,m.async=function(e,r,n,i,o){void 0===o&&(o=a);var u=new l(t(e,r,n,i),o);return m.isGeneratorFunction(r)?u:u.next().then((function(e){return e.done?e.value:u.next()}))},s(P),e(P,O,"Generator"),e(P,_,(function(){return this})),e(P,"toString",(function(){return"[object Generator]"})),m.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},m.values=y,p.prototype={constructor:p,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(d),!e)for(var t in this)"t"===t.charAt(0)&&g.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=g.call(i,"catchLoc"),u=g.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&g.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,S):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),S},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),d(r),S}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;d(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:y(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),S}},m}function o(e,t,r,n,i,o,u){try{var c=e[o](u),s=c.value}catch(l){return void r(l)}c.done?t(s):a.resolve(s).then(n,i)}r.d(t,{_:function(){return u}});var a=r(88948),u=function(){var e,t=(e=i().mark((function e(t,r){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new a((function(e,i){r&&r.then(e,i),n=window.setTimeout(e,t)}));case 3:return e.prev=3,window.clearTimeout(n),e.finish(3);case 6:case"end":return e.stop()}}),e,null,[[0,,3,6]])})),function(){var t=this,r=arguments;return new a((function(n,i){function a(e){o(c,n,i,a,u,"next",e)}function u(e){o(c,n,i,a,u,"throw",e)}var c=e.apply(t,r);a(void 0)}))});return function(e,r){return t.apply(this,arguments)}}()},69899:function(e,t,r){"use strict";function n(e){return"string"===typeof e}r.d(t,{H:function(){return n}})},16971:function(e,t,r){"use strict";var n;r.d(t,{q:function(){return n}}),function(e){e.DEFAULT="DEFAULT",e.MEDIA="MEDIA",e.NETWORK_MEDIA="NETWORK_MEDIA",e.NETWORK_PLAYER="NETWORK_PLAYER",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NO_CODECS="NO_CODECS",e.CANNOT_PLAY="CANNOT_PLAY",e.UNSUPPORTED_ENV="UNSUPPORTED_ENV",e.EXCEPTION="EXCEPTION",e.ADS="ADS",e.CONFIG="CONFIG",e.REGIONAL="REGIONAL",e.DRM="DRM",e.ACCESS="ACCESS",e.BANNED="BANNED"}(n||(n={}))},85636:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{B:function(){return c}});var a=r(10055),u=r(88948),c=i((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"resolve",void 0),o(this,"reject",void 0),o(this,"promise",void 0);var t=a.Z,r=a.Z;this.promise=new u((function(e,n){t=e,r=n})),this.resolve=t,this.reject=r}))},60045:function(e,t,r){"use strict";var n;r.d(t,{v:function(){return n}}),function(e){e[e.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",e[e.PARSE_ERROR=-32700]="PARSE_ERROR",e[e.INVALID_REQUEST=-32600]="INVALID_REQUEST",e[e.METHOD_NOT_FOUND=-32601]="METHOD_NOT_FOUND",e[e.INVALID_PARAMS=-32602]="INVALID_PARAMS",e[e.INTERNAL_ERROR=-32603]="INTERNAL_ERROR"}(n||(n={}))},61479:function(e,t,r){"use strict";r.d(t,{L:function(){return a}});var n=r(51153),i=r(71729),o=r(56633),a=(0,n.I)((function(){return(0,i.Y)((function(){var e=JSON.parse(o.s);return{flags:e.flags,testids:e.testids,slots:e.slots,vpuid:e.vpuid}}))||void 0}))},25605:function(e,t,r){"use strict";function n(e){return(0,i.H)(e.tagName)}r.d(t,{m:function(){return n}});var i=r(69899)},18836:function(e,t,r){"use strict";function n(e){return Object.prototype.toString.call(e)===i}r.d(t,{F:function(){return n},u:function(){return i}});var i="[object Window]"},88468:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return e+"/"+t}function o(e){if("string"===typeof e&&(e={message:e}),"object"===n(e)&&null!==e||(e={}),"function"===typeof e.toJSON)try{return{__stringifyError:e.toJSON()}}catch(r){}var t=e;return{__stringifyError:{name:t.name,message:t.message,stack:t.stack}}}function a(e,t,r,n){var o=c(e[t],i(r,t),n);return void 0===o?"null":o}function u(e){return JSON.stringify(e)}function c(e,t,r){switch(n(e)){case"boolean":return e?"true":"false";case"string":return u(e);case"undefined":return;case"bigint":return u(e.toString());case"function":var s="string"===typeof e.name&&e.name.length>0?" "+e.name:"";return u("[Function".concat(s,"]"));case"symbol":return u("[Symbol]");case"number":return isNaN(e)||!isFinite(e)?"null":String(e);case"object":if(null===e)return"null";if((0,h.F)(e))return u(h.u);if((0,f.m)(e))return u("[DOMNode ".concat(e.tagName,"]"));if((0,d.f)(e)){var l=e.constructor.name;return u("[".concat(l||"TypedArray","(").concat(e.byteLength||0,")]"))}var y=r.get(e);return void 0!==y?u("[Circular ".concat(y,"]")):(r.set(e,t),(0,p.k)(e)?function(e,t,r){if(0===e.length)return"[]";for(var n="["+a(e,0,t,r),i=1;i<e.length;i++)n+=","+a(e,i,t,r);return n+"]"}(e,t,r):function(e,t,r){if("function"===typeof e.toJSON){var n;try{n=e.toJSON()}catch(d){n=o(d)}return c(n,i(t,"toJSON"),r)}var a="{",s=!0;for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){var f=void 0;try{f=e[l]}catch(d){f=o(d)}var h=c(f,i(t,l),r);void 0!==h&&(s?s=!1:a+=",",a+=u(l)+":"+h)}return a+"}"}(e,t,r))}}function s(e){try{return c(e,"~",(t="undefined"!==typeof WeakMap?new WeakMap:void 0,r=[],{set:function(e,n){if(void 0!==t)try{t.set(e,n)}catch(i){r.push({path:n,value:e})}else r.push({path:n,value:e})},get:function(e){var n=(0,l.s)(r,(function(t){return t.value===e}));return void 0!==t&&void 0===n?t.get(e):n?n.path:void 0}}))}catch(n){return JSON.stringify(o(n))}var t,r}r.d(t,{Y:function(){return s}});var l=r(95002),f=r(25605),h=r(18836),d=r(96028),p=r(22364)},22364:function(e,t,r){"use strict";r.d(t,{k:function(){return n}});var n="function"===typeof Array.isArray?Array.isArray:function(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}},96028:function(e,t,r){"use strict";function n(e){return"undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&ArrayBuffer.isView(e)}r.d(t,{f:function(){return n}})},10055:function(e,t,r){"use strict";function n(){}r.d(t,{Z:function(){return n}})},20193:function(e,t,r){"use strict";function n(e){var t=new a(e,location.origin),r=t.pathname||"";"/"!==r.charAt(0)&&(r="/".concat(r));var n=e.indexOf("?"),i=e.indexOf("#");return{originalPath:-1===n&&-1===i?e:-1===n?e.slice(0,i):-1===i?e.slice(0,n):e.slice(0,Math.min(n,i)),href:t.href,protocol:t.protocol,host:t.host,hostname:t.hostname,port:t.port,pathname:r,search:t.search,hash:t.hash}}function i(e){return n(e).pathname.split("/").pop()||""}function o(e){var t=i(e).split(".");return t.length>1?t.pop():""}r.d(t,{UO:function(){return i},en:function(){return n},lm:function(){return o}});r(51312);var a=r(88891)},901:function(e,t,r){"use strict";r.d(t,{UO:function(){return n.UO},en:function(){return n.en},lm:function(){return n.lm}});var n=r(20193);r(72394)},72394:function(e,t,r){"use strict";r(20193),r(88891)},72390:function(e,t,r){"use strict";function n(){function e(){return a.length<o}function t(){if(e()){var t=u.shift();t&&t()}}function r(e){function r(){a.splice(a.indexOf(n),1),t()}var n=e.then(r,r);return a.push(n),e}function n(t){return e()?r(t()):new i((function(e){u.push((function(){e(r(t()))}))}))}var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=[],u=[];return{waitAndLock:n,addLock:r,isFree:e}}r.d(t,{l:function(){return n}});var i=r(88948)},19150:function(e,t,r){"use strict";function n(e){for(var t=[],r=0;r<e.buffered.length;r++)try{t.push({start:e.buffered.start(r),end:e.buffered.end(r)})}catch(n){}return(0,i.l)(t)}r.d(t,{w:function(){return n}});var i=r(60520);r(97881)},48493:function(e,t,r){"use strict";r.d(t,{S:function(){return n}});r(97881);var n=1e6},69591:function(e,t,r){"use strict";r.d(t,{T:function(){return n}});r(97881);var n=360},53564:function(e,t,r){"use strict";function n(e){var t=new i(e);return t.searchParams.set(o,String(Date.now())),t.href}r.d(t,{c:function(){return n},j:function(){return o}});var i=r(88891),o="t"},56513:function(e,t,r){"use strict";function n(e,t,r){var n=e.videoWidth,i=e.videoHeight,o=r.width,a=r.height;if(!n||!i)return{width:o,height:a};switch(t){case"none":return{width:n,height:i};case"cover":var u=Math.floor(i*o/n);return u>=a?{width:o,height:u}:{height:a,width:Math.floor(n*a/i)};case"contain":case"scale-down":var c=Math.floor(i*o/n);return c<=a?{width:o,height:c}:{height:a,width:Math.floor(n*a/i)};case"fill":default:return{width:o,height:a}}}r.d(t,{k:function(){return n}});r(97881)},74893:function(e,t,r){"use strict";r.d(t,{k:function(){return n}});r(83429),r(55543);var n={width:null,height:null,timestamp:null}},70442:function(e,t,r){"use strict";r.d(t,{d4:function(){return n}});r(97881);var n=8e3},52248:function(e,t,r){"use strict";r.d(t,{T:function(){return n}});var n=["strm.yandex.net","strm.yandex.ru","strm-ott.akamaized.net","media.strm.yandex.net","cdn.ngenix.net","streaming.tst.strm.yandex.net"]},8682:function(e,t,r){"use strict";r.d(t,{A:function(){return n}});var n="auto"},82786:function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=e.navigator,r=t,n=r.connection,i=void 0===n?{}:n;return Boolean(i.saveData)}r.d(t,{R:function(){return n}})},77922:function(e,t,r){"use strict";r.d(t,{dn:function(){return o},ly:function(){return n},xE:function(){return i}});var n="com.widevine.alpha",i="com.microsoft.playready",o="org.w3.clearkey"},53539:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{f:function(){return s}});r(97881);var o=r(19459),a=r.n(o),u=r(55543),c=a().ru.yandex.videoplayer.multiplatform,s=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"fetchers",[]),i(this,"activeSources",new Set),i(this,"defaultEstimate",{value:NaN,source:"default"}),i(this,"mpBandwidthEstimator",void 0),i(this,"handleFetcherProgress",(function(e){var t=e.time,n=e.size;r.mpBandwidthEstimator.sample(t,n)})),i(this,"destroy",(function(){r.fetchers.forEach((function(e){e.off("Progress",r.handleFetcherProgress)})),r.fetchers.length=0})),t&&(this.defaultEstimate.value=t),this.mpBandwidthEstimator=new c.estimate.BandwidthEstimator(this.defaultEstimate.value)}var t,r,o;return t=e,o=[{key:"obtain",value:function(t){return e.instance||(e.instance=new e(t)),e.instance}}],(r=[{key:"addActiveSource",value:function(e){this.activeSources.add(e)}},{key:"removeActiveSource",value:function(e){this.activeSources.delete(e)}},{key:"getActiveSourcesCount",value:function(){return this.activeSources.size}},{key:"getBandwidthEstimate",value:function(){if((0,u.RW)("yasp_fair_bandwidth")){var e=this.getActiveSourcesCount();return{value:this.mpBandwidthEstimator.getBandwidthEstimate()/Math.max(e,1),source:this.mpBandwidthEstimator.hasGoodEstimate()?"ewma":this.defaultEstimate.source}}return{value:this.mpBandwidthEstimator.getBandwidthEstimate(),source:this.mpBandwidthEstimator.hasGoodEstimate()?"ewma":this.defaultEstimate.source}}},{key:"appendFetcher",value:function(e){e.on("Progress",this.handleFetcherProgress),this.fetchers.push(e)}},{key:"removeFetcher",value:function(e){e.off("Progress",this.handleFetcherProgress);for(var t=0;t<this.fetchers.length;t++)this.fetchers[t]===e&&(this.fetchers.splice(t,1),t--)}},{key:"setDefaultEstimate",value:function(e){this.defaultEstimate=e,this.mpBandwidthEstimator.setDefaultEstimate(e.value)}},{key:"getDebugInfo",value:function(){var e=this.getBandwidthEstimate();return{fetchersCount:this.fetchers.length,defaultEstimate:this.defaultEstimate,estimate:e.value,source:e.source}}}])&&n(t.prototype,r),o&&n(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();i(s,"instance",void 0);a().ru.yandex.videoplayer.multiplatform},34834:function(e,t,r){"use strict";r.d(t,{a:function(){return n}});r(97881);var n=5},74910:function(e,t,r){"use strict";function n(e){return void 0===e||"string"!==typeof e?"":function(e){try{var t=new a(e);return t.searchParams.delete(o.g),t.href}catch(r){return e}}(e).replace(/#.+$/,"")}function i(e){try{return new a(e).searchParams.get(o.g)}catch(t){return null}}r.d(t,{Hi:function(){return n},IN:function(){return i}});var o=r(10123),a=r(88891)},90153:function(e,t,r){"use strict";r.d(t,{K:function(){return n}});var n=100},51911:function(e,t,r){"use strict";function n(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{d:function(){return u}});var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"buffer",[]),a(this,"head",0),a(this,"capacity",void 0),this.capacity=t}var t,r,i;return t=e,(r=[{key:"push",value:function(e){this.buffer.length<this.capacity?this.buffer.push(e):this.buffer[this.head]=e,this.head=(this.head+1)%this.capacity}},{key:"toArray",value:function(){return this.buffer.length<this.capacity?n(this.buffer):[].concat(n(this.buffer.slice(this.head)),n(this.buffer.slice(0,this.head)))}}])&&o(t.prototype,r),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},27817:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.d(t,{x:function(){return u}});var i,o,a,u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,i;return t=e,i=[{key:"fromUTF8",value:function(t){if(!t)return"";var r=new Uint8Array(t);239===r[0]&&187===r[1]&&191===r[2]&&(r=r.subarray(3));var n=e.fromCharCode(r),i=escape(n);try{return decodeURIComponent(i)}catch(o){throw new Error("BAD_ENCODING")}}},{key:"fromUTF16",value:function(t,r){var n,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t)return"";if(!i&&t.byteLength%2!==0)throw new Error("BAD_ENCODING: Data has an incorrect length, must be even");if(t instanceof ArrayBuffer)n=t;else{var o=new Uint8Array(t.byteLength);o.set(new Uint8Array(t)),n=o.buffer}for(var a=Math.floor(t.byteLength/2),u=new Uint16Array(a),c=new DataView(n),s=0;s<a;s++)u[s]=c.getUint16(2*s,r);return e.fromCharCode(u)}},{key:"fromBytesAutoDetect",value:function(t){var r=new Uint8Array(t);if(239===r[0]&&187===r[1]&&191===r[2])return e.fromUTF8(r);if(254===r[0]&&255===r[1])return e.fromUTF16(r.subarray(2),!1);if(255===r[0]&&254===r[1])return e.fromUTF16(r.subarray(2),!0);var n=function(e,t){return e.byteLength<=t||e[t]>=32&&e[t]<=126};if(0===r[0]&&0===r[2])return e.fromUTF16(t,!1);if(0===r[1]&&0===r[3])return e.fromUTF16(t,!0);if(n(r,0)&&n(r,1)&&n(r,2)&&n(r,3))return e.fromUTF8(t);throw new Error("UNABLE_TO_DETECT_ENCODING")}},{key:"toUTF8",value:function(e){for(var t=encodeURIComponent(e),r=unescape(t),n=new Uint8Array(r.length),i=0;i<r.length;++i)n[i]=r.charCodeAt(i);return n.buffer}},{key:"toUTF16",value:function(e,t){for(var r=new Uint8Array(2*e.length),n=new DataView(r.buffer),i=0;i<e.length;++i){var o=e.charCodeAt(i);n.setUint16(2*i,o,t)}return r.buffer}},{key:"fromCharCode",value:function(t){if(!e.fromCharCodeImpl)for(var r=function(t){if(function(e){try{var t=new Uint8Array(e);return String.fromCharCode.apply(null,t).length>0}catch(r){return!1}}(t))return e.fromCharCodeImpl=function(e){for(var r="",n=0;n<e.length;n+=t){var i=e.subarray(n,n+t);r+=String.fromCharCode.apply(null,i)}return r},"break"},n=65536;n>0&&"break"!==r(n);n/=2);if(!e.fromCharCodeImpl)throw new Error("Unable to create a fromCharCode method");return e.fromCharCodeImpl(t)}},{key:"resetFromCharCode",value:function(){e.fromCharCodeImpl=null}}],(r=null)&&n(t.prototype,r),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();a=null,(o="fromCharCodeImpl")in(i=u)?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a},42918:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.d(t,{P:function(){return o}});var i=r(27817),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,o;return t=e,o=[{key:"concat",value:function(){for(var e=0,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];for(var i=0;i<r.length;++i)e+=r[i].length;for(var o=new Uint8Array(e),a=0,u=0;u<r.length;++u)o.set(r[u],a),a+=r[u].length;return o}},{key:"toHex",value:function(e){for(var t="",r=0;r<e.length;++r){var n=e[r].toString(16);1===n.length&&(n="0"+n),t+=n}return t}},{key:"fromHex",value:function(e){for(var t=new Uint8Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=parseInt(e.substr(r,2),16);return t}},{key:"toBase64",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=i.x.fromCharCode(e),n=btoa(r).replace(/\+/g,"-").replace(/\//g,"_");return t?n:n.replace(/=*$/,"")}},{key:"fromBase64",value:function(e){for(var t=atob(e.replace(/-/g,"+").replace(/_/g,"/")),r=new Uint8Array(t.length),n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r}},{key:"equal",value:function(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;if(e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}}],(r=null)&&n(t.prototype,r),o&&n(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},69473:function(e,t,r){"use strict";function n(e,t){return(0,i.V)(e,t,(function(e,t){return e-t}))}r.d(t,{U:function(){return n}});var i=r(7177)},7177:function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t,r){if(!(e.length<1)){for(var i=n(e,1)[0],o=t(i),a=1;a<e.length;a++){var u=e[a],c=t(u);r(c,o)<0&&(i=u,o=c)}return i}}r.d(t,{V:function(){return o}})},96702:function(e,t,r){"use strict";function n(e){var t=(0,i.jS)("web_yasp_target_latency_debug");return-1===t?e:(0,o.z)(t)?t:e}r.d(t,{c:function(){return n}});r(97881);var i=r(55543),o=r(7989)},11841:function(e,t,r){"use strict";function n(){var e=(0,i.r0)("web_yasp_time_to_start");if(e&&"null"!==e){var t=parseFloat(e);return(0,o.z)(t)?t:void 0}}r.d(t,{p:function(){return n}});r(97881);var i=r(55543),o=r(7989)},5052:function(e,t,r){"use strict";function n(e){return new i((function(t){return setTimeout(t,e)}))}r.d(t,{_:function(){return n}});var i=r(88948)},34780:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var i=l(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{w:function(){return h}});var h=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=l.call(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({isFatal:!1},e),r),f(s(n),"category",void 0),f(s(n),"toJSON",void 0),n.category=(null===r||void 0===r?void 0:r.category)||e.category,n.toJSON=function(){return{message:n.message,code:n.code,isFatal:n.isFatal,details:n.details,stack:n.stack,category:n.category}},n}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(t,e);var r,n,c,l=u(t);return r=t,n&&o(r.prototype,n),c&&o(r,c),Object.defineProperty(r,"prototype",{writable:!1}),r}(r(33603).s)},80413:function(e,t,r){"use strict";r.d(t,{C:function(){return n}});r(97881);var n=1},41647:function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=function(r){c.some((function(t){var n;return null!==(n=(0,u.Y)((function(){return e[r]instanceof t})))&&void 0!==n&&n}))?t.push(e[r]):null!==e[r]&&"object"===i(e[r])&&o(e[r],t)};for(var n in e)r(n);return t}r.d(t,{_:function(){return o}});var a,u=r(71729),c=function(e){if(Array.isArray(e))return n(e)}(a="undefined"!==typeof MediaSourceHandle?[MediaSourceHandle]:[])||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(a)||function(e,t){if(e){if("string"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()},27926:function(e,t,r){"use strict";function n(e){var t=e.id,r=e.method,n=e.params;return t?{jsonrpc:"2.0",id:t,method:r,params:n}:{jsonrpc:"2.0",method:r,params:n}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){if(!("params"in e))return[];if(Array.isArray(e.params))return e.params;if((0,U.K)(e.params))return e.params;throw new Error("Expect #params to be an array or an object if present in ".concat(JSON.stringify(e)))}function a(e){return u(e)}function u(e){if((0,B.z)(e.id)){if(Math.floor(e.id)!==e.id)throw new Error("Expect #id to be an integer if it's a number in ".concat(JSON.stringify(e)));return e.id}if((0,G.H)(e.id)||null===e.id)return e.id;throw new Error("Expect #id to be an integer, string or null (not recommended) in ".concat(JSON.stringify(e)))}function c(e){if(!("id"in e))throw new Error("Expect #id to present in rpc response ".concat(JSON.stringify(e)));return u(e)}function s(e){if("object"!==i(e.error)||null===e.error)throw new Error("Expect #error to be an object in ".concat(JSON.stringify(e)));var t=e.error;if(!(0,B.z)(t.code))throw new Error("Expect #error#code to be an number in ".concat(JSON.stringify(e)));if(!(0,G.H)(t.message))throw new Error("Expect #error#message to be an string in ".concat(JSON.stringify(e)));return"data"in t?{code:t.code,message:t.message,data:t.data}:{code:t.code,message:t.message}}function l(e){var t=function(e){if(!(0,U.K)(e))throw new Error("Can't parse \"".concat(e,'" as object'));return e}(e);if(!function(e){return"2.0"===e.jsonrpc}(t))throw new Error("Expect ".concat((0,V.Y)((function(){return JSON.stringify(e)}))||e," to be a json-rpc v2 message"));if((0,G.H)(t.method))return function(e){return"id"in e?{jsonrpc:e.jsonrpc,method:e.method,params:o(e),id:a(e)}:{jsonrpc:e.jsonrpc,method:e.method,params:o(e)}}(t);if("result"in t)return function(e){return{jsonrpc:e.jsonrpc,result:e.result,id:c(e)}}(t);if("error"in t)return function(e){return{jsonrpc:e.jsonrpc,error:s(e),id:c(e)}}(t);throw new Error("Expect ".concat((0,V.Y)((function(){return JSON.stringify(e)}))||e," to be a json-rpc v2 message"))}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){if(t&&("object"===f(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){var t="function"===typeof Map?new Map:void 0;return(v=function(e){function r(){return m(e,arguments,w(this).constructor)}if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),g(r,e)})(e)}function m(e,t,r){return(m=b()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&g(i,r.prototype),i}).apply(null,arguments)}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(){return(S="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=k(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function k(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}function T(e,t){return(T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=j(e);if(t){var i=j(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return P(this,r)}}function P(e,t){if(t&&("object"===E(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==L(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}I=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},b=m.iterator||"@@iterator",g=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,b,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,b)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,g,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=X);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,b,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function N(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function C(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):X.resolve(c).then(n,i)}function M(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function F(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{A:function(){return J}});var B=r(7989),U=r(95689),G=r(69899),V=r(71729),H=r(60045),Y=r(28139),q=r.n(Y),W=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H.v.UNKNOWN_ERROR,i=arguments.length>2?arguments[2]:void 0;return h(this,t),_(y(r=u.call(this,e)),"message",void 0),_(y(r),"stack",void 0),_(y(r),"toJSON",void 0),_(y(r),"code",void 0),q()(y(r),t.prototype),r.message=e,r.code=n,r.stack=null!==i&&void 0!==i?i:r.stack,r.toJSON=function(){return{code:r.code,message:r.message,data:r.stack}},r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(t,e);var r,n,i,o,a,u=(r=t,n=b(),function(){var e,t=w(r);if(n){var i=w(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return p(this,e)});return i=t,(o=[{key:"toString",value:function(){return JSON.stringify(this.toJSON())}}])&&d(i.prototype,o),a&&d(i,a),Object.defineProperty(i,"prototype",{writable:!1}),t}(v(Error)),z=(r(97881),r(99002)),$=r(10055),K=r(88948),Z=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),A(x(r=a.call(this)),"lastRpcRequestId",1),A(x(r),"waiters",Object.create(null)),A(x(r),"send",void 0),A(x(r),"onRun",void 0),A(x(r),"serialize",void 0),A(x(r),"deserialize",void 0),r.send=e.send,r.onRun=e.onRun,r.serialize=e.serialize,r.deserialize=e.deserialize,r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(t,e);var r,i,o,a=R(t);return r=t,(i=[{key:"destroy",value:function(){for(var e in S(j(t.prototype),"destroy",this).call(this),this.onRun=$.Z,this.waiters)this.waiters[e](new Error("Stop on destroy"))}},{key:"request",value:function(e){var t=e.method,r=e.params,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e4,o=this.getUniqueRpcRequestId();return this.sendMessage(n({id:o,method:t,params:r})),this.waitForResponse(o,i,t)}},{key:"sendEvent",value:function(e){var t=e.method,r=e.params;return this.sendMessage(n({method:t,params:r})),K.resolve()}},{key:"getUniqueRpcRequestId",value:function(){return String(this.lastRpcRequestId++)}},{key:"waitForResponse",value:function(e,t,r){var n=this,i=setTimeout((function(){var i=n.waiters[e];void 0!==i&&i(new Error("Timeout fired (".concat(t,"ms) on method ").concat(r," for id=").concat(e,".")))}),t);return new K((function(t,r){n.waiters[e]=function(o,a){return clearTimeout(i),delete n.waiters[e],null!==o?r(o):t(a)}}))}},{key:"sendMessage",value:function(e){this.send(this.serialize(e))}},{key:"handleRpcRequest",value:function(e){var t=this,r=e.id,n=e.method,i=e.params;this.onRun({method:n,params:i},(function(e,n){r&&t.sendMessage(function(e){var t=e.id,r=e.error,n=e.result;return r?{jsonrpc:"2.0",id:t,error:r.toJSON()}:{jsonrpc:"2.0",id:t,result:void 0===n?null:n}}({id:r,error:e,result:n}))}))}},{key:"handleRpcResponse",value:function(e){var t=this.waiters[e.id];void 0!==t?"error"in e?t(new W(e.error.message,e.error.code,"string"===typeof e.error.data?e.error.data:void 0)):t(null,e.result):this.emit("Warn",new Error("Response for missed waiter for id=".concat(JSON.stringify(e.id))))}},{key:"handleMessage",value:function(e){try{var t=l(this.deserialize(e));"result"in t||"error"in t?this.handleRpcResponse(t):"method"in t&&this.handleRpcRequest(t)}catch(r){this.emit("Error",r)}}}])&&O(r.prototype,i),o&&O(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(z.M),X=r(88948),J=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),F(this,"jsonRpcMessenger",void 0),F(this,"handlers",{}),F(this,"staticHandlers",{});var n=function(){var e,t=(e=I().mark((function e(t,n){var i,o,a,u,c,s,l,f,h,d,p,y,v,m,b;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.method in r.handlers||t.method in r.staticHandlers){e.next=2;break}return e.abrupt("return",n(new W("Unknown method: ".concat(t.method),H.v.METHOD_NOT_FOUND)));case 2:if(!r.handlers[t.method]){e.next=32;break}i=N(r.handlers[t.method]),e.prev=4,i.s();case 6:if((o=i.n()).done){e.next=24;break}return a=o.value,e.prev=8,e.next=11,a(t.params);case 11:if(u=e.sent,c=u.done,s=u.value,!c){e.next=16;break}return e.abrupt("return",n(null,s));case 16:e.next=22;break;case 18:return e.prev=18,e.t0=e.catch(8),l=new W((0,U.K)(e.t0)?e.t0.message:"",H.v.INTERNAL_ERROR,(0,U.K)(e.t0)?e.t0.stack:""),e.abrupt("return",n(l));case 22:e.next=6;break;case 24:e.next=29;break;case 26:e.prev=26,e.t1=e.catch(4),i.e(e.t1);case 29:return e.prev=29,i.f(),e.finish(29);case 32:if(!r.staticHandlers[t.method]){e.next=66;break}f=!1,h=N(r.staticHandlers[t.method]),e.prev=35,h.s();case 37:if((d=h.n()).done){e.next=54;break}return p=d.value,e.prev=39,e.next=42,p(t.params);case 42:y=e.sent,v=y.done,m=y.value,v&&(f||(f=!0,n(null,m))),e.next=52;break;case 48:return e.prev=48,e.t2=e.catch(39),b=new W((0,U.K)(e.t2)?e.t2.message:"",H.v.INTERNAL_ERROR,(0,U.K)(e.t2)?e.t2.stack:""),e.abrupt("return",n(b));case 52:e.next=37;break;case 54:e.next=59;break;case 56:e.prev=56,e.t3=e.catch(35),h.e(e.t3);case 59:return e.prev=59,h.f(),e.finish(59);case 62:if(!f){e.next=64;break}return e.abrupt("return");case 64:e.next=66;break;case 66:return e.abrupt("return",n(new W("No handler for existed method: ".concat(t.method),H.v.INVALID_REQUEST)));case 67:case"end":return e.stop()}}),e,null,[[4,26,29,32],[8,18],[35,56,59,62],[39,48]])})),function(){var t=this,r=arguments;return new X((function(n,i){function o(e){C(u,n,i,o,a,"next",e)}function a(e){C(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))});return function(e,r){return t.apply(this,arguments)}}();this.jsonRpcMessenger=new Z({send:t,onRun:n,serialize:function(e){return e},deserialize:function(e){return e}}),this.jsonRpcMessenger.on("Warn",console.warn),this.jsonRpcMessenger.on("Error",console.error)}var t,r,n;return t=e,(r=[{key:"registerHandler",value:function(e,t){var r;this.handlers[e]=null!==(r=this.handlers[e])&&void 0!==r?r:[],this.handlers[e].push(t)}},{key:"registerStaticHandler",value:function(e,t){var r;this.staticHandlers[e]=null!==(r=this.staticHandlers[e])&&void 0!==r?r:[],this.staticHandlers[e].push(t)}},{key:"removeHandler",value:function(e,t){var r,n=N(["handlers","staticHandlers"]);try{for(n.s();!(r=n.n()).done;){var i=r.value;this[i][e]&&(this[i][e]=void 0===t?[]:this[i][e].filter((function(e){return e!==t})),0===this[i][e].length&&delete this[i][e])}}catch(o){n.e(o)}finally{n.f()}}},{key:"request",value:function(e){var t=e.method,r=e.params;return this.jsonRpcMessenger.request({method:String(t),params:r})}},{key:"sendEvent",value:function(e){var t=e.method,r=e.params;return this.jsonRpcMessenger.sendEvent({method:String(t),params:r})}},{key:"destroy",value:function(){this.jsonRpcMessenger.destroy()}},{key:"handleMessage",value:function(e){this.jsonRpcMessenger.handleMessage(e.data)}}])&&M(t.prototype,r),n&&M(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},88457:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(){return(s="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=l(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function l(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var i=p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return d(this,r)}}function d(e,t){if(t&&("object"===a(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function E(e){var t,r=[],n=w(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;r.push(i)}}catch(o){n.e(o)}finally{n.f()}return r}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function k(e,t){return(k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function T(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=x(e);if(t){var i=x(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return R(this,r)}}function R(e,t){if(t&&("object"===O(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){V(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function N(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function D(){return(D="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=C(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function C(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=G(e)););return e}function M(e,t){return(M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function F(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=G(e);if(t){var i=G(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return B(this,r)}}function B(e,t){if(t&&("object"===A(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return U(e)}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach((function(t){ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function W(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function z(){return(z="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=$(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function $(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Q(e)););return e}function K(e,t){return(K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Z(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Q(e);if(t){var i=Q(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return X(this,r)}}function X(e,t){if(t&&("object"===H(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return J(e)}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function te(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function re(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ie(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ue(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ce(e,t,r){return t&&ue(e.prototype,t),r&&ue(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function se(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function he(e,t,r){return t&&fe(e.prototype,t),r&&fe(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function de(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pe(){return(pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ye(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=me(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||me(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function me(e,t){if(e){if("string"===typeof e)return be(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?be(e,t):void 0}}function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function we(e){return e.replace(/&(amp|quot|apos|lt|gt);/g,(function(e,t){var r;return null!==(r=fl[t])&&void 0!==r?r:e}))}function _e(e){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(r),!0).forEach((function(t){Ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Se(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return ke(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ke(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Re(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pe(e,t,r){return t&&Re(e.prototype,t),r&&Re(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function xe(e,t){return(xe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function je(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Le(e);if(t){var i=Le(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Ae(this,r)}}function Ae(e,t){if(t&&("object"===_e(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Le(e){return(Le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ie(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ne(e){var t=e.children.every((function(e){return"string"===typeof e})),r=t?e.children.join("\n"):"";return Oe(Oe({},e),{},{nodeType:t?3:1,textContent:r})}function De(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ce(e){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return Fe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fe(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Be(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ue(e,t){return(Ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ge(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=He(e);if(t){var i=He(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Ve(this,r)}}function Ve(e,t){if(t&&("object"===Ce(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function He(e){return(He=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ye(e){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function We(e,t){return(We=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ze(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ze(e);if(t){var i=Ze(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $e(this,r)}}function $e(e,t){if(t&&("object"===Ye(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ke(e)}function Ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ze(e){return(Ze=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Je(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function et(e){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function rt(e,t){return(rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function nt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=at(e);if(t){var i=at(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return it(this,r)}}function it(e,t){if(t&&("object"===et(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ot(e)}function ot(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function at(e){return(at=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ut(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ct(e){return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function st(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==ct(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}st=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},b=m.iterator||"@@iterator",g=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,b,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,b)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,g,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=Al);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,b,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function lt(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):Al.resolve(c).then(n,i)}function ft(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ht(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function dt(){return(dt="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=pt(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function pt(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=gt(e)););return e}function yt(e,t){return(yt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function vt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=gt(e);if(t){var i=gt(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return mt(this,r)}}function mt(e,t){if(t&&("object"===ct(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return bt(e)}function bt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gt(e){return(gt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _t(e){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Et(e){return function(e){if(Array.isArray(e))return Ot(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Ot(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ot(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function St(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function kt(e,t){return(kt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Tt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=xt(e);if(t){var i=xt(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Rt(this,r)}}function Rt(e,t){if(t&&("object"===_t(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Pt(e)}function Pt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xt(e){return(xt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function At(e,t){return(0,Ml.V)(e,t,(function(e,t){return t-e}))}function Lt(e){return function(e){if(Array.isArray(e))return It(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return It(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return It(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function It(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(r),!0).forEach((function(t){Ct(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ct(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mt(e,t){return Dt(Dt({},t),{},{start:e.start,end:t.end})}function Ft(e){return function(e){if(Array.isArray(e))return Bt(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Bt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Bt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ut(e){var t=[];return e.forEach((function(e){t.push.apply(t,Ft(e))})),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mt,r=Lt(e);r.sort((function(e,t){return e.start-t.start||e.end-t.end}));for(var n=1;n<r.length;n++){var i=r[n],o=r[n-1];o.end>=i.start&&(r.splice(n,1),r[n-1]=t(o,i),n--)}return r}(t)}function Gt(e,t){var r=[],n=0;return e.forEach((function(e){for(var i=e.start,o=e.end,a=n;a<t.length;a++){if(t[a].start>o)return;n=a,t[a].end<i||r.push({start:Math.max(t[a].start,i),end:Math.min(t[a].end,o)})}})),r}function Vt(e){return function(e){if(Array.isArray(e))return Yt(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ht(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ht(e,t){if(e){if("string"===typeof e)return Yt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Yt(e,t):void 0}}function Yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qt(e){if(0===e.length)return[];var t,r=Math.min.apply(Math,Vt(e.map((function(e){return e.height})))),n={},i=function(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Ht(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;n[o.height]||(n[o.height]=[]),n[o.height].push(o)}}catch(u){i.e(u)}finally{i.f()}var a=[];return(0,Ul.Z)(n).forEach((function(e){var t=parseInt(e,10),i=n[e];if(t===r)a.push.apply(a,Vt(i));else{var o=i.reduce((function(e,t){return e.bitrate>t.bitrate?e:t}));a.push(o)}})),a.sort((function(e,t){return t.bitrate-e.bitrate}))}function Wt(e){return(Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $t(){return($t="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=Kt(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function Kt(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=er(e)););return e}function Zt(e,t){return(Zt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Xt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=er(e);if(t){var i=er(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Jt(this,r)}}function Jt(e,t){if(t&&("object"===Wt(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Qt(e)}function Qt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function er(e){return(er=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rr(e,t){if(!e||!t)return!1;var r=e.mimeType===t.mimeType,n=e.codecs,i=t.codecs,o=n===i,a=function(e,t){var r=e.split(".")[0];if(0===t.indexOf(r))return!0;var n=Hl[r];return!!n&&n.some((function(e){return 0===t.indexOf(e)}))}(n,i);return o||a&&r}function nr(e){return(nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ir(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||ar(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function or(e){return function(e){if(Array.isArray(e))return ur(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ar(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ar(e,t){if(e){if("string"===typeof e)return ur(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ur(e,t):void 0}}function ur(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function cr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function sr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cr(Object(r),!0).forEach((function(t){br(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function lr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fr(){return(fr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=hr(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function hr(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mr(e)););return e}function dr(e,t){return(dr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function pr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=mr(e);if(t){var i=mr(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return yr(this,r)}}function yr(e,t){if(t&&("object"===nr(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return vr(e)}function vr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mr(e){return(mr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function br(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gr(e,t){var r=parseInt(e.attributes.timescale||"1",10);if(isNaN(r))throw new hl.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected SegmentTemplate[timescale]",details:{node:e},category:dl.q.MEDIA});var n=e.attributes.media;if(!n)throw new hl.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected missed SegmentTemplate[media]",details:{node:e},category:dl.q.MEDIA});var i=Math.floor(Math.max(0,parseInt(e.attributes.startNumber||"1",10)));if(!Number.isFinite(i)||!Number.isInteger(i))throw new hl.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected SegmentTemplate[startNumber]",details:{node:e},category:dl.q.MEDIA});var o=parseInt(e.attributes.presentationTimeOffset||"0",10),a=o;if(isNaN(a))throw new hl.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected SegmentTemplate[presentationTimeOffset]",details:{node:e},category:dl.q.MEDIA});var u=e.attributes.availabilityTimeOffset?parseFloat(e.attributes.availabilityTimeOffset):0;t.availabilityTimeOffset=Math.min(t.availabilityTimeOffset,1e3*u);var c=e.children.find((function(e){return"SegmentTimeline"===e.tagName})),s=[],l=Math.max(Math.floor(0)),f=0,h=Math.max(Math.floor(0));if(c){for(var d=c.children.filter((function(e){return"S"===e.tagName})),p=0;p<d.length;p++){var y,v=d[p],m=s[s.length-1],b=parseInt(v.attributes.t,10),g=parseInt(v.attributes.d||e.attributes.duration,10);if("string"===typeof v.attributes.t&&isNaN(b))throw new hl.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected S[t]",details:{node:e},category:dl.q.MEDIA});var w=b||(m?m.originalValues.time+m.originalValues.duration*m.count:0),_=1e3*b/r||(m?m.time+m.duration*m.count:0),E=1e3*g/r;t.maxSegmentDuration=t.maxSegmentDuration?Math.max(t.maxSegmentDuration,E):E;var O=Math.max(Math.floor(parseInt(v.attributes.r||"0",10)));if(isNaN(E))throw new hl.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected S[d]",details:{node:e},category:dl.q.MEDIA});if(isNaN(O))throw new hl.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected S[r]",details:{node:e},category:dl.q.MEDIA});var S=O+Math.max(Math.floor(1));l+=S;var k=i+Math.max(Math.floor(l-1)),T=_+E*S;t.maxSegmentEndTime=t.maxSegmentEndTime?Math.max(t.maxSegmentEndTime,T):T,t.minSegmentStartTime=Math.min(null!==(y=t.minSegmentStartTime)&&void 0!==y?y:1/0,_),t.minSegmentStartTime=t.minSegmentStartTime?Math.min(t.minSegmentStartTime,_):_,s.push({endNumber:k,time:_,duration:E,count:S,originalValues:{time:w,duration:g,trackPresentationTimeOffset:o}})}h=i+Math.max(Math.floor(l-1))}else{var R,P;if(null===t.duration&&!t.isDynamic)throw new hl.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Can't compute presentation duration",details:{node:e},category:dl.q.MEDIA});var x=0,j=1e3*parseInt(e.attributes.duration,10)/r;if(isNaN(j))throw new hl.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected S[d]",details:{node:e},category:dl.q.MEDIA});var A=Math.abs(null!==(R=t.duration)&&void 0!==R?R:t.nowWithOffset);if(isFinite(t.segmentAvailabilityDuration)){var L,I=t.nowWithOffset-(null!==(L=t.presentationStartTime)&&void 0!==L?L:0),N=Math.max(I-t.segmentAvailabilityDuration,0),D=Math.ceil(N/j);i+=D,x=D*j,A=Math.max(I-x,0)}l=Math.floor(A/j),f=(h=i+Math.max(Math.floor(l-1),0))*j,t.maxSegmentEndTime=Math.max(t.maxSegmentEndTime||0,f),t.minSegmentStartTime=Math.min(null!==(P=t.minSegmentStartTime)&&void 0!==P?P:1/0,x),t.maxSegmentDuration=Math.max(t.maxSegmentDuration||0,j),s.push({endNumber:h,time:x,duration:j,count:l,originalValues:{time:x,duration:parseInt(e.attributes.duration,10),trackPresentationTimeOffset:o}});var C=t.duration?t.duration-f:0,M=Math.abs(Math.floor(1));C&&s.push({endNumber:h+M,time:f,duration:C,count:M,originalValues:{time:f,duration:C,trackPresentationTimeOffset:o}})}var F=s[s.length-1];return t.maxPresentationTimeOffset=void 0!==t.maxPresentationTimeOffset?Math.max(t.maxPresentationTimeOffset,a):t.maxPresentationTimeOffset,{timescale:r,initialization:e.attributes.initialization?we(e.attributes.initialization):null,media:we(n),startNumber:i,startTime:s[0].time,endNumber:F.endNumber,endTime:F.time+F.duration*F.count,presentationTimeOffset:a,segmentSequences:s}}function wr(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return _r(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _r(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function _r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Er(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Or(e,t){var r,n,i=e.attributes.mimeType,o=e.attributes.contentType||(null===i||void 0===i?void 0:i.split("/")[0]);if(!o)throw new hl.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected empty AdaptationSet[contentType] and AdaptationSet[mimeType]",details:{node:e},category:dl.q.MEDIA});t.maxHeight||(t.maxHeight=(r=e.children,(n=r.find((function(e){var t;return"SupplementalProperty"===e.tagName&&"urn:mpeg:yandex:capping:maxheight"===(null===(t=e.attributes)||void 0===t?void 0:t.schemeIdUri)})))?parseInt(n.attributes.value,10):null));var a=e.children.filter((function(e){return"ContentProtection"===e.tagName})),u=new Xl(t.parser).parse(a),c="true"===e.attributes.segmentAlignment,s=e.children.find((function(e){return"SegmentTemplate"===e.tagName}));return{type:o,segmentAlignment:c,segmentTemplate:s?gr(s,t):void 0,mimeType:i,contentProtection:u}}function Sr(e,t,r){var n,i=e.attributes.id;if(!i)throw new hl.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected missed id on Representation",details:{node:e},category:dl.q.MEDIA});var o=null!==(n=e.attributes.codecs)&&void 0!==n?n:null,a=parseInt(e.attributes.bandwidth,10);if(isNaN(a)||a<0){if("text"!==r)throw new hl.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected missed Representation[bandwidth]",details:{node:e},category:dl.q.MEDIA});a=10}var u=e.attributes.mimeType,c=e.children.find((function(e){return"SegmentTemplate"===e.tagName})),s=c?gr(c,t):void 0,l=e.children.filter((function(e){return"InbandEventStream"===e.tagName}));return"text"!==r&&l.forEach((function(e){return t.emsgSchemeIdUris[r].add(e.attributes.schemeIdUri)})),{id:i,codecs:o,bandwidth:a,segmentTemplate:s,mimeType:u}}function kr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Tr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kr(Object(r),!0).forEach((function(t){Rr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Rr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pr(e,t){var r=parseInt(e.attributes.width,10),n=parseInt(e.attributes.height,10),i=Math.max(parseFloat(e.attributes.frameRate),0);if(isNaN(r))throw new hl.w({code:"YASP_PARSE_MANIFEST_ERROR",details:{node:e},message:"Unexpected Representation[width]",isFatal:!0,category:dl.q.MEDIA});if(isNaN(n))throw new hl.w({code:"YASP_PARSE_MANIFEST_ERROR",details:{node:e},message:"Unexpected Representation[height]",isFatal:!0,category:dl.q.MEDIA});var o=Sr(e,t,"video"),a=o.codecs;if(!a)throw new hl.w({code:"YASP_PARSE_MANIFEST_ERROR",details:{node:e},message:"Unexpected missed codecs on Representation",isFatal:!0,category:dl.q.MEDIA});return Tr(Tr(Tr({},o),i?{frameRate:i}:{}),{},{codecs:a,width:r,height:n})}function xr(e,t){return t.bandwidth-e.bandwidth}function jr(e,t,r){for(var n=e.children.filter((function(e){return"Representation"===e.tagName})),i=[],o=0;o<n.length;o++){var a=n[o];i.push(t(a,r))}return i.sort(xr)}function Ar(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Lr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ar(Object(r),!0).forEach((function(t){Ir(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ar(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ir(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nr(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Dr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Cr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dr(Object(r),!0).forEach((function(t){Mr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Mr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fr(e,t){var r=Math.max(parseFloat(e.attributes.audioSamplingRate),0);if(isNaN(r))throw new hl.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected Representation[audioSamplingRate]",details:{node:e},category:dl.q.MEDIA});var n=Sr(e,t,"audio"),i=n.codecs;if(!i)throw new hl.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected missed codecs on Representation",details:{node:e},category:dl.q.MEDIA});return Cr(Cr({},n),{},{codecs:i,audioSamplingRate:r})}function Br(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return Ur(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ur(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function Ur(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Gr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gr(Object(r),!0).forEach((function(t){Hr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Hr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yr(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function qr(e,t,r){var n,i,o=t.segmentTemplate,a=t.mimeType,u=Yr(t,Ql),c=null!==(n=e.attributes.lang)&&void 0!==n?n:"und",s=null!==(i=e.attributes.label)&&void 0!==i?i:null;if(""===c)throw new hl.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected AdaptationSet[lang]",details:{node:e},category:dl.q.MEDIA});var l=jr(e,Fr,r).map((function(t){var r,n,i=null!==(r=t.segmentTemplate)&&void 0!==r?r:o,u=null!==(n=t.mimeType)&&void 0!==n?n:a;if(!i)throw new hl.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected missed Representation>SegmentTemplate",details:{node:e},category:dl.q.MEDIA});if(!u)throw new hl.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected missed Representation>mimeType",details:{node:e},category:dl.q.MEDIA});return Vr(Vr({},t),{},{segmentTemplate:i,mimeType:u})})),f=function(e,t){var r,n=Br(t.findChildren(e,"AudioChannelConfiguration"));try{for(n.s();!(r=n.n()).done;){var i=r.value,o=i.attributes.schemeIdUri;if(o){var a=i.attributes.value;if(a)switch(o){case"urn:mpeg:dash:outputChannelPositionList:2012":return a.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":var u=parseInt(a,10);if(!u)continue;return u;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":var c=parseInt(a,16);if(!c)continue;for(var s=0;c;)1&c&&++s,c>>=1;return s;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":var l=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],f=parseInt(a,10);if(!f)continue;if(f>0&&f<l.length)return l[f];continue;default:continue}}}}catch(h){n.e(h)}finally{n.f()}}(e,r.parser);return Vr(Vr({},u),{},{lang:c,label:s,representations:l,keyId:void 0,encrypted:t.contentProtection.drmInfos.length>0,channels:f})}function Wr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wr(Object(r),!0).forEach((function(t){$r(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kr(e,t){var r=Sr(e,t,"text"),n=[];return e.children.forEach((function(e){var t=e.tagName,r=e.children;if("BaseURL"===t){var i=r[0];if(!i)return;n.push(we(i))}})),zr(zr({},r),{},{baseUrl:n[0]})}function Zr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zr(Object(r),!0).forEach((function(t){Jr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Jr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qr(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function en(e,t){var r=Or(e,t);switch(r.type){case"video":return function(e,t,r){var n=t.segmentTemplate,i=t.mimeType,o=Nr(t,Jl),a=parseInt(e.attributes.maxWidth,10),u=parseInt(e.attributes.maxHeight,10),c=Math.max(parseFloat(e.attributes.maxFrameRate),0),s=jr(e,Pr,r).map((function(t){var r,o,a=null!==(r=t.segmentTemplate)&&void 0!==r?r:n,u=null!==(o=t.mimeType)&&void 0!==o?o:i;if(!a)throw new hl.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected missed Representation>SegmentTemplate",details:{node:e},category:dl.q.MEDIA});if(!u)throw new hl.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected missed Representation>mimeType",details:{node:e},category:dl.q.MEDIA});return Lr(Lr({},t),{},{segmentTemplate:a,mimeType:u})}));if(isNaN(a))throw new hl.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected AdaptationSet[maxWidth]",details:{node:e},category:dl.q.MEDIA});if(isNaN(u))throw new hl.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected AdaptationSet[maxHeight]",details:{node:e},category:dl.q.MEDIA});return Lr(Lr(Lr({},o),c?{maxFrameRate:c}:{}),{},{maxWidth:a,maxHeight:u,representations:s,keyId:void 0,encrypted:t.contentProtection.drmInfos.length>0})}(e,r,t);case"audio":return qr(e,r,t);case"text":return function(e,t,r){var n,i,o,a,u=t.segmentTemplate,c=t.mimeType,s=Qr(t,ef),l=e.children.filter((function(e){return"Role"===e.tagName})),f=null;l.forEach((function(e){["caption","subtitle"].includes(e.attributes.value)&&(f=e)}));var h=null!==(n=e.attributes.lang)&&void 0!==n?n:"und",d=null!==(i=e.attributes.label)&&void 0!==i?i:null,p=jr(e,Kr,r).map((function(e){return Xr(Xr({},e),{},{segmentTemplate:e.segmentTemplate||u,mimeType:e.mimeType||c})}));return Xr(Xr({},s),{},{role:f?{schemeIdUri:null!==(o=f.attributes.schemeIdUri)&&void 0!==o?o:null,value:null!==(a=f.attributes.value)&&void 0!==a?a:null}:null,lang:h,label:d,representations:p,keyId:void 0,encrypted:t.contentProtection.drmInfos.length>0,segmentAlignment:!1})}(e,r,t);default:throw new hl.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected AdaptationSet[contentType=".concat(r.type,"]"),details:{node:e},category:dl.q.MEDIA})}}function tn(e,t){var r,n,i,o,a,u,c=t.type.charCodeAt(0)-e.type.charCodeAt(0);if(0!==c)return c;switch(t.type){case"video":return t.maxHeight-e.maxHeight||(null!==(r=t.maxFrameRate)&&void 0!==r?r:0)-(null!==(n=e.maxFrameRate)&&void 0!==n?n:0)||(null!==(i=t.mimeType)&&void 0!==i?i:"").localeCompare(null!==(o=e.mimeType)&&void 0!==o?o:"");case"audio":case"text":return(null!==(a=t.mimeType)&&void 0!==a?a:"").localeCompare(null!==(u=e.mimeType)&&void 0!==u?u:"")}return 0}function rn(e,t){for(var r=e.children.filter((function(e){return"AdaptationSet"===e.tagName})),n=[],i=0;i<r.length;i++){var o=en(r[i],t);o&&n.push(o)}return n.sort(tn)}function nn(e){if(!e)return null;var t=new RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e);if(!t)return null;var r=31536e3*Number(t[1]||null)+2592e3*Number(t[2]||null)+86400*Number(t[3]||null)+3600*Number(t[4]||null)+60*Number(t[5]||null)+Number(t[6]||null);return isFinite(r)?1e3*r:null}function on(e){if(!e)return null;/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z");var t=Date.parse(e);return isNaN(t)?null:Math.floor(t)}function an(e,t,r){var n,i,o,a=e.find((function(e){return"MPD"===e.tagName}));if(void 0===a)throw new hl.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected missed MPD",details:{node:{tagName:"root",attributes:{},children:e}},category:dl.q.MEDIA});for(var u={periods:[],baseUrls:[],maxHeight:null,isDynamic:"dynamic"===(null===(n=a.attributes)||void 0===n?void 0:n.type),videoType:of.Z.LIVE,updatePeriod:5e3,minBufferTime:0,presentationStartTime:null,segmentAvailabilityDuration:1/0,maxSegmentDuration:4e3,presentationDelay:0,availabilityTimeOffset:0,clockOffset:0,minSegmentStartTime:null,maxSegmentEndTime:null,presentationTimeOffset:0,publishTime:0,minPeriodStartTime:0,locationUrl:null},c=a.children.filter((function(e){return"BaseURL"===e.tagName})),s=0;s<c.length;s++){var l=c[s].children;1===l.length&&u.baseUrls.push(l[0])}u.baseUrls.length||u.baseUrls.push(function(e){try{var t=new tf(e);t.search="";var r=t.pathname.split("/");return r[r.length-1]="",t.pathname=r.join("/"),t.href}catch(n){return""}}(t)||t);var f=a.children.filter((function(e){return"Period"===e.tagName}));if(void 0===f||0===f.length)throw new hl.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected missed Period",details:{node:a},category:dl.q.MEDIA});if(u.isDynamic){var h,d,p,y,v;u.minBufferTime=nn(null===(h=a.attributes)||void 0===h?void 0:h.minBufferTime)||u.minBufferTime,u.updatePeriod=nn(null===(d=a.attributes)||void 0===d?void 0:d.minimumUpdatePeriod)||u.updatePeriod,u.presentationStartTime=on(null===(p=a.attributes)||void 0===p?void 0:p.availabilityStartTime),u.segmentAvailabilityDuration=nn(null===(y=a.attributes)||void 0===y?void 0:y.timeShiftBufferDepth)||u.segmentAvailabilityDuration,u.maxSegmentDuration=nn(null===(v=a.attributes)||void 0===v?void 0:v.maxSegmentDuration)||u.maxSegmentDuration;var m=nn(a.attributes.suggestedPresentationDelay),b=Math.max(1e4,1.5*u.minBufferTime);u.presentationDelay=null!==m&&void 0!==m?m:b;var g=a.children.filter((function(e){return"UTCTiming"===e.tagName}));u.clockOffset=function(e){var t=e.find((function(e){return nf.includes(e.attributes.schemeIdUri)}));if(!t)return 0;var r=t.attributes.schemeIdUri,n=t.attributes.value;if(rf.includes(r)){var i=Date.parse(n);return isNaN(i)?0:i-Date.now()}return 0}(g)}var w,_,E,O,S={maxHeight:null,duration:nn(null===a||void 0===a?void 0:a.attributes.mediaPresentationDuration),maxPresentationTimeOffset:0,minPeriodStartTime:1/0,segmentAvailabilityDuration:u.segmentAvailabilityDuration,nowWithOffset:Date.now()+u.clockOffset,parser:r,availabilityTimeOffset:1/0,isDynamic:u.isDynamic,emsgSchemeIdUris:{audio:new Set,video:new Set},presentationStartTime:u.presentationStartTime};(u.periods.push((w=f[0],(_=S).minPeriodStartTime=Math.min(nn(w.attributes.start)||0,_.minPeriodStartTime),{adaptationSets:rn(w,_)})),S.maxPresentationTimeOffset&&(u.segmentAvailabilityDuration=1/0,u.presentationTimeOffset=S.maxPresentationTimeOffset,u.videoType=of.Z.EVENT),S.maxSegmentDuration&&S.maxSegmentEndTime)&&(u.maxSegmentDuration=Math.max(S.maxSegmentDuration,u.maxSegmentDuration),u.minSegmentStartTime=null!==(E=S.minSegmentStartTime)&&void 0!==E?E:null,u.maxSegmentEndTime=null!==(O=S.maxSegmentEndTime)&&void 0!==O?O:null);S.maxHeight&&(u.maxHeight=S.maxHeight),isFinite(S.availabilityTimeOffset)&&(u.availabilityTimeOffset=S.availabilityTimeOffset),u.publishTime=on(null===(i=a.attributes)||void 0===i?void 0:i.publishTime)||u.publishTime,u.emsgSchemeIdUris=S.emsgSchemeIdUris;var k=a.children.find((function(e){return"Location"===e.tagName}));return k&&k.children.length&&(u.locationUrl=we(k.children[0])),u.minPeriodStartTime=isFinite(S.minPeriodStartTime)?S.minPeriodStartTime:null!==(o=S.minSegmentStartTime)&&void 0!==o?o:u.minPeriodStartTime,u}function un(e,t){return hn(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||ln(e,t)||sn()}function cn(e){return hn(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ln(e)||sn()}function sn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ln(e,t){if(e){if("string"===typeof e)return fn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fn(e,t):void 0}}function fn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function hn(e){if(Array.isArray(e))return e}function dn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mn(e){try{var t=new XMLHttpRequest;return t.open("GET","https://yandex.ru"),t.responseType=e,t.responseType===e?e:""}catch(r){return""}}function bn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||En(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _n(e){return function(e){if(Array.isArray(e))return On(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||En(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function En(e,t){if(e){if("string"===typeof e)return On(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?On(e,t):void 0}}function On(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Sn(e){return(Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Tn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kn(Object(r),!0).forEach((function(t){Rn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Rn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pn(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==Sn(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}Pn=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},b=m.iterator||"@@iterator",g=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,b,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,b)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,g,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=Sf);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,b,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function xn(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):Sf.resolve(c).then(n,i)}function jn(e){return function(){var t=this,r=arguments;return new Sf((function(n,i){function o(e){xn(u,n,i,o,a,"next",e)}function a(e){xn(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function An(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ln(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ln(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ln(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function In(e,t){var r={type:"content-type",size:"content-length"},n=[];for(var i in t)n.push([r[i],t[i].toString()]);return{headers:{forEach:function(e){n.forEach((function(t){var r=An(t,2),n=r[0],i=r[1];e(i,n)}))}},body:{getReader:function(){return e.getReader()}},text:function(){return e.text()},status:200}}function Nn(e,t){return Dn.apply(this,arguments)}function Dn(){return(Dn=jn(Pn().mark((function e(t,r){var n,i,o,a,u,c,s,l,f;return Pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rf();case 2:return n=e.sent,i=t.split("/"),o=An(i,3),a=o[0],u=o[1],c=o[2],e.next=6,n.getDirectoryHandle(a,{create:r});case 6:return s=e.sent,e.next=9,s.getDirectoryHandle(u,{create:r});case 9:return l=e.sent,f=l.getFileHandle(c.replace(/\//g,"_"),{create:r}),e.abrupt("return",f);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cn(e){return Mn.apply(this,arguments)}function Mn(){return(Mn=jn(Pn().mark((function e(t){var r,n,i;return Pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nn(t,!1);case 2:return r=e.sent,e.next=5,r.getFile();case 5:return n=e.sent,i=n.size,e.abrupt("return",{body:n,size:i});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fn(e){return(Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Un(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bn(Object(r),!0).forEach((function(t){$n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Gn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Hn(e,t){return(Hn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Yn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=zn(e);if(t){var i=zn(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return qn(this,r)}}function qn(e,t){if(t&&("object"===Fn(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Wn(e)}function Wn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zn(e){return(zn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,r=e<10?100*Math.pow(2,e):6e4,n=2*Math.random()-1,i=n*t;return r*(1+i)}function Zn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zn(Object(r),!0).forEach((function(t){Jn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Jn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qn(e,t){var r=[];e.adaptationSets.forEach((function(e){e.representations.forEach((function(n){switch(e.type){case"audio":t.obtainTimelineTrack(Xn(Xn(Xn({},n),n.segmentTemplate),{},{bitrate:n.bandwidth,language:e.lang,name:e.label,label:e.label,channels:e.channels,type:"audio"}));break;case"video":r.push(n);break;case"text":t.obtainTimelineTrack(function(e,t,r){var n,i,o,a,u=t.segmentTemplate,c=Xn(Xn({},t),{},{kind:(null===(n=r.role)||void 0===n?void 0:n.value)||"subtitles",label:r.label,language:r.lang,bitrate:t.bandwidth,type:"text"});if(u)return Xn(Xn({},c),u);var s=e.getSeekableRange();return Xn(Xn({},c),{},{media:t.baseUrl,initialization:null,timescale:1,startNumber:Math.ceil(Math.abs(1)),endNumber:Math.ceil(Math.abs(1)),startTime:null!==(i=null===s||void 0===s?void 0:s.start)&&void 0!==i?i:0,endTime:null!==(o=null===s||void 0===s?void 0:s.end)&&void 0!==o?o:0,presentationTimeOffset:0,segmentSequences:[{time:0,duration:null!==(a=e.getDuration())&&void 0!==a?a:0,count:Math.ceil(Math.abs(1)),endNumber:Math.ceil(Math.abs(1)),originalValues:{time:0,duration:e.getDuration(),trackPresentationTimeOffset:0}}]})}(t,n,e))}}))})),t.updateVideoTracks(r),t.sortTracksInTimeline()}function ei(e){if(!e.length)return 1/0;var t=0;return e.forEach((function(e){t+=e.bandwidth})),t/e.length}function ti(e,t){return"".concat(e,"; codecs=").concat(JSON.stringify(t))}function ri(e){return(0,Lf.Q)(self).isTypeSupported(ti(e.mimeType,e.codecs))}function ni(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return ii(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ii(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function ii(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function oi(e){var t,r=[],n=[],i=ni(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;ri(o)?r.push(o):n.push(o)}}catch(a){i.e(a)}finally{i.f()}return{supported:r,unsupported:n}}function ai(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ui(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ui(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ui(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ci(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return si(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return si(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function si(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function li(e){var t,r=new Map,n=ci(e.representations);try{for(n.s();!(t=n.n()).done;){var i=t.value,o=i.height,a=i.bandwidth;r.set(o,a)}}catch(u){n.e(u)}finally{n.f()}return r}function fi(e,t){var r,n=0,i=0,o=0,a=ci(e.keys());try{for(a.s();!(r=a.n()).done;){var u=r.value,c=e.get(u),s=t.get(u);c&&s&&(o++,n+=c,i+=s)}}catch(l){a.e(l)}finally{a.f()}return i/o<n/o?t:e}function hi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return di(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return di(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function di(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pi(Object(r),!0).forEach((function(t){vi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function vi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mi(e,t){var r={audio:[],video:[],text:[]},n={video:!1,audio:!1},i={video:new Set,audio:new Set};e.forEach((function(e){if("video"===e.type){n.video=!0;var t=function(e){var t={},r=0,n=oi(e),i=n.supported,o=n.unsupported;i.forEach((function(e){r=Math.max(r,e.height);var n=e.codecs.split(".")[0];t[n]?t[n].push(e):t[n]=[e]})),(0,Yl.J)(t).forEach((function(e){var n=ai(e,2),i=n[0];n[1].some((function(e){return e.height===r}))||delete t[i]}));var a=(0,Ul.Z)(t);return a.length?(a.length>1&&a.sort((function(e,r){return ei(t[e])-ei(t[r])})),{selected:t[a[0]],unsupported:o}):{selected:void 0,unsupported:o}}(e.representations),o=t.selected,a=t.unsupported;if(!o)return void a.forEach((function(e){return i.video.add(ti(e.mimeType,e.codecs))}));r[e.type].push(yi(yi({},e),{},{representations:o,maxHeight:o[0].height,maxWidth:o[0].width}))}else if("audio"===e.type){n.audio=!0;var u=function(e){var t={},r=oi(e),n=r.supported,i=r.unsupported;n.forEach((function(e){var r=e.codecs.split(".")[0];t[r]?t[r].push(e):t[r]=[e]}));var o=(0,Ul.Z)(t);return o.length?(o.length>1&&o.sort((function(e,r){return ei(t[e])-ei(t[r])})),{selected:t[o[0]],unsupported:i}):{selected:void 0,unsupported:i}}(e.representations),c=u.selected,s=u.unsupported;if(!c)return void s.forEach((function(e){return i.audio.add(ti(e.mimeType,e.codecs))}));r[e.type].push(yi(yi({},e),{},{representations:c}))}else r[e.type].push(e)}));var o=(0,Ul.Z)(n).filter((function(e){return n[e]&&!r[e].length}));if(o.length){var a=o.reduce((function(e,t){return e[t]=Array.from(i[t]),e}),{});throw new hl.w({message:"For some types of adaptation sets, no supported codec was found.",code:"YASP_NO_CODECS",details:a,isFatal:!0,category:dl.q.NO_CODECS})}return(0,Yl.J)(r).reduce((function(e,t){var r=hi(t,2),n=r[0],i=r[1];if("video"===n){var o=function(e){if(!e.length)return null;if(1===e.length)return e[0];for(var t=0,r=li(e[t]),n=1;n<e.length;n++){var i=li(e[n]);t=(r=fi(r,i))===i?n:t}return e[t]}(i);o&&e.push(o)}else i.forEach((function(t){return e.push(t)}));return e}),[])}function bi(e){var t=new Df(e);return t.searchParams.delete(Nf.j),t.href}function gi(e){if(!(0,Is.K)(e))return!1;var t=e;return(0,cl.H)(t.code)&&(0,cl.H)(t.category)&&"boolean"===typeof t.isFatal}function wi(e){return(wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _i(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==wi(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}_i=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},b=m.iterator||"@@iterator",g=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,b,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,b)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,g,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=Ff);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,b,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function Ei(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):Ff.resolve(c).then(n,i)}function Oi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Si(){return(Si="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=ki(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function ki(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ji(e)););return e}function Ti(e,t){return(Ti=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ri(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ji(e);if(t){var i=ji(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Pi(this,r)}}function Pi(e,t){if(t&&("object"===wi(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return xi(e)}function xi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ji(e){return(ji=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ai(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Li(e){return(Li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ii(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==Li(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}Ii=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},b=m.iterator||"@@iterator",g=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,b,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,b)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,g,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=Vf);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,b,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function Ni(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):Vf.resolve(c).then(n,i)}function Di(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ci(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mi(e,t){for(var r,n=0,i=0;i<e.length;i++){var o=e[i],a=o.start,u=o.end;if(!(u<t)){if(void 0!==r&&a-r>=.1)break;n+=u-Math.max(a,t),r=u}}return n}function Fi(e){return(Fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bi(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==Fi(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}Bi=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},b=m.iterator||"@@iterator",g=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,b,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,b)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,g,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=zf);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,b,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function Ui(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):zf.resolve(c).then(n,i)}function Gi(e){return function(){var t=this,r=arguments;return new zf((function(n,i){function o(e){Ui(u,n,i,o,a,"next",e)}function a(e){Ui(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function Vi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vi(Object(r),!0).forEach((function(t){Zi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Yi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qi(e,t){return(qi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Wi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ki(e);if(t){var i=Ki(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return zi(this,r)}}function zi(e,t){if(t&&("object"===Fi(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $i(e)}function $i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ki(e){return(Ki=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xi(e){var t,r,n=new Qf(e).host,i=(t={},(r=e.split("?")[0])?(r.split("/").forEach((function(e){e.startsWith("ysign")&&e.split(",").forEach((function(e){var r=e.indexOf("=");-1!==r&&(t[e.slice(0,r)]=e.slice(r+1))}))})),t):t).lid,o=i?"&lid=".concat(i):"";return"https://".concat(n,"/ping?r=").concat((0,Jf.a)(12)).concat(o)}function Ji(e){return(Ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qi(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==Ji(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}Qi=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},b=m.iterator||"@@iterator",g=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,b,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,b)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,g,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=th);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,b,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function eo(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):th.resolve(c).then(n,i)}function to(e){return function(){var t=this,r=arguments;return new th((function(n,i){function o(e){eo(u,n,i,o,a,"next",e)}function a(e){eo(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function ro(e){return no.apply(this,arguments)}function no(){return(no=to(Qi().mark((function e(t){return Qi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,eh.W)({method:"GET",url:t,withCredentials:!1,timeout:2e3});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function io(e){return(io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oo(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==io(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}oo=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},b=m.iterator||"@@iterator",g=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,b,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,b)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,g,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=rh);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,b,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function ao(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):rh.resolve(c).then(n,i)}function uo(e){return function(){var t=this,r=arguments;return new rh((function(n,i){function o(e){ao(u,n,i,o,a,"next",e)}function a(e){ao(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function co(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function so(){return(so="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=lo(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function lo(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vo(e)););return e}function fo(e,t){return(fo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ho(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=vo(e);if(t){var i=vo(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return po(this,r)}}function po(e,t){if(t&&("object"===io(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return yo(e)}function yo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vo(e){return(vo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bo(e,t,r){var n;return e.replace(/\$RepresentationID\$/g,t.id).replace(/\$Bandwidth\$/g,String(t.bitrate)).replace(/\$Number\$/g,String(null!==(n=null===r||void 0===r?void 0:r.number)&&void 0!==n?n:"")).replace(/\$Time\$/g,String((0,oh.z)(null===r||void 0===r?void 0:r.originalStart)?r.originalStart:"")).replace(/\$\$/g,"$")}function go(e){return(go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wo(Object(r),!0).forEach((function(t){Lo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Eo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Oo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function So(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ko(){return(ko="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=To(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function To(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ao(e)););return e}function Ro(e,t){return(Ro=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Po(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ao(e);if(t){var i=Ao(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return xo(this,r)}}function xo(e,t){if(t&&("object"===go(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return jo(e)}function jo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ao(e){return(Ao=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Io(e,t,r){for(var n=1e3*r,i=t,o=!0,a=!1;o;)o=!1,e.forEach((function(e){e.forEach((function(e){e.start<=i&&i<e.end&&(i=e.end,a=!0,o=!0)}))}));return i>=n&&a?-1:i}function No(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Do(e){return(Do="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Co(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==Do(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}Co=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},b=m.iterator||"@@iterator",g=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,b,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,b)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,g,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=wh);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,b,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function Mo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Fo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Bo(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):wh.resolve(c).then(n,i)}function Uo(e){return function(){var t=this,r=arguments;return new wh((function(n,i){function o(e){Bo(u,n,i,o,a,"next",e)}function a(e){Bo(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function Go(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Vo(e,t){return(Vo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ho(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Wo(e);if(t){var i=Wo(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Yo(this,r)}}function Yo(e,t){if(t&&("object"===Do(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return qo(e)}function qo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wo(e){return(Wo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $o(e){return($o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ko(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==$o(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}Ko=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},b=m.iterator||"@@iterator",g=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,b,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,b)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,g,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=Eh);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,b,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function Zo(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):Eh.resolve(c).then(n,i)}function Xo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Jo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Qo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ea(e){return-1===e.indexOf("#")?null:(e.split("#").pop().split("&").some((function(e){var r=Jo(e.split("=",2).map(decodeURIComponent),2),n=r[0],i=r[1];return"t"===n&&(t=i,!0)})),function(e){if("string"!==typeof e)return null;try{if(e.match(/^-?\d+(\.\d+)?$/))return ta(parseFloat(e));if(e.includes("npt:")){var t=e.split("npt:")[1];return ta(parseFloat(t))}if(e.includes(":")){var r=e.split(":"),n=parseInt(r[0],10)||0,i=parseInt(r[1],10)||0,o=parseFloat(r[2])||0;return ta(3600*n+60*i+o)}var a=e.match(/^npt:(\d+(\.\d+)?)$/);if(a)return ta(parseFloat(a[1]))}catch(u){}return null}(t));var t}function ta(e){return isNaN(e)?null:e}function ra(e){return(ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function na(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ia(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?na(Object(r),!0).forEach((function(t){fa(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):na(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function oa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function aa(e,t){return(aa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ua(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=la(e);if(t){var i=la(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ca(this,r)}}function ca(e,t){if(t&&("object"===ra(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return sa(e)}function sa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function la(e){return(la=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fa(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ha(e){return(ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function da(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?da(Object(r),!0).forEach((function(t){Oa(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):da(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ya(e,t){return(ya=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function va(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ga(e);if(t){var i=ga(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ma(this,r)}}function ma(e,t){if(t&&("object"===ha(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ba(e)}function ba(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ga(e){return(ga=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ea(e,t,r){return t&&_a(e.prototype,t),r&&_a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Oa(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ka(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return Ta(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ta(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function Ta(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ra(e,t){var r,n={},i=ka(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;n[o.trackId]||(n[o.trackId]={type:"audio",bitrate:o.bitrate})}}catch(s){i.e(s)}finally{i.f()}var a,u=ka(t);try{for(u.s();!(a=u.n()).done;){var c=a.value;n[c.trackId]||(n[c.trackId]={type:"video",bitrate:c.bitrate,height:c.height,width:c.width})}}catch(s){u.e(s)}finally{u.f()}return n}function Pa(e,t){return(0,Dl.RW)("web_yasp_unify_abr_decision_hash_code")?e.trace.map((function(e){var r=null;return e.result.map((function(e){return e[t]===r?null:(r=e[t],e[t])})).filter(Boolean).join("-")})).filter(Boolean).join("_"):e.trace.map((function(e){return e.result.map((function(e){return e[t]})).filter(Boolean).join("-")})).filter(Boolean).join("_")}function xa(e,t,r){var n=(null===e||void 0===e?void 0:e.length)>0?e:[void 0],i=(null===t||void 0===t?void 0:t.length)>0?t:[void 0],o=(null===r||void 0===r?void 0:r.length)>0?r[0].bitrate:0,a=[];return n.forEach((function(e){i.forEach((function(t,r){(function(e){var t=e.width,r=e.height,n=Math.max(t,r),i=Math.min(t,r);if(n<=0)return 0;for(var o=Dh[0],a=0;a<Dh.length;a++){var u=Dh[a],c=Ch[u];if(n>=1.3*Math.floor(16*c/9)||i>=1.3*c)return o;o=u}return Dh[Dh.length-1]})({width:(null===e||void 0===e?void 0:e.width)||0,height:(null===e||void 0===e?void 0:e.height)||0})>360&&r>0||a.push({video:e,audio:t,bandwidth:((null===e||void 0===e?void 0:e.bitrate)||0)+(((null===t||void 0===t?void 0:t.bitrate)||0)+o)})}))})),a}function ja(e){return(ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Aa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function La(e,t){return(La=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ia(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ca(e);if(t){var i=Ca(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Na(this,r)}}function Na(e,t){if(t&&("object"===ja(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Da(e)}function Da(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ca(e){return(Ca=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ma(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fa(e){return function(e){if(Array.isArray(e))return Ba(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Ba(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ba(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ba(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ua(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ga(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Va(e){return["audio","video"].some((function(t){var r=e[t];return r&&null!==r.getWaitingDuration()}))}function Ha(e,t,r,n){return void 0!==e&&null!==t?Math.min(null!==n&&void 0!==n?n:1/0,(e.start/1e3-t)/Math.max(r,1)):null!==n&&void 0!==n?n:0}function Ya(e,t,r,n){var i,o;if(void 0===e||e.finished)return 0;var a=n-(null!==(i=null===t||void 0===t?void 0:t.bitrate)&&void 0!==i?i:0),u=8*e.expectedSize,c=null!==(o=e.getWaitingDuration())&&void 0!==o?o:0;return(null===e.getLoadingDuration()?(r-c)/1e3:0)+u/a}function qa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Wa(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function za(e){return(za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ka(e,t){return(Ka=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Za(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Qa(e);if(t){var i=Qa(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Xa(this,r)}}function Xa(e,t){if(t&&("object"===za(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ja(e)}function Ja(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qa(e){return(Qa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tu(e){return(tu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ru(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function nu(e,t){return(nu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function iu(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=uu(e);if(t){var i=uu(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ou(this,r)}}function ou(e,t){if(t&&("object"===tu(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return au(e)}function au(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uu(e){return(uu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function su(e){return(su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hu(e,t){return(hu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function du(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=yu(e);if(t){var i=yu(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return pu(this,r)}}function pu(e,t){if(t&&("object"===su(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function yu(e){return(yu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vu(){return(vu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function mu(e,t){return vu(e,{currentTime:t.currentTime,duration:t.duration}),e}function bu(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return gu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gu(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function gu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function wu(e,t,r){var n=function(e){return e.filter(_u)}(e);if(n.length<=1)return e;var i,o=[],a=function(e,t,r){var n=function(e,t,r){var n=function(e,t,r){var n=Eu(e[0].video.width,e[0].video.height),i=function(e,t){var r=t||{},n=r.defaultLongSideResolution,i=r.userCappingResolution,o=0,a=0;i&&i.width&&i.height&&(o=i.width,a=i.height);var u=Math.max(o,a),c=(0,$h.R)(n),s=function(e){var t=e.width,r=void 0===t?1/0:t,n=e.height,i=void 0===n?1/0:n,o=e.dpi,a=void 0===o?1:o;return{cappedWidthResolution:r*a,cappedHeightResolution:i*a}}(e),l=s.cappedWidthResolution,f=s.cappedHeightResolution,h=u||Math.min(c,l),d=u||Math.min(c,f);return{videoMaxWidthResolution:h,videoMaxHeightResolution:d}}(t,r),o=i.videoMaxWidthResolution,a=i.videoMaxHeightResolution,u=Eu(o,a);return n>u?{videoMaxWidthResolutionWithTrueRatio:o,videoMaxHeightResolutionWithTrueRatio:e[0].video.height*(o/e[0].video.width)}:{videoMaxWidthResolutionWithTrueRatio:e[0].video.width*(a/e[0].video.height),videoMaxHeightResolutionWithTrueRatio:a}}(e,t,r),i=n.videoMaxWidthResolutionWithTrueRatio,o=n.videoMaxHeightResolutionWithTrueRatio;return i*o}(e,t,r);return(0,Gh.U)(e.slice().reverse(),(function(e){var t=e.video,r=t.width,i=t.height;return Math.abs(n-r*i)}))}(n,t,r),u=bu(n);try{for(u.s();!(i=u.n()).done;){var c=i.value;if(o.push(c),a===c)break}}catch(s){u.e(s)}finally{u.f()}return o}function _u(e){return(0,Is.K)(e.video)&&(0,oh.z)(e.video.width)&&(0,oh.z)(e.video.height)}function Eu(e,t){return e/t}function Ou(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Su(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ku(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Tu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ru(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ju(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Au(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Iu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Du(e,t,r){return t&&Nu(e.prototype,t),r&&Nu(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Cu(e){return(Cu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Fu(e,t){return(Fu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Bu(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Vu(e);if(t){var i=Vu(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Uu(this,r)}}function Uu(e,t){if(t&&("object"===Cu(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Gu(e)}function Gu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vu(e){return(Vu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Yu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qu(e){return(qu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function zu(){return(zu="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=$u(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function $u(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ju(e)););return e}function Ku(e,t){return(Ku=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Zu(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ju(e);if(t){var i=Ju(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Xu(this,r)}}function Xu(e,t){if(t&&("object"===qu(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ju(e){return(Ju=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ec(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qu(Object(r),!0).forEach((function(t){tc(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function tc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function nc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ic(e){return(ic="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ac(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==ic(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}ac=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},b=m.iterator||"@@iterator",g=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,b,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,b)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,g,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=wd);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,b,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function uc(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):wd.resolve(c).then(n,i)}function cc(e){return function(){var t=this,r=arguments;return new wd((function(n,i){function o(e){uc(u,n,i,o,a,"next",e)}function a(e){uc(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function sc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function lc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fc(e){return(fc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hc(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return dc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dc(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function dc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pc(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==fc(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}pc=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},b=m.iterator||"@@iterator",g=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,b,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,b)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,g,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=kd);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,b,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function yc(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):kd.resolve(c).then(n,i)}function vc(e){return function(){var t=this,r=arguments;return new kd((function(n,i){function o(e){yc(u,n,i,o,a,"next",e)}function a(e){yc(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function mc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function bc(){return(bc="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=gc(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function gc(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Sc(e)););return e}function wc(e,t){return(wc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Sc(e);if(t){var i=Sc(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Ec(this,r)}}function Ec(e,t){if(t&&("object"===fc(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Oc(e)}function Oc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sc(e){return(Sc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tc(e){return(0,jf.lm)(e.toLocaleLowerCase())||new Pd(e,"https://domain.com").searchParams.get("container")||""}function Rc(e){return new xd(e,"https://domain.com").searchParams.get("codec")||""}function Pc(e,t,r){var n=[];return e.forEach((function(e,i){n.push({endNumber:Math.max(Math.floor(i+1)),time:Math.floor(e.startTime/r*1e3),duration:Math.floor(e.duration/r*1e3),count:Math.max(Math.floor(1)),isMP4:!0,startByteWithUuidOffset:t+e.startByte,endByteWithUuidOffset:t+e.endByte,originalValues:{time:e.startTime,duration:e.duration,trackPresentationTimeOffset:0,startByte:e.startByte,endByte:e.endByte}})})),n}function xc(e){e.reader.skip(4);var t,r,n=e.reader.readUint32(),i=[];if(0===n)throw new Error("[parseSidx] Invalid timescale.");0===e.version?(t=e.reader.readUint32(),r=e.reader.readUint32()):(t=e.reader.readUint64(),r=e.reader.readUint64()),e.reader.skip(2);var o=e.reader.readUint16();if(0===o)throw new Error("[parseSidx] Invalid reference count.");for(var a=t,u=e.start+e.size+r,c=0;c<o;c++){var s=e.reader.readUint32(),l=(2147483648&s)>>>31,f=2147483647&s,h=e.reader.readUint32();if(e.reader.skip(4),1===l)throw new Error("[parseSidx] Hierarchical SIDXs are not supported.");i.push({type:l,size:f,duration:h,startByte:u,endByte:u+f-1,startTime:a,endTime:a+h}),a+=h,u+=f}return e.parser.stop(),{segmentsInfo:i,timescale:n}}function jc(e){return(jc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ac(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==jc(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}Ac=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},b=m.iterator||"@@iterator",g=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,b,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,b)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,g,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=Ad);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,b,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function Lc(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):Ad.resolve(c).then(n,i)}function Ic(e){return function(){var t=this,r=arguments;return new Ad((function(n,i){function o(e){Lc(u,n,i,o,a,"next",e)}function a(e){Lc(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function Nc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Dc(){return(Dc="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=Cc(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function Cc(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Gc(e)););return e}function Mc(e,t){return(Mc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Fc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Gc(e);if(t){var i=Gc(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Bc(this,r)}}function Bc(e,t){if(t&&("object"===jc(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Uc(e)}function Uc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gc(e){return(Gc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hc(e){return(Hc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yc(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return qc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qc(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function qc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Wc(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==Hc(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}Wc=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},b=m.iterator||"@@iterator",g=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,b,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,b)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,g,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=Id);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,b,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function zc(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):Id.resolve(c).then(n,i)}function $c(e){return function(){var t=this,r=arguments;return new Id((function(n,i){function o(e){zc(u,n,i,o,a,"next",e)}function a(e){zc(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function Kc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Zc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Kc(Object(r),!0).forEach((function(t){os(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Xc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Jc(){return(Jc="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=Qc(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function Qc(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=is(e)););return e}function es(e,t){return(es=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ts(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=is(e);if(t){var i=is(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return rs(this,r)}}function rs(e,t){if(t&&("object"===Hc(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ns(e)}function ns(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function is(e){return(is=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function os(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function as(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function us(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ss(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ls(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fs(e){return(fs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ds(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ps(e,t){return(ps=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ys(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ms(e);if(t){var i=ms(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return vs(this,r)}}function vs(e,t){if(t&&("object"===fs(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ms(e){return(ms=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bs(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function gs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ws(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ws(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ws(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _s(e){return(_s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Es(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==_s(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}Es=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},b=m.iterator||"@@iterator",g=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,b,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,b)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,g,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=zd);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,b,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function Os(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ss(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Os(Object(r),!0).forEach((function(t){Ps(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Os(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ks(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):zd.resolve(c).then(n,i)}function Ts(e){return function(){var t=this,r=arguments;return new zd((function(n,i){function o(e){ks(u,n,i,o,a,"next",e)}function a(e){ks(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function Rs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ps(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xs(e){return(xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function js(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:self;new Zd(e).init()}r.d(t,{Z:function(){return Xd}});var As,Ls=function(){function e(){var t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=[],(r="timeRanges")in(t=this)?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n}var t,r,i;return t=e,(r=[{key:"length",get:function(){return this.timeRanges.length}},{key:"start",value:function(e){if(this.timeRanges.length<=e)throw new Error("Failed to execute 'start' on 'TimeRanges': The index provided (".concat(e,") is greater than the maximum bound (").concat(this.timeRanges.length,")."));return this.timeRanges[e][0]}},{key:"end",value:function(e){if(this.timeRanges.length<=e)throw new Error("Failed to execute 'end' on 'TimeRanges': The index provided (".concat(e,") is greater than the maximum bound (").concat(this.timeRanges.length,")."));return this.timeRanges[e][1]}},{key:"update",value:function(e){this.timeRanges=e}}])&&n(t.prototype,r),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Is=r(95689),Ns=function(){function e(t,r,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"sourceKey",void 0),o(this,"mediaState",void 0),o(this,"worker",void 0),o(this,"buffered",void 0),o(this,"validateAndHandleEvent",(function(e){var t=e.data;(0,Is.K)(t)&&"string"===typeof t.method&&t.sourceKey===i.sourceKey&&i.handleEvent(t.method,t.params)})),this.sourceKey=t,this.mediaState=n,this.buffered=new Ls,this.mediaState.buffered=this.buffered,this.worker=r,this.worker.addEventListener("message",this.validateAndHandleEvent)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.worker.removeEventListener("message",this.validateAndHandleEvent)}},{key:"handleEvent",value:function(e,t){switch(e){case"updateBuffering":return this.mediaState.buffering=t,void this.mediaState.emit("BufferingChange",t);case"updateCurrentTime":return void(this.mediaState.currentTime=t);case"updateDuration":return void(this.mediaState.duration=t);case"updateLoop":return void(this.mediaState.loop=t);case"updatePaused":return void(this.mediaState.paused=t);case"updatePlaybackRate":return void(this.mediaState.playbackRate=t);case"updateBuffered":return void this.buffered.update(t)}}}])&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Ds=function(e){function t(){return u(this,t),o.apply(this,arguments)}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(t,e);var r,n,i,o=h(t);return r=t,(n=[{key:"handleEvent",value:function(e,r){switch(e){case"updateFrames":return void(this.mediaState.frames=r);case"updateDevicePixelRatio":return void(this.mediaState.devicePixelRatio=r);case"updateVideoSize":return void(this.mediaState.videoSize=r);case"updateContainerSize":return void(this.mediaState.containerSize=r);case"updateObjectFit":return void(this.mediaState.objectFit=r);default:s(p(t.prototype),"handleEvent",this).call(this,e,r)}}}])&&c(r.prototype,n),i&&c(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Ns),Cs=r(74910),Ms=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;m(this,e),this.limit=t,g(this,"sources",new Map)}var t,r,n;return t=e,n=[{key:"destroySource",value:function(e){null===e||void 0===e||e.destroy()}}],(r=[{key:"takeSource",value:function(e){return this.sources.get((0,Cs.Hi)(e))}},{key:"putSource",value:function(t,r){var n=(0,Cs.Hi)(t);for(this.sources.delete(n),this.sources.set(n,r);this.sources.size>this.limit;){var i=this.sources.entries().next().value;if(!i)break;var o=y(i,2),a=o[0],u=o[1];e.destroySource(u),this.sources.delete(a)}}},{key:"removeSource",value:function(t){var r=(0,Cs.Hi)(t),n=this.sources.get(r);return!!n&&(e.destroySource(n),this.sources.delete(r))}},{key:"getAllSources",value:function(){return Array.from(this.sources.values())}}])&&b(t.prototype,r),n&&b(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Fs=(r(97881),function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),j(P(r=o.call(this)),"id",void 0),j(P(r),"bitrate",void 0),j(P(r),"language",void 0),j(P(r),"type",void 0),j(P(r),"initialization",void 0),j(P(r),"timescale",void 0),j(P(r),"media",void 0),j(P(r),"mimeType",void 0),j(P(r),"startNumber",void 0),j(P(r),"startTime",void 0),j(P(r),"endNumber",void 0),j(P(r),"endTime",void 0),j(P(r),"presentationTimeOffset",void 0),j(P(r),"segmentSequences",void 0),j(P(r),"init",null),j(P(r),"segmentRanges",[]),j(P(r),"segments",new Map),r.id=e.id,r.bitrate=e.bitrate,r.language=e.language,r.type=e.type,r.initialization=e.initialization,r.timescale=e.timescale,r.media=e.media,r.mimeType=e.mimeType,r.startNumber=e.startNumber,r.startTime=e.startTime,r.endNumber=e.endNumber,r.endTime=e.endTime,r.presentationTimeOffset=e.presentationTimeOffset,r.segmentSequences=e.segmentSequences,r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(t,e);var r,n,i,o=T(t);return r=t,(n=[{key:"updateTrack",value:function(e){this.startNumber=e.startNumber,this.startTime=e.startTime,this.endNumber=e.endNumber,this.endTime=e.endTime,this.presentationTimeOffset=e.presentationTimeOffset,this.segmentSequences=e.segmentSequences,this.bitrate=e.bitrate,this.initialization=e.initialization,this.media=e.media}},{key:"getFullMimeType",value:function(){return this.mimeType}},{key:"appendSegment",value:function(e){var t=this;e.isInitSegment?this.init=e:this.segments.set(e.number,e),this.updateSegmentRanges(),e.finished?this.parseSegment(e):(e.once("Failed",(function(){e.isInitSegment?t.init=null:(t.segments.delete(e.number),t.updateSegmentRanges())})),e.once("Finish",(function(){t.parseSegment(e),t.updateSegmentRanges()})))}},{key:"parseSegment",value:function(e){}},{key:"hasSegment",value:function(e){return this.segments.has(e)}},{key:"getInitSegment",value:function(){return this.init}},{key:"getSegment",value:function(e){var t=this;return E(this.segments.values()).find((function(r){return void 0!==r&&(r.number===t.endNumber&&e===t.endTime-t.presentationTimeOffset||r.start<=e&&e<r.end)}))||null}},{key:"getBufferedRanges",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null===this.initialization||null!==(e=this.init)&&void 0!==e&&e.finished?t?this.segmentRanges.map((function(e){return{start:e.start,end:e.end}})):this.segmentRanges.filter((function(e){return e.finished})).map((function(e){return{start:e.start,end:e.end}})):[]}},{key:"getSeekableRanges",value:function(){return[{start:this.startTime-this.presentationTimeOffset,end:this.endTime-this.presentationTimeOffset}]}},{key:"getSegmentsDebugInfo",value:function(e){var t=this,r=0,n=0,i=0,o=0;return this.segments.forEach((function(a){e>a.end-t.presentationTimeOffset?(r+=a.loadedRawSize,n+=1):(i+=a.loadedRawSize,o+=1)})),{playedRawSize:r,playedSegmentCount:n,activeRawSize:i,activeSegmentCount:o}}},{key:"getDebugInfo",value:function(){return{id:this.id,bitrate:this.bitrate,language:this.language,type:this.type,initialization:this.initialization,timescale:this.timescale,media:this.media,mimeType:this.mimeType,startNumber:this.startNumber,startTime:this.startTime,endNumber:this.endNumber,endTime:this.endTime,presentationTimeOffset:this.presentationTimeOffset,initSegment:this.init,segmentSequences:this.segmentSequences,seekableRanges:this.getSeekableRanges(),segmentRanges:this.segmentRanges,segments:Array.from(this.segments.entries()).reduce((function(e,t){return e[t[0]]=t[1].getDebugInfo(),e}),{})}}},{key:"updateSegmentRanges",value:function(){var e=this.segmentRanges;this.segmentRanges=[];var t=E(this.segments.values()).sort((function(e,t){return e.start-t.start}));if(0!==t.length){for(var r={start:t[0].start,startNumber:t[0].number,end:t[0].end,endNumber:t[0].number,finished:t[0].finished},n=1;n<t.length;n++){var i=t[n];i.finished===r.finished&&i.start===r.end?(r.end=i.end,r.endNumber=i.number):(this.segmentRanges.push(r),r={start:i.start,startNumber:i.number,end:i.end,endNumber:i.number,finished:i.finished})}this.segmentRanges.push(r),this.emit("BufferedInfoChanged")}else 0!==e.length&&this.emit("BufferedInfoChanged")}},{key:"clear",value:function(e,t){return this.clearForParallel(e,t)}},{key:"destroy",value:function(){this.clear(0,Number.MAX_SAFE_INTEGER)}},{key:"clearForParallel",value:function(e,t){var r=this,n=!1;E(this.segments.values()).forEach((function(i){i.start>=e&&i.end<=t&&(n=!0,i.destroy(),r.segments.delete(i.number))})),n&&this.updateSegmentRanges()}}])&&S(r.prototype,n),i&&S(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(r(7179).v)),Bs=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),V(U(r=o.call(this,e)),"type","audio"),V(U(r),"codecs",void 0),V(U(r),"label",void 0),V(U(r),"channels",void 0),r.codecs=e.codecs,r.label=e.name,r.channels=e.channels,r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M(e,t)}(t,e);var r,n,i,o=F(t);return r=t,(n=[{key:"getFullMimeType",value:function(){return"".concat(this.mimeType,"; codecs=").concat(JSON.stringify(this.codecs))}},{key:"getDebugInfo",value:function(){return I(I({},D(G(t.prototype),"getDebugInfo",this).call(this)),{},{codecs:this.codecs,label:this.label})}}])&&N(r.prototype,n),i&&N(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Fs),Us=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ee(J(r=o.call(this,e)),"height",void 0),ee(J(r),"width",void 0),ee(J(r),"type","video"),ee(J(r),"codecs",void 0),ee(J(r),"frameRate",void 0),ee(J(r),"label",void 0),r.height=e.height,r.width=e.width,r.codecs=e.codecs,r.frameRate=e.frameRate;var n=r.parseMediaAttribute(e.media||"");return r.label=n.label||"".concat(r.height,"p"),r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K(e,t)}(t,e);var r,n,i,o=Z(t);return r=t,(n=[{key:"getDebugInfo",value:function(){return q(q({},z(Q(t.prototype),"getDebugInfo",this).call(this)),{},{height:this.height,width:this.width,codecs:this.codecs})}},{key:"getFullMimeType",value:function(){return"".concat(this.mimeType,"; codecs=").concat(JSON.stringify(this.codecs))}},{key:"parseMediaAttribute",value:function(e){var t={};return e.split(",").map((function(e){var r=e.split("=");r.length>0&&(t[r[0]]=r[1])})),t}}])&&W(r.prototype,n),i&&W(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Fs),Gs=r(27817);!function(e){e[e.BIG_ENDIAN=0]="BIG_ENDIAN",e[e.LITTLE_ENDIAN=1]="LITTLE_ENDIAN"}(As||(As={}));var Vs,Hs=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataView=t,re(this,"littleEndian",void 0),re(this,"position",0),this.littleEndian=r===As.LITTLE_ENDIAN}var t,r,n;return t=e,(r=[{key:"getDataView",value:function(){return this.dataView}},{key:"hasMoreData",value:function(){return this.position<this.dataView.byteLength}},{key:"getPosition",value:function(){return this.position}},{key:"getLength",value:function(){return this.dataView.byteLength}},{key:"readUint8",value:function(){try{var e=this.dataView.getUint8(this.position);return this.position+=1,e}catch(t){throw this.throwOutOfBounds()}}},{key:"readUint16",value:function(){try{var e=this.dataView.getUint16(this.position,this.littleEndian);return this.position+=2,e}catch(t){throw this.throwOutOfBounds()}}},{key:"readUint32",value:function(){try{var e=this.dataView.getUint32(this.position,this.littleEndian);return this.position+=4,e}catch(t){throw this.throwOutOfBounds()}}},{key:"readInt32",value:function(){try{var e=this.dataView.getInt32(this.position,this.littleEndian);return this.position+=4,e}catch(t){throw this.throwOutOfBounds()}}},{key:"readUint64",value:function(){var e,t;try{this.littleEndian?(e=this.dataView.getUint32(this.position,!0),t=this.dataView.getUint32(this.position+4,!0)):(t=this.dataView.getUint32(this.position,!1),e=this.dataView.getUint32(this.position+4,!1))}catch(r){throw this.throwOutOfBounds()}if(t>2097151)throw new Error("JS_INTEGER_OVERFLOW");return this.position+=8,t*Math.pow(2,32)+e}},{key:"readBytes",value:function(e){this.position+e>this.dataView.byteLength&&this.throwOutOfBounds();var t=new Uint8Array(this.dataView.buffer,this.dataView.byteOffset+this.position,e);return this.position+=e,t}},{key:"skip",value:function(e){if(this.position+e>this.dataView.byteLength)throw this.throwOutOfBounds();this.position+=e}},{key:"rewind",value:function(e){if(this.position<e)throw this.throwOutOfBounds();this.position-=e}},{key:"seek",value:function(e){if(e<0||e>this.dataView.byteLength)throw this.throwOutOfBounds();this.position=e}},{key:"readTerminatedString",value:function(){for(var e=this.position;this.hasMoreData()&&0!==this.dataView.getUint8(this.position);)this.position+=1;var t=new Uint8Array(this.dataView.buffer,this.dataView.byteOffset+e,this.position-e);return this.position+=1,Gs.x.fromUTF8(t)}},{key:"throwOutOfBounds",value:function(){return new Error("BUFFER_READ_OUT_OF_BOUNDS")}},{key:"readUUID",value:function(){var t=this.readBytes(16);return(e.byteToHex[t[0]]+e.byteToHex[t[1]]+e.byteToHex[t[2]]+e.byteToHex[t[3]]+"-"+e.byteToHex[t[4]]+e.byteToHex[t[5]]+"-"+e.byteToHex[t[6]]+e.byteToHex[t[7]]+"-"+e.byteToHex[t[8]]+e.byteToHex[t[9]]+"-"+e.byteToHex[t[10]]+e.byteToHex[t[11]]+e.byteToHex[t[12]]+e.byteToHex[t[13]]+e.byteToHex[t[14]]+e.byteToHex[t[15]]).toLowerCase()}}])&&te(t.prototype,r),n&&te(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();re(Hs,"byteToHex",Array.from({length:256},(function(e,t){return(t+256).toString(16).substr(1)}))),function(e){e[e.BASIC_BOX=0]="BASIC_BOX",e[e.FULL_BOX=1]="FULL_BOX"}(Vs||(Vs={}));var Ys,qs,Ws,zs,$s,Ks,Zs,Xs,Js,Qs,el=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ie(this,"headers",[]),ie(this,"boxDefinitions",[]),ie(this,"done",!1)}var t,r,n;return t=e,n=[{key:"children",value:function(e){for(var t=null!==e.flags?12:8;e.reader.hasMoreData()&&!e.parser.done;)e.parser.parseNext(e.start+t,e.reader,e.partialOkay)}},{key:"sampleDescription",value:function(e){for(var t=null!==e.flags?12:8,r=e.reader.readUint32();r>0&&!e.parser.done;r-=1)e.parser.parseNext(e.start+t,e.reader,e.partialOkay)}},{key:"allData",value:function(e){return function(t){var r=t.reader.getLength()-t.reader.getPosition();e(t.reader.readBytes(r))}}},{key:"typeFromString",value:function(e){for(var t=0,r=0;r<e.length;r++)t=t<<8|e.charCodeAt(r);return t}},{key:"typeToString",value:function(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}}],(r=[{key:"box",value:function(t,r){var n=e.typeFromString(t);return this.headers[n]=Vs.BASIC_BOX,this.boxDefinitions[n]=r,this}},{key:"fullBox",value:function(t,r){var n=e.typeFromString(t);return this.headers[n]=Vs.FULL_BOX,this.boxDefinitions[n]=r,this}},{key:"stop",value:function(){this.done=!0}},{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=new Uint8Array(e),i=new Hs(new DataView(n.buffer,n.byteOffset,n.byteLength),As.BIG_ENDIAN);for(this.done=!1;i.hasMoreData()&&!this.done;)this.parseNext(0,i,t,r)}},{key:"parseNext",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t.getPosition();if(n&&i+8>t.getLength())this.done=!0;else{var o=t.readUint32(),a=t.readUint32();switch(o){case 0:o=t.getLength()-i;break;case 1:if(n&&t.getPosition()+8>t.getLength())return void(this.done=!0);o=t.readUint64()}var u=this.boxDefinitions[a];if(u){var c=null,s=null;if(this.headers[a]===Vs.FULL_BOX){var l=t.readUint32();c=l>>>24,s=16777215&l}var f=i+o,h=!0;if(r&&f>t.getLength()&&(f=t.getLength(),h=!1),n&&f>t.getLength())return void(this.done=!0);var d=f-t.getPosition(),p=d>0?t.readBytes(d):new Uint8Array(0),y=new Hs(new DataView(p.buffer,p.byteOffset,p.byteLength),As.BIG_ENDIAN),v={parser:this,partialOkay:r||!1,version:c,flags:s,reader:y,size:o,loadedSize:t.getPosition()-i,start:i+e,isComplete:h};u(v)}else{var m=Math.min(i+o-t.getPosition(),t.getLength()-t.getPosition());t.skip(m)}}}}])&&ne(t.prototype,r),n&&ne(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),tl=function(){function e(){ae(this,e)}return ce(e,[{key:"parseInit",value:function(e){}},{key:"parseMedia",value:function(e,t){return[]}}]),e}(),rl=function(){function e(t){ae(this,e),oe(this,"data_",void 0),oe(this,"position_",void 0),this.data_=t,this.position_=0}return ce(e,[{key:"atEnd",value:function(){var e;return this.position_===(null===(e=this.data_)||void 0===e?void 0:e.length)}},{key:"readLine",value:function(){return this.readRegexReturnCapture_(/(.*?)(\n|$)/gm,1)}},{key:"readWord",value:function(){return this.readRegexReturnCapture_(/[^ \t\n]*/gm,0)}},{key:"skipWhitespace",value:function(){this.readRegex(/[ \t]+/gm)}},{key:"readRegex",value:function(e){var t=this.indexOf_(e);return this.atEnd()||null===t||t.position!==this.position_?null:(this.position_+=t.length,t.results)}},{key:"readRegexReturnCapture_",value:function(e,t){if(this.atEnd())return null;var r=this.readRegex(e);return r?r[t]:null}},{key:"indexOf_",value:function(e){e.lastIndex=this.position_;var t=e.exec(this.data_);return null===t?null:{position:t.index,length:t[0].length,results:t}}}]),e}(),nl=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"defaultEquals",value:function(e,t){return!("number"!==typeof e||"number"!==typeof t||!isNaN(e)||!isNaN(t))||e===t}},{key:"equal",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.defaultEquals;if(t.length!==r.length)return!1;for(var i=0;i<t.length;i++)if(!n(t[i],r[i]))return!1;return!0}},{key:"remove",value:function(e,t){var r=e.indexOf(t);r>-1&&e.splice(r,1)}}],(r=null)&&se(t.prototype,r),n&&se(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),il=function(){function e(t,r,n){le(this,e),de(this,"startTime",void 0),de(this,"endTime",void 0),de(this,"payload",void 0),de(this,"direction",zs.HORIZONTAL_LEFT_TO_RIGHT),de(this,"region",new ul),de(this,"position",null),de(this,"positionAlign",Ys.AUTO),de(this,"size",0),de(this,"textAlign",qs.CENTER),de(this,"writingMode",$s.HORIZONTAL_TOP_TO_BOTTOM),de(this,"lineInterpretation",Ks.LINE_NUMBER),de(this,"line",null),de(this,"lineHeight",""),de(this,"lineAlign",Zs.START),de(this,"displayAlign",Ws.AFTER),de(this,"color",""),de(this,"backgroundColor",""),de(this,"backgroundImage",""),de(this,"fontSize",""),de(this,"fontWeight",Xs.NORMAL),de(this,"fontStyle",Js.NORMAL),de(this,"fontFamily",""),de(this,"textDecoration",[]),de(this,"wrapLine",!0),de(this,"id",""),de(this,"nestedCues",[]),de(this,"lineBreak",!1),de(this,"spacer",!1),de(this,"cellResolution",{columns:32,rows:15}),de(this,"border",""),de(this,"letterSpacing",""),de(this,"linePadding",""),de(this,"opacity",1),this.startTime=t,this.endTime=r,this.payload=n}return he(e,[{key:"clone",value:function(){var t=new e(0,0,"");for(var r in this)t[r]=this[r],t[r]&&t[r].constructor===Array&&(t[r]=t[r].slice());return t}}],[{key:"equal",value:function(t,r){for(var n in t)if("nestedCues"===n){if(!nl.equal(t.nestedCues,r.nestedCues,e.equal))return!1}else if("region"===n||"cellResolution"===n){for(var i in t[n])if(t[n][i]!==r[n][i])return!1}else if(Array.isArray(t[n])){if(!nl.equal(t[n],r[n]))return!1}else if(t[n]!==r[n])return!1;return!0}}]),e}();!function(e){e.LEFT="line-left",e.RIGHT="line-right",e.CENTER="center",e.AUTO="auto"}(Ys||(Ys={})),function(e){e.LEFT="left",e.RIGHT="right",e.CENTER="center",e.START="start",e.END="end"}(qs||(qs={})),function(e){e.BEFORE="before",e.CENTER="center",e.AFTER="after"}(Ws||(Ws={})),function(e){e.HORIZONTAL_LEFT_TO_RIGHT="ltr",e.HORIZONTAL_RIGHT_TO_LEFT="rtl"}(zs||(zs={})),function(e){e.HORIZONTAL_TOP_TO_BOTTOM="horizontal-tb",e.VERTICAL_LEFT_TO_RIGHT="vertical-lr",e.VERTICAL_RIGHT_TO_LEFT="vertical-rl"}($s||($s={})),function(e){e[e.LINE_NUMBER=0]="LINE_NUMBER",e[e.PERCENTAGE=1]="PERCENTAGE"}(Ks||(Ks={})),function(e){e.CENTER="center",e.START="start",e.END="end"}(Zs||(Zs={})),function(e){e[e.NORMAL=400]="NORMAL",e[e.BOLD=700]="BOLD"}(Xs||(Xs={})),function(e){e.NORMAL="normal",e.ITALIC="italic",e.OBLIQUE="oblique"}(Js||(Js={})),function(e){e.UNDERLINE="underline",e.LINE_THROUGH="lineThrough",e.OVERLINE="overline"}(Qs||(Qs={}));var ol,al,ul=he((function e(){le(this,e),de(this,"id",""),de(this,"viewportAnchorX",0),de(this,"viewportAnchorY",0),de(this,"regionAnchorX",0),de(this,"regionAnchorY",0),de(this,"width",100),de(this,"height",100),de(this,"heightUnits",ol.PERCENTAGE),de(this,"widthUnits",ol.PERCENTAGE),de(this,"viewportAnchorUnits",ol.PERCENTAGE),de(this,"scroll",al.NONE)}));!function(e){e[e.PX=0]="PX",e[e.PERCENTAGE=1]="PERCENTAGE",e[e.LINES=2]="LINES"}(ol||(ol={})),function(e){e.NONE="",e.UP="up"}(al||(al={}));var cl=r(69899),sl=r(63741).parse,ll=function(){function e(){var t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n={},(r="namespaces")in(t=this)?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n}var t,r,n;return t=e,n=[{key:"getChildren",value:function(e){return Array.from(e.children).filter((function(e){return!(0,cl.H)(e)}))}},{key:"getElementsByTagName",value:function(e,t){var r=[];return function e(n){n.tagName===t&&r.push(n);var i,o=ye(n.children);try{for(o.s();!(i=o.n()).done;){var a=i.value;"string"!==typeof a&&e(a)}}catch(u){o.e(u)}finally{o.f()}}(e),r}},{key:"getElementByTagName",value:function(e,t){var r=null;return function e(n){if(null===r)if(n.tagName!==t){var i,o=ye(n.children);try{for(o.s();!(i=o.n()).done;){var a=i.value;"string"!==typeof a&&e(a)}}catch(u){o.e(u)}finally{o.f()}}else r=n}(e),r}},{key:"setParent",value:function(e){var t=pe(e,{parent:null});return function e(t){var r,n=ye(t.children);try{for(n.s();!(r=n.n()).done;){var i=r.value;"string"!==typeof i&&(i.parent=t,e(i))}}catch(o){n.e(o)}finally{n.f()}}(t),t}},{key:"getTextContent",value:function(e){var t="";return function e(r){var n,i=ye(r.children);try{for(i.s();!(n=i.n()).done;){var o=n.value;"string"===typeof o?t+=o:e(o)}}catch(a){i.e(a)}finally{i.f()}}(e),t}}],(r=[{key:"parse",value:function(e){var t=this,r=sl(e),n=Array.isArray(r)?r:[];return n.forEach((function(e){e.attributes&&Object.keys(e.attributes).forEach((function(r){if(r.startsWith("xmlns")){var n=ve(r.split(":"),2)[1];t.namespaces[e.attributes[r]]=n||"__global"}}))})),n}},{key:"getAttributeNS",value:function(e,t,r){var n="".concat(this.namespaces[t],":").concat(r);return n in e.attributes?e.attributes[n]:null}},{key:"getAttributeNSList",value:function(e,t,r){var n,i=ye(t);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=this.getAttributeNS(e,o,r);if(a)return a}}catch(u){i.e(u)}finally{i.f()}return null}},{key:"findChildrenNS",value:function(e,t,r){var n=this;return e.children.filter((function(e){var i="".concat(n.namespaces[t],":").concat(r);return"string"!==typeof e&&e.tagName===i}))}},{key:"findChildren",value:function(e,t){return e.children?e.children.filter((function(e){return"string"!==typeof e&&e.tagName===t})):[]}},{key:"getContents",value:function(e){var t;return(0,cl.H)(e)?e:e.children.every(cl.H)&&null!==(t=e.children[0].trim())&&void 0!==t?t:null}},{key:"findChildNS",value:function(e,t,r){var n=this.findChildrenNS(e,t,r);return 1!==n.length?null:n[0]}}])&&ge(t.prototype,r),n&&ge(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),fl={amp:"&",quot:'"',apos:"'",lt:"<",gt:">"},hl=r(34780),dl=r(16971),pl=function(e){function t(){return Te(this,t),r.call(this)}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xe(e,t)}(t,e);var r=je(t);return Pe(t,[{key:"parseInit",value:function(e){}},{key:"parseMedia",value:function(e,r){var n=new ll,i=t.parameterNs,o=t.styleNs,a=Gs.x.fromUTF8(e),u=[],c=null;if(!a)return u;try{c=n.parse(function(e){return e.replace(/<br\s*><\/br\s*>/gi,"<br />")}(a))}catch(F){throw new hl.w({isFatal:!1,category:dl.q.MEDIA,code:"YASP_INVALID_SUBTITLES_XML",message:"Failed to parse TTML. "+F,details:{}})}if(!c||!c.length)throw new hl.w({isFatal:!1,category:dl.q.MEDIA,code:"YASP_INVALID_SUBTITLES_XML",message:"Failed to parse TTML.",details:{}});var s=c.filter((function(e){return"tt"===e.tagName})),l=ll.setParent(s[0]);if(!l)throw new hl.w({isFatal:!1,category:dl.q.MEDIA,code:"YASP_INVALID_SUBTITLES_XML",message:"TTML does not contain <tt> tag.",details:{}});var f=ll.getElementByTagName(l,"body");if(!f)return[];var h=n.getAttributeNS(l,i,"frameRate"),d=n.getAttributeNS(l,i,"subFrameRate"),p=n.getAttributeNS(l,i,"frameRateMultiplier"),y=n.getAttributeNS(l,i,"tickRate"),v=n.getAttributeNS(l,i,"cellResolution"),m=l.attributes["xml:space"]||"default",b=n.getAttributeNS(l,o,"extent");if("default"!==m&&"preserve"!==m)throw new hl.w({isFatal:!1,category:dl.q.MEDIA,code:"YASP_INVALID_SUBTITLES_XML",message:"Invalid xml:space value: "+m,details:{}});var g,w="default"===m,_=new yl(h,d,p,y),E=t.getCellResolution(null!==v&&void 0!==v?v:""),O=ll.getElementByTagName(l,"metadata"),S=O?ll.getChildren(O).filter((function(e){return!(0,cl.H)(e)})):[],k=ll.getElementsByTagName(l,"style"),T=ll.getElementsByTagName(l,"region"),R=[],P=Se(T);try{for(P.s();!(g=P.n()).done;){var x=g.value,j=t.parseCueRegion(x,k,b,n);j&&R.push(j)}}catch(B){P.e(B)}finally{P.f()}if(n.findChildren(f,"p").length)throw new hl.w({category:dl.q.MEDIA,code:"YASP_INVALID_SUBTITLES_XML",isFatal:!1,message:"<p> can only be inside <div> in TTML",details:{}});var A,L=Se(n.findChildren(f,"div"));try{for(L.s();!(A=L.n()).done;){var I=A.value;if(n.findChildren(I,"span").length)throw new hl.w({isFatal:!1,category:dl.q.MEDIA,code:"YASP_INVALID_SUBTITLES_XML",message:"<span> can only be inside <p> in TTML",details:{}});var N,D=Se(n.findChildren(I,"p"));try{for(D.s();!(N=D.n()).done;){var C=N.value,M=t.parseCue({cueNode:C,offset:r.periodStart,rateInfo:_,metadataElements:S,styles:k,regionElements:T,cueRegions:R,whitespaceTrim:w,isNested:!1,cellResolution:E,xmlUtils:n,parentNode:I});M&&u.push(M)}}catch(B){D.e(B)}finally{D.f()}}}catch(B){L.e(B)}finally{L.f()}return u}}],[{key:"parseCue",value:function(e){var r,n,i=e.cueNode,o=e.offset,a=e.rateInfo,u=e.metadataElements,c=e.styles,s=e.regionElements,l=e.cueRegions,f=e.whitespaceTrim,h=e.isNested,d=e.cellResolution,p=e.xmlUtils,y=e.parentNode;if(!(n=(r=(0,cl.H)(i)?Ne(function(e,t){return{tagName:"span",attributes:{},children:[e],parent:t}}(i,y)):Ne(i)).parent))return null;var v=Ne(n),m=/\S/.test(r.textContent),b=r.textContent&&!m,g=Boolean(r.children.length),w="br"===r.tagName,_=r.attributes.begin||r.attributes.end||r.attributes.dur;if(!_&&b&&!w){if(!h)return null;if(f)return null}if(!m&&!g&&!_&&!w)return null;for(var E=t.parseTime(r,a),O=E.start,S=E.end;1===(null===(k=v)||void 0===k?void 0:k.nodeType)&&"tt"!==(null===(T=v)||void 0===T?void 0:T.tagName);){var k,T,R=t.resolveTime(v,a,O,S);O=R.start,S=R.end;var P=v.parent;if(!P)break;v=Ne(P)}if(null===O&&(O=0),O+=o,null===S?S=1/0:S+=o,"br"===r.tagName){var x=new il(O,S,"");return x.lineBreak=!0,x}var j="",A=[];if(3===r.nodeType)j=we(r.textContent),f&&(j=(j=j.trim()).replace(/\s+/g," "));else{var L,I=Se(r.children);try{for(I.s();!(L=I.n()).done;){var N=L.value,D=t.parseCue({cueNode:N,offset:o,rateInfo:a,metadataElements:u,styles:c,regionElements:s,cueRegions:l,whitespaceTrim:f,isNested:!0,cellResolution:d,xmlUtils:p,parentNode:r});D&&A.push(D)}}catch(G){I.e(G)}finally{I.f()}}var C=new il(O,S,j);C.nestedCues=A,d&&(C.cellResolution=d);var M=t.getElementsFromCollection(r,"region",s,"",p)[0];if(M&&M.attributes["xml:id"]){var F=M.attributes["xml:id"];C.region=l.filter((function(e){return e.id===F}))[0]}var B=t.getElementsFromCollection(r,"backgroundImage",u,"#",p,t.smpteNs)[0],U=0===A.length;return t.addStyle(C,r,M,B,c,h,U,p),C}},{key:"parseCueRegion",value:function(e,r,n,i){var o=new ul,a=e.attributes["xml:id"];if(!a)return null;o.id=a;var u=null;n&&(u=t.percentValues.exec(n)||t.pixelValues.exec(n));var c=u?Number(u[1]):null,s=u?Number(u[2]):null,l=null,f=null,h=t.getStyleAttributeFromRegion(e,r,"extent",i);h&&null!==(l=(f=t.percentValues.exec(h))||t.pixelValues.exec(h))&&(o.width=null!==c?100*Number(l[1])/c:Number(l[1]),o.height=null!==s?100*Number(l[2])/s:Number(l[2]),o.widthUnits=f||null!==c?ol.PERCENTAGE:ol.PX,o.heightUnits=f||null!==s?ol.PERCENTAGE:ol.PX);var d=t.getStyleAttributeFromRegion(e,r,"origin",i);return d&&null!==(l=(f=t.percentValues.exec(d))||t.pixelValues.exec(d))&&(o.viewportAnchorX=null!==s?100*Number(l[1])/s:Number(l[1]),o.viewportAnchorY=null!==c?100*Number(l[2])/c:Number(l[2]),o.viewportAnchorUnits=f||null!==c?ol.PERCENTAGE:ol.PX),o}},{key:"addStyle",value:function(e,r,n,i,o,a,u,c){var s=i?Ne(i):i,l=a||u;"rtl"===t.getStyleAttribute(r,n,o,"direction",l,c)&&(e.direction=zs.HORIZONTAL_RIGHT_TO_LEFT);var f=t.getStyleAttribute(r,n,o,"writingMode",l,c);"tb"===f||"tblr"===f?e.writingMode=$s.VERTICAL_LEFT_TO_RIGHT:"tbrl"===f?e.writingMode=$s.VERTICAL_RIGHT_TO_LEFT:"rltb"===f||"rl"===f?e.direction=zs.HORIZONTAL_RIGHT_TO_LEFT:f&&(e.direction=zs.HORIZONTAL_LEFT_TO_RIGHT);var h=t.getStyleAttribute(r,n,o,"textAlign",l,c);h?(e.positionAlign=t.textAlignToPositionAlign[h],e.lineAlign=t.textAlignToLineAlign[h],e.textAlign=qs[h.toUpperCase()]):e.textAlign=qs.START;var d=t.getStyleAttribute(r,n,o,"displayAlign",l,c);d&&(e.displayAlign=Ws[d.toUpperCase()]);var p=t.getStyleAttribute(r,n,o,"color",l,c);p&&(e.color=p);var y=t.getStyleAttribute(r,n,o,"backgroundColor",l,c);y&&(e.backgroundColor=y);var v=t.getStyleAttribute(r,n,o,"border",l,c);v&&(e.border=v);var m=t.getStyleAttribute(r,n,o,"fontFamily",l,c);m&&(e.fontFamily=m);var b=t.getStyleAttribute(r,n,o,"fontWeight",l,c);b&&"bold"===b&&(e.fontWeight=Xs.BOLD);var g=t.getStyleAttribute(r,n,o,"wrapOption",l,c);e.wrapLine=!g||"noWrap"!==g;var w=t.getStyleAttribute(r,n,o,"lineHeight",l,c);w&&w.match(t.unitValues)&&(e.lineHeight=w);var _=t.getStyleAttribute(r,n,o,"fontSize",l,c);_&&((_.match(t.unitValues)||_.match(t.percentValue))&&(e.fontSize=_));var E=t.getStyleAttribute(r,n,o,"fontStyle",l,c);if(E&&(e.fontStyle=Js[E.toUpperCase()]),s){var O=s.attributes.imagetype,S=s.attributes.encoding,k=s.textContent.trim();"PNG"===O&&"Base64"===S&&k&&(e.backgroundImage="data:image/png;base64,"+k)}var T=t.getStyleAttribute(r,n,o,"letterSpacing",l,c);T&&T.match(t.unitValues)&&(e.letterSpacing=T);var R=t.getStyleAttribute(r,n,o,"linePadding",l,c);R&&R.match(t.unitValues)&&(e.linePadding=R);var P=t.getStyleAttribute(r,n,o,"opacity",l,c);P&&(e.opacity=parseFloat(P));var x=t.getStyleAttributeFromRegion(n,o,"textDecoration",c);x&&t.addTextDecoration(e,x);var j=t.getStyleAttributeFromElement(r,o,"textDecoration",c);j&&t.addTextDecoration(e,j)}},{key:"addTextDecoration",value:function(e,t){var r,n=Se(t.split(" "));try{for(n.s();!(r=n.n()).done;){switch(r.value){case"underline":e.textDecoration.includes(Qs.UNDERLINE)||e.textDecoration.push(Qs.UNDERLINE);break;case"noUnderline":e.textDecoration.includes(Qs.UNDERLINE)&&nl.remove(e.textDecoration,Qs.UNDERLINE);break;case"lineThrough":e.textDecoration.includes(Qs.LINE_THROUGH)||e.textDecoration.push(Qs.LINE_THROUGH);break;case"noLineThrough":e.textDecoration.includes(Qs.LINE_THROUGH)&&nl.remove(e.textDecoration,Qs.LINE_THROUGH);break;case"overline":e.textDecoration.includes(Qs.OVERLINE)||e.textDecoration.push(Qs.OVERLINE);break;case"noOverline":e.textDecoration.includes(Qs.OVERLINE)&&nl.remove(e.textDecoration,Qs.OVERLINE);break;default:continue}}}catch(i){n.e(i)}finally{n.f()}}},{key:"getStyleAttribute",value:function(e,r,n,i){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=arguments.length>5?arguments[5]:void 0,u=t.getStyleAttributeFromElement(e,n,i,a);return u||(o?t.getStyleAttributeFromRegion(r,n,i,a):null)}},{key:"getStyleAttributeFromRegion",value:function(e,r,n,i){var o=t.styleNs;if(!e)return null;var a=i.getAttributeNS(e,o,n);return a||t.getInheritedStyleAttribute(e,r,n,i)}},{key:"getStyleAttributeFromElement",value:function(e,r,n,i){var o=t.styleNs,a=i.getAttributeNS(e,o,n);return a||t.getInheritedStyleAttribute(e,r,n,i)}},{key:"getInheritedStyleAttribute",value:function(e,r,n,i){for(var o=t.styleNs,a=t.styleEbuttsNs,u=t.getElementsFromCollection(e,"style",r,"",i),c=null,s=0;s<u.length;s++){var l=i.getAttributeNS(u[s],a,n);l||(l=i.getAttributeNS(u[s],o,n)),l||(l=t.getStyleAttributeFromElement(u[s],r,n,i)),l&&(c=l)}return c}},{key:"getElementsFromCollection",value:function(e,r,n,i,o,a){var u=[];if(!e||n.length<1)return u;var c=t.getInheritedAttribute(e,r,o,a);if(c){var s,l=Se(c.split(" "));try{for(l.s();!(s=l.n()).done;){var f,h=s.value,d=Se(n);try{for(d.s();!(f=d.n()).done;){var p=f.value;if(i+p.attributes["xml:id"]===h){u.push(p);break}}}catch(y){d.e(y)}finally{d.f()}}}catch(y){l.e(y)}finally{l.f()}}return u}},{key:"getInheritedAttribute",value:function(e,t,r,n){for(var i=null;e&&!(i=n?r.getAttributeNS(e,n,t):e.attributes[t]);){var o=e.parent;if(null===o)break;e=o}return i}},{key:"resolveTime",value:function(e,r,n,i){var o=t.parseTime(e,r);return null===n?n=o.start:null!==o.start&&(n+=o.start),null===i?i=o.end:null!==o.start&&(i+=o.start),{start:n,end:i}}},{key:"parseTime",value:function(e,r){var n=t.parseTimeAttribute(e.attributes.begin,r),i=t.parseTimeAttribute(e.attributes.end,r),o=t.parseTimeAttribute(e.attributes.dur,r);return null===i&&null!==o&&(i=n+o),{start:n,end:i}}},{key:"parseTimeAttribute",value:function(e,r){var n=null;if(t.timeColonFormatFrames.test(e))n=t.parseColonTimeWithFrames(r,e);else if(t.timeColonFormat.test(e))n=t.parseTimeFromRegex(t.timeColonFormat,e);else if(t.timeColonFormatMilliseconds.test(e))n=t.parseTimeFromRegex(t.timeColonFormatMilliseconds,e);else if(t.timeFramesFormat.test(e))n=t.parseFramesTime(r,e);else if(t.timeTickFormat.test(e))n=t.parseTickTime(r,e);else if(t.timeHMSFormat.test(e))n=t.parseTimeFromRegex(t.timeHMSFormat,e);else if(e)throw new hl.w({isFatal:!1,category:dl.q.MEDIA,code:"YASP_INVALID_TEXT_CUE",details:{},message:"Could not parse cue time range in TTML"});return n}},{key:"parseFramesTime",value:function(e,r){var n=t.timeFramesFormat.exec(r);return n?Number(n[1])/e.frameRate:null}},{key:"parseTickTime",value:function(e,r){var n=t.timeTickFormat.exec(r);return n?Number(n[1])/e.tickRate:null}},{key:"parseColonTimeWithFrames",value:function(e,r){var n=t.timeColonFormatFrames.exec(r);if(!n)return null;var i=Number(n[1]),o=Number(n[2]),a=Number(n[3]),u=Number(n[4]);return(a+=(u+=(Number(n[5])||0)/e.subFrameRate)/e.frameRate)+60*o+3600*i}},{key:"parseTimeFromRegex",value:function(e,t){var r=e.exec(t);if(null===r||""===r[0])return null;var n=Number(r[1])||0,i=Number(r[2])||0,o=Number(r[3])||0;return(Number(r[4])||0)/1e3+o+60*i+3600*n}},{key:"getCellResolution",value:function(e){if(!e)return null;var t=/^(\d+) (\d+)$/.exec(e);return t?{columns:parseInt(t[1],10),rows:parseInt(t[2],10)}:null}}]),t}(tl);Ie(pl,"styleNs","http://www.w3.org/ns/ttml#styling"),Ie(pl,"parameterNs","http://www.w3.org/ns/ttml#parameter"),Ie(pl,"percentValues",/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/),Ie(pl,"percentValue",/^(\d{1,2}(?:\.\d+)?|100)%$/),Ie(pl,"unitValues",/^(\d+px|\d+em|\d*\.?\d+c)$/),Ie(pl,"pixelValues",/^(\d+)px (\d+)px$/),Ie(pl,"timeColonFormatFrames",/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/),Ie(pl,"timeColonFormat",/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/),Ie(pl,"timeColonFormatMilliseconds",/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/),Ie(pl,"timeFramesFormat",/^(\d*(?:\.\d*)?)f$/),Ie(pl,"timeTickFormat",/^(\d*(?:\.\d*)?)t$/),Ie(pl,"timeHMSFormat",new RegExp(["^(?:(\\d*(?:\\.\\d*)?)h)?","(?:(\\d*(?:\\.\\d*)?)m(?!s))?","(?:(\\d*(?:\\.\\d*)?)s)?","(?:(\\d*(?:\\.\\d*)?)ms)?$"].join(""))),Ie(pl,"smpteNs","http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"),Ie(pl,"styleEbuttsNs","urn:ebu:tt:style"),Ie(pl,"textAlignToLineAlign",{left:Zs.START,center:Zs.CENTER,right:Zs.END,start:Zs.START,end:Zs.END}),Ie(pl,"textAlignToPositionAlign",{left:Ys.LEFT,center:Ys.CENTER,right:Ys.RIGHT});var yl=Pe((function e(t,r,n,i){if(Te(this,e),Ie(this,"frameRate",void 0),Ie(this,"subFrameRate",void 0),Ie(this,"tickRate",void 0),this.frameRate=Number(t)||30,this.subFrameRate=Number(r)||1,this.tickRate=Number(i),0===this.tickRate&&(this.tickRate=t?this.frameRate*this.subFrameRate:1),n){var o=/^(\d+) (\d+)$/g.exec(n);if(o){var a=Number(o[1])/Number(o[2]);this.frameRate*=a}}})),vl=function(){function e(){var t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,r="parser",n=new pl,r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n}var t,r,n;return t=e,(r=[{key:"parseInit",value:function(e){var t=!1;if((new el).box("moov",el.children).box("trak",el.children).box("mdia",el.children).box("minf",el.children).box("stbl",el.children).fullBox("stsd",el.sampleDescription).box("stpp",(function(e){t=!0,e.parser.stop()})).parse(e),!t)throw new Error("Can not parseInt while subtitles processing")}},{key:"parseMedia",value:function(e,t){var r=this,n=!1,i=[];if((new el).box("mdat",el.allData((function(e){n=!0,i=i.concat(r.parser.parseMedia(e,t))}))).parse(e,!1),!n)throw new Error("Can not parseInt while subtitles processing.");return i}}])&&De(t.prototype,r),n&&De(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),ml=r(42918),bl=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o.call(this)}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ue(e,t)}(t,e);var r,n,i,o=Ge(t);return r=t,i=[{key:"parseRegion_",value:function(e){var r=new rl(e),n=new ul;r.readWord(),r.skipWhitespace();for(var i=r.readWord();i;)t.parseRegionSetting_(n,i),r.skipWhitespace(),i=r.readWord();return n}},{key:"parseCue_",value:function(e,r,n){if(1===e.length&&!e[0])return null;if(/^NOTE($|[ \t])/.test(e[0]))return null;if("STYLE"===e[0])return null;var i=null;e[0].includes("--\x3e")||(i=e[0],e.splice(0,1));var o=new rl(e[0]),a=t.parseTime_(o),u=o.readRegex(/[ \t]+-->[ \t]+/g),c=t.parseTime_(o);if(null===a||null===u||null===c)return null;r&&(a+=r,c+=r);var s=e.slice(1).join("\n").trim(),l=new il(a,c,s);o.skipWhitespace();for(var f=o.readWord();f;)t.parseCueSetting(l,f,n),o.skipWhitespace(),f=o.readWord();return null!==i&&(l.id=i),l}},{key:"parseCueStyles",value:function(e,r){var n="<span>"+e+"</span>",i=(new ll).parse(n);if(i){var o=[],a=i;if(1===a.length&&3===Ne(a[0]).nodeType)return void(r.payload=e);var u,c=Me(a);try{for(c.s();!(u=c.n()).done;){var s=u.value;t.generateCueFromElement(s,r,o)}}catch(l){c.e(l)}finally{c.f()}r.nestedCues=o}else r.payload=e}},{key:"generateCueFromElement",value:function(e,r,n){var i=Ne(e),o=r.clone();if(1===i.nodeType&&i.tagName){var a,u=Xs.BOLD,c=Js.ITALIC,s=Qs.UNDERLINE,l=Me(e.tagName.split(/[ .]+/));try{for(l.s();!(a=l.n()).done;)switch(a.value){case"b":o.fontWeight=u;break;case"i":o.fontStyle=c;break;case"u":o.textDecoration.push(s);break;default:continue}}catch(p){l.e(p)}finally{l.f()}}if(3===i.nodeType)o.payload=i.textContent,n.push(o);else{var f,h=Me(i.children);try{for(h.s();!(f=h.n()).done;){var d=f.value;(0,cl.H)(d)||t.generateCueFromElement(d,o,n)}}catch(p){h.e(p)}finally{h.f()}}}},{key:"parseCueSetting",value:function(e,r,n){var i=null;if(i=/^align:(start|middle|center|end|left|right)$/.exec(r))t.setTextAlign_(e,i[1]);else if(i=/^vertical:(lr|rl)$/.exec(r))t.setVerticalWritingMode_(e,i[1]);else if(i=/^size:([\d.]+)%$/.exec(r))e.size=Number(i[1]);else if(i=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(r))e.position=Number(i[1]),i[2]&&t.setPositionAlign_(e,i[2]);else{if(!(i=/^region:(.*)$/.exec(r)))return t.parsedLineValueAndInterpretation_(e,r);var o=t.getRegionById_(n,i[1]);o&&(e.region=o)}return!0}},{key:"getRegionById_",value:function(e,t){var r=e.filter((function(e){return e.id===t}));return r.length?r[0]:null}},{key:"parseRegionSetting_",value:function(e,t){var r=null;if(r=/^id=(.*)$/.exec(t))e.id=r[1];else if(r=/^width=(\d{1,2}|100)%$/.exec(t))e.width=Number(r[1]);else if(r=/^lines=(\d+)$/.exec(t))e.height=Number(r[1]),e.heightUnits=ol.LINES;else if(r=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(t))e.regionAnchorX=Number(r[1]),e.regionAnchorY=Number(r[2]);else if(r=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(t))e.viewportAnchorX=Number(r[1]),e.viewportAnchorY=Number(r[2]);else{if(!(r=/^scroll=up$/.exec(t)))return!1;e.scroll=al.UP}return!0}},{key:"setTextAlign_",value:function(e,t){e.textAlign="middle"===t?qs.CENTER:qs[t.toUpperCase()]}},{key:"setPositionAlign_",value:function(e,t){e.positionAlign="line-left"===t||"start"===t?Ys.LEFT:"line-right"===t||"end"===t?Ys.RIGHT:Ys.CENTER}},{key:"setVerticalWritingMode_",value:function(e,t){e.writingMode="lr"===t?$s.VERTICAL_LEFT_TO_RIGHT:$s.VERTICAL_RIGHT_TO_LEFT}},{key:"parsedLineValueAndInterpretation_",value:function(e,t){var r=null;if(r=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))e.lineInterpretation=Ks.PERCENTAGE,e.line=Number(r[1]),r[2]&&(e.lineAlign=Zs[r[2].toUpperCase()]);else{if(!(r=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t)))return!1;e.lineInterpretation=Ks.LINE_NUMBER,e.line=Number(r[1]),r[2]&&(e.lineAlign=Zs[r[2].toUpperCase()])}return!0}},{key:"parseTime_",value:function(e){var t=e.readRegex(/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g);if(null===t)return null;var r=Number(t[1])||0,n=Number(t[2]),i=Number(t[3]),o=Number(t[4]);return n>59||i>59?null:o/1e3+i+60*n+3600*r}}],(n=[{key:"parseInit",value:function(e){}},{key:"parseMedia",value:function(e,r){var n=Gs.x.fromUTF8(e),i=(n=n.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(i[0]))throw new Error("INVALID_TEXT_HEADER");var o=r.segmentStart;null===o&&(o=0);for(var a=[],u=i[0].split("\n"),c=1;c<u.length;c++)if(/^Region:/.test(u[c])){var s=t.parseRegion_(u[c]);a.push(s)}for(var l=[],f=1;f<i.length;f++){u=i[f].split("\n");var h=t.parseCue_(u,o,a);h&&l.push(h)}return l}}])&&Be(r.prototype,n),i&&Be(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(tl),gl=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Xe(Ke(e=o.call(this)),"timescale",null),Xe(Ke(e),"parseInit",(function(t){var r=!1;if((new el).box("moov",el.children).box("trak",el.children).box("mdia",el.children).fullBox("mdhd",(function(t){0===t.version?(t.reader.skip(4),t.reader.skip(4),e.timescale=t.reader.readUint32(),t.reader.skip(4)):(t.reader.skip(8),t.reader.skip(8),e.timescale=t.reader.readUint32(),t.reader.skip(8)),t.reader.skip(4)})).box("minf",el.children).box("stbl",el.children).fullBox("stsd",el.sampleDescription).box("wvtt",(function(){r=!0})).parse(t),!e.timescale)throw new Error("Can not get vtt timescale");if(!r)throw new Error("No WVTT box was found")})),e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&We(e,t)}(t,e);var r,n,i,o=ze(t);return r=t,i=[{key:"parseTFHD",value:function(e,t){return t.skip(4),1&e&&t.skip(8),2&e&&t.skip(4),8&e?t.readUint32():null}},{key:"parseTRUN",value:function(e,t,r){var n=r.readUint32();1&t&&r.skip(4),4&t&&r.skip(4);for(var i=[],o=0;o<n;o++){var a={duration:null,sampleSize:null,timeOffset:null};256&t&&(a.duration=r.readUint32()),512&t&&(a.sampleSize=r.readUint32()),1024&t&&r.skip(4),2048&t&&(a.timeOffset=0===e?r.readUint32():r.readInt32()),i.push(a)}return i}},{key:"parseVTTC",value:function(e,r,n){var i,o,a="";return(new el).box("payl",el.allData((function(e){i=Gs.x.fromUTF8(e)}))).box("iden",el.allData((function(e){o=Gs.x.fromUTF8(e)}))).box("sttg",el.allData((function(e){a=Gs.x.fromUTF8(e)}))).parse(e),i?t.assembleCue(i,o,a,r,n):null}},{key:"assembleCue",value:function(e,t,r,n,i){var o=new il(n,i,e);if(bl.parseCueStyles(e,o),t&&(o.id=t),r)for(var a=new rl(r),u=a.readWord();u;)bl.parseCueSetting(o,u,[]),a.skipWhitespace(),u=a.readWord();return o}}],(n=[{key:"parseMedia",value:function(e,r){var n=this;if(!this.timescale)throw new Error("No init segment for MP4+VTT!");var i=0,o=[],a=new Uint8Array,u=[],c=!1,s=!1,l=!1,f=null;if((new el).box("moof",el.children).box("traf",el.children).fullBox("tfdt",(function(e){c=!0,0!==e.version&&1!==e.version||(i=0===e.version?e.reader.readUint32():e.reader.readUint64())})).fullBox("tfhd",(function(e){null!==e.flags&&(f=t.parseTFHD(e.flags,e.reader))})).fullBox("trun",(function(e){s=!0,null!==e.version&&null!==e.flags&&(o=o.concat(t.parseTRUN(e.version,e.flags,e.reader)))})).box("mdat",el.allData((function(e){l=!0,a=ml.P.concat(a,e)}))).parse(e),!l&&!c&&!s||!a.length)throw new Error("Can not parse mp4 vtt because required box is missing.");var h=i,d=new DataView(a.buffer,a.byteOffset,a.byteLength),p=new Hs(d,As.BIG_ENDIAN);return o.forEach((function(e){var o=e.duration||f,a=e.timeOffset?i+e.timeOffset:h;h=a+(o||0);var c=0;do{var s=p.readUint32();c+=s;var l=p.readUint32(),d=el.typeToString(l),y=null;if("vttc"===d?s>8&&(y=p.readBytes(s-8)):p.skip(s-8),o&&y){if(null===n.timescale)throw new Error("No initial vtt segment");var v=t.parseVTTC(y,r.periodStart+a/n.timescale,r.periodStart+h/n.timescale);u.push(v)}}while(e.sampleSize&&c<e.sampleSize)})),u.filter(Boolean)}}])&&qe(r.prototype,n),i&&qe(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(tl),wl=r(88948),_l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Qe(this,"parser",null),Qe(this,"timestampOffset",0),Qe(this,"appendWindowStart",0),Qe(this,"appendWindowEnd",1/0),Qe(this,"bufferStart",null)}var t,r,n;return t=e,n=[{key:"registerParser",value:function(t,r){e.parserMap[t]=r}}],(r=[{key:"initParser",value:function(t){if("application/cea-608"!==t){var r=e.parserMap[t];this.parser=new r}}},{key:"appendBuffer",value:function(e,t,r){var n=this;return wl.resolve().then((function(){if(n.parser){if(null!==t&&null!==r){var i={periodStart:n.timestampOffset,segmentStart:t,segmentEnd:r},o=n.parser.parseMedia(e,i).filter((function(e){return e.startTime>=n.appendWindowStart&&e.startTime<n.appendWindowEnd}));return null===n.bufferStart&&(n.bufferStart=Math.max(t,n.appendWindowStart)),o}n.parser.parseInit(e)}}))}}])&&Je(t.prototype,r),n&&Je(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();Qe(_l,"parserMap",{}),_l.registerParser("text/vtt",bl),_l.registerParser('text/vtt; codecs="vtt"',bl),_l.registerParser('text/vtt; codecs="wvtt"',bl),_l.registerParser("application/ttml+xml",pl),_l.registerParser('application/mp4; codecs="stpp"',vl),_l.registerParser('application/mp4; codecs="stpp.ttml.im1t"',vl),_l.registerParser('application/mp4; codecs="stpp.TTML.im1t"',vl),_l.registerParser('application/mp4; codecs="wvtt"',gl);var El=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ut(ot(r=o.call(this,e)),"kind",void 0),ut(ot(r),"label",void 0),ut(ot(r),"type","text"),ut(ot(r),"codecs",void 0),r.kind=t.parseKind(e.kind),r.codecs=e.codecs,r.label=e.label||e.language||"Yasp Text Track",r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rt(e,t)}(t,e);var r,n,i,o=nt(t);return r=t,i=[{key:"parseKind",value:function(e){switch(e){case"subtitle":return"subtitles";default:return e}}}],(n=[{key:"getFullMimeType",value:function(){return this.codecs?"".concat(this.mimeType,"; codecs=").concat(JSON.stringify(this.codecs)):this.mimeType}},{key:"appendInitSegment",value:function(e){this.init=e,this.parseSegment(e)}},{key:"parseSegment",value:function(e){var r=this;t.textEngine.initParser(this.getFullMimeType());var n=e.isInitSegment,i=n?null:e.start,o=n?null:e.end,a=e.getChunks(),u=0;a.forEach((function(e){u+=e.length}));var c=new Uint8Array(u),s=0;a.forEach((function(e){c.set(e,s),s+=e.length})),t.textEngine.appendBuffer(c,i,o).then((function(e){if(e){var t=r.presentationTimeOffset/1e3,n=e.map((function e(r){return r.startTime-=t,r.endTime-=t,r.nestedCues&&(r.nestedCues=r.nestedCues.map(e)),r}));r.emit("CuesAdded",n)}}))}}])&&tt(r.prototype,n),i&&tt(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Fs);ut(El,"textEngine",new _l);var Ol,Sl,kl,Tl,Rl,Pl,xl=r(99002),jl=r(93106),Al=r(88948),Ll=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jl.identity;return ft(this,t),wt(bt(e=u.call(this)),"destroyed",!1),wt(bt(e),"closing",!1),wt(bt(e),"closed",!1),wt(bt(e),"paused",!0),wt(bt(e),"flushing",!1),wt(bt(e),"concatBuffer",void 0),wt(bt(e),"buffer",[]),wt(bt(e),"flushBuffer",(function(){if(!e.flushing){e.flushing=!0;for(var t=0;!e.paused&&t<e.buffer.length;)e.emit("Data",e.buffer[t]),t++;e.buffer.splice(0,t),e.flushing=!1,t>0&&0===e.buffer.length&&e.emit("Drain")}})),e.on("Resume",e.flushBuffer),e.once("Destroy",(function(){e.destroyed=!0})),e.concatBuffer=r,e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yt(e,t)}(t,e);var r,n,i,o,a,u=vt(t);return r=t,(n=[{key:"isClosing",value:function(){return this.closing&&!this.destroyed}},{key:"isClosed",value:function(){return this.closed&&!this.destroyed}},{key:"isDestroyed",value:function(){return this.destroyed}},{key:"asWritable",value:function(){return this}},{key:"asReadable",value:function(){return this}},{key:"write",value:function(e){if(this.destroyed)throw new Error("Unexpected write after destroy");if(this.closing)throw new Error("Unexpected write after close");return this.buffer.push(e),this.buffer=this.concatBuffer(this.buffer),this.flushBuffer(),!this.paused&&0===this.buffer.length}},{key:"read",value:(o=st().mark((function e(){var t=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.destroyed){e.next=2;break}throw new Error("Unexpected read after destroy");case 2:if(!this.closed){e.next=4;break}return e.abrupt("return",Al.resolve({value:void 0,done:!0}));case 4:return e.abrupt("return",new Al((function(e,r){var n=function(){r(new Error("Unexpected destroy while read"))},i=function(){e({value:void 0,done:!0})};t.once("Data",(function(r){t.pause(),e({value:r,done:!1}),t.off("Destroy",n),t.off("Close",i)})),t.once("Destroy",n),t.once("Close",i),t.resume()})));case 5:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Al((function(r,n){function i(e){lt(u,r,n,i,a,"next",e)}function a(e){lt(u,r,n,i,a,"throw",e)}var u=o.apply(e,t);i(void 0)}))},function(){return a.apply(this,arguments)})},{key:"pipe",value:function(e){this.on("Data",(function(t){t&&e.write(t)})),this.once("Close",(function(){e.close()})),this.resume()}},{key:"pause",value:function(){this.paused=!0,this.emit("Pause")}},{key:"resume",value:function(){this.paused=!1,this.emit("Resume")}},{key:"destroy",value:function(){this.buffer=[],dt(gt(t.prototype),"destroy",this).call(this)}},{key:"close",value:function(){var e=this;this.closing||(this.closing=!0,this.buffer.length>0?this.once("Drain",(function(){e.closed=!0,e.emit("Close")})):(this.closed=!0,this.emit("Close")))}}])&&ht(r.prototype,n),i&&ht(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(xl.M),Il=r(4364),Nl=r(30371),Dl=r(55543),Cl=function(e){function t(e){var r,n=e.start,i=e.end,a=e.number,u=e.isInitSegment,c=e.trackId,s=e.bitrate,l=e.width,f=e.height,h=e.originalStart;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),jt(Pt(r=o.call(this)),"trackId",void 0),jt(Pt(r),"isInitSegment",void 0),jt(Pt(r),"number",void 0),jt(Pt(r),"start",0),jt(Pt(r),"end",0),jt(Pt(r),"duration",0),jt(Pt(r),"bitrate",void 0),jt(Pt(r),"originalStart",void 0),jt(Pt(r),"width",0),jt(Pt(r),"height",0),jt(Pt(r),"expectedSize",void 0),jt(Pt(r),"loadedRawSize",0),jt(Pt(r),"getLoadingDuration",(function(){return null})),jt(Pt(r),"getWaitingDuration",(function(){return null})),jt(Pt(r),"chunks",[]),jt(Pt(r),"expectedTimeToLoad",Number.MAX_SAFE_INTEGER),jt(Pt(r),"finishedSegment",!1),jt(Pt(r),"failedSegment",!1),jt(Pt(r),"chunkStream",null),r.start=n,r.end=i,r.duration=Math.max(i-n,0),r.number=a,r.bitrate=s,r.expectedSize=s*(r.duration/1e3)/8,r.width=l,r.height=f,r.isInitSegment=u,r.trackId=c,r.originalStart=h,r.loadedRawSize=0,r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kt(e,t)}(t,e);var r,n,i,o=Tt(t);return r=t,i=[{key:"concatChunks",value:function(e){return e.length<2?e:"string"===typeof e[0]?[e.join("")]:[ml.P.concat.apply(ml.P,Et(e))]}}],(n=[{key:"waitingStarted",value:function(){this.getWaitingDuration=(0,Nl.u)()}},{key:"loadingStarted",value:function(){this.getLoadingDuration=(0,Nl.u)()}},{key:"finished",get:function(){return this.finishedSegment}},{key:"failed",get:function(){return this.failedSegment}},{key:"setExpectedSize",value:function(e){isNaN(e)||(this.expectedSize=e)}},{key:"append",value:function(e){var t;this.chunks.push(e),null===(t=this.chunkStream)||void 0===t||t.write(e)}},{key:"finish",value:function(){var e;this.finishedSegment=!0,null===(e=this.chunkStream)||void 0===e||e.close(),this.chunkStream=null,this.emit("Finish")}},{key:"fail",value:function(){this.failedSegment=!0,this.emit("Failed"),this.chunkStream&&this.chunkStream.destroy()}},{key:"setExpectedTimeToLoad",value:function(e){this.expectedTimeToLoad=e}},{key:"getExpectedTimeToLoad",value:function(){if((0,Dl.RW)("yasp_npr_by_segment_info"))return this.expectedTimeToLoad;if(null===this.getLoadingDuration)return this.duration;var e=this.getLoadingDuration();return null===e||0===this.loadedRawSize?this.duration:e*(Math.max(this.expectedSize,this.loadedRawSize)/this.loadedRawSize)-e}},{key:"getChunkStream",value:function(){this.chunkStream||(this.chunkStream=new Ll(t.concatChunks));var e=this.chunkStream;return this.chunks.forEach((function(t){return null===e||void 0===e?void 0:e.write(t)})),this.finished&&(0===this.chunks.length&&(0,Il.L)(new Error("Finished empty segment")),e.close(),this.chunkStream=null),e.asReadable()}},{key:"getChunks",value:function(){return this.chunks}},{key:"getDebugInfo",value:function(){return{chunksCount:this.chunks.length,chunksSize:this.chunks.reduce((function(e,t){return e+t.length}),0),start:this.start,end:this.end,duration:this.duration,finishedSegment:this.finishedSegment,number:this.number,expectedSize:this.expectedSize,loadingDuration:this.getLoadingDuration?this.getLoadingDuration():null,hasChunkStream:null!==this.chunkStream}}}])&&St(r.prototype,n),i&&St(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(xl.M),Ml=r(7177),Fl=r(8682),Bl=r(2615),Ul=r(79298),Gl=r(33125),Vl=function(e){function t(e){var r,n=e.timeline,i=e.mediaState;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),tr(Qt(r=o.call(this)),"timeline",void 0),tr(Qt(r),"mediaState",void 0),tr(Qt(r),"history",[]),tr(Qt(r),"currentBuffering",null),tr(Qt(r),"currentTargetLatency",7e3),r.timeline=n,r.mediaState=i,i.on("BufferingChange",(function(e){r.setBuffering(e)})),r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zt(e,t)}(t,e);var r,n,i,o=Xt(t);return r=t,(n=[{key:"destroy",value:function(){$t(er(t.prototype),"destroy",this).call(this),this.mediaState.off("BufferingChange")}},{key:"notifyTargetLatency",value:function(){this.emit("TargetLatencyUpdate",this.currentTargetLatency)}},{key:"checkIsLiveEdge",value:function(){var e=this.mediaState.currentTime;if(!e)return!1;var t=1e3*e,r=this.checkForType("audio",t);return this.checkForType("video",t)||r}},{key:"checkForType",value:function(e,t){var r=this.timeline.getSegment(e,t).segment;if(!r)return!1;var n=this.timeline.getLastSegmentNumber(e);if(!n)return!1;var i=this.timeline.getMaxSegmentDuration(),o=Math.ceil(7e3/i);return r.number>=n-o}},{key:"setBuffering",value:function(e){if(e){if(this.currentBuffering||!this.checkIsLiveEdge())return;this.currentBuffering={start:Date.now(),getTime:(0,Gl.u)()}}else{var t;if(!this.currentBuffering)return;var r=null===(t=this.currentBuffering)||void 0===t?void 0:t.getTime();this.history.push({start:this.currentBuffering.start,end:this.currentBuffering.start+r,duration:r}),this.currentBuffering=null,this.checkHistory()}}},{key:"getAverageStalledDuration",value:function(){return this.history.reduce((function(e,t){return e+t.duration}),0)/this.history.length}},{key:"checkHistory",value:function(){var e=Date.now();this.history=this.history.filter((function(t){return e-t.end<=2e4})),this.history.length>=2&&(this.currentTargetLatency=this.currentTargetLatency+this.getAverageStalledDuration(),this.notifyTargetLatency(),this.timeline.setTargetLatency(this.currentTargetLatency),this.history=[])}}])&&zt(r.prototype,n),i&&zt(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(xl.M),Hl={avc1:["avc3"],avc3:["avc1"]},Yl=r(69229),ql=r(96702),Wl=r(88948),zl=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),br(vr(e=o.call(this)),"audio",[]),br(vr(e),"text",[]),br(vr(e),"video",[]),br(vr(e),"bufferedInfoChangedPromise",null),br(vr(e),"selectedVideoTrackHeight",void 0),br(vr(e),"selectedVideoTracks",[]),br(vr(e),"selectedAudioLanguage",void 0),br(vr(e),"selectedTextTrack",void 0),br(vr(e),"targetLatency",void 0),br(vr(e),"isFirstUpdateVideoTracks",!0),br(vr(e),"mpd",void 0),br(vr(e),"externalPresentationDelay",void 0);var r=(0,ql.c)(7);return e.targetLatency=1e3*r,e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dr(e,t)}(t,e);var r,n,i,o=pr(t);return r=t,(n=[{key:"checkTrackAvailableToLoad",value:function(e,t){var r;switch(t){case"text":return(null===(r=this.selectedTextTrack)||void 0===r?void 0:r.id)===e;case"video":return 0===this.selectedVideoTracks.length||this.selectedVideoTracks.some((function(t){return e===t.id}));case"audio":if(!this.selectedAudioLanguage)return!0;var n=this.findTrackById(e,t);return(null===n||void 0===n?void 0:n.language)===this.selectedAudioLanguage;default:return!1}}},{key:"setVideoTrack",value:function(e){var t=this.findTrackById(e,"video"),r=t?t.height:void 0;r!==this.selectedVideoTrackHeight&&(this.selectedVideoTrackHeight=r,this.updateSelectedVideoTracks(),this.emit("VideoTrackChange",t?e:"auto"))}},{key:"removeVideoTrack",value:function(e){var t=this.findTrackById(e,"video");if(t){var r=this.video.indexOf(t);this.video.splice(r,1),t.clear(0,1/0);var n,i=this.selectedVideoTrackHeight;void 0!==i&&t.height===i&&(this.updateSelectedVideoTracks(),0===this.selectedVideoTracks.length&&this.setVideoTrack(null===(n=qt(this.video).find((function(e){return e.height<=i})))||void 0===n?void 0:n.id))}}},{key:"updateVideoTracks",value:function(e){var t=this,r=this.getVideoTracksInfo().filter((function(e){return e.id!==Fl.A})).map((function(e){return e.height}));e.forEach((function(e){t.obtainTimelineTrack(sr(sr(sr({},e),e.segmentTemplate),{},{bitrate:e.bandwidth,language:"unknown",type:"video"}))}));var n=[];this.video.map((function(e){return e.id})).forEach((function(r){!e.some((function(e){return e.id===r}))&&(t.removeVideoTrack(r),n.push(r))})),this.updateSelectedVideoTracks();var i=[];this.isFirstUpdateVideoTracks&&(this.isFirstUpdateVideoTracks=!1,i.push(this.getAutoVideoTrackInfo())),this.getVideoTracksInfo().filter((function(e){return e.id!==Fl.A})).forEach((function(e){r.includes(e.height)||i.push({selected:e.height===t.selectedVideoTrackHeight,width:e.width,height:e.height,bitrate:e.bitrate,label:e.label,language:e.language,frameRate:e.frameRate,id:e.id,kind:"main"})})),(i.length||n.length)&&this.emit("VideoTracksChange",{added:i,removed:n})}},{key:"updateSelectedVideoTracks",value:function(){var e=this;this.selectedVideoTracks=this.selectedVideoTrackHeight?this.video.filter((function(t){return t.height===e.selectedVideoTrackHeight})):qt(this.video)}},{key:"setAudioLanguage",value:function(e){var t=this,r=this.audio.find((function(e){return e.language===t.selectedAudioLanguage})),n=this.audio.find((function(t){return t.language===e}));if(n&&e!==this.selectedAudioLanguage){var i=rr(r,n);this.selectedAudioLanguage=e,i||this.emit("CodecsChange",n),this.emit("AudioLanguageChange",e)}}},{key:"setTextTrack",value:function(e){var t;if(this.selectedTextTrack&&this.selectedTextTrack.clear(0,1/0),null!==e){var r=this.text.find((function(t){return t.language===e.language}));r&&(null===r||void 0===r?void 0:r.language)!==(null===(t=this.selectedTextTrack)||void 0===t?void 0:t.language)&&(this.selectedTextTrack=r||this.selectedTextTrack,this.emit("TextTrackChange",this.selectedTextTrack))}else this.selectedTextTrack=void 0}},{key:"getVideoTracksInfo",value:function(){var e,t=this;return[this.getAutoVideoTrackInfo()].concat(or((e=this.video,(0,Bl.z)(e.reduce((function(e,t){return e[t.height]?t.bitrate>e[t.height].bitrate&&(e[t.height]=t):e[t.height]=t,e}),{})).sort((function(e,t){return t.bitrate-e.bitrate}))).map((function(e){return{selected:e.height===t.selectedVideoTrackHeight,width:e.width,height:e.height,bitrate:e.bitrate,label:e.label,language:e.language,frameRate:e.frameRate,id:e.id,kind:"main"}}))))}},{key:"getAutoVideoTrackInfo",value:function(){return{id:Fl.A,selected:void 0===this.selectedVideoTrackHeight,kind:"main",language:"unknown",label:""}}},{key:"getAudioTracksInfo",value:function(){var e=this,t={};return this.audio.forEach((function(r){var n=r.language;n&&(t[n]?r.bitrate>t[n].bitrate&&(t[n].bitrate=r.bitrate):t[n]={selected:n===e.selectedAudioLanguage,id:r.id,label:r.label||"",language:n,kind:"main",bitrate:r.bitrate,channels:r.channels})})),(0,Bl.z)(t)}},{key:"getTextTracksInfo",value:function(){return this.text.map((function(e){return{id:e.id,language:e.language,label:e.label,kind:e.kind}}))}},{key:"getSegmentsForTracks",value:function(e,t){var r=this;if(null===e)return[];switch(t){case"video":return this.selectedVideoTracks.map((function(t){return r.getSegmentForTrack(e,t)})).filter(Boolean);case"audio":return this.audio.filter((function(e){var t;return e.language===(null!==(t=r.selectedAudioLanguage)&&void 0!==t?t:e.language)})).map((function(t){return r.getSegmentForTrack(e,t)})).filter(Boolean);case"text":return this.text.filter((function(e){var t,n;return e.label===(null===(t=r.selectedTextTrack)||void 0===t?void 0:t.label)||e.language===(null===(n=r.selectedTextTrack)||void 0===n?void 0:n.language)})).map((function(t){return r.getSegmentForTrack(e,t)})).filter(Boolean);default:return[]}}},{key:"getSegmentForTrack",value:function(e,t){var r=t.getSegment(e);if((0,Dl.RW)("yasp_abr_loading_segment")&&r)return r;if(t.endTime===e+t.presentationTimeOffset)return this.getLastSegment(t);var n=Math.max(Math.floor(0)),i=0,o=t.segmentSequences.find((function(r,o){i=o;var a=r.time-t.presentationTimeOffset,u=a+r.duration*r.count,c=a<=e&&e<u;return c||(n+=r.count),c}));if(!o)return null;var a=o.time-t.presentationTimeOffset,u=e-a,c=Math.max(0,Math.floor(u/o.duration+1e-4)),s=t.startNumber+(n+c),l=Math.max(a+o.duration*c,0),f=s===o.endNumber,h=t.segmentSequences[i+1],d=Math.max(f&&h?h.time-t.presentationTimeOffset:a+o.duration*(c+1),0),p=t.bitrate,y=o.originalValues.time-o.originalValues.trackPresentationTimeOffset+o.originalValues.duration*c;return new Cl({start:l,end:d,bitrate:p,trackId:t.id,number:s,originalStart:y,isInitSegment:!1,width:"width"in t?t.width:0,height:"height"in t?t.height:0})}},{key:"clear",value:function(e,t){this.audio.forEach((function(r){return r.clear(e,t)})),this.video.forEach((function(r){return r.clear(e,t)})),this.text.forEach((function(r){return r.clear(e,t)}))}},{key:"getDuration",value:function(){var e,t,r=null!==(e=this.video[0])&&void 0!==e?e:this.audio[0];if(void 0!==r)return null!==(t=this.mpd)&&void 0!==t&&t.isDynamic?1/0:r.endTime-r.startTime}},{key:"getMimeTypes",value:function(){return{audio:Array.from(new Set(this.audio.map((function(e){return e.getFullMimeType()})))),video:Array.from(new Set(this.video.map((function(e){return e.getFullMimeType()}))))}}},{key:"getBufferedRanges",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this.audio,n=this.selectedVideoTracks,i=this.text;return this.selectedAudioLanguage&&(r=r.filter((function(t){return t.language===e.selectedAudioLanguage}))),{audio:r.map((function(e){return e.getBufferedRanges(t)})),video:n.map((function(e){return e.getBufferedRanges(t)})),text:i.map((function(e){return e.getBufferedRanges(t)}))}}},{key:"getSeekableRanges",value:function(){return[this.getSeekableRange()]}},{key:"getSegment",value:function(e,t){var r=this,n=[];return("video"===e?this.selectedVideoTracks:this.audio.filter((function(e){var t;return e.language===(null!==(t=r.selectedAudioLanguage)&&void 0!==t?t:e.language)}))).forEach((function(e){var r=e.getSegment(t);r&&n.push({track:e,segment:r})})),At(n,(function(e){return e.track.bitrate}))||{track:void 0,segment:void 0}}},{key:"getInitialSegment",value:function(e,t){var r=("video"===e?this.video:this.audio).find((function(e){return e.id===t}));return(null===r||void 0===r?void 0:r.getInitSegment())||void 0}},{key:"obtainTimelineTrack",value:function(e){var t=this,r=this[e.type];"audio"===e.type&&(this.selectedAudioLanguage=this.selectedAudioLanguage||e.language||void 0);var n=r.find((function(t){return t.id===e.id}));if(n)return n.updateTrack(e),n;var i=function(e){switch(e.type){case"audio":return new Bs(e);case"video":return new Us(e);case"text":return new El(e);default:throw new Error("Unexpected TimelineTrack#type=".concat(e.type))}}(e);return r.push(i),i.on("BufferedInfoChanged",(function(){return t.emitBufferedInfoChanged()})),"text"===i.type&&i.on("CuesAdded",(function(e){t.emit("CuesAdded",{cues:e,label:i.label})})),i}},{key:"sortTracksInTimeline",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["video","audio","text"];t.forEach((function(t){e.sortTracksInTimelineByType(t)}))}},{key:"sortTracksInTimelineByType",value:function(e){var t=this.getFirstLangsAppearanceInTimeline(e);this[e].sort((function(e,r){return e.language===r.language?r.bitrate-e.bitrate:t.get(e.language)-t.get(r.language)}))}},{key:"getFirstLangsAppearanceInTimeline",value:function(e){var t=new Map;return this[e].forEach((function(e,r){t.has(e.language)||t.set(e.language,r)})),t}},{key:"findTrackById",value:function(e,t){return this[t].find((function(t){return t.id===e}))}},{key:"emitBufferedInfoChanged",value:function(){var e,t=this;this.bufferedInfoChangedPromise=null!==(e=this.bufferedInfoChangedPromise)&&void 0!==e?e:Wl.resolve().then((function(){var e=t.getBufferedRanges(),r=Ut(e.video),n=Ut(e.audio);t.emit("BufferedInfoChanged",{video:r.map((function(e){return{start:e.start/1e3,end:e.end/1e3}})),audio:n.map((function(e){return{start:e.start/1e3,end:e.end/1e3}})),total:Gt(r,n).map((function(e){return{start:e.start/1e3,end:e.end/1e3}}))})})).then((function(){t.bufferedInfoChangedPromise=null}))}},{key:"getLastSegment",value:function(e){var t=e.segmentSequences[e.segmentSequences.length-1];if(!t)return null;var r=Math.max(0,t.time-e.presentationTimeOffset+t.duration*(t.count-1)),n=Math.max(r+t.duration,0),i=e.bitrate,o=t.originalValues.time-t.originalValues.trackPresentationTimeOffset+t.originalValues.duration*(t.count-1);return new Cl({start:r,end:n,bitrate:i,trackId:e.id,number:e.endNumber,originalStart:o,isInitSegment:!1,width:"width"in e?e.width:0,height:"height"in e?e.height:0})}},{key:"getDebugInfo",value:function(e){var t,r,n;return{audio:this.audio.map((function(e){return e.getDebugInfo()})),video:this.video.map((function(e){return e.getDebugInfo()})),text:this.text.map((function(e){return e.getDebugInfo()})),selectedVideoTracks:this.selectedVideoTracks.map((function(e){return e.getDebugInfo()})),selectedVideoTrackHeight:null!==(t=this.selectedVideoTrackHeight)&&void 0!==t?t:null,selectedAudioLanguage:null!==(r=this.selectedAudioLanguage)&&void 0!==r?r:null,selectedTextTrack:null!==(n=this.selectedTextTrack)&&void 0!==n?n:null,mpd:this.mpd,externalPresentationDelay:this.externalPresentationDelay,isLive:this.getIsDynamic(),isLowLatency:this.isLowLatencyLive(),segmentDebugInfo:void 0!==e?this.getSegmentsDebugInfo(e):void 0}}},{key:"updateStreamEndTime",value:function(){var e,t=null!==(e=this.video[0])&&void 0!==e?e:this.audio[0];t.endTime&&this.emit("StreamEndTimeUpdate",t.endTime-t.presentationTimeOffset)}},{key:"applyMpd",value:function(e){var t;this.mpd=sr(sr({},e),{},{presentationDelay:null!==(t=this.externalPresentationDelay)&&void 0!==t?t:e.presentationDelay}),this.updateStreamEndTime()}},{key:"getIsDynamic",value:function(){var e;return(null===(e=this.mpd)||void 0===e?void 0:e.isDynamic)||!1}},{key:"isLowLatencyLive",value:function(){var e;return this.getIsDynamic()&&0!==(null===(e=this.mpd)||void 0===e?void 0:e.availabilityTimeOffset)}},{key:"getLiveEdge",value:function(){var e;if(null===(e=this.mpd)||void 0===e||!e.isDynamic)return this.getDuration()||0;if(null===this.mpd.presentationStartTime)throw new Error("Cannot compute live edge without presentationStartTime");return Date.now()+this.mpd.clockOffset-this.mpd.maxSegmentDuration-this.mpd.presentationStartTime}},{key:"getMaxSegmentDuration",value:function(){var e;return(null===(e=this.mpd)||void 0===e?void 0:e.maxSegmentDuration)||5e3}},{key:"getSeekableRange",value:function(){return{start:this.getSeekRangeStart(),end:this.getSeekRangeEnd()}}},{key:"getSeekRangeStart",value:function(){var e;if(null===(e=this.mpd)||void 0===e||!e.isDynamic)return 0;var t=!isFinite(this.mpd.segmentAvailabilityDuration),r=t?this.mpd.minSegmentStartTime-this.mpd.publishTime:this.mpd.presentationStartTime?this.mpd.minSegmentStartTime-this.mpd.presentationStartTime:this.mpd.minSegmentStartTime;if(t)return Math.max(0,r);var n=this.getLiveEdge()+this.mpd.availabilityTimeOffset-this.mpd.segmentAvailabilityDuration,i=Math.min(n,this.getSeekRangeEnd());return Math.max(r,i)}},{key:"getSeekRangeEnd",value:function(){var e;if(null===(e=this.mpd)||void 0===e||!e.isDynamic)return this.getDuration()||0;var t=this.isLowLatencyLive()?0:this.mpd.presentationDelay,r=this.getLiveEdge()+this.mpd.availabilityTimeOffset-t;if(!this.isLowLatencyLive())return Math.max(0,r);var n=r+this.mpd.presentationStartTime,i=Date.now()+this.mpd.clockOffset,o=Math.min(n,i-this.targetLatency);return Math.max(o-this.mpd.presentationStartTime,0)}},{key:"getUtcStartTime",value:function(){var e,t,r;return null!==(e=this.mpd)&&void 0!==e&&e.isDynamic?this.mpd.isDynamic&&!isFinite(this.mpd.segmentAvailabilityDuration)?this.mpd.publishTime:0:null!==(t=null===(r=this.mpd)||void 0===r?void 0:r.publishTime)&&void 0!==t?t:0}},{key:"setPresentationDelay",value:function(e){var t;this.externalPresentationDelay=null!==(t=this.externalPresentationDelay)&&void 0!==t?t:e}},{key:"getEmsgSchemeIdUris",value:function(){var e;return null===(e=this.mpd)||void 0===e?void 0:e.emsgSchemeIdUris}},{key:"getLastSegmentNumber",value:function(e){var t=this[e][0];return t?t.endNumber:null}},{key:"setTargetLatency",value:function(e){this.targetLatency=e}},{key:"getSegmentsDebugInfo",value:function(e){return{audio:this.getSegmentsDebugInfoByType("audio",e),video:this.getSegmentsDebugInfoByType("video",e)}}},{key:"getSegmentsDebugInfoByType",value:function(e,t){return this[e].reduce((function(e,r){return(0,Yl.J)(r.getSegmentsDebugInfo(t)).forEach((function(t){var r=ir(t,2),n=r[0],i=r[1];e[n]+=i})),e}),{playedRawSize:0,playedSegmentCount:0,activeRawSize:0,activeSegmentCount:0})}},{key:"getTotalRawSizeByType",value:function(e){return this[e].reduce((function(e,t){var r=t.getSegmentsDebugInfo(0);return e+r.playedRawSize+r.activeRawSize}),0)}},{key:"getTotalRawSize",value:function(){return this.getTotalRawSizeByType("audio")+this.getTotalRawSizeByType("video")}},{key:"destroy",value:function(){var e=this;fr(mr(t.prototype),"destroy",this).call(this),["audio","video","text"].forEach((function(t){e[t].forEach((function(e){return e.destroy()}))})),this.audio=[],this.video=[],this.text=[]}}])&&lr(r.prototype,n),i&&lr(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(xl.M),$l=r(77922),Kl=(new Map).set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",$l.ly).set("urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",$l.xE).set("urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95",$l.xE).set("urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e",$l.dn).set("urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",$l.dn),Zl=function(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:null!==t&&void 0!==t?t:[]}},Xl=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parser=t}var t,r,n;return t=e,(r=[{key:"parse",value:function(e){var t,r=this.parseElements(e),n=null,i=[],o=new Set(r.map((function(e){return e.keyId})).filter((function(e){return null!==e})));if(o.size>1)throw new hl.w({code:"YASP_DASH_CONFLICTING_KEY_IDS",isFatal:!0,message:"Dash manifest has conflicting ids: ".concat(Array.from(o).join(",")),details:{},category:dl.q.DRM});t=r.filter((function(e){return"urn:mpeg:dash:mp4protection:2011"!==e.schemeUri||(n=e.init||n,!1)}));var a=Array.from(o)[0]||null;return t.length&&(i=this.convertElements(n,t,a)),{defaultKeyId:a,defaultInit:n,drmInfos:i}}},{key:"convertElements",value:function(e,t,r){var n,i=[],o=wr(t);try{for(o.s();!(n=o.n()).done;){var a=n.value,u=Kl.get(a.schemeUri);if(u){var c=this.getInitDataFromPro(a),s=null;"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"!==a.schemeUri&&"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b"!==a.schemeUri||(s=this.getClearKeyInitData(a,r));var l=c||s||a.init||e,f=Zl(u,l);i.push(f)}}}catch(h){o.e(h)}finally{o.f()}return i}},{key:"parseElements",value:function(e){var t,r=[],n=wr(e);try{for(n.s();!(t=n.n()).done;){var i=t.value,o=this.parseElement(i);o&&r.push(o)}}catch(a){n.e(a)}finally{n.f()}return r}},{key:"getInitDataFromPro",value:function(e){var t=this.parser.findChildNS(e.node,"urn:microsoft:playready","pro");if(!t)return null;var r=this.parser.getContents(t);if(!r)return null;var n=ml.P.fromBase64(r),i=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),o=e.keyId,a=this.createPssh(n,i,o?[o]:[],0);return a?[{initData:a,initDataType:"cenc",keyId:o}]:null}},{key:"createPssh",value:function(e,t,r,n){var i=new Set(r),o=e.length,a=12+t.length+4+o;n>0&&(a+=20);var u=new ArrayBuffer(a),c=new Uint8Array(u),s=new DataView(u),l=0;if(s.setUint32(l,a),l+=4,s.setUint32(l,1886614376),l+=4,n<1?s.setUint32(l,0):s.setUint32(l,16777216),l+=4,c.set(t,l),l+=t.length,n>0){s.setUint32(l,i.size),l+=4;var f,h=wr(i);try{for(h.s();!(f=h.n()).done;){var d=f.value,p=ml.P.fromHex(d);c.set(p,l),l+=p.length}}catch(y){h.e(y)}finally{h.f()}}return s.setUint32(l,o),l+=4,c.set(e,l),(l+=o)===a?ml.P.toBase64(c):null}},{key:"parseElement",value:function(e){var t=this,r=e.attributes.schemeIdUri,n=this.parser.getAttributeNS(e,"urn:mpeg:cenc:2013","default_KID"),i=this.parser.findChildrenNS(e,"urn:mpeg:cenc:2013","pssh").map((function(e){return t.parser.getContents(e)}));if(!r)return null;if(r=r.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase()).includes(" "))throw new hl.w({code:"YASP_DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED",isFatal:!0,message:"Representation with multiple keyIds is not supported: (".concat(n,")"),details:{},category:dl.q.DRM});var o=i.map((function(e){return{initDataType:"cenc",initData:e,keyId:null}}));return{node:e,schemeUri:r,keyId:n,init:o.length>0?o:null}}},{key:"getKeyIdsForClearKey",value:function(e){if(!e)return[];var t=ml.P.fromBase64(e),r=new DataView(t.buffer),n=r.byteOffset,i=r.byteLength,o=0,a=r.getUint32(o);o+=4;var u=r.getUint32(o);if(o+=4,i<a)return[];if(1886614376!==u)return[];var c=r.getUint32(o)>>>24;if(o+=4,0!==c&&1!==c)return[];var s=r.buffer;o+=16;var l=r.getUint32(o);if(o+=4,!l||i<n+o+32*l)return[];for(var f=[],h=0;h<l;h++){var d=new Uint8Array(s,n+o+32*h,32);f.push(Gs.x.fromBytesAutoDetect(d))}return f}},{key:"getClearKeyInitData",value:function(e,t){var r,n=null===(r=e.init)||void 0===r?void 0:r[0].initData,i=t||this.getKeyIdsForClearKey(n)[0]||e.keyId;if(!i)return null;var o=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),a=new Uint8Array([]);return[{initData:this.createPssh(a,o,[i],1),initDataType:"cenc",keyId:i}]}}])&&Er(t.prototype,r),n&&Er(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Jl=["segmentTemplate","mimeType"],Ql=["segmentTemplate","mimeType"],ef=["segmentTemplate","mimeType"],tf=r(88891),rf=["urn:mpeg:dash:utc:direct:2014","urn:mpeg:dash:utc:direct:2012"],nf=[].concat(rf),of=r(54651),af=r(55176),uf=r(88948),cf=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),pn(this,"body",void 0),pn(this,"status",void 0),pn(this,"headers",void 0),pn(this,"textPromise",void 0),this.body=r,this.status=t.status,this.headers=function(e){var t=[];return e.getAllResponseHeaders().trim().split("\r\n").forEach((function(e){var r=cn(e.split(":")),n=r[0],i=r.slice(1);t.push([i.join(":"),n])})),{forEach:function(e){t.forEach((function(t){var r=un(t,2),n=r[0],i=r[1];e(n,i)}))}}}(t),this.textPromise=new uf((function(e,r){t.addEventListener("load",(function(){e(t.response)})),t.addEventListener("abort",(function(){var e=new Error("Stretch request aborted");e.name="AbortError",r(e)}))})),(0,af.v)(this.textPromise)}var t,r,n;return t=e,(r=[{key:"text",value:function(){return this.textPromise}}])&&dn(t.prototype,r),n&&dn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),sf=r(88948),lf={done:!0,value:void 0},ff=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),vn(this,"dataStream",void 0),vn(this,"readRequest",void 0),vn(this,"storedError",void 0),vn(this,"onCancel",void 0),this.dataStream=new Ll,this.readRequest=null,this.storedError=null,this.onCancel=t}var t,r,n;return t=e,(r=[{key:"read",value:function(){var e=this;return new sf((function(t,r){return e.readRequest={resolve:t,reject:r},e.dataStream.isDestroyed()?r(e.storedError||new Error("Unexpected read after stream destroy")):e.dataStream.isClosed()?t(lf):(e.dataStream.once("Data",(function(r){e.dataStream.pause(),t({done:!1,value:r})})),void e.dataStream.resume())}))}},{key:"cancel",value:function(){this.dataStream.destroy(),this.onCancel()}},{key:"throw",value:function(e){this.dataStream.isDestroyed()||this.dataStream.isClosing()||(this.storedError=e,this.dataStream.destroy(),this.readRequest&&(this.readRequest.reject(e),this.readRequest=null))}},{key:"write",value:function(e){this.dataStream.isDestroyed()||this.dataStream.write(e)}},{key:"close",value:function(){this.dataStream.close()}}])&&yn(t.prototype,r),n&&yn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),hf=r(71729),df="undefined"!==typeof fetch&&"undefined"!==typeof ReadableStream&&"undefined"!==typeof(0,hf.Y)((function(){return new AbortController})),pf=df?"arraybuffer":mn("moz-chunked-arraybuffer")||mn("ms-stream")||"arraybuffer",yf=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),gn(this,"readerInited",!1),gn(this,"reader",void 0),gn(this,"xhr",void 0),this.xhr=t,this.reader=new ff((function(){return t.abort()}))}var t,r,n;return t=e,(r=[{key:"throwReaderError",value:function(e){return this.reader.throw(e)}},{key:"getReader",value:function(){return this.initReader(this.xhr,pf),this.reader}},{key:"initReader",value:function(e,t){var r=this;if(this.readerInited)throw new Error("Unexpected second call StretchBody#initReader()");switch(this.readerInited=!0,e.responseType=t,t){case"arraybuffer":e.addEventListener("load",(function(){e.response&&r.reader.write(new Uint8Array(e.response)),r.reader.close()}));break;case"moz-chunked-arraybuffer":e.addEventListener("progress",(function(){r.reader.write(new Uint8Array(e.response))})),e.addEventListener("load",(function(){r.reader.close()}));break;case"ms-stream":e.addEventListener("readystatechange",(function(){if(e.readyState===XMLHttpRequest.LOADING){var t=0,n=new(0,self.MSStreamReader);n.onprogress=function(){n.result.byteLength>t&&(r.reader.write(new Uint8Array(n.result,t)),t=n.result.byteLength)},n.onload=r.reader.close.bind(r.reader),n.readAsArrayBuffer(e.response)}}))}}}])&&bn(t.prototype,r),n&&bn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),vf=r(88948),mf=df?fetch:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new vf((function(r,n){var i=t.method,o=void 0===i?"GET":i,a=t.body,u=void 0===a?null:a,c=new XMLHttpRequest;for(var s in c.open(o,e),t.headers)t.headers.hasOwnProperty(s)&&c.setRequestHeader(s,t.headers[s]);"include"===t.credentials&&(c.withCredentials=!0);var l=new yf(c);c.addEventListener("readystatechange",(function e(){c.readyState===XMLHttpRequest.HEADERS_RECEIVED&&(c.removeEventListener("readystatechange",e),r(new cf(c,l)))}));var f=function(){c.abort();var e=new Error("request aborted");e.name="AbortError",l.throwReaderError(e),n(e)};if(t.signal){if(t.signal.aborted)return void f();t.signal.addEventListener("abort",f)}c.addEventListener("error",(function(){var e=new Error("network error");l.throwReaderError(e),n(e)})),c.send(u)}))},bf=r(36307),gf=r(63487),wf=r(51153),_f=["SupplementalProperty","S","AudioChannelConfiguration","Role"],Ef=r(88891),Of=function(e){if(e){var t=(new Ef(e).pathname.split("/").pop()||"").split(".");return t.length>1?t.pop():void 0}},Sf=r(88948),kf=r(88891),Tf=function(e,t){return"".concat(e,"/").concat(new kf(t).pathname.split("/").pop())},Rf=function(){return navigator.storage.getDirectory()},Pf={downloadedFragments:{},createFileWritableStream:(Tl=jn(Pn().mark((function e(t){var r,n;return Pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nn(t,!0);case 2:return r=e.sent,e.next=5,r.createWritable();case 5:return n=e.sent,Pf.downloadedFragments[t]=!0,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)}))),function(e){return Tl.apply(this,arguments)}),fetchFromFs:(kl=jn(Pn().mark((function e(t,r){var n,i,o,a;return Pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("Store path is not defined");case 2:return n=Of(r),e.next=5,Cn(Tf(t,r));case 5:return i=e.sent,o=i.body,a=i.size,e.abrupt("return",In("mpd"===n?o:o.stream(),{size:a}));case 9:case"end":return e.stop()}}),e)}))),function(e,t){return kl.apply(this,arguments)}),getParsedJSON:(Sl=jn(Pn().mark((function e(t){var r,n,i;return Pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cn(t);case 2:return r=e.sent,n=r.body,e.next=6,n.text();case 6:return i=e.sent,e.abrupt("return",JSON.parse(i));case 8:case"end":return e.stop()}}),e)}))),function(e){return Sl.apply(this,arguments)}),removeDirectory:(Ol=jn(Pn().mark((function e(t){var r,n,i;return Pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rf();case 2:return r=e.sent,e.next=5,r.getDirectoryHandle("streams");case 5:return n=e.sent,i=n.removeEntry(t,{recursive:!0}),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)}))),function(e){return Ol.apply(this,arguments)})},xf={handleStart:function(e,t,r){t&&(Pf.createFileWritableStream("".concat(e,"/manifest.mpd")).then((function(e){e.write(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_f,r=['<?xml version="1.0" encoding="UTF-8"?>'],n=function e(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(null!==n&&void 0!==n&&n.tagName){var o="".padStart(4*i,"    "),a=-1!==t.indexOf(n.tagName);o+="<".concat(n.tagName);var u=n.attributes&&Object.entries(n.attributes).map((function(e){var t=wn(e,2),r=t[0],n=t[1];return" ".concat(r,'="').concat(n,'"')})).join("");if(u&&(o+="".concat(u)),a)return o+="/>",void r.push(o);o+=">",r.push(o),Array.isArray(n.children)&&1===n.children.length&&"string"===typeof n.children[0]?r.push("".padStart(4*(i+1),"    ")+n.children[0]):n.children.forEach((function(t){e(t,i+1)})),o="".padStart(4*i,"    "),o+="</".concat(n.tagName,">"),r.push(o)}};return n(e),r.push(""),r.join("\n")}(r?function(e,t){e.children=[{tagName:"BaseURL",attributes:{},children:["".concat("fs:","//").concat("streams","/")]}].concat(_n(e.children.filter((function(e){return"BaseURL"!==e.tagName}))));var r=e.children.find((function(e){return"Period"===e.tagName}));if(t.videoTrackId){var n=null===r||void 0===r?void 0:r.children.find((function(e){return"video/mp4"===e.attributes.mimeType}));n&&(n.children=n.children.filter((function(e){return"SupplementalProperty"===e.tagName||e.attributes.id===t.videoTrackId})))}return t.audioLang&&r&&(r.children=r.children.filter((function(e){return"audio/mp4"!==e.attributes.mimeType||e.attributes.lang===t.audioLang}))),t.textTrack&&r&&(r.children=r.children.filter((function(e){var r;return"text/vtt"!==e.attributes.mimeType||e.attributes.lang===(null===t||void 0===t||null===(r=t.textTrack)||void 0===r?void 0:r.language)}))),e}(t,r):t)).then((function(){return e.close()}))})),r&&Pf.createFileWritableStream("".concat(e,"/config.json")).then((function(e){null===e||void 0===e||e.write(JSON.stringify({tracks:r})).then((function(){return e.close()}))})))},handlePause:(Rl=jn(Pn().mark((function e(t){var r,n,i;return Pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/config.json"),e.next=3,Pf.getParsedJSON(r);case 3:n=e.sent,i=Tn(Tn({},n),{},{downloadedFragments:Pf.downloadedFragments}),Pf.createFileWritableStream(r).then((function(e){null===e||void 0===e||e.write(JSON.stringify(i)).then((function(){return e.close()}))}));case 6:case"end":return e.stop()}}),e)}))),function(e){return Rl.apply(this,arguments)})},jf=r(901),Af=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Gn(this,t),$n(Wn(e=o.call(this)),"baseParams",void 0),$n(Wn(e),"storePath",void 0),$n(Wn(e),"lowLatency",!1),e.baseParams=r,r.storePath&&(e.storePath=r.storePath),e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hn(e,t)}(t,e);var r,n,i,o=Yn(t);return r=t,(n=[{key:"setIsLL",value:function(e){this.lowLatency=e}},{key:"isLL",value:function(){return this.lowLatency}},{key:"setBaseParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.baseParams=e}},{key:"performRequest",value:function(e,t){var r=this,n=new bf.H,i=Un(Un(Un({},this.baseParams),t),{},{headers:Un(Un({},this.baseParams.headers),t.headers),signal:n.signal}),o={canceled:!1,timeout:!1,downloadedBytes:0},a=(0,Nl.u)();if(Pf.downloadedFragments[Tf(this.storePath,e)])return function(e,t,r,n){var i=new Sf((function(e){setTimeout((function(){e({value:void 0,done:!0})}),0)})),o={getReader:function(){return{read:function(){return i}}}};return{abort:e,responsePromise:Sf.resolve(In(o)),timeoutId:void 0,requestState:t,signal:r,getRtt:n,isSkipFragment:!0}}(n.abort,o,i.signal,a);var u=("fs:"===(0,jf.en)(e).protocol?Pf.fetchFromFs(this.storePath,e):mf(e,i)).catch((function(e){if(o.canceled)throw new Error("Request canceled");if(o.timeout)throw new Error("Request timed out");throw e})),c="number"===typeof i.timeout?setTimeout((function(){o.timeout=!0,n.abort()}),i.timeout):void 0;return u.then((function(e){var t={};e.headers.forEach((function(e,r){t[r]=e})),r.emit("RequestTtfb",a())})).catch(gf.Z),{abort:function(){o.canceled=!0,c&&clearTimeout(c),n.abort()},responsePromise:u,timeoutId:c,requestState:o,signal:i.signal,getRtt:a,isSkipFragment:!1}}},{key:"parseServerTime",value:function(e,t){if(e.date||e["x-server-time-ms"]){var r=NaN;e["x-server-time-ms"]?r=new Date(parseInt(e["x-server-time-ms"],10)).getTime():e.date&&(r=new Date(e.date).getTime()),isFinite(r)&&this.emit("ServerTimeChange",r+t/2)}}},{key:"fetch",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.performRequest(e,r),i=n.abort,o=n.responsePromise,a=n.timeoutId,u=n.getRtt;return{abort:i,response:o.then((function(e){a&&clearTimeout(a);var r={};return e.headers.forEach((function(e,t){r[t]=e})),t.parseServerTime(r,u()),{status:e.status,headers:r,body:e.text()}}))}}},{key:"progress",value:function(e,t,r){this.emit("Progress",{time:e,size:t,isLowLatency:r})}},{key:"fetchDataStream",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.performRequest(e,r),i=n.abort,o=n.responsePromise,a=n.timeoutId,u=n.requestState,c=n.signal,s=n.isSkipFragment,l=new Ll,f=s||"fs:"===(0,jf.en)(e).protocol?void 0:this.storePath,h=f?Pf.createFileWritableStream(Tf(f,e)):void 0;l.once("Close",(function(){var e;null===(e=h)||void 0===e||e.then((function(e){return e.close()})),h=void 0})),l.once("Destroy",(function(){var e;null===(e=h)||void 0===e||e.then((function(e){return e.close()})),h=void 0})),c.addEventListener("abort",(function(){l.destroy()}));var d,p=!1,y=function(){p=!0,i(),l.destroy()};return(0,Dl.RW)("yasp_enable_new_timeout")&&(d=setTimeout((function(){u.timeout=!0,i()}),Math.max((0,Dl.jS)("yasp_headers_timeout"),r.timeout||0))),{requestState:u,abort:y,response:o.then((function(r){var n;clearTimeout(d);var o=function(){(0,Dl.RW)("yasp_enable_new_timeout")&&(clearTimeout(n),l.isClosed()||l.isClosing()||l.isDestroyed()||(n=setTimeout((function(){u.timeout=!0,i()}),(0,Dl.jS)("yasp_body_timeout"))))};o();var c={};t.on("Destroy",y),r.headers.forEach((function(e,t){c[t]=e}));var s=r.body.getReader(),v=(0,wf.I)((function(){t.off("Destroy",y),t.emit("ResponseEnd")}));return l.once("Destroy",v),l.once("Close",v),t.emit("ResponseStart"),function t(){p||s.read().then((function(r){var n,i=r.done,c=r.value;(o(),p)||(void 0!==c&&(u.downloadedBytes+=c.length,f&&"fs:"!==(0,jf.en)(e).protocol?null===(n=h)||void 0===n||n.then((function(e){return e.write(c)})):l.write(c)),i?(l.close(),a&&clearTimeout(a)):t())})).catch((function(e){if("AbortError"!==(null===e||void 0===e?void 0:e.name)&&l.destroy(),"AbortError"!==(null===e||void 0===e?void 0:e.name)&&"network error"!==(null===e||void 0===e?void 0:e.message))throw e}))}(),{status:r.status,headers:c,body:l}}))}}},{key:"getDebugInfo",value:function(){return{baseParams:this.baseParams}}}])&&Vn(r.prototype,n),i&&Vn(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(xl.M),Lf=r(73480),If=r(70442),Nf=r(53564),Df=r(88891),Cf=r(99117),Mf=r(5052),Ff=r(88948),Bf=r(88891),Uf=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ai(xi(r=u.call(this)),"url",void 0),Ai(xi(r),"fetcher",void 0),Ai(xi(r),"timeline",void 0),Ai(xi(r),"parser",void 0),Ai(xi(r),"mpd",null),Ai(xi(r),"xml",""),Ai(xi(r),"session",""),Ai(xi(r),"attempt",0),Ai(xi(r),"baseUrls",[]),Ai(xi(r),"drmInfos",[]),Ai(xi(r),"playlistCapHeight",null),Ai(xi(r),"lastUpdateDuration",0),Ai(xi(r),"aborted",!1),Ai(xi(r),"abortFn",null),r.url=e.url,r.timeline=e.timeline,r.parser=new ll,r.fetcher=new Af(e.fetcherParams),r.fetcher.on("ServerTimeChange",(function(e){r.emit("ServerTimeChange",e)})),r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ti(e,t)}(t,e);var r,n,i,o,a,u=Ri(t);return r=t,(n=[{key:"parse",value:function(e){return this.parser.parse(e)}},{key:"isInitiallyLoaded",value:function(){return null!==this.mpd}},{key:"setSourceIndex",value:function(e){if(null!==e){var t=new Bf(this.url);t.searchParams.set("source_index",e),this.url=t.href}}},{key:"getMpdXml",value:function(){return this.parse(this.xml)[1]}},{key:"getPlaylistCapHeight",value:function(){return this.playlistCapHeight}},{key:"isDynamicPlaylist",value:function(){var e;return(null===(e=this.mpd)||void 0===e?void 0:e.isDynamic)||!1}},{key:"getVideoType",value:function(){if(this.mpd)return this.mpd.isDynamic?this.mpd.videoType:of.Z.VOD}},{key:"getUpdatePeriod",value:function(){var e;return(null===(e=this.mpd)||void 0===e?void 0:e.updatePeriod)||null}},{key:"getLastUpdateDuration",value:function(){return this.lastUpdateDuration}},{key:"setFetcherBaseParams",value:function(e){this.fetcher.setBaseParams(e)}},{key:"apply",value:function(e){this.xml=e;var t,r=this.parse(e);try{t=an(r,this.url,this.parser)}catch(i){throw gi(i)&&"YASP_PARSE_MANIFEST_ERROR"===i.code&&(i.details.manifest=e),i}this.playlistCapHeight=t.maxHeight,this.baseUrls=t.baseUrls;var n=t.periods[0];return n.adaptationSets=mi(n.adaptationSets),this.checkTracksLengthDifference(n.adaptationSets),this.checkDrm(n.adaptationSets),Qn(n,this.timeline),this.timeline.applyMpd(t),t}},{key:"checkDrm",value:function(e){var t=e.find((function(e){return e.encrypted}));t&&(this.drmInfos=t.contentProtection.drmInfos,this.mpd||this.emit("DrmInfoReceived",t.contentProtection.drmInfos))}},{key:"getBaseUrls",value:function(){return this.baseUrls}},{key:"getDrmInfos",value:function(){return this.drmInfos}},{key:"getEmsgSchemeIdUris",value:function(){var e;return null===(e=this.mpd)||void 0===e?void 0:e.emsgSchemeIdUris}},{key:"update",value:(o=_i().mark((function e(){var t,r,n,i,o,a,u,c,s,l,f,h,d,p,y,v=this;return _i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.aborted=!1,t=this.session?bi(this.url):(0,Nf.c)(this.url),r=(0,Gl.u)(),e.prev=3,n={},this.session&&(n["x-strm-session"]=this.session,n["x-client-timestamp"]=String(Date.now())),i=this.fetcher.fetch(t,{timeout:If.d4,headers:n}),o=i.response,a=i.abort,this.abortFn=a,e.next=10,o;case 10:if(u=e.sent,c=u.body,s=u.status,l=u.headers,this.session=l["x-strm-session"],s>=200&&s<300||304===s){e.next=20;break}throw f=this.attempt>=10,0===s?new hl.w({code:"YASP_FETCH_MANIFEST_HTTP_ERROR",message:"Network Error",details:{url:t},category:dl.q.NETWORK_MEDIA,isFatal:f}):new hl.w({code:"YASP_FETCH_MANIFEST_BAD_HTTP_STATUS",message:"Error: ".concat(s),details:{status:s,url:t},isFatal:f,category:dl.q.NETWORK_MEDIA});case 20:return this.attempt=0,e.next=23,c;case 23:h=e.sent,this.abortFn=null,this.mpd=this.apply(h),this.updateManifestUrl(),this.lastUpdateDuration=r(),this.emit("ManifestUpdate"),e.next=49;break;case 31:if(e.prev=31,e.t0=e.catch(3),p=this.attempt>=10,this.abortFn=null,!(0,Cf.V)(e.t0)){e.next=41;break}if("Request canceled"!==e.t0.message&&"Abort error"!==e.t0.message){e.next=38;break}return e.abrupt("return");case 38:d=gi(e.t0)?e.t0:new hl.w({code:"Request timed out"===e.t0.message?"YASP_FETCH_MANIFEST_TIMEOUT":"YASP_FETCH_MANIFEST_HTTP_ERROR",details:{url:t},message:e.t0.message,isFatal:p,category:"Request timed out"===e.t0.message?dl.q.NETWORK_TIMEOUT:dl.q.NETWORK_MEDIA}),e.next=42;break;case 41:d=new hl.w({code:"YASP_UNKNOWN_ERROR",details:{url:t,error:e.t0},message:"Unknown error. Expect error to be an instance of Error.",isFatal:p,category:dl.q.NETWORK_MEDIA});case 42:if(this.emit("Error",d),!p&&!d.isFatal){e.next=45;break}return e.abrupt("return");case 45:if(y=(0,Mf._)(Kn(this.attempt++)),!this.aborted){e.next=48;break}return e.abrupt("return");case 48:return e.abrupt("return",y.then((function(){if(!v.aborted)return v.update()})));case 49:case"end":return e.stop()}}),e,this,[[3,31]])})),a=function(){var e=this,t=arguments;return new Ff((function(r,n){function i(e){Ei(u,r,n,i,a,"next",e)}function a(e){Ei(u,r,n,i,a,"throw",e)}var u=o.apply(e,t);i(void 0)}))},function(){return a.apply(this,arguments)})},{key:"abort",value:function(){this.abortFn&&this.abortFn(),this.aborted=!0}},{key:"destroy",value:function(){this.abort(),Si(ji(t.prototype),"destroy",this).call(this)}},{key:"getDebugInfo",value:function(){return{url:this.url,xml:this.xml,attempt:this.attempt,baseUrls:this.baseUrls,mpd:this.mpd,playlistCapHeight:this.playlistCapHeight,lastUpdateDuration:this.lastUpdateDuration}}},{key:"checkTracksLengthDifference",value:function(e){if(e.length){var t=new Set,r={};if(e.forEach((function(e){"text"!==e.type&&e.representations.forEach((function(e){r[e.id]=e.segmentTemplate.endTime,t.add(e.segmentTemplate.endTime)}))})),1!==t.size){var n=new hl.w({code:"YASP_DIFFERENT_TRACKS_LENGTH",details:r,message:"Different track lengths detected",isFatal:!1,category:dl.q.MEDIA});this.emit("Error",n)}}}},{key:"updateManifestUrl",value:function(){var e,t;this.url=null!==(e=null===(t=this.mpd)||void 0===t?void 0:t.locationUrl)&&void 0!==e?e:this.url}}])&&Oi(r.prototype,n),i&&Oi(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(xl.M),Gf=r(10055),Vf=r(88948),Hf=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.manifesto=t,Ci(this,"processing",!1),Ci(this,"promise",null),Ci(this,"timer",0)}var t,r,n,i,o;return t=e,(r=[{key:"update",value:(i=Ii().mark((function e(){var t,r=this;return Ii().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.processing){e.next=2;break}return e.abrupt("return",this.promise);case 2:if(this.shouldUpdate()){e.next=4;break}return e.abrupt("return");case 4:return this.processing=!0,t=function(){if(r.processing){r.processing=!1;var e=r.getUpdatePeriod();e&&(r.timer=self.setTimeout((function(){r.timer=0,r.update()}),e))}},this.promise=this.manifesto.update().then(t).catch(Gf.Z).then((function(){r.promise=null})),e.abrupt("return",this.promise);case 8:case"end":return e.stop()}}),e,this)})),o=function(){var e=this,t=arguments;return new Vf((function(r,n){function o(e){Ni(u,r,n,o,a,"next",e)}function a(e){Ni(u,r,n,o,a,"throw",e)}var u=i.apply(e,t);o(void 0)}))},function(){return o.apply(this,arguments)})},{key:"forceUpdate",value:function(){this.disableTimer(),this.update()}},{key:"disable",value:function(){this.processing=!1,this.disableTimer(),this.manifesto.abort()}},{key:"getDebugInfo",value:function(){return{processing:this.processing}}},{key:"disableTimer",value:function(){self.clearTimeout(this.timer),this.timer=0}},{key:"shouldUpdate",value:function(){return!this.timer&&(!this.manifesto.isInitiallyLoaded()||this.manifesto.isDynamicPlaylist())}},{key:"getUpdatePeriod",value:function(){if(this.manifesto.isDynamicPlaylist()){var e=this.manifesto.getUpdatePeriod(),t=this.manifesto.getLastUpdateDuration();if(e)return Math.max(3e3,e-t)}}}])&&Di(t.prototype,r),n&&Di(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Yf=(0,wf.I)((function(){return 55})),qf=(0,wf.I)((function(){return Yf()+10})),Wf=r(85636),zf=r(88948),$f={type:"video",state:"idle",fat:!1,currentTrack:void 0,time:null,previousBufferingTime:null,nextTimeToSet:null,streamIsFinished:!1,lastTrackTimeOffset:null},Kf=["Unexpected read after destroy","Unexpected destroy while read"],Zf=function(e){function t(e,r,n,i){var o,a,u,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=c.call(this)).timeline=e,s.mediaState=r,s.mse=n,Zi($i(s),"destroyed",!1),Zi($i(s),"bufferGoal",void 0),Zi($i(s),"totalBufferSoftCap",void 0),Zi($i(s),"totalBufferHardCap",void 0),Zi($i(s),"streams",{}),Zi($i(s),"abortCallbacks",{video:null,audio:null}),s.bufferGoal=null!==(o=null===i||void 0===i?void 0:i.bufferGoal)&&void 0!==o?o:30,s.totalBufferSoftCap=null!==(a=null===i||void 0===i?void 0:i.totalBufferSoftCap)&&void 0!==a?a:Yf(),s.totalBufferHardCap=null!==(u=null===i||void 0===i?void 0:i.totalBufferHardCap)&&void 0!==u?u:qf();var l=e.getMimeTypes(),f=l.video,h=l.audio;return f.length>0&&(s.streams.video=Hi(Hi({},$f),{},{type:"video"})),h.length>0&&(s.streams.audio=Hi(Hi({},$f),{},{type:"audio"})),s.mse.on("Open",(function(){return s.run()})),s}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qi(e,t)}(t,e);var r,n,i,o,a,u,c=Wi(t);return r=t,(n=[{key:"abort",value:function(){var e=this;["video","audio"].forEach((function(t){e.abortForType(t)}))}},{key:"abortForType",value:function(e){var t,r;this.destroyed||(null===(t=(r=this.abortCallbacks)[e])||void 0===t||t.call(r),this.resetTime(e))}},{key:"destroy",value:function(){this.destroyed=!0}},{key:"run",value:function(){var e=this;this.destroyed||["audio","video"].some((function(t){var r;return"appending"===(null===(r=e.streams[t])||void 0===r?void 0:r.state)}))||(this.streams.video&&this.runForStream(this.streams.video),this.streams.audio&&this.runForStream(this.streams.audio))}},{key:"abortUseless",value:function(){var e=this;if(!this.destroyed){var t=this.mediaState.currentTime;"open"!==this.mse.getReadyState()||this.mse.isReloading()||null!==t&&["video","audio"].forEach((function(r){var n=e.streams[r];if(void 0!==n){var i=e.mse.getSourceBufferBufferedRange(r);void 0!==i&&!i.some((function(e){return e.start<=t&&t<=e.end}))&&e.abortForType(n.type)}}))}}},{key:"createAbortPromise",value:function(e){var t=this,r=new Wf.B;return this.abortCallbacks[e]=function(){r.reject(t.createAbortError())},r.promise}},{key:"createAbortError",value:function(){return new hl.w({code:"YASP_OPERATION_ABORTED",details:{},isFatal:!1,category:dl.q.EXCEPTION,message:"AppendStream operation aborted"})}},{key:"resetTime",value:function(e){var t=this.streams[e];if(t){var r=this.mediaState.currentTime;"appending"===t.state?t.nextTimeToSet=null===r?null:1e3*r:t.time=null===r?null:1e3*r}}},{key:"reset",value:function(){var e=this;(0,Bl.z)(this.streams).forEach((function(t){t&&(e.resetTime(t.type),t.currentTrack=void 0,t.lastTrackTimeOffset=null)}))}},{key:"runForStream",value:function(e){var t=this;if("open"===this.mse.getReadyState()&&!this.mse.isReloading()&&"appending"!==e.state){var r=this.mediaState,n=r.currentTime,i=r.buffering,o=r.duration;if(null!==n){var a=this.mse.getSourceBufferBufferedRange(e.type);if(void 0!==a){if(i)e.previousBufferingTime!==1e3*n&&(e.time=1e3*n,e.nextTimeToSet=null,e.previousBufferingTime=e.time);else{if(e.previousBufferingTime=null,Math.min(this.bufferGoal,o-n)<=Mi(a,n))return;if(this.checkGorgedBuffer(e,a))return}var u=this.timeline.getSegment(e.type,e.time),c=u.track,s=u.segment;if(void 0!==c){var l=c.id;this.handleTrackPresentationTimeOffset(e,c),l===e.currentTrack?void 0!==s&&(e.nextTimeToSet=s.end,this.appendStream(e,s.getChunkStream()).then((function(){e.time=e.nextTimeToSet,e.streamIsFinished=c.endNumber===s.number&&!t.timeline.getIsDynamic(),(0,Bl.z)(t.streams).every((function(e){return Boolean(null===e||void 0===e?void 0:e.streamIsFinished)}))&&t.mse.endOfStream()})).catch((function(r){if("YASP_OPERATION_ABORTED"!==r.code)"YASP_QUOTA_EXCEEDED_ERROR"===r.code?(0,Dl.RW)("yasp_decrease_mse_buffer_on_quota_exceeded_error")&&t.emit("QuotaExceededError"):t.emit("Error",r);else{var n=t.mediaState.currentTime;e.time=null===n?null:1e3*n}}))):this.appendInitialSegment(e,l).catch((function(r){var n=gi(r)?r:new hl.w({code:"YASP_UNKNOWN_ERROR",details:{error:r},isFatal:!1,category:dl.q.MEDIA,message:"Can not append initial Segment"});if("YASP_OPERATION_ABORTED"!==n.code)t.emit("Error",n);else{var i=t.mediaState.currentTime;e.time=null===i?null:1e3*i}})).then((function(){}))}}}}}},{key:"handleTrackPresentationTimeOffset",value:function(e,t){var r=this,n=t.presentationTimeOffset,i=e.lastTrackTimeOffset,o=e.type;i!==n&&this.mse.setTimestampOffset(o,n/1e3).then((function(){e.lastTrackTimeOffset=n})).catch((function(e){r.destroyed||(0,Il.L)(e)}))}},{key:"setBufferGoal",value:function(e){this.bufferGoal=e}},{key:"checkGorgedBuffer",value:function(e,t){var r=function(e){for(var t=0,r=0;r<e.length;r++){var n=e[r],i=n.start;t+=n.end-i}return t}(t),n=e.fat;return e.fat=r>=this.totalBufferSoftCap,!!e.fat&&(n||this.emit("FatBuffer",e.type),r>=this.totalBufferHardCap&&(this.emit("GorgedBuffer",e.type),!0))}},{key:"appendInitialSegment",value:(u=Gi(Bi().mark((function e(t,r){var n,i;return Bi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(n=this.timeline.getInitialSegment(t.type,r))){e.next=3;break}return e.abrupt("return");case 3:return i=n.getChunkStream(),e.next=6,this.appendStream(t,i);case 6:t.currentTrack=r,this.run();case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"appendChunk",value:(a=Gi(Bi().mark((function e(t,r){return Bi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.mse.appendBuffer(t.type,r);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),gi(e.t0)?e.t0:new hl.w({code:"YASP_UNKNOWN_ERROR",details:{error:e.t0},isFatal:!1,category:dl.q.MEDIA,message:(0,Is.K)(e.t0)?e.t0.message:"Can not append buffer"});case 8:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(e,t){return a.apply(this,arguments)})},{key:"appendStream",value:(o=Gi(Bi().mark((function e(t,r){var n,i,o,a,u;return Bi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state="appending",t.streamIsFinished=!1,n=this.createAbortPromise(t.type),e.prev=3,e.next=6,zf.race([r.read(),n]);case 6:i=e.sent,o=i.value,a=i.done;case 9:if(a){e.next=24;break}if(!this.destroyed){e.next=12;break}return e.abrupt("return");case 12:if(!o){e.next=15;break}return e.next=15,zf.race([this.appendChunk(t,o),n]);case 15:if(!this.destroyed){e.next=17;break}return e.abrupt("return");case 17:return e.next=19,zf.race([r.read(),n]);case 19:u=e.sent,o=u.value,a=u.done,e.next=9;break;case 24:e.next=33;break;case 26:if(e.prev=26,e.t0=e.catch(3),!(0,Is.K)(e.t0)||!Kf.includes(e.t0.message)&&!this.mse.isReloading()){e.next=32;break}throw this.createAbortError();case 32:throw gi(e.t0)?e.t0:new hl.w({code:"YASP_UNKNOWN_ERROR",details:{error:e.t0},isFatal:!1,category:dl.q.MEDIA,message:"Can not append buffer"});case 33:return e.prev=33,this.abortCallbacks[t.type]=null,t.state="idle",e.finish(33);case 37:case"end":return e.stop()}}),e,this,[[3,26,33,37]])}))),function(e,t){return o.apply(this,arguments)})},{key:"getDebugInfo",value:function(){return{bufferGoal:this.bufferGoal,totalBufferSoftCap:this.totalBufferSoftCap,totalBufferHardCap:this.totalBufferHardCap,streams:this.streams}}}])&&Yi(r.prototype,n),i&&Yi(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(xl.M),Xf=r(52248),Jf=r(99761),Qf=r(88891),eh=r(97668),th=r(88948),rh=r(88948),nh=r(88891),ih=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),mo(yo(e=a.call(this)),"blacklist",new Set),mo(yo(e),"destroyed",!1),mo(yo(e),"checkLoopTimeoutId",void 0),e.startLoop(),e.once("Destroy",(function(){e.destroyed=!0})),e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fo(e,t)}(t,e);var r,n,i,o,a=ho(t);return r=t,(n=[{key:"destroy",value:function(){this.stopLoop(),so(vo(t.prototype),"destroy",this).call(this)}},{key:"getBlacklist",value:function(){return Array.from(this.blacklist)}},{key:"addHostname",value:function(e){var t=new nh(e).host;Xf.T.indexOf(t)>-1||this.blacklist.has(e)||this.blacklist.add(e)}},{key:"isBlacklisted",value:function(e){return this.blacklist.has(e)}},{key:"checkBlacklistedHosts",value:(o=uo(oo().mark((function e(){var t=this;return oo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rh.all(Array.from(this.blacklist).map(function(){var e=uo(oo().mark((function e(r){return oo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ro(Xi(r));case 3:t.blacklist.delete(r),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"startLoop",value:function(){var e=this;this.destroyed||(this.checkLoopTimeoutId=setTimeout(uo(oo().mark((function t(){return oo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.stopLoop(),t.next=3,e.checkBlacklistedHosts();case 3:e.startLoop();case 4:case"end":return t.stop()}}),t)}))),3e4))}},{key:"stopLoop",value:function(){clearTimeout(this.checkLoopTimeoutId)}}])&&co(r.prototype,n),i&&co(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(xl.M),oh=r(7989),ah=r(98834),uh=r(4204),ch=r(10123),sh=r(46223),lh=r(35776),fh=(0,lh.y)(self)||(0,sh.V)(self),hh=fh?1e4:5e3,dh=r(88891),ph=r(88948),yh=(0,lh.y)(self)||(0,sh.V)(self),vh=[429,500,502,503,504],mh={start:Math.abs(0),end:Math.abs(0),number:Math.max(Math.floor(0)),isInitSegment:!1,bitrate:0,trackId:"unknown",width:0,height:0,originalStart:0},bh=function(e){function t(e){var r,n=e.timeline,i=e.mediaState,a=e.playlist,u=e.abr,c=e.segmentFetcher,s=e.bufferGoal,l=e.bandwidthEstimator,f=e.ttfbEstimator,h=e.sourceIndex;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Lo(jo(r=o.call(this)),"segmentFetcher",void 0),Lo(jo(r),"abr",void 0),Lo(jo(r),"timeline",void 0),Lo(jo(r),"mediaState",void 0),Lo(jo(r),"playlist",void 0),Lo(jo(r),"bandwidthEstimator",void 0),Lo(jo(r),"ttfbEstimator",void 0),Lo(jo(r),"bufferGoal",void 0),Lo(jo(r),"hostnameBlackList",new ih),Lo(jo(r),"trackToFetchFailuresCount",new Map),Lo(jo(r),"lastNonBlockedBaseUrls",[]),Lo(jo(r),"isDestroyed",!1),Lo(jo(r),"inProgress",!1),Lo(jo(r),"segmentsInProgress",{video:[],audio:[],text:[]}),Lo(jo(r),"sourceIndex",null),Lo(jo(r),"bufferGoalBytes",(0,Dl.jS)("web_yasp_buffer_goal_bytes_size")),r.timeline=n,r.mediaState=i,r.playlist=a,r.abr=u,r.segmentFetcher=c,r.bandwidthEstimator=l,r.ttfbEstimator=f,r.bufferGoal=1e3*s,r.sourceIndex=h,r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ro(e,t)}(t,e);var r,n,i,o=Po(t);return r=t,i=[{key:"syncSelectedSegments",value:function(e,t){var r=["audio","video","text"],n=_o({},e);return r.forEach((function(i){var o=e[i];if(o){var a=1/0;r.forEach((function(r){var n,o;if(r!==i){var u=null!==(n=null===(o=e[r])||void 0===o?void 0:o.end)&&void 0!==n?n:0,c=t[r],s=null===c||void 0===c?void 0:c.reduce((function(e,t){var r=t.segment;return Math.max(e,r.end)}),0),l=Math.max(s,u);l&&(a=Math.min(a,l))}})),isFinite(a)&&o.start>=a&&(n[i]=void 0)}})),n}}],(n=[{key:"abort",value:function(){var e=this;["video","audio","text"].forEach((function(t){e.segmentsInProgress[t].forEach((function(e){return e.abort()}))}))}},{key:"setSourceIndex",value:function(e){this.sourceIndex=e}},{key:"addSourceIndexInUrl",value:function(e){if(!this.sourceIndex)return e;var t=new dh(e);return t.searchParams.set(ch.g,this.sourceIndex),t.href}},{key:"abortUseless",value:function(){var e=this;["video","audio","text"].forEach((function(t){return e.abortUselessForType(t)}))}},{key:"abortUselessForType",value:function(e){var t=this,r=this.mediaState.currentTime,n=1e3*(null!==r&&void 0!==r?r:-1);this.segmentsInProgress[e]=this.segmentsInProgress[e].filter((function(r){var i=r.abort,o=r.segment,a=r.trackId;if(o.isInitSegment)return!0;var u=o.start<=n&&n<o.end;return!(!t.timeline.checkTrackAvailableToLoad(a,e)||!u)||(i(),!1)}))}},{key:"run",value:function(){var e=this,t=[],r=function(){return!(e.segmentsInProgress.video.length>0||e.segmentsInProgress.audio.length>0||e.segmentsInProgress.text.length>0)};try{r(),this.runInternal(t),r()&&(this.inProgress=!1,this.emit("NoSegmentsInProgress"))}finally{ph.all(t.map((function(e){return e.catch(Gf.Z)}))).then((function(){t.length>0&&e.emit("BandwidthEstimateUpdate",e.bandwidthEstimator.getBandwidthEstimate())}))}}},{key:"setVideoState",value:function(e){this.mediaState=e}},{key:"setBufferGoal",value:function(e){this.bufferGoal=1e3*e}},{key:"canStartDownload",value:function(e){if(!this.segmentsInProgress[e].length)return!0;var t=this.segmentsInProgress,r=t.audio,n=t.video,i=t.text,o=this.ttfbEstimator.getMinTtfbEstimate({value:0,source:"default"}),a=r.concat(n,i);return yh?0===a.length:a.every((function(e){return e.segment.getExpectedTimeToLoad()<=o.value}))}},{key:"actualizeProgress",value:function(){if((0,Dl.RW)("yasp_abr_loading_segment")){var e=Math.max(this.segmentsInProgress.audio.length,this.segmentsInProgress.video.length,this.segmentsInProgress.text.length);if(0!==e){for(var t={video:e,audio:e,text:e},r=0;r<e;r++){var n,i,o,a,u,c,s,l=null===(n=this.segmentsInProgress.audio[r])||void 0===n?void 0:n.segment,f=null===(i=this.segmentsInProgress.video[r])||void 0===i?void 0:i.segment,h=null===(o=this.segmentsInProgress.text[r])||void 0===o?void 0:o.segment,d=this.abr.filterSegments(this.timeline.getSegmentsForTracks(null!==(a=null===l||void 0===l?void 0:l.start)&&void 0!==a?a:null,"audio"),this.timeline.getSegmentsForTracks(null!==(u=null===f||void 0===f?void 0:f.start)&&void 0!==u?u:null,"video"),this.timeline.getSegmentsForTracks(null!==(c=null===h||void 0===h?void 0:h.start)&&void 0!==c?c:null,"text"),this.mediaState);d.audio&&l&&d.audio!==l&&l.getExpectedTimeToLoad()>d.audio.getExpectedTimeToLoad()&&(t.audio=Math.min(t.audio,r)),d.video&&f&&d.video!==f&&f.getExpectedTimeToLoad()>d.video.getExpectedTimeToLoad()*(0,Dl.jS)("yasp_videosegment_expected_load_time_multiplier")&&(t.video=Math.min(t.video,r)),(null===h||void 0===h?void 0:h.getExpectedTimeToLoad())>(null===(s=d.text)||void 0===s?void 0:s.getExpectedTimeToLoad())&&(t.text=Math.min(t.text,r))}for(var p=e-1;p>=0;p--)this.segmentsInProgress.audio[p]&&t.audio<=p&&this.segmentsInProgress.audio[p].abort(),this.segmentsInProgress.video[p]&&t.video<=p&&this.segmentsInProgress.video[p].abort(),this.segmentsInProgress.text[p]&&t.text<=p&&this.segmentsInProgress.text[p].abort()}}}},{key:"runInternal",value:function(e){var r,n,i=this,o=this.mediaState,a=o.currentTime,u=o.duration,c=o.buffering;if(null!==a&&(this.actualizeProgress(),c||!(u<a+.1))){var s=1e3*a,l=this.timeline.getBufferedRanges(!0),f=l.video,h=l.audio,d=l.text,p=this.defineTracksMeta(f,s,"video"),y=this.defineTracksMeta(h,s,"audio"),v=this.defineTracksMeta(d,s,"text");if(p.length||y.length||v.length){var m=t.syncSelectedSegments(this.abr.filterSegments(y,p,v,this.mediaState),this.segmentsInProgress),b=void 0!==m.video&&(null===(r=m.video)||void 0===r?void 0:r.height)===(null===(n=p[p.length-1])||void 0===n?void 0:n.height),g=this.getBaseUrl();g?(0,Yl.J)(m).forEach((function(t){var r=Eo(t,2),n=r[0],o=r[1];if(o){var a=o.trackId,u=i.timeline.findTrackById(a,n);if(u){var c,f,h,d=0;if(Number.isFinite(i.mediaState.currentTime)){var p=Io(l[n],s,i.mediaState.duration);-1!==p&&(c=(p-s)/1e3,f=3,h=Math.pow(10,f),d=Math.round((c+ah.I)*h)/h)}if(!u.getInitSegment()&&u.initialization){var y=u.initialization,v={baseUrl:g,pathname:bo(y,u)},m=i.fetchSegment(v,a,n,_o(_o({},mh),{},{isInitSegment:!0}),d,b),w=m.segment,_=m.promise;u.appendSegment(w),e.push(_.catch((function(e){w.fail();var t=gi(e)?e:new hl.w({code:"YASP_UNKNOWN_ERROR",details:{error:e,blacklist:i.hostnameBlackList.getBlacklist()},isFatal:!0,category:dl.q.NETWORK_MEDIA});i.emitError(t)})))}var E=u.media;if(E&&!u.hasSegment(o.number)){var O={baseUrl:g,pathname:bo(E,u,o)},S={start:o.start,end:o.end,number:o.number,isInitSegment:!1,bitrate:u.bitrate,trackId:u.id,width:"width"in u?u.width:0,height:"height"in u?u.height:0,originalStart:o.originalStart,duration:o.duration},k=i.fetchSegment(O,a,n,S,d,b),T=k.segment,R=k.promise;u.appendSegment(T),e.push(R.catch((function(e){T.fail();var t=gi(e)?e:new hl.w({code:"YASP_UNKNOWN_ERROR",details:{error:e,blacklist:i.hostnameBlackList.getBlacklist()},isFatal:!0,category:dl.q.NETWORK_MEDIA});i.emitError(t)})))}}}})):this.emitError(new hl.w({code:"YASP_NO_BASEURLS",details:{},isFatal:!0,category:dl.q.MEDIA}))}}}},{key:"emitError",value:function(e){"YASP_OPERATION_ABORTED"!==e.code&&this.emit("Error",e)}},{key:"fetchSegment",value:function(e,t,r){var n=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:mh,o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,u=new Cl(i),c=!1;this.handleInProgressSegment(r,u,t,(function(){c=!u.isInitSegment,n.inProgress||(n.inProgress=!0,n.emit("SegmentInProgress"))}));var s=new ph((function(s,l){var f="".concat(t,"/").concat(i.number),h=n.trackToFetchFailuresCount.get(f)||0,d=new dh(e.pathname,e.baseUrl);o>=0&&d.searchParams.append("bufSize",String(o)),(0,uh._)(Kn(h)).then((function(){if(!n.isDestroyed){var i=0;i=(0,Dl.RW)("web_yasp_static_timeout_for_low_latency")&&n.timeline.isLowLatencyLive()?1e4:(a?1e4:hh)+n.ttfbEstimator.getTtfbEstimate({value:1e3,source:"default"}).value;var o=(0,Nf.c)(n.addSourceIndexInUrl(d.toString())),p=n.hostnameBlackList.getBlacklist(),y=n.segmentFetcher.fetchChunkStream(o,i,u,r),v=y.chunkStream,m=y.promise,b=y.requestState,g=y.abort;c?g():n.handleInProgressSegment(r,u,t,g),m.then((function(t){if(t>=200&&t<300||304===t){v.on("Data",(function(e){u.append(e)})),v.on("Close",(function(){u.finish(),s()}));var r=function(){if(null!==b&&void 0!==b&&b.canceled)return u.fail(),s();if(!u.finished){var t=null!==b&&void 0!==b&&b.timeout?"YASP_FETCH_SEGMENT_TIMEOUT":"YASP_FETCH_SEGMENT_HTTP_ERROR",r=null!==b&&void 0!==b&&b.timeout?"Request timed out":"Network Error",i=null!==b&&void 0!==b&&b.timeout?dl.q.NETWORK_TIMEOUT:dl.q.NETWORK_MEDIA;n.hostnameBlackList.addHostname(e.baseUrl),l(new hl.w({code:t,details:{url:o,blacklist:{before:p,after:n.hostnameBlackList.getBlacklist()},downloadedBytes:null!==b&&void 0!==b&&b.timeout?b.downloadedBytes:void 0},message:r,category:i,isFatal:!1}))}};return v.on("Destroy",r),v.resume(),n.trackToFetchFailuresCount.has(f)&&n.trackToFetchFailuresCount.delete(f),void(v.isDestroyed()&&r())}if(n.trackToFetchFailuresCount.set(f,h+1),vh.includes(t))l(new hl.w({code:"YASP_FETCH_SEGMENT_BAD_HTTP_STATUS",message:"Error: ".concat(t),details:{url:o,status:t,blacklist:{before:p,after:n.hostnameBlackList.getBlacklist()}},category:dl.q.NETWORK_MEDIA,isFatal:!1}));else{n.hostnameBlackList.addHostname(e.baseUrl);var i=h>=10;l(0===t?new hl.w({code:"YASP_FETCH_SEGMENT_HTTP_ERROR",message:"Network Error",details:{url:o,blacklist:{before:p,after:n.hostnameBlackList.getBlacklist()}},category:dl.q.NETWORK_MEDIA,isFatal:i}):new hl.w({code:"YASP_FETCH_SEGMENT_BAD_HTTP_STATUS",message:"Error: ".concat(t),details:{url:o,status:t,blacklist:{before:p,after:n.hostnameBlackList.getBlacklist()}},category:dl.q.NETWORK_MEDIA,isFatal:i}))}})).catch((function(t){if(null!==b&&void 0!==b&&b.canceled)l(new hl.w({code:"YASP_OPERATION_ABORTED",details:{url:o,blacklist:{before:p,after:n.hostnameBlackList.getBlacklist()}},message:t.message,category:dl.q.NETWORK_MEDIA,isFatal:!1}));else{n.hostnameBlackList.addHostname(e.baseUrl),n.trackToFetchFailuresCount.set(f,h+1);var r="Request timed out"===t.message,i=!r&&h>=10;l(new hl.w({code:r?"YASP_FETCH_SEGMENT_TIMEOUT":"YASP_FETCH_SEGMENT_HTTP_ERROR",details:{url:o,blacklist:{before:p,after:n.hostnameBlackList.getBlacklist()},downloadedBytes:r?(null===b||void 0===b?void 0:b.downloadedBytes)||0:void 0},message:t.message,category:r?dl.q.NETWORK_TIMEOUT:dl.q.NETWORK_MEDIA,isFatal:i}))}}))}}))}));return{segment:u,promise:s}}},{key:"handleInProgressSegment",value:function(e,t,r,n){var i=this;if(!t.finished&&!t.failed&&(!(0,Dl.RW)("yasp_abr_loading_segment")||!t.isInitSegment)){var o=this.segmentsInProgress[e].find((function(e){return e.segment.number===t.number&&e.trackId===r}))||function(){var o={abort:n,segment:t,trackId:r};i.segmentsInProgress[e].push(o);var a=function r(){i.segmentsInProgress[e]=i.segmentsInProgress[e].filter((function(e){return e!==o})),t.off("Failed",r),t.off("Finish",r)};return t.once("Failed",a),t.once("Finish",a),t.once("Destroy",a),o}(),a=o.abort;o.abort=function(){a(),n()}}}},{key:"defineTracksMeta",value:function(e,t,r){if(!this.canStartDownload(r))return[];var n=Io(e,t,this.mediaState.duration);if(-1===n)return[];var i=n-t;return this.checkIsFullBuffer(i)?[]:this.timeline.getSegmentsForTracks(n,r)}},{key:"checkIsFullBuffer",value:function(e){return this.bufferGoalBytes>0&&this.timeline.getTotalRawSize()>=this.bufferGoalBytes?(this.emit("OutOfBytesLimit"),!0):e>=this.bufferGoal||0===this.bufferGoal}},{key:"getDebugInfo",value:function(){return{bufferGoal:this.bufferGoal,hostnameBlackList:this.hostnameBlackList.getBlacklist(),trackToFetchFailuresCount:Array.from(this.trackToFetchFailuresCount.entries()).reduce((function(e,t){return e[t[0]]=e[t[1]],e}),{}),segmentsInProgress:Object.entries(this.segmentsInProgress).reduce((function(e,t){var r=Eo(t,2),n=r[0],i=r[1];return e[n]=i.map((function(e){return e.segment})),e}),{}),sourceIndex:this.sourceIndex,inProgress:this.inProgress}}},{key:"getBaseUrl",value:function(){var e,t=this,r=this.playlist.getBaseUrls().filter((function(e){return!t.hostnameBlackList.isBlacklisted(e)}));return function(e,t){var r=new Map;e.forEach((function(e,t){return r.set(e,t)})),e.sort((function(e,n){var i=t(e,n);return 0!==i?i:Number(r.get(e))-Number(r.get(n))}))}(r,(function(e,r){var n=t.lastNonBlockedBaseUrls.indexOf(e),i=t.lastNonBlockedBaseUrls.indexOf(r);return-1!==n&&-1!==i?n-i:-1!==n&&-1===i?-1:-1===n&&-1!==i?1:0})),this.lastNonBlockedBaseUrls=r,null!==(e=r[0])&&void 0!==e?e:this.playlist.getBaseUrls()[0]}},{key:"destroy",value:function(){this.isDestroyed=!0,this.abort(),ko(Ao(t.prototype),"destroy",this).call(this)}}])&&So(r.prototype,n),i&&So(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(xl.M),gh=function(){function e(t,r,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.timeline=t,this.videoState=r,this.backWatch=n,this.getBufferGoal=i}var t,r,n;return t=e,(r=[{key:"getTotalExpectedBufferSize",value:function(){return this.backWatch+this.getBufferGoal()}},{key:"setBackWatch",value:function(e){this.backWatch=e}},{key:"setVideoState",value:function(e){this.videoState=e}},{key:"run",value:function(){if(null!==this.videoState.currentTime){var e=this.videoState.currentTime;this.timeline.clear(0,Math.max(1e3*(e-this.backWatch),0)),this.timeline.clear(1e3*(e+this.getBufferGoal()),Number.MAX_SAFE_INTEGER)}}},{key:"onOutOfBytesLimit",value:function(){if(null!==this.videoState.currentTime){var e=this.videoState.currentTime;this.timeline.clear(0,Math.max(1e3*(e-5),0))}}},{key:"getDebugInfo",value:function(){return{backWatch:this.backWatch,bufferGoal:this.getBufferGoal()}}}])&&No(t.prototype,r),n&&No(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),wh=r(88948),_h=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),zo(qo(r=o.call(this)),"fetcher",void 0),zo(qo(r),"emsgSchemeIdUris",{audio:new Set,video:new Set}),r.fetcher=e,r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vo(e,t)}(t,e);var r,n,i,o=Ho(t);return r=t,(n=[{key:"fetchChunkStream",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;n.waitingStarted();var o=this.fetcher.fetchDataStream(e,{timeout:Math.max(hh,r)}),a=o.response,u=o.requestState,c=o.abort,s=new Ll,l=new wh(function(){var r=Uo(Co().mark((function r(o,u){var l,f,h,d,p,y,v;return Co().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return l=(0,Nl.u)(),r.prev=1,r.next=4,a;case 4:f=r.sent,h=(f.headers["content-type"]||"").split(";"),d=Mo(h,1),p=d[0],y=parseInt(f.headers["content-length"]||"",10),n.setExpectedSize(y),n.loadingStarted(),r.t0=p.trim(),r.next="application/mp4"===r.t0||"text/vtt"===r.t0?12:"audio/mp4"===r.t0||"video/mp4"===r.t0?14:16;break;case 12:return t.processVtt(f.body,s),r.abrupt("break",24);case 14:return t.processMp4({readableStream:f.body,writableStream:s,getStartTime:l,segment:n,type:i,abort:c}),r.abrupt("break",24);case 16:v=Of(e.toLocaleLowerCase()),r.t1=v,r.next="vtt"===r.t1?20:("m4s"===r.t1||r.t1,22);break;case 20:return t.processVtt(f.body,s),r.abrupt("break",24);case 22:return t.processMp4({readableStream:f.body,writableStream:s,getStartTime:l,segment:n,type:i,abort:c}),r.abrupt("break",24);case 24:o(f.status),r.next=31;break;case 27:r.prev=27,r.t2=r.catch(1),s.destroy(),u(r.t2);case 31:case"end":return r.stop()}}),r,null,[[1,27]])})));return function(e,t){return r.apply(this,arguments)}}());return{promise:l,chunkStream:s.asReadable(),requestState:u,abort:c}}},{key:"processMp4",value:function(e){var t,r,n,i,o=this,a=e.readableStream,u=e.writableStream,c=e.getStartTime,s=e.segment,l=e.type,f=e.abort,h=[],d=0,p=new Uint8Array(0),y=0,v=0,m=!0,b=!0,g=0,w=function(){m||0===y||(b&&(h.length?(o.filterSpikes(h).forEach((function(e){var t=e.time,r=e.size;o.fetcher.progress(t,r,!0)})),h=[]):o.fetcher.progress(y,v,!0)),y=0,v=0)},_=c,E=0,O=0,S=function(e,a){p=ml.P.concat(p,e);var u=!1,c=0,f=function(e){c=e.size+e.start,u=!0,O++};if((new el).box("uuid",(function(e){if(e.isComplete){c=e.size+e.start,u=!0;var o=e.reader.readUUID(),a=e.reader.readUint64();"c4eac1fc-0ad8-4676-9656-69552eb3252f"===o&&m?(t=a,r=Date.now(),n=r,m=!1):"bcfca253-398b-4a5b-9a92-ec8f7d89e61d"===o&&(i=a-t,t=a)}})).box("moov",(function(e){e.isComplete&&(c=e.size+e.start,u=!0)})).box("moof",(function(e){e.isComplete&&(v+=e.size)})).box("mdat",(function(e){if(m){if(!e.isComplete)return;f(e)}else{if(b){b=!1,g=e.loadedSize;var t=Date.now(),o=t-n;n=t,o>=i?(y+=o-i,v+=e.loadedSize):i<50&&(y+=o,v+=e.loadedSize)}else{var a=Date.now()-r;y+=a;var u=e.loadedSize-g;g=e.loadedSize;var c=u;if(v+=c,!s.isInitSegment)if(0===a)if(h.length){var l=h[h.length-1];l.size=l.size+c}else d=c;else h.push({time:a,size:c+d}),d=0}r=Date.now(),e.isComplete&&(b=!0,s.isInitSegment||w(),f(e))}})).fullBox("emsg",(function(e){e.isComplete&&(o.parseEMSG(e,s,l),c=e.size+e.start,u=!0)})).parse(p,!0,!0),function(e){if(m)if(E+=e.length,o.fetcher.isLL()){var t=_();(t>=100||E>=16e3)&&(o.fetcher.progress(t,E),_=(0,Nl.u)(),E=0)}else if(E>0){var r=_();o.fetcher.progress(r,E),_=(0,Nl.u)(),E=0}}(e),w(),u){var S=p.subarray(0,c);p=p.subarray(c),a(S)}};a.on("Data",(function(e){s.loadedRawSize+=e.byteLength;try{S(e,(function(e){return u.write(e)}))}catch(t){if(t instanceof RangeError)return f(),void("text"!==l&&o.emit("BufferAllocationError",{error:t,type:l}));throw t}})),a.on("Close",(function(){u.close(),o.emitSegmentLoaded(l,s,O)})),a.on("Destroy",(function(){u.destroy()})),a.resume()}},{key:"emitSegmentLoaded",value:function(e,t,r){"text"===e||t.isInitSegment||this.emit("SegmentLoaded",{type:e,cmaf:r>1,number:t.number})}},{key:"processVtt",value:function(e,t){var r=new Uint8Array(0);e.on("Data",(function(e){r=ml.P.concat(r,e)})),e.on("Close",(function(){t.write(r),t.close()})),e.on("Destroy",(function(){t.destroy()})),e.resume()}},{key:"setEmsgSchemeIdUris",value:function(e){this.emsgSchemeIdUris=null!==e&&void 0!==e?e:this.emsgSchemeIdUris}},{key:"parseEMSG",value:function(e,t,r){if("text"!==r){var n=t.start/1e3,i=e.reader.readTerminatedString(),o=e.reader.readTerminatedString(),a=e.reader.readUint32(),u=e.reader.readUint32(),c=e.reader.readUint32(),s=e.reader.readUint32(),l=e.reader.readBytes(e.reader.getLength()-e.reader.getPosition()),f=n+u/a,h=f+c/a,d=t.duration/1e3;if(this.emsgSchemeIdUris[r].has(i))if("urn:mpeg:dash:event:2012"===i)this.emit("ManifestUpdateRequired");else{var p={startTime:f,endTime:h,schemeIdUri:i,value:o,timescale:a,presentationTimeDelta:u,eventDuration:c,id:s,segmentDuration:d,messageData:l};this.emit("EmsgDetected",p)}}}},{key:"filterSpikes",value:function(e){if(e.length<2)return e;e.sort((function(e,t){return e.time-t.time}));var t=e[Math.floor(e.length/4)].time,r=e[Math.floor(e.length*(3/4))].time,n=r+3*(r-t);return e.filter((function(e){return e.time<n}))}}])&&Go(r.prototype,n),i&&Go(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(xl.M),Eh=r(88948),Oh=function(){function e(t,r,n,i){var o,a,u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mse=t,this.videoState=r,this.backWatch=n,this.bufferGoal=i,u=!1,(a="locked")in(o=this)?Object.defineProperty(o,a,{value:u,enumerable:!0,configurable:!0,writable:!0}):o[a]=u}var t,r,n,i,o;return t=e,(r=[{key:"setBufferGoal",value:function(e){this.bufferGoal=e}},{key:"run",value:function(){var e=this;this.locked||(this.locked=!0,this.runInternal().catch(Gf.Z).then((function(){e.locked=!1})))}},{key:"runInternal",value:(i=Ko().mark((function e(){var t,r;return Ko().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("open"===this.mse.getReadyState()){e.next=2;break}return e.abrupt("return");case 2:if(null!==(t=this.videoState.currentTime)){e.next=5;break}return e.abrupt("return");case 5:return r=[this.clear(t+this.bufferGoal,this.videoState.duration)],t>this.backWatch&&r.push(this.clear(0,t-this.backWatch)),e.abrupt("return",Eh.all(r));case 8:case"end":return e.stop()}}),e,this)})),o=function(){var e=this,t=arguments;return new Eh((function(r,n){function o(e){Zo(u,r,n,o,a,"next",e)}function a(e){Zo(u,r,n,o,a,"throw",e)}var u=i.apply(e,t);o(void 0)}))},function(){return o.apply(this,arguments)})},{key:"forceRun",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=[];return(0,Dl.RW)("yasp_no_source_abort_on_fake_seek")&&null!==t&&["video","audio"].forEach((function(n){e.mse.getBufferedRangesByType(n).some((function(e){return e.start<=t&&e.end>=t}))?r.push(Eh.resolve()):r.push(e.clear(t,e.videoState.duration))})),0===r.length&&r.push(this.clear(0,this.videoState.duration)),Eh.all(r)}},{key:"clear",value:function(e,t){return e>=t?Eh.all([Eh.resolve()]):Eh.all([this.mse.clearBuffer("video",e,t),this.mse.clearBuffer("audio",e,t)])}},{key:"getDebugInfo",value:function(){return{locked:this.locked}}}])&&Xo(t.prototype,r),n&&Xo(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Sh=r(8825),kh=r(28584),Th=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),fa(sa(e=o.call(this)),"accumulatedSize",0),fa(sa(e),"timer",null),fa(sa(e),"parallelRequests",0),fa(sa(e),"bandwidthInfoBatch",[]),fa(sa(e),"handleProgress",(function(t){e.accumulatedSize=e.accumulatedSize+t.size})),fa(sa(e),"handleResponseStart",(function(){if(e.parallelRequests++,!e.timer){var t=(0,Gl.u)();e.timer=setInterval((function(){if(0===e.parallelRequests&&0===e.accumulatedSize)return clearInterval(e.timer),void(e.timer=null);var r=sa(e).accumulatedSize;if(0!==r){e.accumulatedSize=0;var n=t();t=(0,Gl.u)(),e.emit("Progress",{time:n,size:r})}}),100)}})),fa(sa(e),"handleResponseEnd",(function(){e.parallelRequests=Math.max(e.parallelRequests-1,0)})),(0,Dl.RW)("web_yasp_enable_network_traces")&&e.on("Progress",(function(t){e.bandwidthInfoBatch.push(ia(ia({},t),{},{clientTimestamp:(0,kh.no)()})),e.bandwidthInfoBatch.length>=30&&(e.emit("NetworkTrace",e.bandwidthInfoBatch),e.bandwidthInfoBatch=[])})),e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aa(e,t)}(t,e);var r,n,i,o=ua(t);return r=t,(n=[{key:"appendFetcher",value:function(e){e.on("Progress",this.handleProgress),e.on("ResponseStart",this.handleResponseStart),e.on("ResponseEnd",this.handleResponseEnd)}},{key:"removeFetcher",value:function(e){e.off("Progress",this.handleProgress),e.off("ResponseStart",this.handleResponseStart),e.off("ResponseEnd",this.handleResponseEnd)}},{key:"isLL",value:function(){return!1}}])&&oa(r.prototype,n),i&&oa(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(xl.M),Rh=r(19459),Ph=r.n(Rh),xh=Ph().ru.yandex.videoplayer.multiplatform,jh=function(){function e(){wa(this,e),Oa(this,"getTime",(0,Gl.u)())}return Ea(e,[{key:"getDurationMs",value:function(){return this.getTime()}}]),e}(),Ah=function(){function e(){wa(this,e)}return Ea(e,[{key:"create",value:function(){return new jh}}]),e}(),Lh=function(){function e(t){wa(this,e),this.fetcher=t,Oa(this,"progressListeners",new Map)}return Ea(e,[{key:"addResponseStartListener",value:function(e){this.fetcher.on("ResponseStart",e)}},{key:"removeResponseStartListener",value:function(e){this.fetcher.off("ResponseStart",e)}},{key:"addResponseEndListener",value:function(e){this.fetcher.on("ResponseEnd",e)}},{key:"removeResponseEndListener",value:function(e){this.fetcher.off("ResponseEnd",e)}},{key:"addProgressListener",value:function(e){var t=function(t){var r=t.time,n=t.size;e(new xh.fetcher.BandwidthInfo(r,n))};this.progressListeners.set(e,t),this.fetcher.on("Progress",t)}},{key:"removeProgressListener",value:function(e){var t=this.progressListeners.get(e);void 0===t&&(this.progressListeners.delete(e),this.fetcher.off("Progress",t))}}]),e}(),Ih=function(e){function t(){var e;wa(this,t),Oa(ba(e=r.call(this)),"fetcherProgressAccumulator",new xh.fetcher.FetcherProgressAccumulator(new Ah)),Oa(ba(e),"fetchers",new Map),Oa(ba(e),"bandwidthInfoBatch",[]),(0,Dl.RW)("web_yasp_enable_network_traces")&&e.on("Progress",(function(t){e.bandwidthInfoBatch.push(pa(pa({},t),{},{clientTimestamp:(0,kh.no)()})),e.bandwidthInfoBatch.length>=30&&(e.emit("NetworkTrace",e.bandwidthInfoBatch),e.bandwidthInfoBatch=[])})),e.fetcherProgressAccumulator.addProgressListener((function(t){var r=t.durationMs,n=t.sizeBytes;e.emit("Progress",{time:r,size:n})}));var n=setInterval((function(){e.fetcherProgressAccumulator.process()}),100);return e.once("Destroy",(function(){clearInterval(n)})),e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ya(e,t)}(t,e);var r=va(t);return Ea(t,[{key:"appendFetcher",value:function(e){var t=new Lh(e);this.fetchers.set(e,t),this.fetcherProgressAccumulator.appendFetcher(t)}},{key:"removeFetcher",value:function(e){var t=this.fetchers.get(e);void 0!==t&&(this.fetchers.delete(t),this.fetcherProgressAccumulator.removeFetcher(t))}},{key:"isLL",value:function(){return!1}}]),t}(xl.M),Nh=function(){function e(){var t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=void 0,(r="trace")in(t=this)?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,this.trace=[]}var t,r,n;return t=e,(r=[{key:"getTrace",value:function(){return this.trace}},{key:"addDecision",value:function(e,t,r){var n,i=[],o=ka(t);try{for(o.s();!(n=o.n()).done;){var a,u,c=n.value,s=null===(a=c.audio)||void 0===a?void 0:a.trackId,l=null===(u=c.video)||void 0===u?void 0:u.trackId;i.push({audio:s,video:l})}}catch(f){o.e(f)}finally{o.f()}return r?this.trace.push({name:e,result:i,input:r}):this.trace.push({name:e,result:i}),this.trace}}])&&Sa(t.prototype,r),n&&Sa(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Dh=[4320,2880,2160,1440,1080,720,480,360,240,144,0],Ch=Dh.reduce((function(e,t){return e[t]=t,e}),Object.create(null)),Mh=function(e){function t(e){var r,n=e.rules,i=void 0===n?[]:n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ma(Da(r=o.call(this)),"rules",void 0),Ma(Da(r),"videoSizes",void 0),Ma(Da(r),"abrDecisionsHashCode",{video:"",audio:""}),Ma(Da(r),"lastAbrDecisionsLog",null),r.rules=i,r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&La(e,t)}(t,e);var r,n,i,o=Ia(t);return r=t,(n=[{key:"setVideoElementSizes",value:function(e){this.videoSizes=e}},{key:"filterSegments",value:function(e,t,r,n){var i,o=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],u=xa(t,e,r),c=Ra(e,t),s=new Nh,l=this.rules.reduce((function(e,t){var r,a=t.filter(e,n,o.videoSizes);if(t.isCappingRule()){var c,l,f,h,d=t.filter(u,n,o.videoSizes),p=d[d.length-1];i?null!==(c=i.video)&&void 0!==c&&c.height&&null!==(l=p.video)&&void 0!==l&&l.height&&(null===(f=i.video)||void 0===f?void 0:f.height)>(null===(h=p.video)||void 0===h?void 0:h.height)&&(i=p):i=p}return"function"===typeof t.getInputData&&(r=t.getInputData()),s.addDecision(t.name,a,r),a}),u.reverse())[0]||u[u.length-1];if(a){var f={tracks:c,trace:s.getTrace()},h=Pa(f,"audio"),d=Pa(f,"video"),p={video:d||this.abrDecisionsHashCode.video,audio:h||this.abrDecisionsHashCode.audio};this.abrDecisionsHashCode.audio===p.audio&&this.abrDecisionsHashCode.video===p.video||(this.emit("AbrDecisionChange",f),this.abrDecisionsHashCode=p,this.lastAbrDecisionsLog=f)}return i&&this.emit("MaxCapAllowedVideoTrackUpdate",i),{audio:l.audio,video:l.video,text:null===r||void 0===r?void 0:r[0]}}},{key:"getDebugInfo",value:function(){return{rules:this.rules.map((function(e){return e.getDebugInfo()})),abrDecisionsLog:this.lastAbrDecisionsLog}}}])&&Aa(r.prototype,n),i&&Aa(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(xl.M),Fh=r(53539),Bh=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ga(this,"history",[]),Ga(this,"handleTtfb",(function(e){isFinite(e)&&t.sample(e)}))}var t,r,n;return t=e,(r=[{key:"appendFetcher",value:function(e){e.on("RequestTtfb",this.handleTtfb)}},{key:"removeFetcher",value:function(e){e.off("RequestTtfb",this.handleTtfb)}},{key:"sample",value:function(e){this.history.unshift(e),this.history.length=Math.min(this.history.length,20)}},{key:"getMinTtfbEstimate",value:function(e){return this.hasGoodEstimate()?{value:Math.min.apply(Math,Fa(this.history)),source:"min"}:e}},{key:"getTtfbEstimate",value:function(e){return this.hasGoodEstimate()?{value:this.getCurrentEstimate(),source:"max"}:e}},{key:"hasGoodEstimate",value:function(){return this.history.length>1}},{key:"getCurrentEstimate",value:function(){return Math.max.apply(Math,Fa(this.history))}},{key:"getDebugInfo",value:function(){return{hasGood:this.hasGoodEstimate(),value:this.getCurrentEstimate(),history:Fa(this.history)}}}])&&Ua(t.prototype,r),n&&Ua(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Uh=r(19150),Gh=r(69473),Vh=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bandwidthEstimator=t,this.ttfbEstimator=r,this.getRemainingTimeToStart=n,Wa(this,"name","NetworkParamsRule"),Wa(this,"inputData",{bandwidth:0,ttfb:0,playbackRate:0,bufferSize:0,remainingTimeToStart:null})}var t,r,n;return t=e,(r=[{key:"filterBySegmentInfo",value:function(e,t){var r,n=this;if(e.length<=1)return e;var i=this.bandwidthEstimator.getBandwidthEstimate().value,o=(null===(r=this.ttfbEstimator)||void 0===r?void 0:r.getTtfbEstimate({value:1e3,source:"default"})).value,a=this.getRemainingTimeToStart();this.inputData.remainingTimeToStart=a,this.inputData.bandwidth=i,this.inputData.ttfb=o,this.inputData.playbackRate=t.playbackRate;var u=e.filter((function(e){var r=e.video,u=e.audio,c=Ha(r,t.currentTime,n.inputData.playbackRate,a),s=Ha(u,t.currentTime,n.inputData.playbackRate,a),l=Ya(r,u,o,i),f=Ya(u,r,o,i);return null===r||void 0===r||r.setExpectedTimeToLoad(1e3*l),null===u||void 0===u||u.setExpectedTimeToLoad(1e3*f),c>=l&&s>=f}));return 0===u.length?[(0,Gh.U)(e,(function(e){var t,r,n,i;return Math.max(null!==(t=null===(r=e.video)||void 0===r?void 0:r.getExpectedTimeToLoad())&&void 0!==t?t:0,null!==(n=null===(i=e.audio)||void 0===i?void 0:i.getExpectedTimeToLoad())&&void 0!==n?n:0)}))]:u}},{key:"filter",value:function(e,t){var r;if((0,Dl.RW)("yasp_npr_by_segment_info"))return this.filterBySegmentInfo(e,t);if(e.length<=1)return e;if((0,Dl.RW)("yasp_abr_loading_segment")&&e.some(Va))return e;var n,i,o=this.bandwidthEstimator.getBandwidthEstimate().value,a=null===(r=this.ttfbEstimator)||void 0===r?void 0:r.getTtfbEstimate({value:1e3,source:"default"}).value,u=null===t.currentTime?0:(n=t,i=t.currentTime,Mi((0,Uh.w)(n),i)),c=this.getRemainingTimeToStart();if(this.inputData.remainingTimeToStart=c,this.inputData.bandwidth=o,this.inputData.ttfb=a,this.inputData.playbackRate=t.playbackRate,this.inputData.bufferSize=u,!(7.5>=u))return e;var s=Math.max(t.playbackRate,1),l=e.filter((function(e){var t,r,n,i,u=Math.max(null!==(t=null===(r=e.video)||void 0===r?void 0:r.duration)&&void 0!==t?t:0,null!==(n=null===(i=e.audio)||void 0===i?void 0:i.duration)&&void 0!==n?n:0)/1e3,l=e.bandwidth*u,f=.75*u/s,h=Math.min(null!==c?c-a/1e3:1/0,f);return o*h>l}));return 0===l.length?[e[0]]:l}},{key:"getInputData",value:function(){return this.inputData}},{key:"getDebugInfo",value:function(){return{name:this.name}}},{key:"isCappingRule",value:function(){return!1}}])&&qa(t.prototype,r),n&&qa(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Hh=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),eu(Ja(e=o.call(this)),"currentTime",void 0),eu(Ja(e),"duration",void 0),eu(Ja(e),"buffering",void 0),eu(Ja(e),"buffered",void 0),eu(Ja(e),"paused",void 0),eu(Ja(e),"loop",void 0),eu(Ja(e),"playbackRate",void 0),e.currentTime=null,e.duration=Math.max(0,0),e.buffering=!0,e.buffered=new Ls,e.paused=!0,e.loop=!1,e.playbackRate=1,e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ka(e,t)}(t,e);var r,n,i,o=Za(t);return r=t,n&&$a(r.prototype,n),i&&$a(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r}(xl.M),Yh=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),cu(au(e=o.call(this)),"videoSize",void 0),cu(au(e),"containerSize",void 0),cu(au(e),"devicePixelRatio",void 0),cu(au(e),"frames",void 0),cu(au(e),"objectFit",void 0),e.videoSize=null,e.containerSize=null,e.devicePixelRatio=1,e.frames={total:Math.max(Math.floor(0)),dropped:Math.max(Math.floor(0))},e.objectFit=null,e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nu(e,t)}(t,e);var r,n,i,o=iu(t);return r=t,n&&ru(r.prototype,n),i&&ru(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r}(Hh),qh=function(e){function t(){return fu(this,t),o.apply(this,arguments)}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hu(e,t)}(t,e);var r,n,i,o=du(t);return r=t,n&&lu(r.prototype,n),i&&lu(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r}(Hh),Wh=r(74893),zh=Number.MAX_SAFE_INTEGER,$h=r(3942),Kh=r(56513),Zh=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Su(this,"name","ResolutionRule"),Su(this,"inputData",{width:0,height:0,dpi:1,defaultQuality:zh,userQuality:Wh.k}),Su(this,"getUserQuality",void 0),Su(this,"getDefaultQuality",void 0),this.getDefaultQuality=t,this.getUserQuality=r}var t,r,n;return t=e,(r=[{key:"filter",value:function(e,t,r){var n,i,o;if(!function(e){return e instanceof Yh}(t))return e;if((0,Dl.RW)("web_yasp_object_fit_in_resolution_rule")){var a,u,c,s,l,f,h=null!==(a=null===t||void 0===t?void 0:t.videoSize)&&void 0!==a?a:{width:0,height:0},d=h.width,p=h.height,y={width:null!==(u=null===(c=t.containerSize)||void 0===c?void 0:c.width)&&void 0!==u?u:0,height:null!==(s=null===(l=t.containerSize)||void 0===l?void 0:l.height)&&void 0!==s?s:0},v=null!==(f=t.objectFit)&&void 0!==f?f:"contain";o=null!==r&&void 0!==r?r:(0,Kh.k)({videoWidth:d,videoHeight:p},v,y)}else{var m,b;o=r||{width:null===(m=t.containerSize)||void 0===m?void 0:m.width,height:null===(b=t.containerSize)||void 0===b?void 0:b.height}}return o.dpi=t.devicePixelRatio?t.devicePixelRatio:1,this.inputData.width=null!==(n=o.width)&&void 0!==n?n:null,this.inputData.height=null!==(i=o.height)&&void 0!==i?i:null,this.inputData.dpi=o.dpi,this.inputData.userQuality=this.getUserQuality(),this.inputData.defaultQuality=this.getDefaultQuality(),wu(e,o,{defaultLongSideResolution:this.inputData.defaultQuality,userCappingResolution:this.inputData.userQuality})}},{key:"getInputData",value:function(){return this.inputData}},{key:"getDebugInfo",value:function(){return{name:this.name}}},{key:"isCappingRule",value:function(){return!0}}])&&Ou(t.prototype,r),n&&Ou(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Xh=function(){function e(){var t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n="MaxBandwidthRule",(r="name")in(t=this)?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n}var t,r,n;return t=e,(r=[{key:"filter",value:function(e,t){var r=At(e.slice(0).reverse(),(function(e){var t;return(null===e||void 0===e||null===(t=e.audio)||void 0===t?void 0:t.bitrate)||0}));return r?[r]:e}},{key:"getDebugInfo",value:function(){return{name:this.name}}},{key:"isCappingRule",value:function(){return!1}}])&&ku(t.prototype,r),n&&ku(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Jh=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.getServerCapHeight=t,Ru(this,"name","ServerRestrictionsRule"),Ru(this,"inputData",{maxHeight:null})}var t,r,n;return t=e,(r=[{key:"filter",value:function(e){if(e.length<=1)return e;var t=this.getServerCapHeight();return this.inputData.maxHeight=t,null===t?e:function(e,t){var r=e.filter(_u);if(r.length<=1)return e;for(var n=[],i=0;i<r.length;i++)r[i].video.height<=t&&n.push(r[i]);return 0===n.length?[r[0]]:n}(e,t)}},{key:"getInputData",value:function(){return this.inputData}},{key:"getDebugInfo",value:function(){return{name:this.name}}},{key:"isCappingRule",value:function(){return!0}}])&&Tu(t.prototype,r),n&&Tu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Qh=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bandwidthEstimator=t,xu(this,"name","SimpleBandwidthRule"),xu(this,"inputData",{bandwidth:0,playbackRate:0,paused:!1})}var t,r,n;return t=e,(r=[{key:"filter",value:function(e,t){if(e.length<=1)return e;var r=this.bandwidthEstimator.getBandwidthEstimate().value;this.inputData.bandwidth=r,this.inputData.playbackRate=t.playbackRate,this.inputData.paused=t.paused;var n=e.filter((function(e){return!(!(0,Dl.RW)("yasp_abr_loading_segment")||!function(e){return!(!e.video&&!e.audio)&&["audio","video"].every((function(t){var r=e[t];return!r||null!==r.getWaitingDuration()}))}(e))||e.bandwidth*Math.max(t.playbackRate,1)<=r}));return 0===n.length?[e[0]]:n}},{key:"getInputData",value:function(){return this.inputData}},{key:"getDebugInfo",value:function(){return{name:this.name}}},{key:"isCappingRule",value:function(){return!1}}])&&Pu(t.prototype,r),n&&Pu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),ed=r(82786),td=r(69591),rd=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Au(this,"name","SaveDataRule"),Au(this,"inputData",{saveData:(0,ed.R)()})}var t,r,n;return t=e,(r=[{key:"filter",value:function(e){return this.inputData.saveData=(0,ed.R)(),function(e){return(0,ed.R)()?e.filter((function(e){return!(e.video&&e.video.height&&e.video.width)||Math.min(e.video.height,e.video.width)<=td.T})):e}(e)}},{key:"getInputData",value:function(){return this.inputData}},{key:"getDebugInfo",value:function(){return{name:this.name}}},{key:"isCappingRule",value:function(){return!0}}])&&ju(t.prototype,r),n&&ju(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),nd=Ph().ru.yandex.videoplayer.multiplatform,id=function(){function e(t){Iu(this,e),this.fetcher=t}return Du(e,[{key:"addRequestTtfbListener",value:function(e){this.fetcher.on("RequestTtfb",e)}},{key:"removeRequestTtfbListener",value:function(e){this.fetcher.off("RequestTtfb",e)}}]),e}(),od=function(){function e(){Iu(this,e),Lu(this,"ttfbEstimator",new nd.estimate.TtfbEstimator),Lu(this,"fetchers",new Map)}return Du(e,[{key:"appendFetcher",value:function(e){var t=new id(e);this.fetchers.set(e,t),this.ttfbEstimator.appendFetcher(t)}},{key:"removeFetcher",value:function(e){var t=this.fetchers.get(e);void 0!==t&&(this.fetchers.delete(t),this.ttfbEstimator.removeFetcher(t))}},{key:"getMinTtfbEstimate",value:function(e){var t=this.ttfbEstimator.getMinTtfbEstimate(e);return{value:t.value,source:t.source}}},{key:"getTtfbEstimate",value:function(e){var t=this.ttfbEstimator.getTtfbEstimate(e);return{value:t.value,source:t.source}}},{key:"hasGoodEstimate",value:function(){return this.ttfbEstimator.hasGoodEstimate()}},{key:"getDebugInfo",value:function(){return this.ttfbEstimator.getDebugInfo()}}]),e}(),ad=r(47333),ud=function(e){function t(e){var r,n,i,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=o.call(this)).videoState=e,n=Gu(r),a=void 0,(i="watchedTimeCounter")in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a,r.watchedTimeCounter=new ad.p,r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fu(e,t)}(t,e);var r,n,i,o=Bu(t);return r=t,(n=[{key:"run",value:function(){this.videoState.currentTime&&(this.watchedTimeCounter.calc(this.videoState.currentTime,this.videoState.playbackRate,!0),this.emit("WatchedTimeUpdated",{watchedTime:this.watchedTimeCounter.get()}))}}])&&Mu(r.prototype,n),i&&Mu(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(xl.M),cd=r(34834),sd=Ph().ru.yandex.videoplayer.multiplatform,ld=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Yu(this,"bufferGoalManager",void 0),Yu(this,"constantBufferGoal",null),this.bufferGoalManager=new sd.bgm.BufferGoalManager(new sd.bgm.BufferGoalManagerProps(null,new sd.bgm.BufferGoalManagerFlags(new sd.flags.DisableDynamicBuffer(!1),new sd.flags.LowBufferBeforeStart(!0),new sd.flags.DefaultBuffer(30)),null))}var t,r,n;return t=e,(r=[{key:"setConstantBufferGoal",value:function(e){this.constantBufferGoal=e}},{key:"getBufferGoal",value:function(e){if(null!==this.constantBufferGoal)return this.constantBufferGoal;if(e.usePreloadBufferGoal)return cd.a;var t=e.watchedTime,r=void 0===t?0:t,n=e.currentTime,i=void 0===n?0:n;return this.bufferGoalManager.getBufferGoal(new sd.bgm.GetBufferGoalProps(new sd.bgm.WatchedTime(r),new sd.bgm.CurrentTime(i)))}},{key:"setSkippableFragments",value:function(e){this.bufferGoalManager.setSkippableFragments(e?e.map((function(e){var t=e.startTime,r=e.endTime;return new sd.bgm.SkippableFragment(t,r)})):null)}},{key:"getSkippableFragments",value:function(){var e=this.bufferGoalManager.getSkippableFragments()||void 0;return e&&e.map((function(e){return{startTime:e.startTime,endTime:e.endTime}}))}}])&&Hu(t.prototype,r),n&&Hu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),fd=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=o.call(this)).timeline=e,r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ku(e,t)}(t,e);var r,n,i,o=Zu(t);return r=t,(n=[{key:"run",value:function(){this.timeline.getIsDynamic()&&this.update()}},{key:"update",value:function(){var e=this.timeline.getSeekableRange(),t=e.start/1e3,r=e.end/1e3;this.emit("SeekableUpdate",{start:t,end:r})}},{key:"destroy",value:function(){zu(Ju(t.prototype),"destroy",this).call(this)}}])&&Wu(r.prototype,n),i&&Wu(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(xl.M),hd=r(11841),dd=r(80413),pd=function(){function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.onChange=t,nc(this,"types",{}),nc(this,"queue",{audio:[],video:[]}),nc(this,"enabledTypes",void 0),this.enabledTypes=(0,Ul.Z)(r),this.enabledTypes.forEach((function(e){n.types[e]=!1}))}var t,r,n;return t=e,(r=[{key:"update",value:function(e,t){this.enabledTypes.includes(e)&&(this.queue[e].push(t),this.checkAndUpdate())}},{key:"checkAndUpdate",value:function(){var e=this;if(this.enabledTypes.every((function(t){return e.queue[t].length}))){var t=!1;this.enabledTypes.forEach((function(r){var n=e.queue[r].shift();e.types[r]!==n&&(t=!0,e.types[r]=n)})),t&&this.onChange(this.types)}}},{key:"onSeek",value:function(){var e=this;this.enabledTypes.forEach((function(t){return e.queue[t].length=0}))}}])&&rc(t.prototype,r),n&&rc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),yd=r(72390),vd=(0,sh.V)(self),md=(0,lh.y)(self),bd=r(18243),gd=r(85214),wd=r(88948);!function(e){e.append="append",e.remove="remove",e.setTimestampOffset="setTimestampOffset",e.changeType="changeType"}(Pl||(Pl={}));var _d,Ed=[[Pl.remove],[Pl.setTimestampOffset],[Pl.append,Pl.changeType]],Od=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),lc(this,"destroyed",!1),lc(this,"mimeType",void 0),lc(this,"sourceBuffer",void 0),lc(this,"mediaSource",void 0),lc(this,"sync",void 0),lc(this,"abortId",void 0),lc(this,"removeId",void 0),lc(this,"queues",void 0),this.mimeType=t,this.mediaSource=r,this.sourceBuffer=this.initSourceBuffer(),this.sync=(0,yd.l)(),this.abortId=0,this.removeId=0,this.queues=Ed.map((function(e){return[]}))}var t,r,n,i;return t=e,r=[{key:"checkIfPresent",value:function(){var e=this;return(0,gd.w)(this.mediaSource.sourceBuffers).some((function(t){return e.sourceBuffer===t}))}},{key:"isFree",value:function(){return this.sync.isFree()&&this.queues.every((function(e){return 0===e.length}))}},{key:"lockForExternalOperation",value:function(e){var t=this;return this.sync.waitAndLock((function(){return e()})).then((function(){setTimeout((function(){return t.performNextOperation()}))})).catch(gf.Z)}},{key:"initSourceBuffer",value:function(){return this.mediaSource.addSourceBuffer(this.mimeType)}},{key:"getNextOperationDescriptor",value:function(){for(var e=0;e<this.queues.length;e++)if(this.queues[e].length>0)return this.queues[e].shift();return null}},{key:"performNextOperation",value:function(){var e=this;if(this.sync.isFree()){var t=this.getNextOperationDescriptor();if(null!==t){var r=t.abortId,n=t.defer,i=t.operation,o=t.type;this.sync.waitAndLock(cc(ac().mark((function t(){return ac().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r===e.abortId&&!e.destroyed){t.next=3;break}return n.reject(new hl.w({code:"YASP_OPERATION_ABORTED",details:{},isFatal:!1,category:dl.q.EXCEPTION,message:"SourceBuffer ".concat(o," operation aborted before start")})),t.abrupt("return",n.promise);case 3:return t.prev=3,t.next=6,i();case 6:n.resolve(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),n.reject(t.t0);case 12:return t.abrupt("return",n.promise);case 13:case"end":return t.stop()}}),t,null,[[3,9]])})))).catch(gf.Z).then((function(){setTimeout((function(){return e.performNextOperation()}))}))}}}},{key:"planOperation",value:function(e,t){var r=this.abortId;if(this.destroyed)throw new Error("SourceBuffer operation with type=".concat(e," skipped after destroy"));var n=new Wf.B,i=Ed.findIndex((function(t){return t.includes(e)}));if(-1===i)throw new Error("SourceBuffer unknown operation with type=".concat(e));return this.queues[i].push({defer:n,abortId:r,operation:t,type:e}),this.performNextOperation(),n.promise}},{key:"changeType",value:function(e){var t=this;return this.planOperation(Pl.changeType,cc(ac().mark((function r(){return ac().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.mimeType!==e){r.next=2;break}return r.abrupt("return");case 2:t.sourceBuffer.changeType(e),t.mimeType=e;case 4:case"end":return r.stop()}}),r)}))))}},{key:"append",value:function(e){var t=this,r=this.removeId;return this.planOperation(Pl.append,(function(){return new wd((function(n,i){if(r===t.removeId){var o=new Wf.B,a=new Wf.B,u=(0,bd.O)(t.sourceBuffer,"updateend",(function(){o.resolve(),a.resolve()})),c=(0,bd.O)(t.sourceBuffer,"error",(function(){a.reject(new hl.w({code:"YASP_MSE_FAILED_TO_EXECUTE_PROCEDURE",message:"Failed to execute append operation in SourceBuffer",details:{operation:"append"},isFatal:!1,category:dl.q.EXCEPTION}))})),s=(0,bd.O)(t.sourceBuffer,"abort",(function(){a.reject(new hl.w({code:"YASP_OPERATION_ABORTED",details:{},isFatal:!1,category:dl.q.EXCEPTION,message:"SourceBuffer append operation aborted"}))}));try{t.sourceBuffer.appendBuffer(e)}catch(h){var l=(0,Cf.V)(h)?h:new Error("Failed to start append operation in SourceBuffer"),f="InvalidStateError"===l.name?"YASP_INVALID_STATE_ERROR":"YASP_QUOTA_EXCEEDED_ERROR";return void i(new hl.w({code:f,message:l.message,details:{operation:"append",error:l},isFatal:!1,category:dl.q.EXCEPTION}))}o.promise.then((function(){return a.promise})).catch(i).then(n).then((function(){u(),c(),s()}))}else i(new hl.w({code:"YASP_OPERATION_ABORTED",details:{},isFatal:!1,category:dl.q.EXCEPTION,message:"SourceBuffer append operation aborted before start"}))}))}))}},{key:"remove",value:function(e,t){var r=this;return this.planOperation(Pl.remove,(function(){return new wd((function(n,i){r.removeId++;var o=new Wf.B,a=new Wf.B,u=(0,bd.O)(r.sourceBuffer,"updateend",(function(){o.resolve(),a.resolve()})),c=(0,bd.O)(r.sourceBuffer,"error",(function(){a.reject(new hl.w({code:"YASP_MSE_FAILED_TO_EXECUTE_PROCEDURE",message:"Failed to execute remove operation in SourceBuffer",details:{operation:"remove"},isFatal:!1,category:dl.q.EXCEPTION}))})),s=(0,bd.O)(r.sourceBuffer,"abort",(function(){a.reject(new hl.w({code:"YASP_OPERATION_ABORTED",details:{},isFatal:!1,category:dl.q.EXCEPTION,message:"SourceBuffer remove operation aborted"}))}));try{r.sourceBuffer.remove(e,t)}catch(l){return void i(new hl.w({code:"YASP_MSE_FAILED_TO_START_OPERATION",message:(0,Cf.V)(l)?l.message:"Failed to start remove operation in SourceBuffer",details:{operation:"remove",error:l},isFatal:!1,category:dl.q.EXCEPTION}))}o.promise.then((function(){return a.promise})).catch(i).then(n).then((function(){u(),c(),s()}))}))}))}},{key:"setTimestampOffset",value:function(e){var t=this;return this.planOperation(Pl.setTimestampOffset,cc(ac().mark((function r(){return ac().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e>0&&(e-=.001),t.sourceBuffer.timestampOffset!==-e){r.next=3;break}return r.abrupt("return");case 3:t.sourceBuffer.timestampOffset=-e;case 4:case"end":return r.stop()}}),r)}))))}},{key:"abort",value:function(){this.abortId++}},{key:"getBufferedRange",value:function(){var e,t=this;return null!==(e=(0,hf.Y)((function(){return(0,Uh.w)(t.sourceBuffer)})))&&void 0!==e?e:[]}},{key:"getBufferEnd",value:function(){var e=this.getBufferedRange(),t=e.length;return t?e[t-1].end:null}},{key:"destroy",value:(i=cc(ac().mark((function e(){var t=this;return ac().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.abort(),e.abrupt("return",this.sync.waitAndLock(cc(ac().mark((function e(){return ac().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t.mediaSource.removeSourceBuffer(t.sourceBuffer)}catch(r){}t.destroyed=!0;case 2:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"getDebugInfo",value:function(){return{abortId:this.abortId,removeId:this.removeId,mimeType:this.mimeType,locked:!this.sync.isFree(),buffered:this.getBufferedRange(),queues:this.queues.map((function(e){return e.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oc(Object(r),!0).forEach((function(t){lc(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e)}))}))}}}],n=[{key:"isChangeTypeSupported",value:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return!vd&&!md&&Boolean(e.SourceBuffer)&&Boolean(e.SourceBuffer.prototype)&&Boolean(e.SourceBuffer.prototype.changeType)}(self)}}],r&&sc(t.prototype,r),n&&sc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Sd=r(84754),kd=r(88948),Td=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=h.call(this)).mimeTypes=e,kc(Oc(r),"destroyed",!1),kc(Oc(r),"mediaSource",void 0),kc(Oc(r),"mediaSourceOpenDeferred",new Wf.B),kc(Oc(r),"sourceBufferEngines",{}),kc(Oc(r),"objectUrl",void 0),kc(Oc(r),"listeners",[]),kc(Oc(r),"reloadingMediaSource",!1),kc(Oc(r),"nextDurationToSet",null),(0,af.v)(r.mediaSourceOpenDeferred.promise),r.createMediaSource(),r.objectUrl=r.createObjectUrl(),r.once("Destroy",(function(){r.destroyed=!0,r.removeListeners()})),r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wc(e,t)}(t,e);var r,n,i,o,a,u,c,s,l,f,h=_c(t);return r=t,(n=[{key:"createMediaSource",value:function(){var e=this,t=(0,Lf.Q)(self),r=this.mediaSource=new t,n=(0,Ul.Z)(this.mimeTypes),i=function(){try{n.forEach((function(t){return e.createSourceBufferEngine(t)}))}catch(t){return e.mediaSourceOpenDeferred.reject(t),void e.destroy()}e.emit("Open"),e.mediaSourceOpenDeferred.resolve(),e.revokeObjectUrl()},o=new Wf.B,a=n.length,u=0;return r.sourceBuffers.addEventListener("addsourcebuffer",(function(){++u===a&&o.resolve()})),"open"===r.readyState?i():this.addListener(r,"sourceopen",i,{once:!0}),{sourceBufferAddingPromise:o.promise}}},{key:"addListener",value:function(e,t,r,n){e.addEventListener(t,r,n);var i=function(){return e.removeEventListener(t,r)};return this.listeners.push(i),i}},{key:"removeListeners",value:function(){this.listeners.forEach((function(e){return e()})),this.listeners.length=0}},{key:"clearBuffer",value:(f=vc(pc().mark((function e(t,r,n){var i;return pc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.destroyed){e.next=2;break}throw new Error("Can not clearBuffer because CoreMediaSourceEngine is destroyed");case 2:if(this.checkType(t)){e.next=4;break}return e.abrupt("return");case 4:if("open"===this.mediaSource.readyState){e.next=7;break}return e.next=7,this.mediaSourceOpenDeferred.promise;case 7:if(!this.reloadingMediaSource){e.next=9;break}return e.abrupt("return");case 9:return i=this.sourceBufferEngines[t],e.next=12,null===i||void 0===i?void 0:i.remove(r,n);case 12:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return f.apply(this,arguments)})},{key:"changeCodec",value:(l=vc(pc().mark((function e(t,r){var n;return pc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.checkType(t)){e.next=2;break}return e.abrupt("return");case 2:if("open"===this.mediaSource.readyState){e.next=5;break}return e.next=5,this.mediaSourceOpenDeferred.promise;case 5:if(this.mimeTypes[t]=r,!Od.isChangeTypeSupported()){e.next=9;break}return n=this.sourceBufferEngines[t],e.abrupt("return",null===n||void 0===n?void 0:n.changeType(r));case 9:return e.abrupt("return",this.reset());case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)})},{key:"abort",value:function(){this.destroyed||(0,Bl.z)(this.sourceBufferEngines).forEach((function(e){null===e||void 0===e||e.abort()}))}},{key:"reset",value:(s=vc(pc().mark((function e(){var t,r,n,i;return pc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.reloadingMediaSource=!0,this.removeListeners(),e.prev=2,e.next=5,this.removeSourceBuffers();case 5:return r=null!==(t=this.nextDurationToSet)&&void 0!==t?t:this.mediaSource.duration,this.mediaSource=null,this.mediaSourceOpenDeferred=new Wf.B,(0,af.v)(this.mediaSourceOpenDeferred.promise),n=this.createMediaSource(),i=n.sourceBufferAddingPromise,this.objectUrl=this.createObjectUrl(),null!==r&&this.setDuration(r),this.emit("Reset",this.getObjectUrl()),e.next=15,i;case 15:return e.prev=15,this.reloadingMediaSource=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,,15,18]])}))),function(){return s.apply(this,arguments)})},{key:"checkType",value:function(e){return Boolean(this.mimeTypes[e])}},{key:"createObjectUrl",value:function(){return self.URL.createObjectURL(this.mediaSource)||this.mediaSource.handle}},{key:"revokeObjectUrl",value:function(){"string"===typeof this.objectUrl&&self.URL.revokeObjectURL(this.objectUrl)}},{key:"appendBuffer",value:(c=vc(pc().mark((function e(t,r){var n;return pc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.destroyed){e.next=2;break}throw new Error("Can not appendBuffer because CoreMediaSourceEngine is destroyed");case 2:if("open"===this.mediaSource.readyState){e.next=5;break}return e.next=5,this.mediaSourceOpenDeferred.promise;case 5:if(!this.reloadingMediaSource){e.next=7;break}throw new Error("Can not appendBuffer because CoreMediaSourceEngine is reloading");case 7:return n=this.sourceBufferEngines[t],e.abrupt("return",null===n||void 0===n?void 0:n.append(r));case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"getObjectUrl",value:function(){return this.objectUrl}},{key:"isReloading",value:function(){return this.reloadingMediaSource}},{key:"getReadyState",value:function(){return this.mediaSource.readyState}},{key:"endOfStream",value:function(){if(!this.reloadingMediaSource&&"open"===this.mediaSource.readyState){var e,t=hc(["audio","video"]);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(void 0!==this.sourceBufferEngines[r]&&!this.sourceBufferEngines[r].isFree())return}}catch(n){t.e(n)}finally{t.f()}this.mediaSource.endOfStream()}}},{key:"getSourceBufferBufferedRange",value:function(e){var t;return null===(t=this.sourceBufferEngines[e])||void 0===t?void 0:t.getBufferedRange()}},{key:"setDuration",value:function(e){var t=this;isNaN(e)||(this.nextDurationToSet=e,"open"!==this.mediaSource.readyState?this.mediaSourceOpenDeferred.promise.then((function(){return t.tryToSetDuration()})).catch((function(e){t.destroyed||(0,Il.L)(e)})):this.tryToSetDuration())}},{key:"tryToSetDuration",value:function(){var e=this;if(null!==this.nextDurationToSet)for(var t=["audio","video"],r={audio:new Wf.B,video:new Wf.B},n=function(){var n,a=o[i],u=e.sourceBufferEngines[a],c=function(){var n=vc(pc().mark((function n(){return pc().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r[a].resolve(),n.next=3,r[t[t.indexOf(a)%t.length]].promise;case 3:null!==e.nextDurationToSet&&(e.mediaSource.duration=e.nextDurationToSet,e.nextDurationToSet=null);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();if(!u)return c(),"continue";var s=null!==(n=u.getBufferEnd())&&void 0!==n?n:e.nextDurationToSet;s>e.nextDurationToSet&&u.remove(e.nextDurationToSet,s),u.lockForExternalOperation(c)},i=0,o=t;i<o.length;i++)n()}},{key:"getDuration",value:function(){return this.mediaSource.duration}},{key:"setLiveSeekableRange",value:(u=vc(pc().mark((function e(t,r){return pc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,Sd.m)(this.mediaSource.setLiveSeekableRange)){e.next=2;break}return e.abrupt("return");case 2:if(!this.reloadingMediaSource){e.next=4;break}throw new Error("Can not setLiveSeekableRange because CoreMediaSourceEngine is reloading");case 4:if(!this.destroyed){e.next=6;break}throw new Error("Can not setLiveSeekableRange because CoreMediaSourceEngine is destroyed");case 6:if(!(t<0)){e.next=8;break}throw new Error("Can not setLiveSeekableRange because start value is negative");case 8:if(!(t>r)){e.next=10;break}throw new Error("Can not setLiveSeekableRange because start value is greater then end value");case 10:if("open"===this.mediaSource.readyState){e.next=13;break}return e.next=13,this.mediaSourceOpenDeferred.promise;case 13:this.mediaSource.setLiveSeekableRange(t,r);case 14:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"setTimestampOffset",value:(a=vc(pc().mark((function e(t,r){var n;return pc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.destroyed){e.next=2;break}throw new Error("Can not setTimestampOffset because CoreMediaSourceEngine is destroyed");case 2:if("open"===this.mediaSource.readyState){e.next=5;break}return e.next=5,this.mediaSourceOpenDeferred.promise;case 5:if(!this.reloadingMediaSource){e.next=7;break}return e.abrupt("return");case 7:return n=this.sourceBufferEngines[t],e.abrupt("return",null===n||void 0===n?void 0:n.setTimestampOffset(r));case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"getBufferedRanges",value:function(){return{audio:this.getBufferedRangesByType("audio"),video:this.getBufferedRangesByType("video")}}},{key:"getBufferedRangesByType",value:function(e){var t;return null!==(t=this.getSourceBufferBufferedRange(e))&&void 0!==t?t:[]}},{key:"destroy",value:(o=vc(pc().mark((function e(){return pc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.destroyed){e.next=2;break}return e.abrupt("return");case 2:bc(Sc(t.prototype),"destroy",this).call(this),this.mediaSourceOpenDeferred.reject(new Error("Can not open media source because CoreMediaSourceEngine is destroyed"));try{this.mediaSource.endOfStream()}catch(r){}return e.next=7,this.removeSourceBuffers();case 7:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"removeSourceBuffers",value:function(){var e=this;return this.abort(),kd.all((0,Ul.Z)(this.sourceBufferEngines).map(function(){var t=vc(pc().mark((function t(r){return pc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.sourceBufferEngines[r].destroy();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),e.destroyed||(0,Il.L)(t.t0);case 8:delete e.sourceBufferEngines[r];case 9:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()))}},{key:"createSourceBufferEngine",value:function(e){if(!this.sourceBufferEngines[e]){var t=this.mimeTypes[e];if(!t)throw new hl.w({code:"YASP_EMPTY_MIME",details:{},isFatal:!0,category:dl.q.MEDIA});try{this.sourceBufferEngines[e]=new Od(t,this.mediaSource)}catch(r){throw new hl.w({code:"YASP_CANNOT_CREATE_SOURCE_BUFFER",details:{reason:r.name,mimeType:t},isFatal:!0,category:dl.q.MEDIA})}}}},{key:"getDebugInfo",value:function(){var e,t,r,n,i,o;return{readyState:this.getReadyState(),audio:null!==(e=null===(t=this.sourceBufferEngines)||void 0===t||null===(r=t.audio)||void 0===r?void 0:r.getDebugInfo())&&void 0!==e?e:null,video:null!==(n=null===(i=this.sourceBufferEngines)||void 0===i||null===(o=i.video)||void 0===o?void 0:o.getDebugInfo())&&void 0!==n?n:null}}}])&&mc(r.prototype,n),i&&mc(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(xl.M),Rd=r(39881),Pd=r(88891),xd=r(88891),jd=r(90719);!function(e){e[e.KILOBYTE=1024]="KILOBYTE",e[e.MEGABYTE=1048576]="MEGABYTE"}(_d||(_d={}));var Ad=r(88948),Ld=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Vc(Uc(r=l.call(this)),"url",void 0),Vc(Uc(r),"fetcher",void 0),Vc(Uc(r),"timeline",void 0),Vc(Uc(r),"parser",void 0),Vc(Uc(r),"attempt",0),Vc(Uc(r),"aborted",!1),Vc(Uc(r),"abortFn",null),Vc(Uc(r),"_offset",void 0),Vc(Uc(r),"_ftyp",new ArrayBuffer(0)),Vc(Uc(r),"_moov",new ArrayBuffer(0)),Vc(Uc(r),"_sidx",new ArrayBuffer(0)),Vc(Uc(r),"_segmentsInfo",[]),Vc(Uc(r),"_timescale",1),r.url=e.url,r.timeline=e.timeline,r.parser=new el,r.fetcher=new Af(e.fetcherParams),r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mc(e,t)}(t,e);var r,n,i,o,a,u,c,s,l=Fc(t);return r=t,(n=[{key:"offset",get:function(){return this._offset}},{key:"ftyp",get:function(){return this._ftyp}},{key:"moov",get:function(){return this._moov}},{key:"sidx",get:function(){return this._sidx}},{key:"segmentsInfo",get:function(){return this._segmentsInfo}},{key:"update",value:(s=Ic(Ac().mark((function e(){var t;return Ac().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.requestOffset();case 2:return this._offset=e.sent,e.next=5,this.requestFtypMoovSidxBoxes();case 5:if(t=e.sent){e.next=8;break}return e.abrupt("return");case 8:this._ftyp=t.ftyp,this._moov=t.moov,this._sidx=t.sidx.buffer,this._segmentsInfo=t.sidx.segmentsInfo,this._timescale=t.sidx.timescale,this.applySegmentsInfoToTimeline();case 14:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"applySegmentsInfoToTimeline",value:function(){if(void 0!==this._offset){var e,t,r=(0,jf.UO)(this.url),n=this._segmentsInfo[this._segmentsInfo.length-1].endTime/this._timescale*1e3;this.timeline.obtainTimelineTrack({type:"audio",name:r,codecs:Rc(this.url),id:"".concat(r,"_").concat(n),bitrate:(e=this._segmentsInfo,t=this._timescale,Math.round(8*e.reduce((function(e,t){return e+t.size}),0)/e.reduce((function(e,r){return e+r.duration/t}),0))||0),language:null,initialization:null,timescale:this._timescale,media:"",mimeType:"audio/mp4",startNumber:Math.max(Math.floor(1)),startTime:this._segmentsInfo[0].startTime/this._timescale*1e3,endNumber:Math.max(Math.floor(this._segmentsInfo.length)),endTime:n,presentationTimeOffset:0,segmentSequences:Pc(this._segmentsInfo,this._offset,this._timescale)})}}},{key:"isInitiallyLoaded",value:function(){return void 0!==this._offset&&0!==this._segmentsInfo.length}},{key:"setFetcherBaseParams",value:function(e){this.fetcher.setBaseParams(e)}},{key:"getBaseUrls",value:function(){return[this.url]}},{key:"abort",value:function(){this.abortFn&&this.abortFn(),this.aborted=!0}},{key:"destroy",value:function(){this.abort(),Dc(Gc(t.prototype),"destroy",this).call(this)}},{key:"getDebugInfo",value:function(){return{url:this.url,offset:this._offset,segmentsInfo:this._segmentsInfo,attempt:this.attempt}}},{key:"requestFtypMoovSidxBoxes",value:(c=Ic(Ac().mark((function e(){var t,r,n;return Ac().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this._offset){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.requestDataStream(this._offset,this._offset+_d.MEGABYTE);case 5:if(t=e.sent){e.next=8;break}return e.abrupt("return");case 8:return r={ftyp:new ArrayBuffer(0),moov:new ArrayBuffer(0),sidx:{buffer:new ArrayBuffer(0),segmentsInfo:[],timescale:1}},this.parser.fullBox("ftyp",(function(e){r.ftyp=e.reader.getDataView().buffer.slice(e.start,e.start+e.size)})).fullBox("moov",(function(e){r.moov=e.reader.getDataView().buffer.slice(e.start,e.start+e.size)})).fullBox("sidx",(function(e){r.sidx.buffer=e.reader.getDataView().buffer.slice(e.start,e.start+e.size);var t=xc(e);r.sidx.segmentsInfo=t.segmentsInfo,r.sidx.timescale=t.timescale})).parse(t),e.abrupt("return",r);case 13:return e.prev=13,e.t0=e.catch(0),n=(0,Cf.V)(e.t0)?new hl.w({code:"YASP_PARSE_SIDX_ERROR",details:{url:this.url,error:e.t0},message:e.t0.message,isFatal:!0,category:dl.q.EXCEPTION}):new hl.w({code:"YASP_UNKNOWN_ERROR",details:{url:this.url,error:e.t0},message:"Unknown error. Expect error to be an instance of Error.",isFatal:!0,category:dl.q.EXCEPTION}),this.emit("Error",n),e.abrupt("return");case 18:case"end":return e.stop()}}),e,this,[[0,13]])}))),function(){return c.apply(this,arguments)})},{key:"requestOffset",value:(u=Ic(Ac().mark((function e(){var t,r;return Ac().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.requestDataStream(0,_d.KILOBYTE);case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:return r=0,this.parser.box("uuid",(function(e){e.reader.readUUID(),r=e.reader.readUint64()})).parse(t),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"requestDataStream",value:(a=Ic(Ac().mark((function e(t,r){var n,i,o,a,u,c,s,l,f,h,d=this;return Ac().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.aborted=!1,e.prev=1,n=(0,jd.hj)(t)?this.fetcher.fetchDataStream(this.url,{headers:{Range:"bytes=".concat(t,"-").concat(null!==r&&void 0!==r?r:"")}}):this.fetcher.fetchDataStream(this.url),i=n.response,o=n.abort,this.abortFn=o,e.next=6,i;case 6:if(a=e.sent,u=a.body,(c=a.status)>=200&&c<300||304===c){e.next=12;break}throw c;case 12:return this.attempt=0,this.abortFn=null,e.next=16,this.readDataStream(u);case 16:return e.abrupt("return",e.sent);case 19:if(e.prev=19,e.t0=e.catch(1),l=this.attempt>=10,this.abortFn=null,!(0,jd.hj)(e.t0)){e.next=28;break}f=e.t0,s=0===f?new hl.w({code:"YASP_FETCH_RANGE_HTTP_ERROR",message:"Network Error",details:{url:this.url},category:dl.q.NETWORK_MEDIA,isFatal:l}):new hl.w({code:"YASP_FETCH_RANGE_BAD_HTTP_STATUS",message:"Error: ".concat(f),details:{status:f,url:this.url},isFatal:l,category:dl.q.NETWORK_MEDIA}),e.next=35;break;case 28:if(!(0,Cf.V)(e.t0)){e.next=34;break}if("Request canceled"!==e.t0.message&&"Abort error"!==e.t0.message){e.next=31;break}return e.abrupt("return");case 31:s=new hl.w({code:"Request timed out"===e.t0.message?"YASP_FETCH_RANGE_TIMEOUT":"YASP_FETCH_RANGE_HTTP_ERROR",details:{url:this.url},message:e.t0.message,isFatal:l,category:"Request timed out"===e.t0.message?dl.q.NETWORK_TIMEOUT:dl.q.NETWORK_MEDIA}),e.next=35;break;case 34:s=new hl.w({code:"YASP_UNKNOWN_ERROR",details:{url:this.url,error:e.t0},message:"Unknown error. Expect error to be an instance of Error.",isFatal:l,category:dl.q.NETWORK_MEDIA});case 35:if(this.emit("Error",s),!l&&!s.isFatal){e.next=38;break}return e.abrupt("return");case 38:if(h=(0,Mf._)(Kn(this.attempt++)),!this.aborted){e.next=41;break}return e.abrupt("return");case 41:return e.abrupt("return",h.then((function(){if(!d.aborted)return d.requestDataStream(t,r)})));case 42:case"end":return e.stop()}}),e,this,[[1,19]])}))),function(e,t){return a.apply(this,arguments)})},{key:"readDataStream",value:(o=Ic(Ac().mark((function e(t){var r,n,i,o,a;return Ac().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,r=new Uint8Array,n=!1;case 3:if(n){e.next=13;break}return e.next=6,t.read();case 6:i=e.sent,o=i.value,a=i.done,n=a,o&&(r=ml.P.concat(r,o)),e.next=3;break;case 13:return e.abrupt("return",r);case 16:return e.prev=16,e.t0=e.catch(0),this.emit("Error",new hl.w({code:"YASP_PARSE_ERROR_EXCEPTION",message:"Data stream reading exception",details:{error:e.t0,errorString:e.t0 instanceof Error?e.t0.message:"Data stream reading exception"},category:dl.q.EXCEPTION,isFatal:!0})),e.abrupt("return");case 20:case"end":return e.stop()}}),e,this,[[0,16]])}))),function(e){return o.apply(this,arguments)})}])&&Nc(r.prototype,n),i&&Nc(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(xl.M),Id=r(88948),Nd=(0,sh.V)(self)||(0,lh.y)(self)||(0,Rd.F)(self),Dd=function(e){function t(e,r,n,i){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=c.call(this)).cron=e,o.url=r,o.mediaState=n,o.callbacks=i,os(ns(o),"abr",void 0),os(ns(o),"bandwidthEstimator",void 0),os(ns(o),"ttfbEstimator",void 0),os(ns(o),"playlist",void 0),os(ns(o),"playlistUpdater",void 0),os(ns(o),"timeline",void 0),os(ns(o),"mse",void 0),os(ns(o),"mseFeeder",void 0),os(ns(o),"mseGc",void 0),os(ns(o),"timelineFiller",void 0),os(ns(o),"seekableUpdater",void 0),os(ns(o),"timelineGc",void 0),os(ns(o),"yaspWatchedTimeCollector",void 0),os(ns(o),"segmentFetcher",void 0),os(ns(o),"targetLatencyUpdater",void 0),os(ns(o),"cmafLogger",void 0),os(ns(o),"fetcher",void 0),os(ns(o),"fetcherParams",void 0),os(ns(o),"fetcherProgressAccumulator",void 0),os(ns(o),"attached",!1),os(ns(o),"startPosition",null),os(ns(o),"destroyed",!1),os(ns(o),"performOnLoad",void 0),os(ns(o),"watchedTime",0),os(ns(o),"bufferGoalManager",void 0),os(ns(o),"timelineFillerBufferGoalInterval",void 0),os(ns(o),"videoType",void 0),os(ns(o),"isLowLatency",!1),os(ns(o),"maxStartTimestamp",null),os(ns(o),"wasSegmentLoaded",!1),self.source=ns(o),o.startPosition=ea(o.url),o.performOnLoad=(0,Sh.P)(new Id((function(e){o.once("ManifestLoaded",e)}))),o.timeline=o.createTimeline(),o.subscribeToTrackChanges(),o.bufferGoalManager=new ld;var a=function(e,t,r,n,i){var o=Fh.f.obtain(i),a=(0,Dl.RW)("web_mp_ttfb_estimator")?new od:new Bh,u=[new rd,new Jh(e),new Qh(o),new Vh(o,a,n),new Zh(r,t),new Xh];return{bandwidthEstimator:o,ttfbEstimator:a,abr:new Mh({rules:u})}}((function(){var e,t;return null!==(e=null===(t=o.playlist)||void 0===t?void 0:t.getPlaylistCapHeight())&&void 0!==e?e:null}),(function(){return o.callbacks.getUserQuality()}),(function(){return o.callbacks.getMaxAutoQuality()}),(function(){return o.getRemainingTimeToStart()}),o.callbacks.getDefaultBandwidth().value),u=a.bandwidthEstimator,s=a.ttfbEstimator,l=a.abr;o.bandwidthEstimator=u,o.ttfbEstimator=s,o.abr=l,o.abr.on("AbrDecisionChange",(function(e){var t=JSON.stringify(Zc(Zc({},e),{},{type:o.attached?"main":"preload"}));o.sendEvent({name:"AbrDecisionChange",data:{message:t},shouldLogWhenDetached:!0})})),o.abr.on("MaxCapAllowedVideoTrackUpdate",(function(e){var t,r,n,i;e&&null!==(t=e.video)&&void 0!==t&&t.width&&null!==(r=e.video)&&void 0!==r&&r.height&&o.emit("MaxCapAllowedVideoTrackUpdate",{width:null===(n=e.video)||void 0===n?void 0:n.width,height:null===(i=e.video)||void 0===i?void 0:i.height})})),o.on("SegmentLoaded",(function(e){var t;null===(t=o.mseFeeder)||void 0===t||t.run(),o.wasSegmentLoaded=!0}));var f=(0,hd.p)();return void 0!==f&&(o.maxStartTimestamp=Date.now()+1e3*f),o}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&es(e,t)}(t,e);var r,n,i,o,a,u,c=ts(t);return r=t,n=[{key:"getRemainingTimeToStart",value:function(){if(!this.maxStartTimestamp||this.wasSegmentLoaded)return null;var e=this.maxStartTimestamp-Date.now();return e<=0?0:e/1e3}},{key:"updateSourceInfo",value:function(e){var t,r,n=(0,Cs.IN)(e);null===(t=this.playlist)||void 0===t||t.setSourceIndex(n),null===(r=this.timelineFiller)||void 0===r||r.setSourceIndex(n)}},{key:"checkTotalBufferDuration",value:function(e,t){var r=this.timelineGc?this.timelineGc.getTotalExpectedBufferSize()+10:60,n=e.reduce((function(e,t){return e+(t.end-t.start)}),0);n>r&&this.sendEvent({name:"FatTimelineBuffer",shouldLogWhenDetached:!0,data:{type:t,expectedSize:r,size:n}})}},{key:"emitManifestoError",value:function(e,t,r){var n,i=null===(n=this.playlist)||void 0===n?void 0:n.getDebugInfo();if(i){var o=new hl.w({message:e.message,code:"YASP_MANIFESTO_UNHANDLED",details:Zc(Zc({},i),{},{start:t,end:r}),isFatal:!1,category:dl.q.EXCEPTION});this.emit("Error",o)}}},{key:"createTimeline",value:function(){var e=this;if(this.timeline)return this.timeline;var t=new zl;return t.on("BufferedInfoChanged",(function(t){e.checkTotalBufferDuration(t.video,"video"),e.checkTotalBufferDuration(t.audio,"audio"),e.emit("BufferedInfoChanged",t)})),t.on("CuesAdded",(function(t){e.emit("CuesAdded",t)})),t.on("CodecsChange",(function(t){var r;if(e.mse){null===(r=e.mseFeeder)||void 0===r||r.abortForType(t.type);var n=t.getFullMimeType();e.mse.changeCodec(t.type,n)}})),t.on("StreamEndTimeUpdate",(function(t){e.emit("StreamEndTimeUpdate",t)})),t}},{key:"getStartPosition",value:function(){var e;return null!==this.startPosition&&Number.isFinite(this.startPosition)?this.startPosition:null!==(e=this.timeline)&&void 0!==e&&e.getIsDynamic()?Math.floor(this.timeline.getSeekableRange().end/1e3):this.timeline.getSeekableRange().start/1e3}},{key:"setDurationByVideoType",value:function(){if(this.mse&&this.videoType){var e=this.timeline.getDuration();void 0!==e&&this.mse.setDuration(e/1e3)}}},{key:"updateStreamingParameters",value:function(){var e=this;if(this.videoType&&this.emit("VideoTypeChange",this.videoType),this.playlist){var t=this.playlist.getDrmInfos();t.length>0&&this.emit("DrmInfoReceived",t)}this.emit("UtcStartTimeUpdate",this.timeline.getUtcStartTime());var r=this.timeline.getSeekableRange(),n=r.start/1e3,i=r.end/1e3;"number"===typeof this.startPosition&&(this.startPosition=Math.min(Math.max(this.startPosition,n),i-dd.C)),this.mse&&this.timeline.getIsDynamic()&&this.mse.setLiveSeekableRange(n,i).catch((function(t){e.attached&&(e.emitManifestoError(t,n,i),(0,Il.L)(t))})),this.emit("SeekableRangeUpdate",{start:n,end:i}),this.emit("IsLowLatencyChange",this.isLowLatency)}},{key:"load",value:(u=$c(Wc().mark((function e(t){var r,n,i,o,a,u=this;return Wc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("mp4"!==Tc(this.url)){e.next=4;break}return e.next=3,this.loadMP4(t);case 3:return e.abrupt("return");case 4:if(this.timeline.emitBufferedInfoChanged(),this.playlist||(this.playlist=new Uf({url:this.url,timeline:this.timeline,fetcherParams:this.fetcherParams}),this.playlist.on("Error",(function(e){u.emit("Error",e)})),this.playlist.on("DrmInfoReceived",(function(e){u.emit("DrmInfoReceived",e)})),this.playlist.on("ServerTimeChange",(function(e){u.emit("ServerTimeChange",e)})),this.playlist.on("ManifestUpdate",(function(){var e,t,r,n;u.emit("UtcStartTimeUpdate",u.timeline.getUtcStartTime());var i=u.timeline.getSeekableRange(),o=i.start/1e3,a=i.end/1e3;null===(e=u.mse)||void 0===e||e.setLiveSeekableRange(o,a).catch((function(e){u.attached&&(u.emitManifestoError(e,o,a),(0,Il.L)(e))})),u.emit("SeekableRangeUpdate",{start:o,end:a});var c=null===(t=u.playlist)||void 0===t?void 0:t.getVideoType();u.videoType!==c&&(u.videoType=c,u.emit("VideoTypeChange",u.videoType),u.setDurationByVideoType());var s=u.timeline.isLowLatencyLive();u.isLowLatency!==s&&(u.isLowLatency=s,u.emit("IsLowLatencyChange",u.isLowLatency),u.isLowLatency&&u.sendEvent({name:"LowLatencyDetected",data:{url:u.url},shouldLogWhenDetached:!0})),null===(r=u.segmentFetcher)||void 0===r||r.setEmsgSchemeIdUris(null===(n=u.playlist)||void 0===n?void 0:n.getEmsgSchemeIdUris())}))),this.playlistUpdater=null!==(r=this.playlistUpdater)&&void 0!==r?r:new Hf(this.playlist),this.playlist.isInitiallyLoaded()){e.next=13;break}return e.next=10,this.playlistUpdater.update();case 10:this.emit("ManifestLoaded"),e.next=14;break;case 13:this.updateStreamingParameters();case 14:if(!this.destroyed){e.next=16;break}return e.abrupt("return");case 16:return this.fetcher||(this.fetcher=new Af(Zc(Zc({},this.fetcherParams),{},{storePath:t})),this.fetcher.setIsLL(this.timeline.isLowLatencyLive()),this.fetcher.isLL()?this.bandwidthEstimator.appendFetcher(this.fetcher):(this.fetcherProgressAccumulator=(0,Dl.RW)("web_mp_ttfb_estimator")?new Ih:new Th,this.fetcherProgressAccumulator.on("NetworkTrace",(function(e){u.sendEvent({name:"NetworkTrace",data:e})})),this.fetcherProgressAccumulator.appendFetcher(this.fetcher),this.bandwidthEstimator.appendFetcher(this.fetcherProgressAccumulator)),null===(n=this.ttfbEstimator)||void 0===n||n.appendFetcher(this.fetcher)),this.cmafLogger||(i=function(e){u.sendEvent({name:"MediaFormatChange",data:e})},this.cmafLogger=new pd(i,this.getMseConfig())),this.segmentFetcher||(this.segmentFetcher=new _h(this.fetcher),this.segmentFetcher.setEmsgSchemeIdUris(null===(o=this.playlist)||void 0===o?void 0:o.getEmsgSchemeIdUris()),this.segmentFetcher.on("EmsgDetected",(function(e){u.emit("EmsgDetected",e)})),this.segmentFetcher.on("ManifestUpdateRequired",(function(){var e;null===(e=u.playlistUpdater)||void 0===e||e.forceUpdate()})),this.segmentFetcher.on("SegmentLoaded",(function(e){var t;null===(t=u.cmafLogger)||void 0===t||t.update(e.type,e.cmaf),u.emit("SegmentLoaded",e)})),this.segmentFetcher.on("BufferAllocationError",(function(e){var t,r,n,i=u.mediaState.currentTime?1e3*u.mediaState.currentTime:0,o=u.timeline.getSegmentsDebugInfo(i),a=(null===(t=u.mse)||void 0===t?void 0:t.getBufferedRanges())||{audio:[],video:[]};(0,Dl.RW)("yasp_decrease_mse_buffer_on_allocation_error")&&(null===(r=u.mseFeeder)||void 0===r||r.setBufferGoal(15),null===(n=u.mseGc)||void 0===n||n.setBufferGoal(15));var c=new hl.w({isFatal:!1,message:e.error.message,code:"YASP_BUFFER_ALLOCATION_ERROR",category:dl.q.EXCEPTION,details:{type:e.type,video:Zc(Zc({},o.video),{},{buffered:a.video}),audio:Zc(Zc({},o.audio),{},{buffered:a.audio})}});u.emit("Error",c)}))),this.timelineFiller?this.timelineFiller.abortUseless():(this.timelineFiller=new bh({timeline:this.timeline,mediaState:this.mediaState,playlist:this.playlist,bufferGoal:this.getBufferGoal(),abr:this.abr,segmentFetcher:this.segmentFetcher,bandwidthEstimator:this.bandwidthEstimator,ttfbEstimator:this.ttfbEstimator,sourceIndex:(0,Cs.IN)(this.url)}),this.timelineFiller.on("Error",(function(e){u.emit("Error",e)})),this.timelineFiller.on("BandwidthEstimateUpdate",(function(e){u.emit("BandwidthEstimateUpdate",e)})),this.timelineFiller.on("SegmentInProgress",(function(){u.bandwidthEstimator.addActiveSource(u.url)})),this.timelineFiller.on("NoSegmentsInProgress",(function(){u.bandwidthEstimator.removeActiveSource(u.url)})),this.timelineFiller.on("OutOfBytesLimit",(function(){var e;null===(e=u.timelineGc)||void 0===e||e.onOutOfBytesLimit()})),this.cron.plan(this.timelineFiller,100),this.initTimelineFillerBufferGoalAutoUpdate(),this.timelineFiller.setVideoState(mu(this.mediaState,{currentTime:Math.max(null!==(a=this.getStartPosition())&&void 0!==a?a:0,0),duration:this.timeline.getDuration()/1e3})),this.timelineFiller.run()),this.timelineGc||(this.timelineGc=new gh(this.timeline,this.mediaState,30,(function(){return u.getBufferGoal()})),this.cron.plan(this.timelineGc,1e3)),this.yaspWatchedTimeCollector||(this.yaspWatchedTimeCollector=new ud(this.mediaState),this.yaspWatchedTimeCollector.on("WatchedTimeUpdated",(function(e){var t=e.watchedTime;u.watchedTime=t})),this.cron.plan(this.yaspWatchedTimeCollector,100)),this.handleAttachedState(),e.abrupt("return",{startPosition:this.startPosition});case 24:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"loadMP4",value:(a=$c(Wc().mark((function e(t){var r,n,i,o,a,u,c,s,l,f;return Wc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.emit("ManifestLoaded"),a=new Ld({url:this.url,timeline:this.timeline,fetcherParams:Zc(Zc({},this.fetcherParams),{},{storePath:t})}),e.next=4,a.update();case 4:if(a.offset){e.next=6;break}return e.abrupt("return");case 6:null===(r=this.mse)||void 0===r||r.appendBuffer("audio",a.ftyp),null===(n=this.mse)||void 0===n||n.appendBuffer("audio",a.moov),null===(i=this.mse)||void 0===i||i.appendBuffer("audio",a.sidx),u=Yc(null!==(o=a.segmentsInfo)&&void 0!==o?o:[]),e.prev=10,u.s();case 12:if((c=u.n()).done){e.next=22;break}return l=c.value,e.next=16,a.requestDataStream(a.offset+l.startByte,a.offset+l.endByte);case 16:if(f=e.sent){e.next=19;break}return e.abrupt("break",22);case 19:null===(s=this.mse)||void 0===s||s.appendBuffer("audio",f);case 20:e.next=12;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(10),u.e(e.t0);case 27:return e.prev=27,u.f(),e.finish(27);case 30:case"end":return e.stop()}}),e,this,[[10,24,27,30]])}))),function(e){return a.apply(this,arguments)})},{key:"getBufferGoal",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.bufferGoalManager.getBufferGoal({watchedTime:this.watchedTime,currentTime:this.mediaState.currentTime||0,usePreloadBufferGoal:!e})}},{key:"initTimelineFillerBufferGoalAutoUpdate",value:function(){var e=this;this.stopTimelineFillerBufferGoalAutoUpdate();var t=function(){var t;null===(t=e.timelineFiller)||void 0===t||t.setBufferGoal(e.getBufferGoal())};this.timelineFillerBufferGoalInterval=setInterval(t,1e3),t()}},{key:"stopTimelineFillerBufferGoalAutoUpdate",value:function(){this.timelineFillerBufferGoalInterval&&clearInterval(this.timelineFillerBufferGoalInterval)}},{key:"handleSeek",value:(o=$c(Wc().mark((function e(){var t,r,n,i,o,a,u,c,s,l=this;return Wc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,lh.y)(self)){e.next=5;break}return e.next=3,(0,Mf._)(100);case 3:e.next=8;break;case 5:if(!(0,sh.V)(self)){e.next=8;break}return e.next=8,(0,Mf._)(0);case 8:if(null===(t=this.timelineFiller)||void 0===t||t.abortUseless(),null===(r=this.timelineFiller)||void 0===r||r.run(),null===(n=this.cmafLogger)||void 0===n||n.onSeek(),!(0,Dl.RW)("yasp_no_source_abort_on_fake_seek")){e.next=18;break}return null===(o=this.mse)||void 0===o||o.abort(),null===(a=this.mseFeeder)||void 0===a||a.abortUseless(),e.next=16,null===(u=this.mseGc)||void 0===u?void 0:u.forceRun(this.mediaState.currentTime).catch((function(e){if(l.attached)throw e}));case 16:e.next=21;break;case 18:return e.next=20,null===(c=this.mseGc)||void 0===c?void 0:c.forceRun().catch((function(e){if(l.attached)throw e}));case 20:null===(s=this.mseFeeder)||void 0===s||s.abort();case 21:null===(i=this.mseFeeder)||void 0===i||i.run();case 22:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"handleAttachedState",value:function(){var e,t,r,n,i=this.attached?this.mediaState:mu(this.mediaState,{currentTime:Math.max(null!==(e=this.startPosition)&&void 0!==e?e:0,0),duration:this.timeline.getDuration()/1e3}),o=this.getBufferGoal(this.attached);null===(t=this.timelineFiller)||void 0===t||t.setVideoState(i),null===(r=this.timelineFiller)||void 0===r||r.setBufferGoal(o),null===(n=this.timelineGc)||void 0===n||n.setVideoState(i)}},{key:"handleSeekableUpdater",value:function(){var e=this;if(!this.seekableUpdater&&this.attached)return this.seekableUpdater=new fd(this.timeline),this.seekableUpdater.on("SeekableUpdate",(function(t){e.emit("SeekableRangeUpdate",t)})),void this.cron.plan(this.seekableUpdater,100);this.seekableUpdater&&!this.attached&&(this.cron.cancel(this.seekableUpdater),this.seekableUpdater.destroy(),this.seekableUpdater=void 0)}},{key:"attach",value:function(e){var t=this;return new Id((function(r){t.performOnLoad((function(){var n,i,o,a,u;if(t.attached=!0,t.updateSourceInfo(e),"mp4"===Tc(t.url))return t.mse=null!==(u=t.mse)&&void 0!==u?u:new Td({audio:'audio/mp4; codecs="'.concat(Rc(e),'"')}),void r(t.mse.getObjectUrl());t.playlistUpdater&&t.playlistUpdater.update(),t.startPosition=null!==(n=t.startPosition)&&void 0!==n?n:ea(e),t.timelineGc&&t.cron.plan(t.timelineGc,1e3),t.handleAttachedState(),t.mse=null!==(i=t.mse)&&void 0!==i?i:new Td(t.getMseConfig()),t.mse.on("Reset",(function(e){var r;null===(r=t.mseFeeder)||void 0===r||r.reset(),t.emit("UpdateUrlObject",e)})),t.handleSeekableUpdater(),t.setDurationByVideoType(),t.updateStreamingParameters(),t.mseFeeder=null!==(o=t.mseFeeder)&&void 0!==o?o:new Zf(t.timeline,t.mediaState,t.mse,{bufferGoal:30,totalBufferSoftCap:Yf(),totalBufferHardCap:qf()}),t.mseFeeder.on("QuotaExceededError",(function(){var e,r;null===(e=t.mseFeeder)||void 0===e||e.setBufferGoal(15),null===(r=t.mseGc)||void 0===r||r.setBufferGoal(15)})),t.mseFeeder.on("FatBuffer",(function(e){t.sendEvent({name:"FatBuffer",data:{type:e},shouldLogWhenDetached:!0}),t.mseGc&&t.mseGc.run()})),t.mseFeeder.on("GorgedBuffer",(function(e){t.sendEvent({name:"GorgedBuffer",data:{type:e},shouldLogWhenDetached:!0})})),t.mseGc=null!==(a=t.mseGc)&&void 0!==a?a:new Oh(t.mse,t.mediaState,10,qf()),t.mseFeeder.on("Error",(function(e){t.emit("Error",e)})),!t.targetLatencyUpdater&&t.timeline.isLowLatencyLive()&&(t.targetLatencyUpdater=new Vl({timeline:t.timeline,mediaState:t.mediaState}),t.targetLatencyUpdater.on("TargetLatencyUpdate",(function(e){t.emit("TargetLatencyUpdated",e)})),t.targetLatencyUpdater.notifyTargetLatency()),t.cron.plan(t.mseFeeder,100),t.cron.plan(t.mseGc,1e4),r(t.mse.getObjectUrl())}))}))}},{key:"setVideoTrack",value:function(e){this.timeline.setVideoTrack(e),void 0!==e&&this.handleSetTrack()}},{key:"setAudioTrack",value:function(e){this.timeline.setAudioLanguage(e),void 0!==e&&this.handleSetTrack()}},{key:"handleSetTrack",value:function(){var e,t=this;null===(e=this.mseGc)||void 0===e||e.forceRun().then((function(){var e;null===(e=t.mseFeeder)||void 0===e||e.abort(),Nd||t.emit("FlushMediaPipelineRequested")})).catch((function(e){var r;!t.attached||null!==(r=t.mse)&&void 0!==r&&r.isReloading()||(0,Il.L)(e)}))}},{key:"setTextTrack",value:function(e){this.timeline.setTextTrack(e)}},{key:"getVideoTracks",value:function(){return this.timeline.getVideoTracksInfo()}},{key:"getAudioTracks",value:function(){return this.timeline.getAudioTracksInfo()}},{key:"getTextTracks",value:function(){return this.timeline.getTextTracksInfo()}},{key:"detach",value:function(){if(this.attached){this.attached=!1,this.timelineGc&&this.cron.cancel(this.timelineGc),this.playlistUpdater&&this.playlistUpdater.disable();var e=this.mediaState,t=e.duration,r=e.currentTime;if(r&&r>=t){var n=this.timeline.getSeekableRange().start;this.startPosition=n/1e3}else this.startPosition=this.mediaState.currentTime;this.handleSeekableUpdater(),this.handleAttachedState(),this.mseFeeder&&(this.cron.cancel(this.mseFeeder),this.mseFeeder.destroy(),this.mseFeeder=void 0),this.mseGc&&(this.cron.cancel(this.mseGc),this.mseGc=void 0),this.mse&&(this.mse.destroy(),this.mse=void 0),this.yaspWatchedTimeCollector&&(this.cron.cancel(this.yaspWatchedTimeCollector),this.yaspWatchedTimeCollector.destroy(),this.yaspWatchedTimeCollector=void 0),this.targetLatencyUpdater&&(this.targetLatencyUpdater.destroy(),this.targetLatencyUpdater=void 0)}}},{key:"setVideoElementSizes",value:function(e){var t,r;null!==(t=e.width)&&void 0!==t||(e.width=1/0),null!==(r=e.height)&&void 0!==r||(e.height=1/0),this.abr.setVideoElementSizes(e)}},{key:"destroy",value:function(){var e,r,n,i;this.detach(),this.playlistUpdater&&(this.playlistUpdater.disable(),this.playlistUpdater=void 0),this.mseFeeder&&(this.cron.cancel(this.mseFeeder),this.mseFeeder.destroy(),this.mseFeeder=void 0),this.mseGc&&(this.cron.cancel(this.mseGc),this.mseGc=void 0),this.mse&&(this.mse.destroy(),this.mse=void 0),this.timelineFiller&&(this.cron.cancel(this.timelineFiller),this.timelineFiller.destroy(),this.timelineFiller=void 0,this.stopTimelineFillerBufferGoalAutoUpdate()),this.segmentFetcher&&(this.segmentFetcher.destroy(),this.segmentFetcher=void 0),this.timelineGc&&(this.cron.cancel(this.timelineGc),this.timelineGc=void 0),this.playlist&&(this.playlist.destroy(),this.playlist=void 0),this.fetcher&&(null===(e=this.bandwidthEstimator)||void 0===e||e.removeFetcher(this.fetcher),null===(r=this.fetcherProgressAccumulator)||void 0===r||r.removeFetcher(this.fetcher),null===(n=this.ttfbEstimator)||void 0===n||n.removeFetcher(this.fetcher),this.fetcher.destroy(),this.fetcher=void 0),this.fetcherProgressAccumulator&&(this.fetcherProgressAccumulator.off("NetworkTrace"),null===(i=this.bandwidthEstimator)||void 0===i||i.removeFetcher(this.fetcherProgressAccumulator)),this.yaspWatchedTimeCollector&&(this.cron.cancel(this.yaspWatchedTimeCollector),this.yaspWatchedTimeCollector.destroy(),this.yaspWatchedTimeCollector=void 0),this.fetcherProgressAccumulator=void 0,this.timeline.destroy(),this.abr.off("AbrDecisionChange"),this.destroyed=!0,Jc(is(t.prototype),"destroy",this).call(this)}},{key:"getMseConfig",value:function(){var e=this.timeline.getMimeTypes(),t=e.audio[0],r=e.video[0],n={};return t&&(n.audio=t),r&&(n.video=r),n}},{key:"getDebugInfo",value:function(){var e=null!==this.mediaState.currentTime?1e3*this.mediaState.currentTime:void 0;try{var t,r,n,i,o,a,u,c,s,l,f,h,d,p,y,v,m,b;return JSON.parse(JSON.stringify({attached:this.attached,url:this.url,mediaState:this.mediaState,abr:this.abr.getDebugInfo(),bandwidthEstimator:this.bandwidthEstimator.getDebugInfo(),ttfbEstimator:null!==(t=null===(r=this.ttfbEstimator)||void 0===r?void 0:r.getDebugInfo())&&void 0!==t?t:null,playlist:null!==(n=null===(i=this.playlist)||void 0===i?void 0:i.getDebugInfo())&&void 0!==n?n:null,playlistUpdater:null!==(o=null===(a=this.playlistUpdater)||void 0===a?void 0:a.getDebugInfo())&&void 0!==o?o:null,mse:null!==(u=null===(c=this.mse)||void 0===c?void 0:c.getDebugInfo())&&void 0!==u?u:null,mseFeeder:null!==(s=null===(l=this.mseFeeder)||void 0===l?void 0:l.getDebugInfo())&&void 0!==s?s:null,mseGc:null!==(f=null===(h=this.mseGc)||void 0===h?void 0:h.getDebugInfo())&&void 0!==f?f:null,timeline:this.timeline.getDebugInfo(e),timelineFiller:null!==(d=null===(p=this.timelineFiller)||void 0===p?void 0:p.getDebugInfo())&&void 0!==d?d:null,timelineGc:null!==(y=null===(v=this.timelineGc)||void 0===v?void 0:v.getDebugInfo())&&void 0!==y?y:null,fetcher:null!==(m=null===(b=this.fetcher)||void 0===b?void 0:b.getDebugInfo())&&void 0!==m?m:null,userQuality:this.callbacks.getUserQuality(),maxAutoQuality:this.callbacks.getMaxAutoQuality(),wasSegmentLoaded:this.wasSegmentLoaded,maxStartTimestamp:this.maxStartTimestamp}))}catch(g){return{attached:String(this.attached),url:String(this.url),message:"failed to serialize debug info",error:String(g),stack:String(null===g||void 0===g?void 0:g.stack)}}}},{key:"sendEvent",value:function(e){this.emit("Event",e)}},{key:"getStats",value:function(){var e;return{bandwidth:null===(e=this.bandwidthEstimator)||void 0===e?void 0:e.getBandwidthEstimate()}}},{key:"configure",value:function(e){var t,r,n,i,o;if(null!==(t=e.tracks)&&void 0!==t&&t.videoTrackId&&this.setVideoTrack(e.tracks.videoTrackId),null!==(r=e.tracks)&&void 0!==r&&r.audioLang&&this.setAudioTrack(e.tracks.audioLang),void 0!==(null===(n=e.tracks)||void 0===n?void 0:n.textTrack)&&this.setTextTrack(e.tracks.textTrack),null!==(i=e.offlineParams)&&void 0!==i&&i.storePath){var a,u=e.offlineParams,c=u.storePath,s=u.downloadedFragments;e.tracks&&!s&&xf.handleStart(c,null===(a=this.playlist)||void 0===a?void 0:a.getMpdXml(),e.tracks),this.getBufferGoal()===Number.MAX_SAFE_INTEGER&&0===e.bufferGoal&&xf.handlePause(c),s&&(Pf.downloadedFragments=s)}void 0!==e.bufferGoal&&this.bufferGoalManager.setConstantBufferGoal(e.bufferGoal),this.bandwidthEstimator&&e.defaultBandwidthEstimate&&this.bandwidthEstimator.setDefaultEstimate(e.defaultBandwidthEstimate),this.timeline.setPresentationDelay(e.presentationDelay);var l=this.bufferGoalManager.getSkippableFragments();this.bufferGoalManager.setSkippableFragments(null!==(o=e.skippableFragments)&&void 0!==o?o:l),void 0===e.maxStartTime||this.wasSegmentLoaded||(this.maxStartTimestamp=Date.now()+1e3*e.maxStartTime),this.updateFetchersParams(e)}},{key:"updateFetchersParams",value:function(e){var t,r;this.fetcherParams=function(e,t){var r={};return e.offlineParams&&(r.storePath=e.offlineParams.storePath),void 0===e.withCredentials?ec(ec({},t),r):(r.credentials=e.withCredentials?"include":"omit",r)}(e,this.fetcherParams),null===(t=this.fetcher)||void 0===t||t.setBaseParams(this.fetcherParams),null===(r=this.playlist)||void 0===r||r.setFetcherBaseParams(this.fetcherParams)}},{key:"subscribeToTrackChanges",value:function(){var e=this;this.timeline.on("VideoTrackChange",(function(t){e.emit("VideoTrackChange",t)})),this.timeline.on("VideoTracksChange",(function(t){e.emit("VideoTracksChange",t)})),this.timeline.on("AudioLanguageChange",(function(t){e.emit("AudioLanguageChange",t)})),this.timeline.on("TextTrackChange",(function(t){e.emit("TextTrackChange",t)}))}}],i=[{key:"removeFromDisk",value:function(e){Pf.removeDirectory(e)}}],n&&Xc(r.prototype,n),i&&Xc(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(xl.M),Cd=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),us(this,"timesheet",[]),us(this,"started",!1),us(this,"startTimesheetItem",(function(e){clearInterval(e.intervalId),e.intervalId=self.setInterval((function(){e.tasks.forEach((function(e){if(t.started)try{e.run()}catch(r){self.setTimeout((function(){throw r}))}}))}),e.interval)}))}var t,r,n;return t=e,n=[{key:"stopTimesheetItem",value:function(e){clearInterval(e.intervalId),e.intervalId=void 0}}],(r=[{key:"obtainTimesheetItemByInterval",value:function(e){var t=this.timesheet.find((function(t){return t.interval===e}));if(void 0!==t)return t;var r={interval:e,intervalId:void 0,tasks:[]};return this.started&&this.startTimesheetItem(r),this.timesheet.push(r),r}},{key:"start",value:function(){this.started||(this.started=!0,this.timesheet.forEach(this.startTimesheetItem))}},{key:"stop",value:function(){this.started&&(this.started=!1,this.timesheet.forEach(e.stopTimesheetItem))}},{key:"plan",value:function(e,t){var r=this.obtainTimesheetItemByInterval(t);r.tasks.includes(e)||r.tasks.push(e)}},{key:"cancel",value:function(t){for(var r=0;r<this.timesheet.length;r++){var n=this.timesheet[r],i=n.tasks.indexOf(t);-1!==i&&(n.tasks.splice(i,1),0===n.tasks.length&&(e.stopTimesheetItem(n),this.timesheet.splice(r,1),r-=1))}}},{key:"destroy",value:function(){this.stop(),this.timesheet.length=0}}])&&as(t.prototype,r),n&&as(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Md=r(27926),Fd=r(60045),Bd=r(41647),Ud=r(36531),Gd=r(88468),Vd=r(51911),Hd=r(90153),Yd=r(48493),qd=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ls(this,"storage",new Map),ls(this,"common",{userQuality:Wh.k,maxAutoQuality:zh,defaultBandwidthEstimate:{value:Yd.S,source:"default"}}),ls(this,"onError",void 0),this.onError=t}var t,r,n;return t=e,(r=[{key:"checkAndClearConfigStorage",value:function(){if(!(this.storage.size<100)){for(var e=this.storage.keys(),t=0;t<50;t++)this.storage.delete(e.next().value);this.onError(new Error("To many items in config storage! ".concat(100)))}}},{key:"updateCommonOptions",value:function(e){var t=this;Object.keys(this.common).forEach((function(r){var n=e[r];void 0!==n&&(t.common[r]=n)}))}},{key:"add",value:function(e,t){this.storage.set(e,t),this.updateCommonOptions(t),this.checkAndClearConfigStorage()}},{key:"extract",value:function(e){var t=this.storage.get(e);return this.storage.delete(e),t}},{key:"getCommonOptions",value:function(){return this.common}},{key:"getDebugInfo",value:function(){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cs(Object(r),!0).forEach((function(t){ls(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cs(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({storage:this.storage,size:this.storage.size},this.common)}}])&&ss(t.prototype,r),n&&ss(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Wd=function(e){function t(){return ds(this,t),o.apply(this,arguments)}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ps(e,t)}(t,e);var r,n,i,o=ys(t);return r=t,n&&hs(r.prototype,n),i&&hs(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r}(Ns),zd=r(88948),$d=r(88891),Kd=["objectUrl"],Zd=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scope=t,Ps(this,"yaspRpc",void 0),Ps(this,"cron",new Cd),Ps(this,"sourceManager",void 0),Ps(this,"resourceTimingsMonitor",void 0),Ps(this,"rpcIncomingHistory",new Vd.d(Hd.K)),Ps(this,"rpcOutgoingHistory",new Vd.d(Hd.K)),Ps(this,"handleRpcError",(function(e){var t=new hl.w({code:e.code===Fd.v.METHOD_NOT_FOUND?"YASP_UNKNOWN_METHOD":"YASP_UNKNOWN_ERROR",details:{error:e},isFatal:!1,category:dl.q.EXCEPTION,message:e.message});r.sendEventAndSaveHistory({method:"error",params:{source:null,error:JSON.stringify(t)}})})),Ps(this,"configStorage",new qd(this.handleRpcError)),Ps(this,"getMaxAutoQuality",(function(){return r.configStorage.getCommonOptions().maxAutoQuality})),Ps(this,"getUserQuality",(function(){return r.configStorage.getCommonOptions().userQuality})),Ps(this,"getDefaultBandwidth",(function(){return r.configStorage.getCommonOptions().defaultBandwidthEstimate})),this.yaspRpc=new Md.A((function(e){t.postMessage(e,(0,Bd._)(e))}))}var t,r,n;return t=e,(r=[{key:"init",value:function(){var e=this;this.cron.start(),this.yaspRpc.registerHandler("initWorker",(function(t){return(0,Dl.Vc)(t),e.sourceManager=new Ms(t.sourceLimit),setTimeout((function(){var t="undefined"===typeof document;e.sendEventAndSaveHistory({method:"event",params:{name:t?"YaspWorkerEnabled":"YaspWorkerDisabled",data:void 0,shouldLogWhenDetached:!0}})})),e.initResourceTimingsMonitor(t.perfLogUrl),{done:!0,value:""}})),this.registerHandlerWithHistorySaving("detach",(function(t){var r=t.source,n=e.getSourceObject(r);return n&&(n.off("VideoTrackChange"),n.off("VideoTracksChange"),n.off("AudioLanguageChange"),n.off("TextTrackChange"),n.off("BandwidthEstimateUpdate"),n.off("MaxCapAllowedVideoTrackUpdate"),n.off("ServerTimeChange"),n.detach()),{done:!0,value:void 0}})),this.registerHandlerWithHistorySaving("destroy",(function(t){var r,n=t.source;if(e.getSourceObject(n)&&(null===(r=e.sourceManager)||void 0===r||r.removeSource(n)),n.startsWith("streams")){var i=n.split("/").pop();i&&Dd.removeFromDisk(i)}return{done:!0,value:void 0}})),this.registerHandlerWithHistorySaving("requestDebugInfo",(function(t){var r=t.source;return e.sourceManager?{done:!0,value:{yaspSrc:null!==r&&void 0!==r?r:null,sources:e.sourceManager.getAllSources().map((function(e){return e.getDebugInfo()})),outgoingHistory:e.rpcOutgoingHistory.toArray(),incomingHistory:e.rpcIncomingHistory.toArray(),configStorage:e.configStorage.getDebugInfo()}}:{done:!0,value:void 0}})),this.registerHandlerWithHistorySaving("setVideoElementSizes",(function(t){var r=t.source,n=t.videoSizes,i=e.getSourceObject(r);return null===i||void 0===i||i.setVideoElementSizes(n),{done:!0,value:void 0}})),this.registerHandlerWithHistorySaving("configureSource",(function(t){var r=t.source,n=t.config;try{var i=e.getSourceObjectOrThrowException(r,"configureSource");e.configStorage.updateCommonOptions(n),i.configure(n)}catch(a){var o=(0,Cs.Hi)(r);e.configStorage.add(o,n)}return{done:!0,value:void 0}})),this.registerHandlerWithHistorySaving("attach",function(){var t=Ts(Es().mark((function t(r){var n,i,o;return Es().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.source,(i=e.obtainSource(n)).on("VideoTrackChange",(function(t){e.sendEventAndSaveHistory({method:"changeSelectedVideoTrack",params:{source:n,trackId:t}})})),i.on("AudioLanguageChange",(function(t){e.sendEventAndSaveHistory({method:"changeSelectedAudioLanguage",params:{source:n,language:t}})})),i.on("BandwidthEstimateUpdate",(function(t){e.sendEventAndSaveHistory({method:"updateBandwidthEstimate",params:{bandwidth:t}})})),i.on("MaxCapAllowedVideoTrackUpdate",(function(t){e.sendEventAndSaveHistory({method:"updateMaxCapAllowedVideoTrack",params:{maxCapAllowedVideoTrack:t}})})),i.on("DrmInfoReceived",(function(t){e.sendEventAndSaveHistory({method:"applyDrmInfos",params:{source:n,drmInfos:t}})})),i.on("FlushMediaPipelineRequested",(function(){e.sendEventAndSaveHistory({method:"flushMediaPipeline",params:{source:n}})})),i.on("ServerTimeChange",(function(t){e.sendEventAndSaveHistory({method:"updateServerTime",params:{source:n,time:t}})})),i.on("StreamEndTimeUpdate",(function(t){e.yaspRpc.sendEvent({method:"updateStreamEndTime",params:{source:n,time:t}})})),t.next=12,i.attach(n);case 12:return o=t.sent,e.sendEventAndSaveHistory({method:"setStartInfo",params:{source:n,objectUrl:o,startPosition:i.getStartPosition()}}),e.yaspRpc.sendEvent({method:"changeVideoTracks",params:{source:n,added:i.getVideoTracks().map((function(e){return{source:n,track:Ss(Ss({},e),{},{bitrate:e.bitrate?e.bitrate/1e3:void 0})}})),removed:[]}}),i.on("VideoTracksChange",(function(t){var r=t.added,i=t.removed;e.yaspRpc.sendEvent({method:"changeVideoTracks",params:{source:n,added:r.map((function(e){return{source:n,track:Ss(Ss({},e),{},{bitrate:e.bitrate?e.bitrate/1e3:void 0})}})),removed:i}})})),i.getAudioTracks().forEach((function(t){e.sendEventAndSaveHistory({method:"addAudioTrack",params:{source:n,track:Ss(Ss({},t),{},{bitrate:t.bitrate?t.bitrate/1e3:void 0})}})})),i.getTextTracks().forEach((function(t){e.sendEventAndSaveHistory({method:"addTextTrack",params:{source:n,track:{id:t.id,kind:t.kind,label:t.label,language:t.language||"unknown"}}})})),t.abrupt("return",{done:!0,value:void 0});case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.registerHandlerWithHistorySaving("load",function(){var t=Ts(Es().mark((function t(r){var n,i,o,a;return Es().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.source,i=r.storePath,o=e.obtainSource(n),t.next=4,o.load(i);case 4:return a={video:o.getVideoTracks(),audio:o.getAudioTracks(),text:o.getTextTracks()},t.abrupt("return",{done:!0,value:a});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.registerHandlerWithHistorySaving("seeking",function(){var t=Ts(Es().mark((function t(r){var n,i;return Es().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.source,i=e.obtainSource(n),t.next=4,i.handleSeek();case 4:return t.abrupt("return",{done:!0,value:void 0});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.scope.addEventListener("message",(function(t){"object"===_s(t.data)&&("string"!==typeof t.data.method||"object"===_s(t.data.params)&&null!==t.data.params)&&e.yaspRpc.handleMessage(t)}))}},{key:"initResourceTimingsMonitor",value:function(e){void 0!==e&&void 0===this.resourceTimingsMonitor&&"undefined"===typeof document&&(this.resourceTimingsMonitor=new Ud.$({sendLog:function(t,r){var n=(0,Gd.Y)(t);if(n){var i=new $d(e);(0,Yl.J)(r).forEach((function(e){var t=gs(e,2),r=t[0],n=t[1];void 0!==n&&i.searchParams.set(r,n)})),mf(i.href,{method:"POST",keepalive:!0,body:n})}}}),this.resourceTimingsMonitor.attach(self))}},{key:"getSourceObject",value:function(e){if(!this.sourceManager)throw new Error("Source Manager not inited!");return this.sourceManager.takeSource(e)}},{key:"getSourceObjectOrThrowException",value:function(e,t){var r=this.getSourceObject(e);if(void 0===r)throw new Error("[".concat(t,"] Unknown source ").concat(e,"."));return r}},{key:"sendEventAndSaveHistory",value:function(e){var t=e.method,r=e.params;if(!["updateBufferedInfo","updateSeekableRange"].includes(t)){var n=Ss({},r);if("objectUrl"in n){var i=n;i.objectUrl,n=bs(i,Kd)}this.rpcOutgoingHistory.push({method:t,params:n,time:Date.now()})}return this.yaspRpc.sendEvent(e)}},{key:"registerHandlerWithHistorySaving",value:function(e,t){var r=this;this.yaspRpc.registerHandler(e,(function(n){return r.rpcIncomingHistory.push({method:e,params:n,time:Date.now()}),t(n)}))}},{key:"obtainSource",value:function(e){var t,r,n,i=null!==(t=null===(r=this.sourceManager)||void 0===r?void 0:r.takeSource(e))&&void 0!==t?t:this.createSource(e);return null===(n=this.sourceManager)||void 0===n||n.putSource(e,i),i}},{key:"createSource",value:function(e){var t,r,n,i=this,o=(0,Cs.Hi)(e),a={getMaxAutoQuality:this.getMaxAutoQuality,getUserQuality:this.getUserQuality,getDefaultBandwidth:this.getDefaultBandwidth};if("mp4"===Tc(e)){var u=gs(this.createAudioSource(e,o,a),3);t=u[0],r=u[1],n=u[2]}else{var c=gs(this.createVideoSource(e,o,a),3);t=c[0],r=c[1],n=c[2]}var s=this.configStorage.extract(o);return s&&t.configure(s),t.on("Error",(function(t){i.sendEventAndSaveHistory({method:"error",params:{source:e,error:JSON.stringify(t)}})})),t.on("BufferedInfoChanged",(function(t){i.sendEventAndSaveHistory({method:"updateBufferedInfo",params:{bufferedInfo:t,source:e,duration:r.duration}})})),t.on("Event",(function(t){i.sendEventAndSaveHistory({method:"event",params:Ss({source:e},t)})})),t.on("IsLowLatencyChange",(function(t){i.sendEventAndSaveHistory({method:"changeIsLowLatency",params:{source:e,isLowLatency:t}})})),t.on("EmsgDetected",(function(t){i.sendEventAndSaveHistory({method:"emsg",params:{source:e,emsg:t}})})),t.on("SegmentLoaded",(function(t){i.sendEventAndSaveHistory({method:"logSegmentLoaded",params:{source:e,info:t}})})),t.on("TargetLatencyUpdated",(function(t){i.sendEventAndSaveHistory({method:"updateTargetLatency",params:{source:e,latency:t}})})),t.on("UtcStartTimeUpdate",(function(t){i.sendEventAndSaveHistory({method:"updateUtcStartTime",params:{source:e,time:t}})})),t.on("SeekableRangeUpdate",(function(t){var r=t.start,n=t.end;i.sendEventAndSaveHistory({method:"updateSeekableRange",params:{source:e,start:r,end:n}})})),t.on("UpdateUrlObject",(function(t){i.sendEventAndSaveHistory({method:"urlObjectUpdated",params:{source:e,objectUrl:t}})})),t.on("Destroy",(function(){var e;null===(e=n)||void 0===e||e.destroy(),n=null})),t}},{key:"createVideoSource",value:function(e,t,r){var n=this,i=new Yh,o=i,a=new Ds(t,this.scope,i),u=new Dd(this.cron,e,o,r),c=this.configStorage.extract(t);c&&u.configure(c),u.on("VideoTypeChange",(function(t){n.sendEventAndSaveHistory({method:"changeVideoType",params:{source:e,videoType:t}})})),u.on("CuesAdded",(function(t){var r=t.cues,i=t.label;n.sendEventAndSaveHistory({method:"cuesAdded",params:{source:e,cues:r,label:i}})}));var s=function(e){var r=e.source,n=e.devicePixelRatio;return(0,Cs.Hi)(r)!==t?{done:!1,value:void 0}:(i.devicePixelRatio=n,{done:!0,value:void 0})};return this.yaspRpc.registerHandler("setDevicePixelRatio",s),u.on("Destroy",(function(){n.yaspRpc.removeHandler("setDevicePixelRatio",s)})),[u,o,a]}},{key:"createAudioSource",value:function(e,t,r){var n=new qh,i=n,o=new Wd(t,this.scope,n);return[new Dd(this.cron,e,i,r),i,o]}}])&&Rs(t.prototype,r),n&&Rs(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Xd=js;"object"!==("undefined"===typeof window?"undefined":xs(window))&&(self.window=self,js())},88765:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),c=new d(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return y()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var c=l(u,n);if(c){if(c===O)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var s=r(e,t,n);if("normal"===s.type){if(i=n.done?"completed":"suspendedYield",s.arg===O)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(i="completed",n.method="throw",n.arg=s.arg)}}}(e,i,c),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function u(){}function c(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function s(e,t){var n;this._invoke=function(i,a){function u(){return new t((function(n,u){!function n(i,a,u,c){var s=r(e[i],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==o(f)&&b.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,u,c)}),(function(e){n("throw",e,u,c)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return n("throw",e,u,c)}))}c(s.arg)}(i,a,n,u)}))}return n=n?n.then(u,u):u()}}function l(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,l(e,t),"throw"===t.method))return O;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return O}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,O;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,O):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,O)}function f(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function h(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function d(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(f,this),this.reset(!0)}function p(e){if(e){var t=e[w];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(b.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:y}}function y(){return{value:void 0,done:!0}}a=function(){return v};var v={},m=Object.prototype,b=m.hasOwnProperty,g="function"==typeof Symbol?Symbol:{},w=g.iterator||"@@iterator",_=g.asyncIterator||"@@asyncIterator",E=g.toStringTag||"@@toStringTag";try{e({},"")}catch(P){e=function(e,t,r){return e[t]=r}}v.wrap=t;var O={},S={};e(S,w,(function(){return this}));var k=Object.getPrototypeOf,T=k&&k(k(p([])));T&&T!==m&&b.call(T,w)&&(S=T);var R=u.prototype=n.prototype=Object.create(S);return i.prototype=u,e(R,"constructor",u),e(u,"constructor",i),i.displayName=e(u,E,"GeneratorFunction"),v.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},v.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,e(t,E,"GeneratorFunction")),t.prototype=Object.create(R),t},v.awrap=function(e){return{__await:e}},c(s.prototype),e(s.prototype,_,(function(){return this})),v.AsyncIterator=s,v.async=function(e,r,n,i,o){void 0===o&&(o=Hi);var a=new s(t(e,r,n,i),o);return v.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},c(R),e(R,E,"Generator"),e(R,w,(function(){return this})),e(R,"toString",(function(){return"[object Generator]"})),v.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},v.values=p,d.prototype={constructor:d,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(h),!e)for(var t in this)"t"===t.charAt(0)&&b.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=b.call(i,"catchLoc"),u=b.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&b.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,O):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),O},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),h(r),O}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;h(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:p(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),O}},v}function u(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):Hi.resolve(c).then(n,i)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),c=new d(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return y()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var c=l(u,n);if(c){if(c===O)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var s=r(e,t,n);if("normal"===s.type){if(i=n.done?"completed":"suspendedYield",s.arg===O)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(i="completed",n.method="throw",n.arg=s.arg)}}}(e,i,c),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var s=r(e[i],e,o);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==c(f)&&b.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,u)}))}u(s.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function l(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,l(e,t),"throw"===t.method))return O;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return O}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,O;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,O):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,O)}function f(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function h(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function d(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(f,this),this.reset(!0)}function p(e){if(e){var t=e[w];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(b.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:y}}function y(){return{value:void 0,done:!0}}s=function(){return v};var v={},m=Object.prototype,b=m.hasOwnProperty,g="function"==typeof Symbol?Symbol:{},w=g.iterator||"@@iterator",_=g.asyncIterator||"@@asyncIterator",E=g.toStringTag||"@@toStringTag";try{e({},"")}catch(P){e=function(e,t,r){return e[t]=r}}v.wrap=t;var O={},S={};e(S,w,(function(){return this}));var k=Object.getPrototypeOf,T=k&&k(k(p([])));T&&T!==m&&b.call(T,w)&&(S=T);var R=o.prototype=n.prototype=Object.create(S);return i.prototype=o,e(R,"constructor",o),e(o,"constructor",i),i.displayName=e(o,E,"GeneratorFunction"),v.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},v.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,E,"GeneratorFunction")),t.prototype=Object.create(R),t},v.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,_,(function(){return this})),v.AsyncIterator=u,v.async=function(e,r,n,i,o){void 0===o&&(o=zi);var a=new u(t(e,r,n,i),o);return v.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(R),e(R,E,"Generator"),e(R,w,(function(){return this})),e(R,"toString",(function(){return"[object Generator]"})),v.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},v.values=p,d.prototype={constructor:d,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(h),!e)for(var t in this)"t"===t.charAt(0)&&b.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=b.call(i,"catchLoc"),u=b.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&b.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,O):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),O},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),h(r),O}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;h(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:p(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),O}},v}function l(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):zi.resolve(c).then(n,i)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Lu){return!1}}();return function(){var r,n=E(e);if(t){var i=E(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return w(this,r)}}function w(e,t){if(t&&("object"===p(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _(e)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{bubbles:!1,cancelable:!1,detail:void 0};if("function"===typeof CustomEvent)return new CustomEvent(e,t);var r=document.createEvent("CustomEvent");return r.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r}function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function P(e,t){return(P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Lu){return!1}}();return function(){var r,n=L(e);if(t){var i=L(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return j(this,r)}}function j(e,t){if(t&&("object"===k(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return A(e)}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function M(){return(M="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=F(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function F(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=H(e)););return e}function B(e,t){return(B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function U(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Lu){return!1}}();return function(){var r,n=H(e);if(t){var i=H(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return G(this,r)}}function G(e,t){if(t&&("object"===N(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return V(e)}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q(e,t){for(var r=0;r<e.length;r++)t.id!==e[r].id&&(e[r].enabled=!1)}function W(e){if(void 0!==e)for(;e.length>0;)e.removeTrack(e[0])}function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function X(e,t){return(X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function J(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Lu){return!1}}();return function(){var r,n=te(e);if(t){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Q(this,r)}}function Q(e,t){if(t&&("object"===z(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ee(e)}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ae(){return(ae="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=ue(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function ue(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=he(e)););return e}function ce(e,t){return(ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function se(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Lu){return!1}}();return function(){var r,n=he(e);if(t){var i=he(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return le(this,r)}}function le(e,t){if(t&&("object"===ne(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return fe(e)}function fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function he(e){return(he=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function de(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pe(e,t){for(var r=0;r<e.length;r++)Object.keys(e[r]).length&&t.id!==e[r].id&&(e[r].selected=!1)}function ye(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lo.no,t=e();return function(){return Math.max(0,e()-t)}}function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function be(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.map(ge),i="YA PLAYER: ".concat((new Date).toString()," ").concat(n.join(" "));return i}function ge(e){return e&&"object"===ve(e)?JSON.stringify(e,Object.getOwnPropertyNames(e)):e}function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ee(e,t){return(Ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Oe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Lu){return!1}}();return function(){var r,n=ke(e);if(t){var i=ke(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Se(this,r)}}function Se(e,t){if(t&&("object"===we(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Te(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];(0,So.k)(e)&&e.forEach((function(e){"function"===typeof e&&e.apply(void 0,r)}))}function Re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(r),!0).forEach((function(t){xe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function je(e){return function(e){if(Array.isArray(e))return Ae(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Ae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ae(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ie(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function De(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(r),!0).forEach((function(t){Ce(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ce(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Be(e,t){return(Be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ue(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Lu){return!1}}();return function(){var r,n=He(e);if(t){var i=He(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Ge(this,r)}}function Ge(e,t){if(t&&("object"===Me(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ve(e)}function Ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function He(e){return(He=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ye(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function We(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ze(e,t){!function(e){return"function"===typeof e.dispatch}(e)?e(t):e.dispatch(t)}function $e(e,t){e.forEach((function(e){ze(e,t)}))}function Ke(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ze(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xe(e){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function et(){return(et="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=tt(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function tt(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=at(e)););return e}function rt(e,t){return(rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function nt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Lu){return!1}}();return function(){var r,n=at(e);if(t){var i=at(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return it(this,r)}}function it(e,t){if(t&&("object"===Xe(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ot(e)}function ot(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function at(e){return(at=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ut(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ct(e){return 0===Bo.length&&(Fo=window.setInterval((function(){Bo.forEach((function(e){return e()}))}),250)),Bo.push(e),function(){var t=Bo.indexOf(e);t>-1&&Bo.splice(t,1),0===Bo.length&&clearInterval(Fo)}}function st(e){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ft(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ht(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ht(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function dt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pt(e,t){return(pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function yt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Lu){return!1}}();return function(){var r,n=bt(e);if(t){var i=bt(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return vt(this,r)}}function vt(e,t){if(t&&("object"===st(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return mt(e)}function mt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bt(e){return(bt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wt(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return _t(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _t(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function _t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Et(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ot(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function St(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return kt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kt(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Tt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Rt(e){var t=e.DocumentTouch;return Boolean(t)&&e.document instanceof t}function Pt(e){return"ontouchstart"in e}function xt(e){return function(e){return Boolean(e.PointerEvent)}(e)&&function(e){var t=e.navigator||{},r=t.msMaxTouchPoints,n=t.maxTouchPoints;return r||n||0}(e)>0&&!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return qo(e)>11}(e)}function jt(e,t){if(!(0,$o.m)(e.matchMedia))return!1;var r=e.matchMedia(t);return(0,po.K)(r)&&Boolean(r.matches)}function At(e){return jt(e,Ko)}function Lt(e){return jt(e,Zo)}function It(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return xt(e)||At(e)||Lt(e)||Rt(e)||Pt(e)}function Nt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return/Apple/.test(e.navigator.vendor)&&It(e)}function Dt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=e.navigator.userAgent.toLowerCase();return/ipad|iphone|ipod/.test(t)&&!e.MSStream&&!Xo(e)}function Ct(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Mt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ft(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Bt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ut(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Gt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vt(e){return(Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ht(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Yt(){return(Yt="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=qt(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function qt(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Zt(e)););return e}function Wt(e,t){return(Wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function zt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Lu){return!1}}();return function(){var r,n=Zt(e);if(t){var i=Zt(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $t(this,r)}}function $t(e,t){if(t&&("object"===Vt(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Kt(e)}function Kt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zt(e){return(Zt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function er(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function tr(e,t,n){var i={};i[n]=[];var o=t.toString(),a=o.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/)||o.match(/^\(\w+,\s*\w+,\s*(\w+)\)\s?\=\s?\>/);if(!a)return i;for(var u,c=a[1],s=new RegExp("(\\\\n|\\W)"+er(c)+"\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");u=s.exec(o);)"dll-reference"!==u[3]&&i[n].push(u[3]);for(s=new RegExp("\\("+er(c)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");u=s.exec(o);)e[u[2]]||(i[n].push(u[1]),e[u[2]]=r(u[1]).m),i[u[2]]=i[u[2]]||[],i[u[2]].push(u[4]);for(var l,f=Object.keys(i),h=0;h<f.length;h++)for(var d=0;d<i[f[h]].length;d++)l=i[f[h]][d],isNaN(1*l)||(i[f[h]][d]=1*i[f[h]][d]);return i}function rr(e){return Object.keys(e).reduce((function(t,r){return t||e[r].length>0}),!1)}function nr(e,t,r,n){var i=e[n].map((function(e){return'"'.concat(e,'": ').concat(t[n][e].toString())})).join(","),o=ma.toString().split("ENTRY_MODULE");return"".concat(o[0],"{").concat(i,"}").concat(o[1],'"').concat(r,'"').concat(o[2])}function ir(e,t){t=t||{};var n={main:r.m},i=t.all?{main:Object.keys(n.main)}:function(e,t){for(var r={main:[t]},n={main:[]},i={main:{}};rr(r);)for(var o=Object.keys(r),a=0;a<o.length;a++){var u=o[a],c=r[u].pop();if(i[u]=i[u]||{},!i[u][c]&&e[u][c]){i[u][c]=!0,n[u]=n[u]||[],n[u].push(c);for(var s=tr(e,e[u][c],u),l=Object.keys(s),f=0;f<l.length;f++)r[l[f]]=r[l[f]]||[],r[l[f]]=r[l[f]].concat(s[l[f]])}}return n}(n,e),o="";Object.keys(i).filter((function(e){return"main"!==e})).forEach((function(e){for(var t=0;i[e][t];)t++;i[e].push(t),n[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o+="var ".concat(e," = (").concat(nr(i,n,t,modules),")();\n")})),o+="var a = (".concat(nr(i,n,e,"main"),");\ntry {\n    a();\n} catch(e) { console.warn(e); throw e }");var a=window.Blob;try{a=window.top.Blob}catch(Lu){}var u=new a([o],{type:"text/javascript"});if(t.bare)return u;var c=void 0;try{c=window.top.URL||window.top.webkitURL||window.top.mozURL||window.top.msURL}catch(Lu){}c=c||window.URL||window.webkitURL||window.mozURL||window.msURL;var s=window.Worker;try{s=window.top.Worker}catch(Lu){}var l=c.createObjectURL(u),f=new s(l);return f.objectURL=l,f}function or(e){return(or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ar(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==or(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}ar=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},b=m.iterator||"@@iterator",g=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,b,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,b)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,g,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=Ea);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,b,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function ur(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):Ea.resolve(c).then(n,i)}function cr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function sr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function dr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pr(Object(r),!0).forEach((function(t){mr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function vr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function br(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gr(e){switch(e.source){case"default":case"default-slow":case"cache":case"timing-api":case"network-api":case"ewma":case"hlsjs":case"yabro":case"shaka-default":case"shaka-network-api":case"external-yasp":return e;default:return{value:e.value,source:"external-yasp"}}}function wr(e,t){var r=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,Ba.s)(e,(function(e){var n=e.start,i=e.end;return n-r<=t&&t<=i+r}))}(e,t);return void 0===r?void 0:r.end-t}function _r(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return Er(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Er(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function Er(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Or(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function kr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tr(e){return(Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};for(var r in e){var n=e[r],i=Tr(n);"string"!==i&&"number"!==i&&"boolean"!==i||(t[r]=n)}return t}function Pr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ar(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ir(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nr(e,t){return(0,Eo.Hi)(e)===(0,Eo.Hi)(t)}function Dr(e){return(Dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cr(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==Dr(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}Cr=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},b=m.iterator||"@@iterator",g=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,b,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,b)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,g,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=ru);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,b,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function Mr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mr(Object(r),!0).forEach((function(t){Zr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Br(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):ru.resolve(c).then(n,i)}function Ur(e){return function(){var t=this,r=arguments;return new ru((function(n,i){function o(e){Br(u,n,i,o,a,"next",e)}function a(e){Br(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function Gr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Hr(){return(Hr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=Yr(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function Yr(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Kr(e)););return e}function qr(e,t){return(qr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Wr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Lu){return!1}}();return function(){var r,n=Kr(e);if(t){var i=Kr(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return zr(this,r)}}function zr(e,t){if(t&&("object"===Dr(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $r(e)}function $r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kr(e){return(Kr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xr(e){var t;return t=function(e){function t(){var e;Gr(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return Zr($r(e=s.call.apply(s,[this].concat(n))),"progressWatcher",void 0),Zr($r(e),"gapController",void 0),Zr($r(e),"eventsWatcher",void 0),Zr($r(e),"playheadMover",void 0),Zr($r(e),"srcSetDeferred",void 0),Zr($r(e),"detachCallbacks",void 0),Zr($r(e),"playCalled",void 0),Zr($r(e),"shouldPlay",void 0),Zr($r(e),"restorePrototype",void 0),Zr($r(e),"yaspSrc",void 0),Zr($r(e),"yaspError",null),Zr($r(e),"error",null),Zr($r(e),"audioTrackList",void 0),Zr($r(e),"mediaStateNotifier",void 0),Zr($r(e),"stallDetector",null),Zr($r(e),"yaspSeekable",void 0),Zr($r(e),"startTime",NaN),e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qr(e,t)}(t,e);var r,n,i,o,a,u,c,s=Wr(t);return r=t,n=[{key:"checkShouldPlay",value:function(){return this.shouldPlay}},{key:"audioTracks",get:function(){var e;return this.yaspSrc?this.audioTrackList:null!==(e=Hr(Kr(t.prototype),"audioTracks",this))&&void 0!==e?e:this.audioTrackList}},{key:"canPlayType",value:function(e){return Hr(Kr(t.prototype),"canPlayType",this).call(this,e)}},{key:"rethrowEmptySrc",value:function(e){e||(0,Ya.L)(new Error("Setting empty src"))}},{key:"getAttribute",value:function(e){return"src"===e&&void 0!==this.yaspSrc?this.yaspSrc:Hr(Kr(t.prototype),"getAttribute",this).call(this,e)}},{key:"setAttribute",value:function(e,r){return"src"===e?(this.rethrowEmptySrc(r),this.setSrc(r)):Hr(Kr(t.prototype),"setAttribute",this).call(this,e,r)}},{key:"removeAttribute",value:function(e){"src"===e&&this.setSrc(""),Hr(Kr(t.prototype),"removeAttribute",this).call(this,e)}},{key:"src",get:function(){var e;return void 0===this.yaspSrc?null!==(e=HTMLMediaElement.prototype.getAttribute.call(this,"src"))&&void 0!==e?e:"":this.yaspSrc},set:function(e){this.rethrowEmptySrc(e),this.setSrc(e)}},{key:"addEventListener",value:function(e,r,n){Hr(Kr(t.prototype),"addEventListener",this).call(this,e,r,n)}},{key:"removeEventListener",value:function(e,r,n){Hr(Kr(t.prototype),"removeEventListener",this).call(this,e,r,n)}},{key:"yasp",get:function(){return!0}},{key:"getMediaElementDebugDump",value:function(){var e=this.paused,r=this.seeking,n=this.yaspError,i=this.yaspSeekable,o=this.currentTime,a=this.yaspSrc,u=this.readyState,c=xa.getTimeRanges(t.getNativeSeekableAndInitYaspSeekable(this)),s=t.getNativeErrorAndAttachErrorStore(this),l=(0,na.w)(this);return{error:s,yaspError:n,paused:e,seeking:r,seekable:c,yaspSeekable:i,buffered:l,bufferedTime:wr(l,this.currentTime),currentTime:o,src:HTMLMediaElement.prototype.getAttribute.call(this,"src"),yaspSrc:a,readyState:u}}},{key:"yaspRequestDebugInfo",value:(c=Ur(Cr().mark((function e(){var r,n,i;return Cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={mediaElement:Fr({},this.getMediaElementDebugDump()),time:(0,Di.no)()/1e3,mediaEventsHistory:null===(r=this.eventsWatcher)||void 0===r?void 0:r.getEventHistory()},e.next=3,t.worker.request({method:"requestDebugInfo",params:{source:this.yaspSrc}});case 3:return i=e.sent,e.abrupt("return",Fr(Fr({},n),i));case 5:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"detach",value:(u=Ur(Cr().mark((function e(){var r,n,i,o,a,u,c=this;return Cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.yaspSrc){e.next=3;break}return e.next=3,t.worker.request({method:"detach",params:{source:this.yaspSrc}});case 3:this.detachCallbacks&&(this.detachCallbacks.filter(Boolean).forEach(function(){var e=Ur(Cr().mark((function e(t){return Cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),(0,Ya.L)(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()),this.detachCallbacks.length=0,delete this.detachCallbacks),null===(r=this.gapController)||void 0===r||r.release(),this.stallDetector=null,this.gapController=void 0,null===(n=this.progressWatcher)||void 0===n||n.release(),this.progressWatcher=void 0,null===(i=this.eventsWatcher)||void 0===i||i.release(),this.eventsWatcher=void 0,null===(o=this.playheadMover)||void 0===o||o.release(),this.playheadMover=void 0,this.restore(),this.removeEventListener("progress",this.onSegmentAppended),this.removeEventListener("seeking",this.onSeeking),this.removeEventListener("canplay",this.onCanPlay),this.removeEventListener("error",this.onNativeError),this.removeAttribute("src"),null===(a=this.restorePrototype)||void 0===a||a.call(this),this.restorePrototype=void 0,t.instances=t.instances.filter((function(e){return e!==c})),null===(u=this.mediaStateNotifier)||void 0===u||u.disable();case 23:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"yaspDispatchEvent",value:function(e,r,n){var i=new CustomEvent(e,Fr({detail:r},n));Hr(Kr(t.prototype),"dispatchEvent",this).call(this,i)}},{key:"handleError",value:function(e){e.isFatal?(this.yaspError=this.createMediaError(MediaError.MEDIA_ERR_NETWORK,e.message,e),this.yaspDispatchEvent("error",void 0)):("YASP_BUFFER_ALLOCATION_ERROR"===e.code&&(e.details.memory=self?Rr((self.performance||{}).memory):{}),this.yaspDispatchEvent("yasp-error",e,{cancelable:!0}))}},{key:"yaspSetAudioTrack",value:function(e){e&&t.configureSource(this.src,{tracks:{audioLang:e}})}},{key:"initAudioTrackList",value:function(){var e=this;if(void 0===this.audioTrackList){var r=new no;r.addEventListener("change",(function(){(0,fo.w)(r).find((function(r){r.enabled&&t.configureSource(e.src,{tracks:{audioLang:r.language}})}));var n=new Event("change");(0,uo.Y)((function(){Hr(Kr(t.prototype),"audioTracks",e).dispatchEvent(n)}))})),this.audioTrackList=r}}},{key:"updateObjectUrl",value:function(e){this.rethrowEmptySrc(e),"string"===typeof e?HTMLMediaElement.prototype.setAttribute.call(this,"src",e):this.srcObject=e}},{key:"registerRpcHandlerForInstance",value:function(e,r){var n=this;this.detachCallbacks.push(t.worker.registerRpcHandler(e,(function(e){return t.isCurrentSrc(n,"source"in e?e.source:null)?r(e):{done:!1,value:void 0}})))}},{key:"registerMediaRpcHandlers",value:function(){var e=this;this.registerRpcHandlerForInstance("setStartInfo",(function(t){var r,n;return e.updateObjectUrl(t.objectUrl),e.setStartPosition(t.startPosition),e.readyState<HTMLMediaElement.HAVE_METADATA&&e.addEventListener("loadedmetadata",(function(){Nr(e.yaspSrc,t.source)&&e.setStartPosition(t.startPosition)}),{once:!0}),null===(r=e.mediaStateNotifier)||void 0===r||r.handleTimeupdate(),null===(n=e.srcSetDeferred)||void 0===n||n.resolve(),{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("addAudioTrack",(function(t){var r,n,i;return(null===(r=e.audioTrackList)||void 0===r?void 0:r.getTrackById(t.track.id))&&Nr(e.yaspSrc,t.source)||null===(n=e.audioTrackList)||void 0===n||n.addTrack(new eo({enabled:t.track.selected,label:t.track.label,language:null!==(i=t.track.language)&&void 0!==i?i:void 0,id:t.track.id,kind:t.track.kind,bitrate:t.track.bitrate,channels:t.track.channels})),{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("changeSelectedAudioLanguage",(function(t){if(!e.audioTrackList)return{done:!0,value:void 0};for(var r=0;r<e.audioTrackList.length;r++)e.audioTrackList[r].enabled=e.audioTrackList[r].language===t.language;return{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("applyDrmInfos",(function(t){return e.yaspDispatchEvent("yasp-drmInfoReceived",t.drmInfos,{cancelable:!0}),{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("emsg",(function(t){return e.yaspDispatchEvent("yasp-emsg",t.emsg,{cancelable:!0}),{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("logSegmentLoaded",(function(t){var r="[SegmentLoader] loaded type = ".concat(t.info.type,", number = ").concat(t.info.number,", cmaf = ").concat(t.info.cmaf);return e.yaspDispatchEvent("yasp-debug",r,{cancelable:!0}),{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("updateUtcStartTime",(function(t){return e.startTime=t.time,{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("updateSeekableRange",(function(t){return e.yaspSeekable={start:t.start,end:t.end},{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("urlObjectUpdated",(function(t){var r=e.currentTime;return e.updateObjectUrl(t.objectUrl),e.currentTime=r,{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("flushMediaPipeline",(function(t){return 0===e.buffered.length&&(e.currentTime-=.001),{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("event",(function(t){return e.yaspDispatchEvent("yasp-event",t,{cancelable:!0}),{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("error",(function(r){var n=r.error,i=(r.source,t.parseErrorString(n));return e.handleError(i),{done:!0,value:void 0}}))}},{key:"setStartPosition",value:function(e){var t;e<=0||null===this.clampPosition(e)&&((0,pa.RW)("yasp_no_source_abort_on_fake_seek")&&this.currentTime===e||null===(t=this.playheadMover)||void 0===t||t.moveTo(e))}},{key:"forceTimeUpdate",value:function(){var e;null===(e=this.mediaStateNotifier)||void 0===e||e.handleTimeupdate()}},{key:"clearTrackLists",value:function(){W(this.audioTrackList)}},{key:"createMediaError",value:function(e,t,r){var n=r;if(this.error)try{var i="string"===typeof(null===r||void 0===r?void 0:r.details)?Fr(Fr({},JSON.parse(r.details)),{},{mediaTagError:this.error}):Fr(Fr({},r.details),{},{mediaTagError:this.error});n=new ja.w(Fr(Fr({},r),{},{details:i}))}catch(o){}return{code:e,message:t,yaspError:n}}},{key:"initNativeErrorHandling",value:function(){this.addEventListener("error",this.onNativeError)}},{key:"onNativeError",value:function(){this.yaspSrc&&t.getNativeErrorAndAttachErrorStore(this)&&t.worker.sendEvent({method:"destroy",params:{source:this.yaspSrc}})}},{key:"initEventsWatcher",value:function(){var e=this;this.eventsWatcher=new tu(this,(function(){return e.getMediaElementDebugDump()}))}},{key:"initPlayheadMover",value:function(){this.playheadMover=new Ka(this,3)}},{key:"initWatchdog",value:function(){var e=this;this.initStallDetector(),this.gapController||(this.gapController=new Ra(this,{getSeekRangeEnd:function(){return e.seekable.end(0)}},{jumpLargeGaps:!0,jumpOnPause:!0,largeGapLimit:La},this.stallDetector,(function(t){var r;null===(r=e.eventsWatcher)||void 0===r||r.pushCustomEvent({event:"YaspLargeGap",timestamp:Date.now(),dump:t}),e.yaspDispatchEvent("yasp-event",{name:"YaspLargeGap",data:t},{cancelable:!0})})),this.addEventListener("seeking",this.onSeeking),this.addEventListener("canplay",this.onCanPlay),this.addEventListener("progress",this.onSegmentAppended),this.progressWatcher=new Wa(this))}},{key:"onCanPlay",value:function(){var e;null===(e=this.gapController)||void 0===e||e.configure({jumpOnPause:!1}),this.shouldPlay&&(0,ba.v)(this.play())}},{key:"onSegmentAppended",value:function(){var e;null===(e=this.gapController)||void 0===e||e.onSegmentAppended()}},{key:"clampPosition",value:function(e){if(!this.seekable.length)return null;var t=this.seekable.end(this.seekable.length-1),r=this.seekable.start(0);return e<=t||t-r<=Va.C?null:(this.currentTime=t-Va.C,this.currentTime)}},{key:"onSeeking",value:function(){var e,r=this;if(null===this.clampPosition(this.currentTime))if(null===(e=this.gapController)||void 0===e||e.configure({jumpOnPause:!0}),!xa.isBuffered(this.buffered,this.currentTime,.5)&&this.yaspSrc){var n,i;(0,pa.RW)("yasp_no_source_abort_on_fake_seek")&&(null===(n=this.gapController)||void 0===n||n.lock(),null===(i=this.gapController)||void 0===i||i.onSeeking()),t.worker.request({method:"seeking",params:{source:this.yaspSrc,currentTime:this.currentTime}}).then(Ur(Cr().mark((function e(){var t,n,i;return Cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,pa.RW)("yasp_no_source_abort_on_fake_seek")?null===(t=r.gapController)||void 0===t||t.unlock():null===(n=r.gapController)||void 0===n||n.onSeeking(),ea&&ru.resolve().then(null===(i=r.mediaStateNotifier)||void 0===i?void 0:i.handleTimeupdate);case 2:case"end":return e.stop()}}),e)})))).catch((function(){var e;(0,pa.RW)("yasp_no_source_abort_on_fake_seek")&&(null===(e=r.gapController)||void 0===e||e.unlock())}))}else{var o;null===(o=this.gapController)||void 0===o||o.onSeeking()}}},{key:"updateShouldPlayState",value:function(e){this.shouldPlay=e}},{key:"play",value:(a=Ur(Cr().mark((function e(){var r;return Cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.playCalled=!0,this.updateShouldPlayState(!0),this.yaspSrc&&"none"===this.preload&&t.worker.sendEvent({method:"load",params:{source:this.yaspSrc}}),HTMLMediaElement.prototype.getAttribute.call(this,"src")||this.srcObject){e.next=6;break}return e.next=6,null===(r=this.srcSetDeferred)||void 0===r?void 0:r.promise;case 6:if(this.playCalled){e.next=8;break}return e.abrupt("return");case 8:return this.playCalled=!1,this.handleLivePresentationWindowDropout(),e.abrupt("return",Hr(Kr(t.prototype),"play",this).call(this));case 11:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"pause",value:function(){this.playCalled=!1,this.updateShouldPlayState(!1),Hr(Kr(t.prototype),"pause",this).call(this)}},{key:"isSupportedSrc",value:function(e){return _o(e)}},{key:"setSrc",value:function(e){var r,n,i;if(this.yaspSrc&&(t.worker.sendEvent({method:"detach",params:{source:this.yaspSrc}}),this.yaspSrc=void 0,this.srcObject=null,this.srcSetDeferred=void 0,null===(r=this.mediaStateNotifier)||void 0===r||r.disable(),this.clearTrackLists(),this.restore()),this.srcSetDeferred=new $a.B,this.isSupportedSrc(e))return this.yaspSrc=e,t.worker.sendEvent({method:"attach",params:{source:e}}),null===(n=this.mediaStateNotifier)||void 0===n||n.enable(),null===(i=this.gapController)||void 0===i||i.configure({jumpOnPause:!0}),"none"!==this.preload&&t.worker.sendEvent({method:"load",params:{source:e}}),void(t.shouldSaveBandwidth&&t.worker.sendEvent({method:"configureSource",params:{source:e,config:{defaultBandwidthEstimate:t.getDefaultBandwidthEstimate()}}}));e?HTMLMediaElement.prototype.setAttribute.call(this,"src",e):HTMLMediaElement.prototype.removeAttribute.call(this,"src")}},{key:"initStallDetector",value:function(){var e=this;this.stallDetector||(this.stallDetector=new Ga(this,(function(){var t;null===(t=e.eventsWatcher)||void 0===t||t.pushCustomEvent({event:"YaspNudgeStalled",timestamp:Date.now(),dump:e.getMediaElementDebugDump()}),e.yaspDispatchEvent("yasp-event",{name:"YaspNudgeStalled",data:void 0},{cancelable:!0})})))}},{key:"restore",value:function(){this.startTime=NaN,this.yaspSeekable=void 0}},{key:"handleLivePresentationWindowDropout",value:function(){this.duration===1/0&&this.seekable.length&&this.currentTime<this.seekable.start(0)&&(this.currentTime=this.seekable.end(this.seekable.length-1))}},{key:"getStartDate",value:function(){return this.yaspSrc||"function"!==typeof Hr(Kr(t.prototype),"getStartDate",this)?new Date(this.startTime):new Date(Hr(Kr(t.prototype),"getStartDate",this).call(this))}}],i=[{key:"isSupported",value:function(){var e;return"function"===typeof(null===(e=(0,Za.Q)())||void 0===e?void 0:e.isTypeSupported)}},{key:"isCurrentSrc",value:function(e,r){return!(null===r||!t.isYaspElement(e))&&Nr(e.yaspSrc,r)}},{key:"getDefaultBandwidthEstimate",value:function(){var e=t.bandwidth;if(e)return gr(e);var r=function(){try{var e=Da.t.getItem("videoplayer-bandwidth-estimate");if(!e)return NaN;var t=JSON.parse(e),r=t.bandwidthEstimate,n=t.time,i=t.source;return Ma.includes(i)&&Na()-n<Ca?r:NaN}catch(o){return NaN}}();return r?{value:r,source:"cache"}:{value:Ia.S,source:"default"}}},{key:"attachElement",value:function(e,r,n){if(!t.isSupported())throw new Error("Unsupported platform");if(t.isYaspElement(r))return(0,Ya.L)(new Error("Unexpected YaspMediaElement.attach(yaspMediaElement) call")),r;t.setWorkerConfig(n);var i,o,a=(o=ha(i=r))?function(){ha(i)!==o&&la()(i,o)}:Fi.Z;la()(r,e.prototype);var u=r;u.restorePrototype=a,u.detachCallbacks=[],u.registerMediaRpcHandlers(),u.initAudioTrackList(),u.initPlayheadMover(),u.initWatchdog(),u.initEventsWatcher(),u.initNativeErrorHandling();var c=t.overrideYaspGetters(u);return u.detachCallbacks.push(c),t.instances.push(u),u}},{key:"warmUp",value:function(){(0,Fi.Z)(t.worker)}},{key:"destroy",value:(o=Ur(Cr().mark((function e(){var r;return Cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ru.all(t.instances.map((function(e){return e.detach()})));case 2:null===(r=t.workerImpl)||void 0===r||r.destroy();case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})},{key:"hasActiveInstance",value:function(){return Boolean(t.instances.length)}},{key:"overrideYaspGetters",value:function(e){var r=t.initYaspSeekable(e),n=t.attachErrorStore(e),i=t.initYaspCurrentSrc(e);return function(){r(),n(),i()}}},{key:"attachErrorStore",value:function(e){return Object.defineProperty(e,"error",{get:function(){return void 0!==this.yaspError?this.yaspError:t.getNativeErrorAndAttachErrorStore(e)},configurable:!0}),function(){return delete e.error}}},{key:"getNativeErrorAndAttachErrorStore",value:function(e){delete e.error;var r=e.error;return t.attachErrorStore(e),r}},{key:"getNativeSeekableAndInitYaspSeekable",value:function(e){delete e.seekable;var r=e.seekable;return t.initYaspSeekable(e),r}},{key:"isYaspElement",value:function(e){return!0===e.yasp}},{key:"getStats",value:function(){return{bandwidth:t.bandwidth}}},{key:"configureSource",value:function(e,r){var n=r.defaultBandwidthEstimate?gr(r.defaultBandwidthEstimate):void 0;void 0!==n&&(t.shouldSaveBandwidth=!1),t.worker.sendEvent({method:"configureSource",params:{source:e,config:Fr(Fr({},r),{},{defaultBandwidthEstimate:n})}})}},{key:"setWorkerConfig",value:function(e){void 0!==e&&(t.workerConfig.sourceLimit=e.sourceLimit,t.workerConfig.perfLogUrl=e.perfLogUrl)}},{key:"worker",get:function(){if(void 0!==t.workerImpl)return t.workerImpl;var e=(0,Za.Q)(),r=!!e&&"canConstructInDedicatedWorker"in e&&Boolean(e.canConstructInDedicatedWorker),n=!(!(0,pa.RW)("web_yasp_enable_worker")||!r)&&Boolean(window.MediaSourceHandle);return t.workerImpl=new Oa({useWebWorker:n,workerConfig:Fr(Fr({},t.workerConfig),{},{flags:(0,pa.qm)()}),onTerminate:function(){t.messenger.emit("yasp-event",{name:"YaspWorkerTerminate",data:void 0}),t.workerImpl=void 0}}),t.workerImpl.registerStaticRpcHandler("updateBandwidthEstimate",(function(e){return t.bandwidth=e.bandwidth,t.shouldSaveBandwidth&&function(e){if(!isNaN(e.value)&&Ma.includes(e.source)){var t={bandwidthEstimate:Math.floor(e.value),time:Na(),source:e.source};Da.t.setItem("videoplayer-bandwidth-estimate",JSON.stringify(t))}}(e.bandwidth),{done:!0,value:void 0}})),t.workerImpl.registerStaticRpcHandler("updateBufferedInfo",(function(e){return t.messenger.emit("BufferedInfoChanged",e),{done:!0,value:void 0}})),t.workerImpl.registerStaticRpcHandler("error",t.detachedErrorRpcHandler),t.workerImpl.registerStaticRpcHandler("event",t.detachedEventRpcHandler),t.workerImpl}},{key:"parseErrorString",value:function(e){try{return new ja.w(JSON.parse(e))}catch(t){return new ja.w({code:"YASP_PARSE_ERROR_EXCEPTION",details:{error:t,errorString:e},message:"Expect error to be serialized error.",isFatal:!0,category:Aa.q.EXCEPTION})}}},{key:"initYaspCurrentSrc",value:function(e){return Object.defineProperty(e,"currentSrc",{get:function(){return this.src},configurable:!0}),function(){return delete e.currentSrc}}},{key:"initYaspSeekable",value:function(e){return Object.defineProperty(e,"seekable",{get:function(){var e=this;return this.yaspSeekable?{start:function(t){if(t>e.length-1)throw new Error("Failed to execute 'start' on 'TimeRanges': The index provided (".concat(t,") is greater than the maximum bound (").concat(e.length-1,")"));return e.yaspSeekable.start},end:function(t){if(t>e.length-1)throw new Error("Failed to execute 'end' on 'TimeRanges': The index provided (".concat(t,") is greater than the maximum bound (").concat(e.length-1,")"));return e.yaspSeekable.end},length:1}:t.getNativeSeekableAndInitYaspSeekable(this)},configurable:!0}),function(){return delete e.seekable}}},{key:"getExpConfig",value:function(){var e=(0,za.r)()||{},t=e.flags,r=e.testids,n=e.slots;return{flags:(0,po.K)(t)?JSON.parse(JSON.stringify(t)):{},testids:(0,Ha.H)(r)?r.split(",").map(Number).filter(Boolean):[],slots:(0,Ha.H)(n)?n:""}}}],n&&Vr(r.prototype,n),i&&Vr(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(e),Zr(t,"instances",[]),Zr(t,"shouldSaveBandwidth",!0),Zr(t,"bandwidth",void 0),Zr(t,"workerImpl",void 0),Zr(t,"messenger",new Sa.v),Zr(t,"workerConfig",{}),Zr(t,"detachedErrorRpcHandler",(function(e){var r=e.error,n=t.parseErrorString(r),i=new ja.w(Fr(Fr({},n),{},{message:"Detached mediaElement error: ".concat(n.message)}));return t.messenger.emit("yasp-error",i),{done:!0,value:void 0}})),Zr(t,"detachedEventRpcHandler",(function(e){var r=e.name,n=e.data;return e.shouldLogWhenDetached&&t.messenger.emit("yasp-event",{name:r,data:n}),{done:!0,value:void 0}})),t}function Jr(e){return(Jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qr(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==Jr(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}Qr=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},b=m.iterator||"@@iterator",g=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,b,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,b)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,g,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=nu);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,b,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function en(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?en(Object(r),!0).forEach((function(t){pn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):en(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function rn(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):nu.resolve(c).then(n,i)}function nn(e){return function(){var t=this,r=arguments;return new nu((function(n,i){function o(e){rn(u,n,i,o,a,"next",e)}function a(e){rn(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function on(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function an(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function un(){return(un="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=cn(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function cn(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=dn(e)););return e}function sn(e,t){return(sn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ln(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Lu){return!1}}();return function(){var r,n=dn(e);if(t){var i=dn(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return fn(this,r)}}function fn(e,t){if(t&&("object"===Jr(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hn(e)}function hn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dn(e){return(dn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yn(e){return(yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mn(e,t){return(mn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function bn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Lu){return!1}}();return function(){var r,n=wn(e);if(t){var i=wn(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return gn(this,r)}}function gn(e,t){if(t&&("object"===yn(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function wn(e){return(wn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _n(e){return(_n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function En(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==_n(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}En=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},b=m.iterator||"@@iterator",g=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,b,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,b)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,g,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=cu);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,b,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function On(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Sn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?On(Object(r),!0).forEach((function(t){kn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):On(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function kn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tn(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):cu.resolve(c).then(n,i)}function Rn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xn(){return(xn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=jn(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function jn(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Nn(e)););return e}function An(e,t){return(An=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ln(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Lu){return!1}}();return function(){var r,n=Nn(e);if(t){var i=Nn(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return In(this,r)}}function In(e,t){if(t&&("object"===_n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Nn(e){return(Nn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Dn(e){switch(e){case pu.ly:return au.widevine;case pu.xE:return au.playready;case pu.dn:return au.clearkey;default:return au.none}}function Cn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Mn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Cn(Object(r),!0).forEach((function(t){Fn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bn(e,t){var r=function(){try{return function(e){return{error:String(e.error)||"",isFatal:Boolean(e.isFatal),helpLink:String(e.helpLink)||""}}(JSON.parse(e))}catch(t){return Mn(Mn({},bu),{},{error:e})}}();return r.isFatal=r.isFatal||!isFinite(t)||t<=0,r}function Un(e){if(void 0===e)return Aa.q.DEFAULT;var t=function(e){switch(e){case du.DEFAULT_ERROR:return Aa.q.DEFAULT;case du.BROADCAST_AD_BLOCK_INIT_ERROR:case du.AD_TYPE_IS_NOT_RECOGNIZED:case du.AD_IS_ALREADY_PLAYING:case du.MULTIROLL_INIT_ERROR:case du.PLAY_AD_VIEWERS_ERROR:return Aa.q.ADS;case du.INVALID_METADATA:case du.NO_STREAMS:case du.INVALID_STREAM_URL:case du.NO_DRM_CONFIG:return Aa.q.CONFIG;case du.ON_TICK_ERROR:case du.SAGA_ERROR:case du.NO_HLS_JS_INSTANCE:case du.REACT_COMPONENT_DID_CATCH_ERROR_INFO:case du.RECOVER_TASK_ERROR:case du.PRELOAD_SOURCE_FAILED:case du.MEDIA_ERR_ABORTED:return Aa.q.EXCEPTION;case du.UNSUPPORTED_MEDIA_TYPE:case du.NATIVE_HLS_NOT_SUPPORTED_ERROR:case du.HLS_JS_NOT_SUPPORTED_ERROR:case du.MEDIA_ERR_SRC_NOT_SUPPORTED:case du.MEDIA_ERR_CUSTOM:case du.MEDIA_ERR_DECODE:case du.REPRESENTATION_CHANGE:return Aa.q.MEDIA;case du.SCRIPT_INIT_ERROR:case du.META_INFO_REQUEST_FAILED:case du.STRM_ABD_INVALID_RESPONSE:case du.MANIFEST_NOT_FOUND:return Aa.q.NETWORK_PLAYER;case du.MEDIA_ERR_NETWORK:return Aa.q.NETWORK_MEDIA;case du.MPD_WIDEVINE_CERT_LOAD_ERROR:case du.FAIRPLAY_CERT_LOAD_ERROR:case du.FAIRPLAY_CREATE_MEDIA_KEYS_ERROR:case du.FAIRPLAY_CREATE_KEY_SESSION_ERROR:case du.FAIRPLAY_SPC_LOAD_ERROR:case du.FAIRPLAY_CREATE_KEY_ERROR:case du.FAIRPLAY_INVALID_CONTENT_ID:case du.DRM_PROXY_ERROR:case du.DRM_PROXY_ERROR_NEED_COOKIE:case du.DRM_PROXY_ERROR_NEED_TEAM_LOGIN:case du.DRM_PROXY_ERROR_NEED_VIEW_PERMISSION:case du.DRM_PROXY_ERROR_SIGNATURE_EXPIRED:case du.MEDIA_ERR_ENCRYPTED:case du.FAIRPLAY_NOT_SUPPORTED:case du.NO_DRM:case du.DRM_INIT_ERROR:case du.DRM_NO_INIT_DATA:case du.DRM_CERT_LOAD_ERROR:case du.DRM_NO_SUPPORTED_KEY_SYSTEM:case du.DRM_FAILED_TO_CREATE_CDM:case du.DRM_FAILED_TO_SET_MEDIA_KEYS:case du.DRM_NO_LICENSE_SERVER:case du.DRM_FAILED_TO_CREATE_SESSION:case du.DRM_SESSION_ERROR:case du.DRM_FAILED_TO_GENERATE_REQUEST:case du.DRM_UNKNOWN_ERROR:return Aa.q.DRM;case du.REGIONAL_LIMITATION_MANIFEST:case du.REGIONAL_LIMITATION_LEVEL:case du.REGIONAL_LIMITATION_SEGMENT:return Aa.q.REGIONAL;case du.SIGNATURE_EXPIRED_MANIFEST:case du.SIGNATURE_EXPIRED_LEVEL:case du.SIGNATURE_EXPIRED_SEGMENT:return Aa.q.ACCESS;case du.BANNED_MANIFEST:case du.BANNED_LEVEL:case du.BANNED_SEGMENT:return Aa.q.BANNED;case du.NO_CODECS:return Aa.q.NO_CODECS;case du.NO_PLAYABLE_STREAMS:return Aa.q.CANNOT_PLAY;case du.NO_MSE:return Aa.q.UNSUPPORTED_ENV}return}(e);if(void 0!==t)return t;if(void 0!==(t=function(e){switch(e){case"VH_ACCESS_ERROR_OLD_BROWSER":case"VH_ACCESS_ERROR_UNSUPPORTED_BROWSER":return Aa.q.UNSUPPORTED_ENV;case"VH_ACCESS_DENIED":return Aa.q.ACCESS;case"VH_ACCESS_ERROR_INVALID_REGION":return Aa.q.REGIONAL;case"VH_ACCESS_ERROR_NO_LICENSE":return Aa.q.DRM;case"VH_ACCESS_ERROR_FUTURE_VOD_RELEASE":case"VH_ACCESS_ERROR_NOT_FOUND":case"VH_VIDEO_PROCESSING":case"VH_VIDEO_PROCESSING_FAILED":case"VH_ACCESS_ERROR_UNEXPECTED":return Aa.q.DEFAULT}return}(e)))return t;switch(e){case hu.BUFFER_FULL_ERROR:case hu.BUFFER_NUDGE_ON_STALL:case hu.BUFFER_STALLED_ERROR:case hu.FRAG_PARSING_ERROR:case hu.BUFFER_SEEK_OVER_HOLE:case hu.BUFFER_APPENDING_ERROR:case hu.PIPELINE_ERROR_DECODE:case hu.DECODER_ERROR_NOT_SUPPORTED:case hu.BUFFER_APPEND_ERROR:case hu.MEDIA_ELEMENT_ERROR_FORMAT_ERROR:case hu.REMUX_ALLOC_ERROR:case hu.BUFFER_ADD_CODEC_ERROR:case hu.DEMUXER_ERROR_COULD_NOT_OPEN:case hu.NS_ERROR_DOM_INVALID_STATE_ERR:case hu.CHUNK_DEMUXER_ERROR_APPEND_FAILED:case hu.FAILED_TO_INIT_DECODER:case hu.PIPELINE_ERROR_INITIALIZATION_FAILED:case hu.NS_ERROR_FAILURE:case hu.REQUEST_FAILED:case hu.PIPELINE_ERROR_EXTERNAL_RENDERER_FAILED:case hu.PIPELINE_ERROR_COULD_NOT_RENDER:case hu.NS_ERROR_DOM_MEDIA_METADATA_ERR:case hu.MEDIA_ELEMENT_ERROR_EMPTY_SRC_ATTRIBUTE:case hu.NS_ERROR_DOM_MEDIA_FATAL_ERR:case hu.MANIFEST_PARSING_ERROR:return Aa.q.MEDIA;case hu.FRAG_LOAD_ERROR:case hu.MANIFEST_LOAD_ERROR:case hu.LEVEL_LOAD_ERROR:case hu.AUDIO_TRACK_LOAD_ERROR:return Aa.q.NETWORK_MEDIA;case hu.FRAG_LOAD_TIME_OUT:case hu.MANIFEST_LOAD_TIME_OUT:case hu.LEVEL_LOAD_TIME_OUT:case hu.AUDIO_TRACK_LOAD_TIME_OUT:return Aa.q.NETWORK_TIMEOUT;case hu.INTERNAL_EXCEPTION:case hu.ON_PLAYER_INIT_ERROR_INTERNAL:case hu.EXTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR:case hu.INTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR:case hu.LOAD_SKIN_ERROR:case hu.INSERT_INTO_WITH_SECURE_FRAME:case hu.PLAY_AD_VIEWERS_WITH_SECURE_FRAME:case hu.ERROR_SCREEN_LOAD_ERROR:case hu.YASP_UNEXPECTED_METHOD_CALL:return Aa.q.EXCEPTION;case hu.UNABLE_TO_LOAD_PLAYER_IFRAME:case hu.ON_PLAYER_INIT_ERROR:case hu.LOADER_INIT_ERROR:case hu.UNABLE_TO_LOAD_PLAYER_INTERNAL_SCRIPT:case hu.FAILED_TO_DOWNLOAD_DEBUG_INFO:case hu.REQUEST_SOURCE_ERROR:return Aa.q.NETWORK_PLAYER;case hu.PLAYER_CONTAINER_NOT_FOUND:case hu.KEY_LOAD_ERROR:case hu.FEATURE_HANDLER_ERROR:case hu.INVALID_CONFIG_ELEMENT_IN_CREATE_PLAYER:case hu.INVALID_CONFIG_LANG_IN_CREATE_PLAYER:case hu.INVALID_CONFIG_IN_CREATE_PLAYER:case hu.INVALID_CONFIG_IN_SET_SOURCE:case hu.INVALID_CONFIG_IN_SOURCE_UPDATE:case hu.IFRAME_DOES_NOT_ALLOW_DRM:case hu.DRM_IS_NOT_ALLOWED:case hu.ELEMENT_NOT_IN_DOM:case hu.INVALID_LOG_URL:case hu.SCREEN_WAKE_LOCK_ERROR:return Aa.q.CONFIG}return Aa.q.DEFAULT}function Gn(e){return(Gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vn(e,t){function r(){this.constructor=e}if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Pu(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function Hn(e,t,r,n){return new(r=r||Su)((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function u(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r((function(e){e(t)}))).then(a,u)}c((n=n.apply(e,t||[])).next())}))}function Yn(e,t){function r(r){return function(u){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,(r=o?[2&r[0],o.value]:r)[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=0<(o=a.trys).length&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(u){r=[6,u],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,u])}}var n,i,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},u={next:r(0),throw:r(1),return:r(2)};return"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u}function qn(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wn(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}function zn(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e}function $n(e){return new Rc({values:e,typeName:yc.ZodEnum})}function Kn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Zn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Kn(Object(r),!0).forEach((function(t){ai(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Xn(e){return(Xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qn(e,t){if(t&&("object"===Xn(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ei(e)}function ei(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ti(e){var t="function"===typeof Map?new Map:void 0;return(ti=function(e){function r(){return ri(e,arguments,oi(this).constructor)}if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),ii(r,e)})(e)}function ri(e,t,r){return(ri=ni()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&ii(i,r.prototype),i}).apply(null,arguments)}function ni(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Lu){return!1}}function ii(e,t){return(ii=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function oi(e){return(oi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ai(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ui(e){switch(e.error){case Cc.EXPIRED_SIGNATURE:return du.DRM_PROXY_ERROR_SIGNATURE_EXPIRED;case Cc.NEED_COOKIE:return du.DRM_PROXY_ERROR_NEED_COOKIE;case Cc.NEED_YATEAM_LOGIN:return du.DRM_PROXY_ERROR_NEED_TEAM_LOGIN;case Cc.NEED_VIEW_PERMISSION:return du.DRM_PROXY_ERROR_NEED_VIEW_PERMISSION;default:return du.DRM_PROXY_ERROR}}function ci(e){return(ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function si(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function li(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?si(Object(r),!0).forEach((function(t){Ei(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):si(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fi(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==ci(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}fi=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},b=m.iterator||"@@iterator",g=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,b,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,b)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,g,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=bs);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,b,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function hi(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):bs.resolve(c).then(n,i)}function di(e){return function(){var t=this,r=arguments;return new bs((function(n,i){function o(e){hi(u,n,i,o,a,"next",e)}function a(e){hi(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function pi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yi(){return(yi="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=vi(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function vi(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_i(e)););return e}function mi(e,t){return(mi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function bi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Lu){return!1}}();return function(){var r,n=_i(e);if(t){var i=_i(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return gi(this,r)}}function gi(e,t){if(t&&("object"===ci(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return wi(e)}function wi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _i(e){return(_i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ei(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oi(e){return(Oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Si(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==Oi(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}Si=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},b=m.iterator||"@@iterator",g=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,b,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,b)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,g,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=ws);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,b,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function ki(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):ws.resolve(c).then(n,i)}function Ti(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ri(e,t){return(Ri=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Pi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Lu){return!1}}();return function(){var r,n=Ai(e);if(t){var i=Ai(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return xi(this,r)}}function xi(e,t){if(t&&("object"===Oi(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ji(e)}function ji(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ai(e){return(Ai=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Li,Ii,Ni,Di=r(28584),Ci=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"yaspVideo",void 0),i(this,"detachedSrcInternal",void 0),i(this,"airplaySrcInternal",void 0),i(this,"airplayEnabled",void 0),i(this,"lastSetSrcTime",void 0),i(this,"onAirplayStateChange",void 0),this.airplayEnabled=t.webkitCurrentPlaybackTargetIsWireless,this.onAirplayStateChange=r,this.yaspVideo=t,this.setUpAirplay()}var t,r,o;return t=e,(r=[{key:"airplaySrc",get:function(){return this.airplaySrcInternal},set:function(e){this.airplaySrcInternal=e,this.airplayEnabled&&e&&(this.lastSetSrcTime=(0,Di.no)(),this.yaspVideo.src=e,this.yaspVideo.play())}},{key:"detachedSrc",get:function(){return this.detachedSrcInternal},set:function(e){this.detachedSrcInternal=e}},{key:"setUpAirplay",value:function(){var e,t=this;this.yaspVideo.setAttribute("x-webkit-airplay","allow"),this.yaspVideo.disableRemotePlayback=!0,this.yaspVideo.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",(function(r){var n=(0,Di.no)();if(!(t.lastSetSrcTime&&n-t.lastSetSrcTime<3e3)&&!(e&&n-e<2e3)){e=(0,Di.no)();var i=t.yaspVideo.currentTime;t.yaspVideo.disableRemotePlayback?(t.yaspVideo.disableRemotePlayback=!1,t.onAirplayStateChange(!0),t.airplayEnabled=!0,t.detachedSrc=t.yaspVideo.src,t.yaspVideo.src=t.airplaySrcInternal,t.yaspVideo.addEventListener("loadedmetadata",(function(){t.yaspVideo.currentTime=i,t.yaspVideo.play()}))):(t.airplayEnabled=!1,t.onAirplayStateChange(!1),t.yaspVideo.disableRemotePlayback=!0,t.yaspVideo.src=t.detachedSrc,t.yaspVideo.addEventListener("loadedmetadata",(function(){t.yaspVideo.currentTime=i,t.yaspVideo.play()})))}}))}}])&&n(t.prototype,r),o&&n(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Mi=function(e){return e.devicePixelRatio||e.screen.deviceXDPI&&e.screen.deviceXDPI/e.screen.logicalXDPI||1},Fi=r(10055),Bi=(0,r(35776).y)(),Ui=(0,r(39881).F)(),Gi=(0,r(46223).V)(),Vi=r(51153),Hi=r(88948),Yi=(0,Vi.I)(function(){var e,t=(e=a().mark((function e(t){var r,n,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Mi(t),Bi){e.next=3;break}return e.abrupt("return",r);case 3:if(n=t.tizen){e.next=6;break}return e.abrupt("return",r);case 6:return i=t.screen.height,e.prev=7,e.next=10,new Hi((function(e){n.systeminfo.getPropertyValue("PANEL",(function(t){return e(t.panelHeight)}))}));case 10:if(o=e.sent){e.next=13;break}return e.abrupt("return",r);case 13:return e.abrupt("return",o/i);case 16:return e.prev=16,e.t0=e.catch(7),e.abrupt("return",r);case 19:case"end":return e.stop()}}),e,null,[[7,16]])})),function(){var t=this,r=arguments;return new Hi((function(n,i){function o(e){u(c,n,i,o,a,"next",e)}function a(e){u(c,n,i,o,a,"throw",e)}var c=e.apply(t,r);o(void 0)}))});return function(e){return t.apply(this,arguments)}}()),qi=(0,Vi.I)((function(e){var t=Mi(e);if(!Ui)return t;var r=e.Hisense_GetPanelResolution,n=e.Hisense_Get4KSupportState;if(n&&n()&&(t=2),!r)return t;var i=e.screen.height;try{var o=r(),a=Wi(o).height;return a?a/i:t}catch(u){return t}})),Wi=function(e){var t=e.split("*");return{height:parseInt(t[1],10),width:parseInt(t[0],10)}},zi=r(88948),$i=(0,Vi.I)(function(){var e,t=(e=s().mark((function e(t){var r,n,i,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Mi(t),Gi){e.next=3;break}return e.abrupt("return",r);case 3:if(n=t.webOS){e.next=6;break}return e.abrupt("return",r);case 6:return i=t.screen.height,e.prev=7,e.next=10,new zi((function(e){n.deviceInfo((function(t){return e(t.screenHeight)}))}));case 10:if(o=e.sent){e.next=13;break}return e.abrupt("return",r);case 13:return e.abrupt("return",o/i);case 16:return e.prev=16,e.t0=e.catch(7),e.abrupt("return",r);case 19:case"end":return e.stop()}}),e,null,[[7,16]])})),function(){var t=this,r=arguments;return new zi((function(n,i){function o(e){l(u,n,i,o,a,"next",e)}function a(e){l(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))});return function(e){return t.apply(this,arguments)}}()),Ki=r(88948),Zi=function(e){return Bi?Yi(e):Gi?$i(e):Ui?Ki.resolve(qi(e)):Ki.resolve(Mi(e))},Xi=0,Ji=h((function e(t){var r=t.label,n=void 0===r?"":r,i=t.language,o=void 0===i?"":i,a=t.id,u=void 0===a?"media-track-".concat(Xi++):a,c=t.sourceBuffer,s=void 0===c?null:c,l=t.props,f=void 0===l?void 0:l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,"label",void 0),d(this,"id",void 0),d(this,"language",void 0),d(this,"kind",""),d(this,"props",void 0),d(this,"sourceBuffer",null),this.label=n,this.language=o,this.id=u,this.sourceBuffer=s,this.props=f})),Qi=["enabled","bitrate","channels"],eo=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.enabled,i=void 0!==n&&n,a=r.bitrate,u=r.channels,c=y(r,Qi);return v(this,t),O(_(e=o.call(this,c)),"_enabled",!1),O(_(e),"bitrate",void 0),O(_(e),"channels",void 0),O(_(e),"onenabledchange",void 0),e._enabled=i,e.bitrate=a,e.channels=u,e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(t,e);var r,n,i,o=g(t);return r=t,(n=[{key:"_destroy",value:function(){delete this.onenabledchange}},{key:"enabled",get:function(){return this._enabled},set:function(e){var t;"boolean"===typeof e&&e!==this._enabled&&(this._enabled=e,null===(t=this.onenabledchange)||void 0===t||t.call(this))}}])&&m(r.prototype,n),i&&m(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Ji),to=r(29840),ro=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];T(this,t),I(A(e=o.call(this)),"tracks",[]),I(A(e),"_changing",!1);for(var n=0;n<r.length;n++)e.addTrack(r[n]);return e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(t,e);var r,n,i,o=x(t);return r=t,(n=[{key:"length",get:function(){return this.tracks.length}},{key:"addTrack",value:function(e){var t=this;if(-1===this.tracks.indexOf(e)){var r=this.tracks.length;Object.defineProperty(this,r,{get:function(){return t.tracks[r]},enumerable:!1,configurable:!0}),this.tracks.push(e),this.dispatchTrackEvent("addtrack",e)}}},{key:"removeTrack",value:function(e){var t,r=this.tracks.indexOf(e);if(-1!==r){null===(t=e._destroy)||void 0===t||t.call(e);var n=this.tracks.length-1;String(n)in this&&Object.defineProperty(this,n,{get:void 0,enumerable:!1,configurable:!0}),this.tracks.splice(r,1),this.dispatchTrackEvent("removetrack",e)}}},{key:"getTrackById",value:function(e){return this.tracks.find((function(t){return t.id===e}))||null}},{key:"item",value:function(e){return this.tracks[e]}},{key:"dispatchTrackEvent",value:function(e,t){var r=S(e);r.track=t,this.dispatchEvent(r)}}])&&R(r.prototype,n),i&&R(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(to.Z),no=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];D(this,t);for(var n=r.length-1;n>=0;n--)if(r[n].enabled){q(r,r[n]);break}return Y(V(e=o.call(this,r)),"onaddtrack",void 0),Y(V(e),"onchange",void 0),Y(V(e),"onremovetrack",void 0),e.onaddtrack=null,e.onchange=null,e.onremovetrack=null,e.addEventListener("change",(function(t){var r,n;return null===(r=(n=e).onchange)||void 0===r?void 0:r.call(n,t)})),e.addEventListener("addtrack",(function(t){var r,n;return null===(r=(n=e).onaddtrack)||void 0===r?void 0:r.call(n,t)})),e.addEventListener("removetrack",(function(t){var r,n;return null===(r=(n=e).onremovetrack)||void 0===r?void 0:r.call(n,t)})),e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B(e,t)}(t,e);var r,n,i,o=U(t);return r=t,(n=[{key:"addTrack",value:function(e){var r=this;e.enabled&&q(this,e),M(H(t.prototype),"addTrack",this).call(this,e),e.onenabledchange=function(){r._changing||(r._changing=!0,q(r,e),r._changing=!1,r.dispatchEvent(S("change")))}}},{key:"addEventListener",value:function(e,r,n){M(H(t.prototype),"addEventListener",this).call(this,e,r,n)}},{key:"removeEventListener",value:function(e,r,n){M(H(t.prototype),"removeEventListener",this).call(this,e,r,n)}}])&&C(r.prototype,n),i&&C(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(ro),io=["selected","width","height","bitrate","frameRate"],oo=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.selected,i=void 0!==n&&n,a=r.width,u=r.height,c=r.bitrate,s=r.frameRate,l=$(r,io);return K(this,t),re(ee(e=o.call(this,l)),"_selected",!1),re(ee(e),"width",void 0),re(ee(e),"height",void 0),re(ee(e),"bitrate",void 0),re(ee(e),"frameRate",void 0),re(ee(e),"onselectedchange",void 0),e.selected=i,e.bitrate=c,e.frameRate=s,e.width=a,e.height=u,e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X(e,t)}(t,e);var r,n,i,o=J(t);return r=t,(n=[{key:"_destroy",value:function(){delete this.onselectedchange}},{key:"selected",get:function(){return this._selected},set:function(e){var t;"boolean"===typeof e&&e!==this._selected&&(this._selected=e,null===(t=this.onselectedchange)||void 0===t||t.call(this))}}])&&Z(r.prototype,n),i&&Z(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Ji),ao=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];ie(this,t);for(var n=r.length-1;n>=0;n--)if(r[n].selected){pe(r,r[n]);break}return de(fe(e=o.call(this,r)),"onaddtrack",void 0),de(fe(e),"onchange",void 0),de(fe(e),"onremovetrack",void 0),e.onaddtrack=null,e.onchange=null,e.onremovetrack=null,e.addEventListener("change",(function(t){var r,n;return null===(r=(n=e).onchange)||void 0===r?void 0:r.call(n,t)})),e.addEventListener("addtrack",(function(t){var r,n;return null===(r=(n=e).onaddtrack)||void 0===r?void 0:r.call(n,t)})),e.addEventListener("removetrack",(function(t){var r,n;return null===(r=(n=e).onremovetrack)||void 0===r?void 0:r.call(n,t)})),e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ce(e,t)}(t,e);var r,n,i,o=se(t);return r=t,(n=[{key:"addEventListener",value:function(e,r,n){ae(he(t.prototype),"addEventListener",this).call(this,e,r,n)}},{key:"removeEventListener",value:function(e,r,n){ae(he(t.prototype),"removeEventListener",this).call(this,e,r,n)}},{key:"selectedIndex",get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1}},{key:"addTrack",value:function(e){var r=this;e.selected&&pe(this,e),ae(he(t.prototype),"addTrack",this).call(this,e),e.onselectedchange=function(){r._changing||(r._changing=!0,pe(r,e),r._changing=!1,r.dispatchEvent(S("change")))}}}])&&oe(r.prototype,n),i&&oe(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(ro),uo=r(71729),co=r(18243),so=r(88891).createObjectURL(new Blob(["WEBVTT"],{type:"text/vtt"})),lo=(r(97881),r(28285)),fo=r(85214),ho=r(88468),po=r(95689),yo=[],vo=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"enableConsole",value:function(){e.consoleEnabled=!0,e.log("YA PLAYER VERSION: 1.0-12081")}},{key:"log",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];e.consoleEnabled&&console.log(be.apply(void 0,r)),e.addToHistory("log",r)}},{key:"warn",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];e.consoleEnabled&&console.warn(be.apply(void 0,r)),e.addToHistory("warn",r)}},{key:"error",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];e.consoleEnabled&&console.error(be.apply(void 0,r)),e.addToHistory("error",r)}},{key:"getHistory",value:function(){return[].concat(yo)}},{key:"addToHistory",value:function(e,t){yo.length>=150&&yo.shift(),yo.push("[".concat(e,"][").concat(Date.now(),"] ").concat(t.map((function(e){try{return(0,ho.Y)(e)}catch(t){return(0,po.K)(t)?JSON.stringify(["stringify_error",t.stack]):JSON.stringify(["stringify_error","not_an_object_error"])}})).join()))}}],(r=null)&&me(t.prototype,r),n&&me(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();Ni=void 0,(Ii="consoleEnabled")in(Li=vo)?Object.defineProperty(Li,Ii,{value:Ni,enumerable:!0,configurable:!0,writable:!0}):Li[Ii]=Ni;var mo,bo,go,wo=r(901),_o=function(e){return"mpd"===(0,wo.lm)(e.toLocaleLowerCase())},Eo=r(74910),Oo=function(e){function t(e,r){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=o.call(this);var i={videoWidth:e.videoWidth,videoHeight:e.videoHeight},a=function(){var t=e.videoWidth,n=e.videoHeight;isNaN(t)||isNaN(n)||t<1||n<1||i.videoWidth===t&&i.videoHeight===n||(i={videoWidth:t,videoHeight:n},r({videoWidth:t,videoHeight:n}))};if("onresize"in e)e.addEventListener("resize",a),n.once("Destroy",(function(){return e.removeEventListener("resize",a)}));else{e.addEventListener("timeupdate",a),n.once("Destroy",(function(){return e.removeEventListener("timeupdate",a)}));var u=setInterval(a,1e3);n.once("Destroy",(function(){return clearInterval(u)}))}return n}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ee(e,t)}(t,e);var r,n,i,o=Oe(t);return r=t,n&&_e(r.prototype,n),i&&_e(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r}(r(99002).M),So=(r(33603),r(51312)),ko=(r(99761),r(24612)),To=ko.Z,Ro=ko.Z,Po=ko.Z,xo=r(88948),jo=r(88948),Ao=(mo={propertyName:"YANDEX_DESTROYABLE_GLOBAL_CALLBACK_PROPERTY_NAME",win:window},bo=mo.win,go=mo.propertyName,function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ie(this,"_isDestroyed",!1),Ie(this,"destroyHandlers",[]),Ie(this,"_destroyReason",void 0)}var t,r,n;return t=e,n=[{key:"addErrorHandler",value:function(t){e.errorHandlers.push(t)}}],(r=[{key:"destroyReason",get:function(){return this._destroyReason}},{key:"isDestroyed",get:function(){return this._isDestroyed}},{key:"addDestroyHandler",value:function(e){this._isDestroyed?e.apply(void 0,je([this._destroyReason])):this.destroyHandlers.push(e)}},{key:"destroy",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[0];if(!this._isDestroyed){this._isDestroyed=!0,this._destroyReason=i;try{Te.apply(void 0,[this.destroyHandlers].concat(r))}catch(o){Te(e.errorHandlers,o)}this.destroyHandlers.length=0}}}])&&Le(t.prototype,r),n&&Le(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}());Ie(Ao,"errorHandlers",[]);var Lo={droppedVideoFrames:0,corruptedVideoFrames:0,totalVideoFrames:0},Io=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ye(Ve(r=o.call(this)),"video",void 0),Ye(Ve(r),"playbackQuality",Lo),Ye(Ve(r),"persistedPlaybackQuality",Lo),Ye(Ve(r),"accumulatedPlaybackQuality",Lo),r.video=e,r.addDestroyHandler((function(){r.reset(),r.video=void 0})),r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Be(e,t)}(t,e);var r,n,i,o=Ue(t);return r=t,(n=[{key:"update",value:function(){if(this.video){var e=function(e){if("function"===typeof e.getVideoPlaybackQuality){var t=e.getVideoPlaybackQuality();return{droppedVideoFrames:t.droppedVideoFrames,corruptedVideoFrames:t.corruptedVideoFrames,totalVideoFrames:t.totalVideoFrames}}var r=e;return"number"===typeof r.webkitDroppedFrameCount&&"number"===typeof r.webkitDecodedFrameCount?De(De({},Lo),{},{droppedVideoFrames:r.webkitDroppedFrameCount,totalVideoFrames:r.webkitDecodedFrameCount}):Lo}(this.video);this.playbackQuality=e,0!==this.persistedPlaybackQuality.totalVideoFrames&&(this.persistedPlaybackQuality.totalVideoFrames>e.totalVideoFrames&&(this.accumulatedPlaybackQuality={droppedVideoFrames:this.accumulatedPlaybackQuality.droppedVideoFrames+this.persistedPlaybackQuality.droppedVideoFrames,corruptedVideoFrames:this.accumulatedPlaybackQuality.corruptedVideoFrames+this.persistedPlaybackQuality.corruptedVideoFrames,totalVideoFrames:this.accumulatedPlaybackQuality.totalVideoFrames+this.persistedPlaybackQuality.totalVideoFrames}),this.persistedPlaybackQuality=Lo)}}},{key:"persist",value:function(){0!==this.playbackQuality.totalVideoFrames&&(this.persistedPlaybackQuality=this.playbackQuality,this.playbackQuality=Lo)}},{key:"reset",value:function(){this.playbackQuality=Lo,this.persistedPlaybackQuality=Lo,this.accumulatedPlaybackQuality=Lo}},{key:"getPlaybackQuality",value:function(){return this.persistedPlaybackQuality.totalVideoFrames>0?Lo:{droppedVideoFrames:this.playbackQuality.droppedVideoFrames+this.accumulatedPlaybackQuality.droppedVideoFrames,corruptedVideoFrames:this.playbackQuality.corruptedVideoFrames+this.accumulatedPlaybackQuality.corruptedVideoFrames,totalVideoFrames:this.playbackQuality.totalVideoFrames+this.accumulatedPlaybackQuality.totalVideoFrames}}}])&&Fe(r.prototype,n),i&&Fe(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Ao),No=function(){function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),We(this,"callback",void 0),We(this,"intervalId",void 0),We(this,"playbackQualityController",void 0),We(this,"oldValues",{}),We(this,"dprCheckingInProgress",!1),We(this,"tick",(function(){var e;null===(e=n.playbackQualityController)||void 0===e||e.update();var t=n.getFramesValue();void 0!==t&&n.callback("frames",t),n.checkDevicePixelRatio()})),this.callback=r,this.playbackQualityController=new Io(t),this.intervalId=null}var t,r,n;return t=e,(r=[{key:"getFramesValue",value:function(){var e,t;if(null!==this.playbackQualityController&&null!==this.oldValues){var r=this.playbackQualityController.getPlaybackQuality(),n=r.droppedVideoFrames,i=r.totalVideoFrames;if((null===(e=this.oldValues.frames)||void 0===e?void 0:e.dropped)!==n||(null===(t=this.oldValues.frames)||void 0===t?void 0:t.total)!==i)return this.oldValues.frames={dropped:Math.max(Math.floor(n)),total:Math.max(Math.floor(i))},this.oldValues.frames}}},{key:"checkDevicePixelRatio",value:function(){var e=this;if(null!==this.oldValues&&!this.dprCheckingInProgress){var t="undefined"!==typeof globalThis?globalThis:window;this.oldValues.devicePixelRatio||this.handleDpr(Mi(t)),this.dprCheckingInProgress=!0,Zi(t).then((function(t){e.handleDpr(t)})).catch((function(){e.handleDpr(Mi(t))}))}}},{key:"handleDpr",value:function(e){this.dprCheckingInProgress=!1,null!==this.oldValues&&this.oldValues.devicePixelRatio!==e&&(this.oldValues.devicePixelRatio=e,void 0!==e&&this.callback("devicePixelRatio",e))}},{key:"enable",value:function(){this.tick(),this.intervalId=setInterval(this.tick,250)}},{key:"disable",value:function(){var e;this.oldValues={},null===(e=this.playbackQualityController)||void 0===e||e.persist(),clearInterval(this.intervalId)}},{key:"destroy",value:function(){var e;this.disable(),null===(e=this.playbackQualityController)||void 0===e||e.destroy(),this.callback=Fi.Z,this.oldValues=null}}])&&qe(t.prototype,r),n&&qe(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Do=function(e){try{var t=e.getBoundingClientRect(),r=t.left,n=t.right,i=t.top,o=t.bottom;return{left:r,right:n,top:i,bottom:o,width:n-r,height:o-i}}catch(Lu){return{left:0,width:0,top:0,height:0,right:0,bottom:0}}},Co=r(88948),Mo=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return e===t};return Je(this,t),(r=o.call(this)).checkToEqualFunction=n,ut(ot(r),"value",void 0),r.value=e,r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rt(e,t)}(t,e);var r,n,i,o=nt(t);return r=t,(n=[{key:"getValue",value:function(){return this.value}},{key:"subscribeValueCondition",value:function(e,t){return this.add((function(r){e(r)&&ze(t,r)}))}},{key:"subscribeValueConditionOnce",value:function(e,t){var r=this.subscribeValueCondition(e,(function(e){r(),ze(t,e)}));return r}},{key:"dispatch",value:function(e){this.checkToEqualFunction(this.value,e)||(this.value=e,et(at(t.prototype),"dispatch",this).call(this,e))}}])&&Qe(r.prototype,n),i&&Qe(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ze(this,"on",[]),Ze(this,"once",[])}var t,r,n;return t=e,(r=[{key:"add",value:function(){for(var e,t=this,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=this.on).push.apply(e,n),function(){return t.remove.apply(t,n)}}},{key:"addOne",value:function(){for(var e,t=this,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=this.once).push.apply(e,n),function(){return t.remove.apply(t,n)}}},{key:"promise",value:function(){var e=this;return new Co((function(t){return e.addOne(t)}))}},{key:"dispatch",value:function(e){var t=this.once;this.once=[],$e(this.on,e),$e(t,e)}},{key:"removeAll",value:function(){this.on.length=0,this.once.length=0}},{key:"remove",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.on=this.on.filter((function(e){return t.indexOf(e)<0})),this.once=this.once.filter((function(e){return t.indexOf(e)<0}))}}])&&Ke(t.prototype,r),n&&Ke(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()),Fo=0,Bo=[],Uo=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),gt(mt(r=o.call(this)),"onResize",void 0),gt(mt(r),"resizeObserverCallback",(function(e){var t=ft(e,1)[0].contentRect,n=t.width,i=t.height;r.onResize.dispatch({width:n,height:i})}));var n=Do(e);if(r.onResize=new Mo({width:n.width,height:n.height},(function(e,t){var r=t.width,n=t.height;return!!(isNaN(r)||isNaN(n)||r<1||n<1)||e.width===r&&e.height===n})),r.addDestroyHandler((function(){r.onResize.removeAll()})),"undefined"!==typeof ResizeObserver)try{var i=new ResizeObserver(r.resizeObserverCallback);i.observe(e),r.addDestroyHandler((function(){i.disconnect()}))}catch(a){r.fallbackToCustomDetectionMethods(e)}else r.fallbackToCustomDetectionMethods(e);return r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pt(e,t)}(t,e);var r,n,i,o=yt(t);return r=t,(n=[{key:"getSize",value:function(){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(r),!0).forEach((function(t){gt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.onResize.getValue())}},{key:"fallbackToCustomDetectionMethods",value:function(e){var t=this,r=e.ownerDocument;if(r){var n=r.defaultView;if(n){var i=function(){var r=Do(e);t.onResize.dispatch({width:r.width,height:r.height})};this.addDestroyHandler((0,co.O)(n,"resize",i,{passive:!0})),this.addDestroyHandler(ct(i))}}}}])&&dt(r.prototype,n),i&&dt(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Ao),Go=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ot(this,"observer",void 0),Ot(this,"lastValue",void 0),Ot(this,"video",void 0),Ot(this,"onChangeCallbacks",[]),this.video=t,this.lastValue=this.computeObjectFit(),this.observer=new MutationObserver((function(e){var t,n=wt(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;"attributes"!==i.type||"class"!==i.attributeName&&"style"!==i.attributeName||function(){var e=r.computeObjectFit();r.lastValue!==e&&(r.lastValue=e,r.onChangeCallbacks.forEach((function(t){return t(e)})))}()}}catch(o){n.e(o)}finally{n.f()}})),this.observer.observe(t,{attributes:!0,attributeFilter:["class","style"]})}var t,r,n;return t=e,(r=[{key:"computeObjectFit",value:function(){if(!this.video)throw new Error("No video-element to compute object-fit");return self.getComputedStyle(this.video).getPropertyValue("object-fit")}},{key:"getObjectFit",value:function(){return this.lastValue}},{key:"onChange",value:function(e){this.onChangeCallbacks.push(e)}},{key:"destroy",value:function(){var e;null===(e=this.observer)||void 0===e||e.disconnect(),this.observer=null,this.video=null,this.onChangeCallbacks=[]}}])&&Et(t.prototype,r),n&&Et(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Vo={attributes:!0,childList:!1,subtree:!1,attributeFilter:["loop"]},Ho=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"observer",void 0),this.observer=new MutationObserver((function(e){var n,i=St(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if("attributes"!==o.type)return;var a=o.attributeName;r(a,t[a])}}catch(u){i.e(u)}finally{i.f()}})),this.observer.observe(t,Vo)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e;null===(e=this.observer)||void 0===e||e.disconnect(),this.observer=null}}])&&Tt(t.prototype,r),n&&Tt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Yo=r(86386),qo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=Yo(e);return"boolean"===typeof t?-1:t},Wo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return-1!==qo(e)}(),zo=["","-webkit-","-ms-","-moz-","-o-"],$o=r(84754),Ko=zo.map((function(e){return"(".concat(e,"any-pointer:coarse)")})).join(","),Zo=zo.map((function(e){return"(".concat(e,"touch-enabled)")})).join(","),Xo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return e.navigator.userAgent.indexOf("UCBrowser")>-1},Jo=r(31247),Qo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=(0,Jo.i)(e).toLowerCase();if(t.indexOf("android")>-1)return!1;var r=t.replace(/\(.+?\)/gi,"").split(" ").map((function(e){return e.trim().split("/")[0]})).filter((function(e){return e&&"mobile"!==e}));return 4===r.length&&"mozilla"===r[0]&&"applewebkit"===r[1]&&"version"===r[2]&&"safari"===r[3]},ea=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return Qo(e)||Dt(e)||Nt(e)}(),ta=Wo||ea?function(e,t){var r=e.paused;return ct((function(){e.paused!==r&&(r=e.paused,t(r))}))}:function(e,t){var r=e.paused,n=function(e){var n="pause"===e.type;n!==r&&t(r=n)},i=(0,co.O)(e,"pause",n,{passive:!0}),o=(0,co.O)(e,"playing",n,{passive:!0}),a=(0,co.O)(e,"play",n,{passive:!0});return function(){i(),o(),a()}},ra=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Mt(this,"unsubscribers",[]),Mt(this,"media",void 0),Mt(this,"destroy",(function(){Te(r.unsubscribers)})),this.unsubscribers=[],this.media=t}var t,r,n;return t=e,(r=[{key:"observe",value:function(e){var t=this,r=ta(this.media,e),n=function e(){r(),t.unsubscribers=t.unsubscribers.filter((function(t){return t!==e}))};return this.unsubscribers.push(n),n}}])&&Ct(t.prototype,r),n&&Ct(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),na=r(19150),ia=function(e,t){if(!e||!e.length)return null;if(1===e.length&&e.end(0)-e.start(0)<1e-6)return null;for(var r=0;r<e.length;r++)if(e.start(r)>t&&(0===r||e.end(r-1)-t<=.5))return r;return null},oa=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15,r=arguments.length>2?arguments[2]:void 0,n=e.currentTime,i=e.duration;if(e.readyState<e.HAVE_FUTURE_DATA)return!0;var o=null!==ia(e.buffered,e.currentTime);return(!o||!r)&&!(0,na.w)(e).some((function(e){var r=e.start,o=e.end;return!(n<r||n>o)&&(i<=o||n+t<o)}))},aa=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Bt(this,"unsubscribers",[]),Bt(this,"media",void 0),Bt(this,"destroy",(function(){Te(r.unsubscribers)})),this.unsubscribers=[],this.media=t}var t,r,n;return t=e,(r=[{key:"observe",value:function(e){var t=this,r=function(e,t,r){var n=!1,i=function(){var i=oa(e,n?.3:.15,r);i!==n&&t(n=i)},o=ct(i),a=setTimeout(i,0);return function(){o(),clearTimeout(a)}}(this.media,e),n=function e(){r(),t.unsubscribers=t.unsubscribers.filter((function(t){return t!==e}))};return this.unsubscribers.push(n),n}}])&&Ft(t.prototype,r),n&&Ft(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),ua=function(){function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Gt(this,"yaspMediaElement",void 0),Gt(this,"notifyCallback",void 0),Gt(this,"notify",void 0),Gt(this,"attributeObserver",null),Gt(this,"pausedObserver",null),Gt(this,"bufferingObserver",null),Gt(this,"handlePaused",(function(e){n.notify("updatePaused",e)})),Gt(this,"handleBuffering",(function(e){n.notify("updateBuffering",e)})),Gt(this,"handleBuffered",(function(){if(null===n.yaspMediaElement)throw new Error("Unexpected subscription call after destroy");for(var e=[],t=n.yaspMediaElement.buffered,r=0;r<t.length;r++)e.push([t.start(r),t.end(r)]);n.notify("updateBuffered",e)})),Gt(this,"handleRatechange",(function(){if(null===n.yaspMediaElement)throw new Error("Unexpected subscription call after destroy");n.notify("updatePlaybackRate",n.yaspMediaElement.playbackRate)})),Gt(this,"handleTimeupdate",(function(){if(null===n.yaspMediaElement)throw new Error("Unexpected subscription call after destroy");n.notify("updateCurrentTime",Math.max(n.yaspMediaElement.currentTime,0))})),Gt(this,"handleDurationchange",(function(){if(null===n.yaspMediaElement)throw new Error("Unexpected subscription call after destroy");n.notify("updateDuration",Math.max(n.yaspMediaElement.duration,0))})),this.yaspMediaElement=t,this.notifyCallback=r,this.notify=function(e,t){n.notifyCallback&&n.notifyCallback(e,t)}}var t,r,n;return t=e,(r=[{key:"enable",value:function(){var e,t=this;null!==this.yaspMediaElement&&(this.disable(),this.yaspMediaElement.addEventListener("ratechange",this.handleRatechange,{passive:!0}),this.yaspMediaElement.addEventListener("timeupdate",this.handleTimeupdate,{passive:!0}),this.yaspMediaElement.addEventListener("seeking",this.handleTimeupdate,{passive:!0}),this.yaspMediaElement.addEventListener("durationchange",this.handleDurationchange,{passive:!0}),this.yaspMediaElement.addEventListener("progress",this.handleBuffered,{passive:!0}),this.attributeObserver=new Ho(this.yaspMediaElement,(function(e,r){"loop"===e&&t.handleLoop(null!==r&&void 0!==r&&r)})),this.pausedObserver=new ra(this.yaspMediaElement),this.bufferingObserver=new aa(this.yaspMediaElement),this.pausedObserver.observe(this.handlePaused),this.bufferingObserver.observe(this.handleBuffering),this.handleLoop(null!==(e=this.yaspMediaElement.loop)&&void 0!==e&&e))}},{key:"disable",value:function(){var e,t,r;null!==this.yaspMediaElement&&(this.yaspMediaElement.removeEventListener("ratechange",this.handleRatechange),this.yaspMediaElement.removeEventListener("timeupdate",this.handleTimeupdate),this.yaspMediaElement.removeEventListener("seeking",this.handleTimeupdate),this.yaspMediaElement.removeEventListener("durationchange",this.handleDurationchange),this.yaspMediaElement.removeEventListener("progress",this.handleBuffered),null===(e=this.attributeObserver)||void 0===e||e.destroy(),this.attributeObserver=null,null===(t=this.pausedObserver)||void 0===t||t.destroy(),this.pausedObserver=null,null===(r=this.bufferingObserver)||void 0===r||r.destroy(),this.bufferingObserver=null)}},{key:"destroy",value:function(){this.disable(),this.yaspMediaElement=null,this.notifyCallback=null}},{key:"handleLoop",value:function(e){this.notify("updateLoop",e)}}])&&Ut(t.prototype,r),n&&Ut(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),ca=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Xt(Kt(n=o.call(this,e,r)),"intervalWatcher",null),Xt(Kt(n),"videoSizeObserver",null),Xt(Kt(n),"videoSizeSensor",null),Xt(Kt(n),"objectFitObserver",null),Xt(Kt(n),"handleIntervalUpdate",(function(e,t){switch(e){case"frames":return void n.handleFrames(t);case"devicePixelRatio":return void n.handleDevicePixelRatio(t)}})),Xt(Kt(n),"handleVideoResize",(function(){if(null===n.yaspMediaElement)throw new Error("Unexpected subscription call after destroy");n.notify("updateVideoSize",{height:Math.max(Math.floor(n.yaspMediaElement.videoHeight)),width:Math.max(Math.floor(n.yaspMediaElement.videoWidth))})})),Xt(Kt(n),"handleResize",(function(e,t){if(null===n.yaspMediaElement)throw new Error("Unexpected subscription call after destroy");n.notify("updateContainerSize",{height:Math.max(Math.floor(t),0),width:Math.max(Math.floor(e),0)})})),Xt(Kt(n),"handleObjectFit",(function(e){n.notify("updateObjectFit",e)})),n.yaspMediaElement=e,n.intervalWatcher=new No(n.yaspMediaElement,n.handleIntervalUpdate),n}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wt(e,t)}(t,e);var r,n,i,o=zt(t);return r=t,(n=[{key:"enable",value:function(){var e=this;if(null!==this.intervalWatcher){Yt(Zt(t.prototype),"enable",this).call(this),this.intervalWatcher.enable(),this.videoSizeObserver=new Oo(this.yaspMediaElement,this.handleVideoResize),this.videoSizeSensor=new Uo(this.yaspMediaElement),this.videoSizeSensor.onResize.add((function(t){var r=t.width,n=t.height;return e.handleResize(r,n)})),this.objectFitObserver=new Go(this.yaspMediaElement),this.objectFitObserver.onChange(this.handleObjectFit);var r=this.videoSizeSensor.getSize();this.handleResize(r.width,r.height)}}},{key:"disable",value:function(){var e,r,n;null!==this.intervalWatcher&&(Yt(Zt(t.prototype),"disable",this).call(this),this.intervalWatcher.disable(),null===(e=this.videoSizeSensor)||void 0===e||e.destroy(),null===(r=this.videoSizeObserver)||void 0===r||r.destroy(),this.videoSizeObserver=null,null===(n=this.objectFitObserver)||void 0===n||n.destroy(),this.objectFitObserver=null)}},{key:"destroy",value:function(){var e;Yt(Zt(t.prototype),"destroy",this).call(this),null===(e=this.intervalWatcher)||void 0===e||e.destroy(),this.intervalWatcher=null}},{key:"handleFrames",value:function(e){if(null===this.yaspMediaElement)throw new Error("Unexpected notification call after destroy");this.notify("updateFrames",e)}},{key:"handleDevicePixelRatio",value:function(e){if(null===this.yaspMediaElement)throw new Error("Unexpected notification call after destroy");this.notify("updateDevicePixelRatio",e)}}])&&Ht(r.prototype,n),i&&Ht(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(ua),sa=r(28139),la=r.n(sa),fa=r(52839),ha=(0,fa.t)(Object.getPrototypeOf)?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__||Object.prototype},da=r(88457),pa=r(55543),ya=r(88948),va=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Qt(this,"externalEventTarget",new to.Z),Qt(this,"internalEventTarget",new to.Z),t({addEventListener:this.internalEventTarget.addEventListener.bind(this.internalEventTarget),removeEventListener:(0,pa.RW)("use_correct_method_in_workershim_revert")?this.internalEventTarget.removeEventListener.bind(this.internalEventTarget):this.internalEventTarget.addEventListener.bind(this.internalEventTarget),postMessage:function(e){var t=new MessageEvent("message",{data:e});ya.resolve().then((function(){return r.externalEventTarget.dispatchEvent(t)}))}})}var t,r,n;return t=e,(r=[{key:"addEventListener",value:function(e,t,r){this.externalEventTarget.addEventListener(e,t,r)}},{key:"removeEventListener",value:function(e,t,r){this.externalEventTarget.removeEventListener(e,t,r)}},{key:"terminate",value:function(){}},{key:"postMessage",value:function(e){this.internalEventTarget.dispatchEvent(new MessageEvent("message",{data:e}))}}])&&Jt(t.prototype,r),n&&Jt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),ma=function(){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{}};return t[n](i,i.exports,e),i.exports}var t=ENTRY_MODULE,r={};e.m=t,e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,{a:r}),r},e.d=function(t,r){for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},e.g=function(){if("[object Object]"===Object.prototype.toString.call(globalThis))return globalThis;try{return this||new Function("return this")()}catch(Lu){if("[object Object]"===Object.prototype.toString.call(window))return window}}(),e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n=e(ENTRY_MODULE);return n.default||n};ma.toString();var ba=r(55176),ga=r(27926),wa=r(41647),_a=r(88948),Ea=r(88948),Oa=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),sr(this,"workerPromise",void 0),sr(this,"handleTerminate",void 0),this.workerPromise=function e(t){var r,n=t.inline,i=t.path,o=t.workerInternal,a=t.workerConfig;if(!n)try{r=ir(i),(0,fa.t)(r.constructor)||(n=!0,r.terminate())}catch(l){n=!0}n&&(r=new va(o));var u=new ga.A((function(e){r.postMessage(e,(0,wa._)(e))})),c=!1,s=new _a((function(t,s){var l=u.request({method:"initWorker",params:a}),f=function(u){c||n?console.error(u):(h(),r.terminate(),t(e({inline:!0,workerInternal:o,path:i,workerConfig:a})))},h=function(){r.removeEventListener("error",f)};l.then((function(){c=!0,h(),t({worker:r,rpc:u})})).catch(f),r.addEventListener("error",f),r.addEventListener("message",(function(e){u.handleMessage(e)}))}));return(0,ba.v)(s),s}({inline:!t.useWebWorker,path:88457,workerInternal:da.Z,workerConfig:t.workerConfig}),this.handleTerminate=t.onTerminate}var t,r,n,i,o;return t=e,(r=[{key:"postMessage",value:(i=ar().mark((function e(){var t,r,n=arguments;return ar().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.workerPromise;case 2:t=e.sent,(r=t.worker).postMessage.apply(r,n);case 5:case"end":return e.stop()}}),e,this)})),o=function(){var e=this,t=arguments;return new Ea((function(r,n){function o(e){ur(u,r,n,o,a,"next",e)}function a(e){ur(u,r,n,o,a,"throw",e)}var u=i.apply(e,t);o(void 0)}))},function(){return o.apply(this,arguments)})},{key:"sendEvent",value:function(e){var t=e.method,r=e.params;return this.workerPromise.then((function(e){return e.rpc.sendEvent({method:t,params:r})}))}},{key:"request",value:function(e){var t=e.method,r=e.params;return this.workerPromise.then((function(e){return e.rpc.request({method:t,params:r})}))}},{key:"registerRpcHandler",value:function(e,t){var r=this;return this.workerPromise.then((function(r){return r.rpc.registerHandler(e,t)})),function(){return r.removeRpcHandler(e,t)}}},{key:"registerStaticRpcHandler",value:function(e,t){var r=this;return this.workerPromise.then((function(r){return r.rpc.registerStaticHandler(e,t)})),function(){return r.removeRpcHandler(e,t)}}},{key:"removeRpcHandler",value:function(e,t){this.workerPromise.then((function(r){return r.rpc.removeHandler(e,t)}))}},{key:"destroy",value:function(){var e=this;this.workerPromise.then((function(t){var r=t.worker,n=t.rpc;r.terminate(),n.destroy(),e.handleTerminate()}))}}])&&cr(t.prototype,r),n&&cr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Sa=r(7179),ka=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),fr(this,"onTick",void 0),fr(this,"cancelPending",void 0),this.onTick=t,this.cancelPending=null}var t,r,n;return t=e,(r=[{key:"tickAfter",value:function(e){var t=this;this.stop();var r=!0,n=null;return this.cancelPending=function(){self.clearTimeout(n),r=!1},n=self.setTimeout((function(){r&&t.onTick()}),1e3*e),this}},{key:"stop",value:function(){this.cancelPending&&(this.cancelPending(),this.cancelPending=null)}}])&&lr(t.prototype,r),n&&lr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Ta=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),dr(this,"onTick",void 0),dr(this,"ticker",void 0),this.onTick=t,this.ticker=null}var t,r,n;return t=e,(r=[{key:"tickNow",value:function(){return this.stop(),this.onTick(),this}},{key:"tickAfter",value:function(e){var t=this;return this.stop(),this.ticker=new ka((function(){t.onTick()})).tickAfter(e),this}},{key:"tickEvery",value:function(e){var t=this;return this.stop(),this.ticker=new ka((function(){var r;null===(r=t.ticker)||void 0===r||r.tickAfter(e),t.onTick()})).tickAfter(e),this}},{key:"stop",value:function(){this.ticker&&(this.ticker.stop(),this.ticker=null)}}])&&hr(t.prototype,r),n&&hr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Ra=function(){function e(t,r,n,i,o){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),mr(this,"media",void 0),mr(this,"timeline",void 0),mr(this,"config",void 0),mr(this,"stallDetector",void 0),mr(this,"onEvent",void 0),mr(this,"unsubscribe",void 0),mr(this,"seekingEventReceived",void 0),mr(this,"prevReadyState",void 0),mr(this,"didFireLargeGap",void 0),mr(this,"hadSegmentAppended",void 0),mr(this,"locked",void 0),mr(this,"gapJumpTimer",void 0),this.media=t,this.timeline=r,this.config=n,this.stallDetector=i,this.onEvent=o,this.seekingEventReceived=!1,this.prevReadyState=t.readyState,this.didFireLargeGap=!1,this.hadSegmentAppended=!1,this.locked=!1,this.unsubscribe=(0,co.O)(t,"waiting",(function(){return a.onPollGapJump()}),!1),this.gapJumpTimer=new Ta((function(){a.onPollGapJump()})).tickEvery(.25)}var t,r,n;return t=e,(r=[{key:"release",value:function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null),null!==this.gapJumpTimer&&(this.gapJumpTimer.stop(),this.gapJumpTimer=null),this.stallDetector&&(this.stallDetector.release(),this.stallDetector=null),this.onEvent=null,this.timeline=null,this.media=null}},{key:"configure",value:function(e){this.config=yr(yr({},this.config),e)}},{key:"onSegmentAppended",value:function(){this.hadSegmentAppended=!0,this.onPollGapJump()}},{key:"onSeeking",value:function(){this.seekingEventReceived=!0,this.hadSegmentAppended=!1,this.didFireLargeGap=!1}},{key:"lock",value:function(){this.locked=!0}},{key:"unlock",value:function(){this.locked=!1}},{key:"onPollGapJump",value:function(){var t,r,n,i,o;if(this.media&&(!this.locked||!(0,pa.RW)("yasp_no_source_abort_on_fake_seek"))&&0!==this.media.readyState){if(this.media.seeking){if(!this.seekingEventReceived)return}else this.seekingEventReceived=!1;if((!this.media.paused||null!==(t=this.config)&&void 0!==t&&t.jumpOnPause)&&(this.media.readyState!==this.prevReadyState&&(this.didFireLargeGap=!1,this.prevReadyState=this.media.readyState),null===(r=this.stallDetector)||void 0===r||!r.poll())){var a=(null===(n=this.config)||void 0===n?void 0:n.smallGapLimit)||.5,u=(null===(i=this.config)||void 0===i?void 0:i.largeGapLimit)||1/0,c=this.media.currentTime,s=this.media.buffered,l=ia(s,c);if(null!==l&&(0!==l||this.hadSegmentAppended)){var f=s.start(l);if(!(f>=((null===(o=this.timeline)||void 0===o?void 0:o.getSeekRangeEnd())||0))){var h=f-c,d=h<=a,p=!1;if(!(h<e.BROWSER_GAP_TOLERANCE)){if(!d&&!this.didFireLargeGap){var y,v;this.didFireLargeGap=!0;for(var m=[],b=0;b<this.media.buffered.length;b++)m.push([this.media.buffered.start(b),this.media.buffered.end(b)]);null===(y=this.onEvent)||void 0===y||y.call(this,{currentTime:c,gapSize:h,bufferedRanges:m}),null!==(v=this.config)&&void 0!==v&&v.jumpLargeGaps&&h<u&&(p=!0)}(d||p)&&(this.media.currentTime=f)}}}}}}}])&&vr(t.prototype,r),n&&vr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();mr(Ra,"BROWSER_GAP_TOLERANCE",.001);var Pa=r(60520),xa=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"isBuffered",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!e||!e.length)return!1;if(1===e.length&&e.end(0)-e.start(0)<1e-6)return!1;if(t>e.end(e.length-1))return!1;for(var n=0;n<e.length;n++)if(t+r>=e.start(n)&&t-r<=e.end(n))return!0;return!1}},{key:"getTimeRanges",value:function(e){for(var t=[],r=0;r<e.length;r++)try{t.push({start:e.start(r),end:e.end(r)})}catch(Lu){}return(0,Pa.l)(t)}}],(r=null)&&br(t.prototype,r),n&&br(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),ja=r(34780),Aa=r(16971),La=Math.max(5,0),Ia=r(48493),Na=Date&&(0,$o.m)(Date.now)?function(){return Date.now()}:function(){return(new Date).getTime()},Da=r(83429),Ca=It()?9e5:864e5,Ma=["ewma","hlsjs"],Fa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=(0,Jo.i)(e);return t.includes("CrKey")}(),Ba=r(95002),Ua=Ui||Gi||Bi,Ga=function(){function e(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fi.Z,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Or(this,e),kr(this,"video",void 0),kr(this,"wasMakingProgress",void 0),kr(this,"value",void 0),kr(this,"lastUpdateSeconds",void 0),kr(this,"didJump",void 0),kr(this,"didTryToEscape",void 0),kr(this,"didTryToEscapeSeekingStucking",void 0),kr(this,"skipOffset",void 0),kr(this,"stallThresholdSeconds",void 0),kr(this,"extraThresholdSeconds",void 0),kr(this,"onEvent",void 0),kr(this,"makePP",(function(){r.video&&(r.video.pause(),(0,ba.v)(r.video.play()))})),kr(this,"handleTVPoll",(function(e,t){return!!r.video&&(r.video.seeking?r.tryToEscapeSeekingStucking(e):e>=r.stallThresholdSeconds&&t&&!r.didJump?(r.onStall(),r.didJump=!0,r.value=r.video.currentTime,r.onEvent(),!0):!(!(e>=r.extraThresholdSeconds&&t)||r.didTryToEscape)&&r.tryToEscapeTVStucking())})),kr(this,"handlePoll",(function(e,t){if(!r.video)return!1;var n=e>=r.stallThresholdSeconds&&t&&!r.didJump;return n&&(r.onStall(),r.didJump=!0,r.value=r.video.currentTime,r.onEvent()),n})),this.video=t,this.wasMakingProgress=this.shouldBeMakingProgress(),this.value=null===t||void 0===t?void 0:t.currentTime,this.lastUpdateSeconds=Date.now()/1e3,this.didJump=!1,this.didTryToEscape=!1,this.didTryToEscapeSeekingStucking=!1,this.skipOffset=i,this.stallThresholdSeconds=o,this.extraThresholdSeconds=2*o,this.onEvent=n}var t,r,n;return t=e,(r=[{key:"release",value:function(){this.video=null,this.onEvent=Fi.Z}},{key:"onStall",value:function(){this.video&&(Gi||Bi||Fa||!this.skipOffset?this.makePP():this.video.currentTime+=this.skipOffset)}},{key:"poll",value:function(){if(this.video){var e=this.shouldBeMakingProgress(),t=this.video.currentTime,r=Date.now()/1e3;(this.value!==t||this.wasMakingProgress!==e)&&(this.lastUpdateSeconds=r,this.value=t,this.wasMakingProgress=e,this.didJump=!1,this.didTryToEscape=!1,this.didTryToEscapeSeekingStucking=!1);var n=r-this.lastUpdateSeconds;return(Ua?this.handleTVPoll:this.handlePoll)(n,e)}}},{key:"shouldBeMakingProgress",value:function(){return!!this.video&&!this.video.paused&&0!==this.video.playbackRate&&0!==this.video.buffered.length&&this.hasContentFor(this.video.currentTime)}},{key:"tryToEscapeTVStucking",value:function(){var e=this;if(!this.video)return!1;if(Ui)return!(this.video.readyState<this.video.HAVE_ENOUGH_DATA)&&(this.didTryToEscape=!0,setTimeout((function(){var t;null!==(t=e.video)&&void 0!==t&&t.paused||e.makePP()}),2e3),!0);if(Bi){var t=wr((0,na.w)(this.video),this.video.currentTime);if(!t||t<7.5)return!1;if(this.video.readyState===this.video.HAVE_METADATA)return this.video.currentTime+=this.skipOffset,this.value=this.video.currentTime,this.didTryToEscape=!0,!0}return!1}},{key:"tryToEscapeSeekingStucking",value:function(e){return!(!this.video||this.didTryToEscapeSeekingStucking||!this.video.paused||e<this.extraThresholdSeconds)&&this.video.readyState===this.video.HAVE_METADATA&&(this.video.currentTime+=this.skipOffset,this.value=this.video.currentTime,this.didTryToEscapeSeekingStucking=!0,!0)}},{key:"hasContentFor",value:function(e){if(!this.video)return!1;var t,r=_r((0,na.w)(this.video));try{for(r.s();!(t=r.n()).done;){var n=t.value,i=n.start,o=n.end;if(!(e<i-.1)&&!(e>o-.5))return!0}}catch(a){r.e(a)}finally{r.f()}return!1}}])&&Sr(t.prototype,r),n&&Sr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Va=r(80413),Ha=r(69899),Ya=r(4364),qa=r(2615),Wa=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),xr(this,"media",null),xr(this,"wasNativeProgressEmited",{default:!1,onPause:!1}),xr(this,"interval",null),xr(this,"lastBufferedEnd",0),xr(this,"onPoll",(function(){if(r.media){var e=r.media.buffered.length;if(e){var t=r.media.buffered.end(e-1);r.lastBufferedEnd<t&&r.emitProgress(),r.lastBufferedEnd=t}else r.lastBufferedEnd=0}})),xr(this,"onProgress",(function(e){r.media&&("detail"in e&&e.detail.synthetic||(r.media.paused?r.wasNativeProgressEmited.onPause=!0:r.wasNativeProgressEmited.default=!0,r.shouldStopPolling()&&r.release()))})),this.media=t,t.addEventListener("progress",this.onProgress),this.interval=setInterval(this.onPoll,250)}var t,r,n;return t=e,(r=[{key:"shouldStopPolling",value:function(){return(0,qa.z)(this.wasNativeProgressEmited).every(Boolean)}},{key:"release",value:function(){var e;null===(e=this.media)||void 0===e||e.removeEventListener("progress",this.onProgress),this.interval&&(clearInterval(this.interval),this.interval=null),this.media=null}},{key:"emitProgress",value:function(){var e,t;this.shouldStopPolling()||(this.wasNativeProgressEmited.default||null!==(e=this.media)&&void 0!==e&&e.paused)&&(this.wasNativeProgressEmited.onPause||null===(t=this.media)||void 0===t||!t.paused)||this.dispatchSyntheticProgress()}},{key:"dispatchSyntheticProgress",value:function(){var e;null===(e=this.media)||void 0===e||e.dispatchEvent(new CustomEvent("progress",{detail:{synthetic:!0}}))}}])&&Pr(t.prototype,r),n&&Pr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),za=r(47550),$a=r(85636),Ka=function(){function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxAttempts=r,Ar(this,"remainingAttempts",0),Ar(this,"originTime",0),Ar(this,"targetTime",0),Ar(this,"timer",new Ta((function(){n.onTick()}))),Ar(this,"media",void 0),this.media=t}var t,r,n;return t=e,(r=[{key:"release",value:function(){this.timer&&(this.timer.stop(),this.timer=null),this.media=null}},{key:"moveTo",value:function(e){this.media&&this.timer&&(this.originTime=this.media.currentTime,this.targetTime=e,this.remainingAttempts=this.maxAttempts,this.media.currentTime=e,this.timer.tickEvery(.1))}},{key:"onTick",value:function(){this.media&&this.timer&&(this.remainingAttempts<=0?this.timer.stop():this.media.currentTime===this.originTime?(this.media.currentTime=this.targetTime,this.remainingAttempts--):this.timer.stop())}}])&&jr(t.prototype,r),n&&jr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Za=r(73480),Xa=r(90153),Ja=r(51911),Qa=["play","playing","pause","error","waiting","stalled","suspend","ended","loadstart","abort","loadedmetadata","loadeddata","canplay","canplaythrough","durationchange","seeking","seeked","encrypted","ratechange"],eu=["error","waiting","seeking","seeked","canplay","encrypted"],tu=function(){function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.media=t,this.getDump=r,Ir(this,"history",new Ja.d(Xa.K)),Ir(this,"handleEvent",(function(e){var t=e.type,r={event:t,timestamp:Date.now()};eu.includes(t)&&(r.dump=n.getDump()),n.history.push(r)})),this.subscribeToEvents()}var t,r,n;return t=e,(r=[{key:"subscribeToEvents",value:function(){var e=this;Qa.forEach((function(t){e.media.addEventListener(t,e.handleEvent)}))}},{key:"release",value:function(){var e=this;Qa.forEach((function(t){e.media.removeEventListener(t,e.handleEvent)}))}},{key:"getEventHistory",value:function(){return this.history.toArray()}},{key:"pushCustomEvent",value:function(e){this.history.push(e)}}])&&Lr(t.prototype,r),n&&Lr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),ru=r(88948),nu=r(88948),iu=Xr(HTMLVideoElement),ou=function(e){function t(){var e;on(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return pn(hn(e=f.call.apply(f,[this].concat(n))),"airplayController",void 0),pn(hn(e),"videoTrackList",void 0),pn(hn(e),"unsubscribeTextTracksChange",void 0),pn(hn(e),"unsubscribeTextTracksAdd",void 0),pn(hn(e),"isLowLatency",!1),pn(hn(e),"serverTimeInfo",void 0),pn(hn(e),"streamEndTime",void 0),e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sn(e,t)}(t,e);var r,n,i,o,a,u,c,s,l,f=ln(t);return r=t,n=[{key:"logAirplayStateChange",value:function(e){this.yaspDispatchEvent("yasp-event",{name:"AirplayStateChange",data:{enabled:e}})}},{key:"videoTracks",get:function(){var e;return this.yaspSrc?this.videoTrackList:null!==(e=un(dn(t.prototype),"videoTracks",this))&&void 0!==e?e:this.videoTrackList}},{key:"canPlayType",value:function(e){return t.isSupported()&&"application/dash+xml"===e?un(dn(t.prototype),"canPlayType",this).call(this,'video/mp4; codecs="avc1.42E01E"'):un(dn(t.prototype),"canPlayType",this).call(this,e)}},{key:"airplaySrc",get:function(){var e;return null===(e=this.airplayController)||void 0===e?void 0:e.airplaySrc},set:function(e){this.airplayController&&(this.airplayController.airplaySrc=e)}},{key:"addEventListener",value:function(e,r,n){un(dn(t.prototype),"addEventListener",this).call(this,e,r,n)}},{key:"removeEventListener",value:function(e,r,n){un(dn(t.prototype),"removeEventListener",this).call(this,e,r,n)}},{key:"yaspRequestDebugInfo",value:(l=nn(Qr().mark((function e(){var r,n,i,o;return Qr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.videoTracks,n=this.audioTracks,i=this.textTracks,o={videoElement:{audioTracks:(0,fo.w)(n),videoTracks:(0,fo.w)(r),textTracks:(0,fo.w)(i)}},e.t0=tn,e.t1=tn({},o),e.next=6,un(dn(t.prototype),"yaspRequestDebugInfo",this).call(this);case 6:return e.t2=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 8:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"detach",value:(s=nn(Qr().mark((function e(){var r,n;return Qr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,un(dn(t.prototype),"detach",this).call(this);case 2:null===(r=this.unsubscribeTextTracksChange)||void 0===r||r.call(this),this.unsubscribeTextTracksChange=void 0,null===(n=this.unsubscribeTextTracksAdd)||void 0===n||n.call(this),this.unsubscribeTextTracksAdd=void 0;case 6:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"yaspPreloadSrc",value:(c=nn(Qr().mark((function e(r,n){return Qr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.preloadSrc(r,n));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return c.apply(this,arguments)})},{key:"yaspReleaseSrc",value:(u=nn(Qr().mark((function e(r){return Qr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.releaseSrc(r));case 1:case"end":return e.stop()}}),e)}))),function(e){return u.apply(this,arguments)})},{key:"yaspSetVideoElementSizes",value:function(e){t.setVideoElementSizes(this.src,e)}},{key:"yaspDispatchEvent",value:function(e,r,n){var i=new CustomEvent(e,tn({detail:r},n));un(dn(t.prototype),"dispatchEvent",this).call(this,i)}},{key:"initVideoTrackList",value:function(){var e=this;if(void 0===this.videoTrackList){var r=new ao;r.addEventListener("change",(function(){var n=r[r.selectedIndex].id;t.configureSource(e.src,{tracks:{videoTrackId:n}});var i=new Event("change");(0,uo.Y)((function(){un(dn(t.prototype),"videoTracks",e).dispatchEvent(i)}))})),this.videoTrackList=r}}},{key:"initTextTrackList",value:function(){var e=this;Ui&&(this.unsubscribeTextTracksAdd=(0,co.O)(this.textTracks,"addtrack",(function(t){var r,n=t.track;"empty-yasp-text-track"===n.id&&"showing"===n.mode&&(n.mode="disabled",null===(r=e.findEmptyTextTrack())||void 0===r||r.remove())}))),this.unsubscribeTextTracksChange=(0,co.O)(this.textTracks,"change",(function(r){for(var n=r.target,i={source:e.yaspSrc,track:null},o=n,a=0;a<o.length;a++){var u,c=o[a];"empty-yasp-text-track"!==c.id?"disabled"!==c.mode&&(t.removeCues(c),i.track={id:c.id,label:c.label,language:c.language,kind:c.kind}):null===(u=e.findEmptyTextTrack())||void 0===u||u.remove()}t.configureSource(e.src,{tracks:{textTrack:i.track}})}))}},{key:"findEmptyTextTrack",value:function(){return this.querySelector('track[id="'.concat("empty-yasp-text-track",'"]'))}},{key:"registerVideoRpcHandlers",value:function(){var e=this;this.registerRpcHandlerForInstance("changeVideoTracks",(function(t){var r=t.added;return t.removed.forEach((function(t){var r,n,i=null===(r=e.videoTrackList)||void 0===r?void 0:r.getTrackById(t);i&&(null===(n=e.videoTrackList)||void 0===n||n.removeTrack(i))})),r.forEach((function(t){var r,n,i,o=t.source,a=t.track,u=null===(r=e.videoTrackList)||void 0===r?void 0:r.getTrackById(a.id);Nr(e.yaspSrc,o)&&u||null===(n=e.videoTrackList)||void 0===n||n.addTrack(new oo({selected:a.selected,width:a.width,height:a.height,bitrate:a.bitrate,label:a.label,language:null!==(i=a.language)&&void 0!==i?i:void 0,frameRate:a.frameRate,id:a.id,kind:a.kind}))})),{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("addTextTrack",(function(t){var r=e.getElementsByTagName("track"),n=(0,fo.w)(r).some((function(e){return e.id===t.track.id}));if(Nr(e.yaspSrc,t.source)&&n)return{done:!0,value:void 0};if(Ui&&!e.findEmptyTextTrack()){var i=document.createElement("track");i.setAttribute("kind",t.track.kind),i.setAttribute("default","true"),i.setAttribute("id","empty-yasp-text-track"),i.src=so,e.appendChild(i)}var o=document.createElement("track");return o.setAttribute("kind",t.track.kind),o.setAttribute("label",t.track.label),o.setAttribute("srclang",t.track.language),o.setAttribute("id",t.track.id),o.src=so,e.appendChild(o),{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("cuesAdded",(function(t){t.source;for(var r,n=t.cues,i=t.label,o=0;o<e.textTracks.length;o++)e.textTracks[o].label===i&&(r=e.textTracks[o]);return r?(n.forEach((function e(t){var n=new VTTCue(t.startTime,t.endTime,t.payload);r.addCue(n),(t.nestedCues||[]).forEach(e)})),{done:!0,value:void 0}):{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("changeSelectedVideoTrack",(function(t){if(!e.videoTrackList)return{done:!0,value:void 0};var r=e.videoTrackList.getTrackById(t.trackId);return r?(r.selected=!0,{done:!0,value:void 0}):{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("changeVideoType",(function(t){return e.yaspDispatchEvent("yasp-videoTypeChange",t.videoType,{cancelable:!0}),{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("changeIsLowLatency",(function(t){return e.isLowLatency=t.isLowLatency,{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("updateTargetLatency",(function(t){return e.yaspDispatchEvent("yasp-updateTargetLatency",t.latency,{cancelable:!0}),{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("updateServerTime",(function(t){return e.serverTimeInfo?(e.serverTimeInfo.time=t.time,e.serverTimeInfo.getTime=ye()):e.serverTimeInfo={time:t.time,getTime:ye()},{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("updateStreamEndTime",(function(t){return e.streamEndTime=t.time,{done:!0,value:void 0}}))}},{key:"initVideoStateNotifier",value:function(){var e=this;this.mediaStateNotifier=new ca(this,(function(r,n){null!==e.yasp&&t.worker.postMessage({jsonrpc:"2.0",method:r,sourceKey:(0,Eo.Hi)(e.yaspSrc),params:n})})),this.mediaStateNotifier.enable()}},{key:"getServerTime",value:function(){if(this.serverTimeInfo&&this.serverTimeInfo.time)return(this.serverTimeInfo.time+this.serverTimeInfo.getTime())/1e3}},{key:"getStreamEndTime",value:function(){return this.streamEndTime?this.streamEndTime/1e3:null}},{key:"isLowLatencyLive",value:function(){return this.isLowLatency}},{key:"clearTextTrackList",value:function(){for(var e=0;e<this.textTracks.length;e++)this.textTracks[e].mode="disabled";for(var t=this.getElementsByTagName("track");t.length;)t[0].remove()}},{key:"clearTrackLists",value:function(){un(dn(t.prototype),"clearTrackLists",this).call(this),W(this.videoTrackList),this.clearTextTrackList()}},{key:"initAirplayController",value:function(){var e=this;this.airplayController||(this.airplayController=new Ci(this,(function(t){return e.logAirplayStateChange(t)})))}},{key:"setSrc",value:function(e){if(un(dn(t.prototype),"setSrc",this).call(this,e),_o(e)){if(this.airplayController&&this.airplayController.airplayEnabled)return void(this.airplayController.detachedSrc=e);t.setDevicePixelRatioForSource(e)}}},{key:"restore",value:function(){un(dn(t.prototype),"restore",this).call(this),this.streamEndTime=void 0,this.serverTimeInfo=void 0,this.isLowLatency=!1}}],i=[{key:"setDevicePixelRatioForSource",value:function(e){t.worker.request({method:"setDevicePixelRatio",params:{source:e,devicePixelRatio:Mi(window)}}).catch(Fi.Z),Zi(window).then((function(r){return t.worker.request({method:"setDevicePixelRatio",params:{source:e,devicePixelRatio:r}})})).catch(Fi.Z)}},{key:"attach",value:function(e,r){if(t.isYaspVideoElement(e))return e;var n=iu.attachElement(t,e,r);return n.registerVideoRpcHandlers(),n.initVideoStateNotifier(),n.initVideoTrackList(),n.initTextTrackList(),n.initAirplayController(),n}},{key:"isYaspVideoElement",value:function(e){return!0===e.yasp}},{key:"preloadSrc",value:(a=nn(Qr().mark((function e(r,n){var i,o,a;return Qr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=n.yaspSourceConfig)?t.configureSource(r,o):t.shouldSaveBandwidth&&t.worker.sendEvent({method:"configureSource",params:{source:r,config:{defaultBandwidthEstimate:t.getDefaultBandwidthEstimate()}}}),t.setDevicePixelRatioForSource(r),e.next=5,t.worker.request({method:"load",params:{source:r,storePath:null===o||void 0===o||null===(i=o.offlineParams)||void 0===i?void 0:i.storePath}});case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)}))),function(e,t){return a.apply(this,arguments)})},{key:"releaseSrc",value:(o=nn(Qr().mark((function e(r){return Qr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.worker.request({method:"destroy",params:{source:r}}).catch(vo.warn));case 1:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)})},{key:"setVideoElementSizes",value:function(e,r){_o(e)&&t.worker.sendEvent({method:"setVideoElementSizes",params:{source:e,videoSizes:r}})}},{key:"getStats",value:function(){return tn(tn({},iu.getStats()),{},{maxCapAllowedVideoTrack:t.maxCapAllowedVideoTrack})}},{key:"worker",get:function(){var e=iu.worker;return e.registerStaticRpcHandler("updateMaxCapAllowedVideoTrack",(function(e){return t.maxCapAllowedVideoTrack=e.maxCapAllowedVideoTrack,{done:!0,value:void 0}})),e}},{key:"removeCues",value:function(e){if(e.cues)for(var t=e.cues,r=t.length-1;r>=0;r--){var n=t[r];n&&e.removeCue(n)}}}],n&&an(r.prototype,n),i&&an(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(iu);pn(ou,"maxCapAllowedVideoTrack",void 0);var au,uu=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o.call(this,e,r)}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mn(e,t)}(t,e);var r,n,i,o=bn(t);return r=t,n&&vn(r.prototype,n),i&&vn(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r}(ua),cu=r(88948),su=r(88891),lu=Xr(HTMLAudioElement),fu=function(e){function t(){return Rn(this,t),u.apply(this,arguments)}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&An(e,t)}(t,e);var r,n,i,o,a,u=Ln(t);return r=t,n=[{key:"isSupportedSrc",value:function(e){return xn(Nn(t.prototype),"isSupportedSrc",this).call(this,e)||this.isSupportedAudioSrc(e)}},{key:"isSupportedAudioSrc",value:function(e){var t,r,n=new su(e,"https://domain.com"),i=Boolean(n.searchParams.get("codec")),o=(r=e,"mp4"===(0,wo.lm)(r.toLocaleLowerCase())||"mp4"===(null===(t=n.searchParams.get("container"))||void 0===t?void 0:t.toLowerCase()));return i&&o}},{key:"initAudioStateNotifier",value:function(){var e=this;this.mediaStateNotifier=new uu(this,(function(r,n){null!==e.yasp&&t.worker.postMessage({jsonrpc:"2.0",method:r,sourceKey:(0,Eo.Hi)(e.yaspSrc),params:n})})),this.mediaStateNotifier.enable()}},{key:"yaspRequestDebugInfo",value:(o=En().mark((function e(){var r,n;return En().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.audioTracks,n={audioElement:{audioTracks:(0,fo.w)(r)}},e.t0=Sn,e.t1=Sn({},n),e.next=6,xn(Nn(t.prototype),"yaspRequestDebugInfo",this).call(this);case 6:return e.t2=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 8:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new cu((function(r,n){function i(e){Tn(u,r,n,i,a,"next",e)}function a(e){Tn(u,r,n,i,a,"throw",e)}var u=o.apply(e,t);i(void 0)}))},function(){return a.apply(this,arguments)})}],i=[{key:"attach",value:function(e,r){if(t.isYaspAudioElement(e))return n=new Error("Unexpected YaspAudioElement.attach(yaspAudioElement) call"),setTimeout((function(){throw n}),0),e;var n,i=lu.attachElement(t,e,r);return i.initAudioStateNotifier(),i}},{key:"isYaspAudioElement",value:function(e){return!0===e.yasp}}],n&&Pn(r.prototype,n),i&&Pn(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(lu);!function(e){e.fairplay="fairplay",e.playready="playready",e.widevine="widevine",e.clearkey="clearkey",e.none="none"}(au||(au={}));var hu,du,pu=r(77922),yu=[{initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4;codecs="mp4a.40.2"'}],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]}],vu=r(42918),mu=r(19066),bu={error:"",isFatal:!1,helpLink:""},gu=r(27817),wu=r(3525);!function(e){e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.BUFFER_STALLED_ERROR="bufferStalledError",e.FRAG_PARSING_ERROR="fragParsingError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.PIPELINE_ERROR_DECODE="PIPELINE_ERROR_DECODE",e.DECODER_ERROR_NOT_SUPPORTED="DECODER_ERROR_NOT_SUPPORTED",e.BUFFER_APPEND_ERROR="bufferAppendError",e.MEDIA_ELEMENT_ERROR_FORMAT_ERROR="MEDIA_ELEMENT_ERROR: Format error",e.REMUX_ALLOC_ERROR="remuxAllocError",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.DEMUXER_ERROR_COULD_NOT_OPEN="DEMUXER_ERROR_COULD_NOT_OPEN",e.NS_ERROR_DOM_INVALID_STATE_ERR="NS_ERROR_DOM_INVALID_STATE_ERR",e.CHUNK_DEMUXER_ERROR_APPEND_FAILED="CHUNK_DEMUXER_ERROR_APPEND_FAILED",e.FAILED_TO_INIT_DECODER="Failed to init decoder",e.PIPELINE_ERROR_INITIALIZATION_FAILED="PIPELINE_ERROR_INITIALIZATION_FAILED",e.NS_ERROR_FAILURE="NS_ERROR_FAILURE",e.REQUEST_FAILED="2147500036: Request failed",e.PIPELINE_ERROR_EXTERNAL_RENDERER_FAILED="PIPELINE_ERROR_EXTERNAL_RENDERER_FAILED",e.PIPELINE_ERROR_COULD_NOT_RENDER="PIPELINE_ERROR_COULD_NOT_RENDER",e.MEDIA_ELEMENT_ERROR_EMPTY_SRC_ATTRIBUTE="MEDIA_ELEMENT_ERROR: Empty src attribute",e.NS_ERROR_DOM_MEDIA_METADATA_ERR="NS_ERROR_DOM_MEDIA_METADATA_ERR",e.NS_ERROR_DOM_MEDIA_FATAL_ERR="NS_ERROR_DOM_MEDIA_FATAL_ERR",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.FRAG_LOAD_ERROR="fragLoadError",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.LEVEL_LOAD_ERROR="levelLoadError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.FRAG_LOAD_TIME_OUT="fragLoadTimeOut",e.MANIFEST_LOAD_TIME_OUT="manifestLoadTimeOut",e.LEVEL_LOAD_TIME_OUT="levelLoadTimeOut",e.AUDIO_TRACK_LOAD_TIME_OUT="audioTrackLoadTimeOut",e.INTERNAL_EXCEPTION="internalException",e.ON_PLAYER_INIT_ERROR_INTERNAL="ON_PLAYER_INIT_ERROR_INTERNAL",e.UNABLE_TO_LOAD_PLAYER_IFRAME="UNABLE_TO_LOAD_PLAYER_IFRAME",e.ON_PLAYER_INIT_ERROR="ON_PLAYER_INIT_ERROR",e.LOADER_INIT_ERROR="LoaderInitError",e.UNABLE_TO_LOAD_PLAYER_INTERNAL_SCRIPT="UNABLE_TO_LOAD_PLAYER_INTERNAL_SCRIPT",e.FAILED_TO_DOWNLOAD_DEBUG_INFO="FAILED_TO_DOWNLOAD_DEBUG_INFO",e.PLAYER_CONTAINER_NOT_FOUND="PLAYER_CONTAINER_NOT_FOUND",e.KEY_LOAD_ERROR="keyLoadError",e.FEATURE_HANDLER_ERROR="FEATURE_HANDLER_ERROR",e.INVALID_CONFIG_ELEMENT_IN_CREATE_PLAYER="InvalidConfigElementInCreatePlayer",e.INVALID_CONFIG_LANG_IN_CREATE_PLAYER="InvalidConfigLangInCreatePlayer",e.INVALID_CONFIG_IN_CREATE_PLAYER="InvalidConfigInCreatePlayer",e.INVALID_CONFIG_IN_SET_SOURCE="InvalidConfigInSetSource",e.INVALID_CONFIG_IN_SOURCE_UPDATE="InvalidConfigInSourceUpdate",e.INVALID_LOG_URL="InvalidLogUrl",e.IFRAME_DOES_NOT_ALLOW_DRM="IframeDoesNotAllowDrm",e.DRM_IS_NOT_ALLOWED="DrmIsNotAllowed",e.EXTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR="EXTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR",e.INTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR="INTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR",e.LOAD_SKIN_ERROR="LOAD_SKIN_ERROR",e.INSERT_INTO_WITH_SECURE_FRAME="INSERT_INTO_WITH_SECURE_FRAME",e.PLAY_AD_VIEWERS_WITH_SECURE_FRAME="PLAY_AD_VIEWERS_WITH_SECURE_FRAME",e.ELEMENT_NOT_IN_DOM="ELEMENT_NOT_IN_DOM",e.ERROR_SCREEN_LOAD_ERROR="ERROR_SCREEN_LOAD_ERROR",e.REQUEST_SOURCE_ERROR="REQUEST_SOURCE_ERROR",e.SCREEN_WAKE_LOCK_ERROR="SCREEN_WAKE_LOCK_ERROR",e.YASP_UNEXPECTED_METHOD_CALL="YASP_UNEXPECTED_METHOD_CALL"}(hu||(hu={})),function(e){e.DEFAULT_ERROR="DEFAULT_ERROR",e.BROADCAST_AD_BLOCK_INIT_ERROR="BROADCAST_AD_BLOCK_INIT_ERROR",e.AD_TYPE_IS_NOT_RECOGNIZED="AD_TYPE_IS_NOT_RECOGNIZED",e.INVALID_METADATA="INVALID_METADATA",e.INVALID_STREAM_URL="INVALID_STREAM_URL",e.UNSUPPORTED_MEDIA_TYPE="UNSUPPORTED_MEDIA_TYPE",e.SCRIPT_INIT_ERROR="SCRIPT_INIT_ERROR",e.MPD_WIDEVINE_CERT_LOAD_ERROR="MPD_WIDEVINE_CERT_LOAD_ERROR",e.NATIVE_HLS_NOT_SUPPORTED_ERROR="NATIVE_HLS_NOT_SUPPORTED_ERROR",e.HLS_JS_NOT_SUPPORTED_ERROR="HLS_JS_NOT_SUPPORTED_ERROR",e.ON_TICK_ERROR="ON_TICK_ERROR",e.FAIRPLAY_NOT_SUPPORTED="FAIRPLAY_NOT_SUPPORTED",e.FAIRPLAY_CERT_LOAD_ERROR="FAIRPLAY_CERT_LOAD_ERROR",e.FAIRPLAY_CREATE_MEDIA_KEYS_ERROR="FAIRPLAY_CREATE_MEDIA_KEYS_ERROR",e.FAIRPLAY_CREATE_KEY_SESSION_ERROR="FAIRPLAY_CREATE_KEY_SESSION_ERROR",e.FAIRPLAY_SPC_LOAD_ERROR="FAIRPLAY_SPC_LOAD_ERROR",e.FAIRPLAY_CREATE_KEY_ERROR="FAIRPLAY_CREATE_KEY_ERROR",e.FAIRPLAY_INVALID_CONTENT_ID="FAIRPLAY_INVALID_CONTENT_ID",e.DRM_PROXY_ERROR="DRM_PROXY_ERROR",e.DRM_PROXY_ERROR_SIGNATURE_EXPIRED="DRM_PROXY_ERROR_SIGNATURE_EXPIRED",e.DRM_PROXY_ERROR_NEED_COOKIE="DRM_PROXY_ERROR_NEED_COOKIE",e.DRM_PROXY_ERROR_NEED_TEAM_LOGIN="DRM_PROXY_ERROR_NEED_TEAM_LOGIN",e.DRM_PROXY_ERROR_NEED_VIEW_PERMISSION="DRM_PROXY_ERROR_NEED_VIEW_PERMISSION",e.DRM_INIT_ERROR="DRM_INIT_ERROR",e.DRM_NO_INIT_DATA="DRM_NO_INIT_DATA",e.DRM_CERT_LOAD_ERROR="DRM_CERT_LOAD_ERROR",e.DRM_NO_SUPPORTED_KEY_SYSTEM="DRM_NO_SUPPORTED_KEY_SYSTEM",e.DRM_FAILED_TO_CREATE_CDM="DRM_FAILED_TO_CREATE_CDM",e.DRM_FAILED_TO_SET_MEDIA_KEYS="DRM_FAILED_TO_SET_MEDIA_KEYS",e.DRM_NO_LICENSE_SERVER="DRM_NO_LICENSE_SERVER",e.DRM_FAILED_TO_CREATE_SESSION="DRM_FAILED_TO_CREATE_SESSION",e.DRM_SESSION_ERROR="DRM_SESSION_ERROR",e.DRM_FAILED_TO_GENERATE_REQUEST="DRM_FAILED_TO_GENERATE_REQUEST",e.DRM_UNKNOWN_ERROR="DRM_UNKNOWN_ERROR",e.NO_HLS_JS_INSTANCE="NO_HLS_JS_INSTANCE",e.AD_IS_ALREADY_PLAYING="AD_IS_ALREADY_PLAYING",e.META_INFO_REQUEST_FAILED="META_INFO_REQUEST_FAILED",e.MULTIROLL_INIT_ERROR="MULTIROLL_INIT_ERROR",e.REACT_COMPONENT_DID_CATCH_ERROR_INFO="REACT_COMPONENT_DID_CATCH_ERROR_INFO",e.PLAY_AD_VIEWERS_ERROR="PLAY_AD_VIEWERS_ERROR",e.SAGA_ERROR="SAGA_ERROR",e.STRM_ABD_INVALID_RESPONSE="STRM_ABD_INVALID_RESPONSE",e.REPRESENTATION_CHANGE="REPRESENTATION_CHANGE",e.RECOVER_TASK_ERROR="RECOVER_TASK_ERROR",e.PRELOAD_SOURCE_FAILED="PRELOAD_SOURCE_FAILED",e.REGIONAL_LIMITATION_MANIFEST="REGIONAL_LIMITATION_MANIFEST",e.REGIONAL_LIMITATION_LEVEL="REGIONAL_LIMITATION_LEVEL",e.REGIONAL_LIMITATION_SEGMENT="REGIONAL_LIMITATION_SEGMENT",e.SIGNATURE_EXPIRED_MANIFEST="SIGNATURE_EXPIRED_MANIFEST",e.SIGNATURE_EXPIRED_LEVEL="SIGNATURE_EXPIRED_LEVEL",e.SIGNATURE_EXPIRED_SEGMENT="SIGNATURE_EXPIRED_SEGMENT",e.BANNED_MANIFEST="BANNED_MANIFEST",e.BANNED_LEVEL="BANNED_LEVEL",e.BANNED_SEGMENT="BANNED_SEGMENT",e.MANIFEST_NOT_FOUND="MANIFEST_NOT_FOUND",e.NO_STREAMS="NO_STREAMS",e.NO_CODECS="NO_CODECS",e.NO_MSE="NO_MSE",e.NO_DRM_CONFIG="NO_DRM_CONFIG",e.NO_DRM="NO_DRM",e.NO_PLAYABLE_STREAMS="NO_PLAYABLE_STREAMS",e.MEDIA_ERR_CUSTOM="MEDIA_ERR_CUSTOM",e.MEDIA_ERR_ABORTED="MEDIA_ERR_ABORTED",e.MEDIA_ERR_NETWORK="MEDIA_ERR_NETWORK",e.MEDIA_ERR_DECODE="MEDIA_ERR_DECODE",e.MEDIA_ERR_SRC_NOT_SUPPORTED="MEDIA_ERR_SRC_NOT_SUPPORTED",e.MEDIA_ERR_ENCRYPTED="MEDIA_ERR_ENCRYPTED"}(du||(du={}));var _u,Eu,Ou=r(99117),Su=r(88948),ku=r(88891),Tu=window.Map||function(){},Ru=window.Set||function(){},Pu=function(e,t){return(Pu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},xu=function(){return(xu=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ju=function(){function e(e){this.promise=e}return e.prototype.then=function(t){return new e(this.promise.then(t))},e.all=function(t){return new e(Su.all(t.map((function(t){return t instanceof e?t.promise:t}))))},e}();(Eu=_u=_u||{}).assertNever=function(e){throw new Error},Eu.arrayToEnum=function(e){var t,r,n={};try{for(var i=qn(e),o=i.next();!o.done;o=i.next()){var a=o.value;n[a]=a}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return n},Eu.getValidEnumValues=function(e){var t,r,n=Eu.objectKeys(e).filter((function(t){return"number"!=typeof e[e[t]]})),i={};try{for(var o=qn(n),a=o.next();!a.done;a=o.next()){var u=a.value;i[u]=e[u]}}catch(r){t={error:r}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return Eu.objectValues(i)},Eu.objectValues=function(e){return Eu.objectKeys(e).map((function(t){return e[t]}))},Eu.objectKeys="function"==typeof Object.keys?function(e){return Object.keys(e)}:function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.push(t);return r},Eu.find=function(e,t){var r,n;try{for(var i=qn(e),o=i.next();!o.done;o=i.next()){var a=o.value;if(t(a))return a}}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},Eu.isInteger="function"==typeof Number.isInteger?function(e){return Number.isInteger(e)}:function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};var Au,Lu,Iu=_u.arrayToEnum(["invalid_type","custom","invalid_union","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types"]),Nu=function(e){function t(t){var r=this.constructor,n=e.call(this)||this;return n.issues=[],n.format=function(){var e={_errors:[]};return function t(r){var n,i;try{for(var o=qn(r.issues),a=o.next();!a.done;a=o.next()){var u=a.value;if("invalid_union"===u.code)u.unionErrors.map(t);else if("invalid_return_type"===u.code)t(u.returnTypeError);else if("invalid_arguments"===u.code)t(u.argumentsError);else if(0===u.path.length)e._errors.push(u.message);else for(var c=e,s=0;s<u.path.length;){var l,f=u.path[s];s===u.path.length-1?(c[f]=c[f]||{_errors:[]},c[f]._errors.push(u.message)):"string"==typeof f?c[f]=c[f]||{_errors:[]}:"number"==typeof f&&((l=[])._errors=[],c[f]=c[f]||l),c=c[f],s++}}}catch(r){n={error:r}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}}(n),e},n.addIssue=function(e){n.issues=zn(zn([],Wn(n.issues)),[e])},n.addIssues=function(e){void 0===e&&(e=[]),n.issues=zn(zn([],Wn(n.issues)),Wn(e))},n.flatten=function(e){var t,r;void 0===e&&(e=function(e){return e.message});var i={},o=[];try{for(var a=qn(n.issues),u=a.next();!u.done;u=a.next()){var c=u.value;0<c.path.length?(i[c.path[0]]=i[c.path[0]]||[],i[c.path[0]].push(e(c))):o.push(e(c))}}catch(e){t={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return{formErrors:o,fieldErrors:i}},r=r.prototype,Object.setPrototypeOf?Object.setPrototypeOf(n,r):n.__proto__=r,n.name="ZodError",n.issues=t,n}return Vn(t,e),Object.defineProperty(t.prototype,"errors",{get:function(){return this.issues},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this.message},Object.defineProperty(t.prototype,"message",{get:function(){return JSON.stringify(this.issues,null,2)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.issues.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"formErrors",{get:function(){return this.flatten()},enumerable:!1,configurable:!0}),t.create=function(e){return new t(e)},t}(Error),Du=function(e,t){var r;switch(e.code){case Iu.invalid_type:r="undefined"===e.received?"Required":"Expected "+e.expected+", received "+e.received;break;case Iu.unrecognized_keys:r="Unrecognized key(s) in object: "+e.keys.map((function(e){return"'"+e+"'"})).join(", ");break;case Iu.invalid_union:r="Invalid input";break;case Iu.invalid_enum_value:r="Invalid enum value. Expected "+e.options.map((function(e){return"string"==typeof e?"'"+e+"'":e})).join(" | ")+", received "+("string"==typeof t.data?"'"+t.data+"'":t.data);break;case Iu.invalid_arguments:r="Invalid function arguments";break;case Iu.invalid_return_type:r="Invalid function return type";break;case Iu.invalid_date:r="Invalid date";break;case Iu.invalid_string:r="regex"!==e.validation?"Invalid "+e.validation:"Invalid";break;case Iu.too_small:r="array"===e.type?"Should have "+(e.inclusive?"at least":"more than")+" "+e.minimum+" items":"string"===e.type?"Should be "+(e.inclusive?"at least":"over")+" "+e.minimum+" characters":"number"===e.type?"Value should be greater than "+(e.inclusive?"or equal to ":"")+e.minimum:"Invalid input";break;case Iu.too_big:r="array"===e.type?"Should have "+(e.inclusive?"at most":"less than")+" "+e.maximum+" items":"string"===e.type?"Should be "+(e.inclusive?"at most":"under")+" "+e.maximum+" characters long":"number"===e.type?"Value should be less than "+(e.inclusive?"or equal to ":"")+e.maximum:"Invalid input";break;case Iu.custom:r="Invalid input";break;case Iu.invalid_intersection_types:r="Intersections only support objects";break;default:r=t.defaultError,_u.assertNever(e)}return{message:r}},Cu=Du,Mu=_u.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Fu=function(e){switch(Gn(e)){case"undefined":return Mu.undefined;case"string":return Mu.string;case"number":return isNaN(e)?Mu.nan:Mu.number;case"boolean":return Mu.boolean;case"function":return Mu.function;case"bigint":return Mu.bigint;case"object":return Array.isArray(e)?Mu.array:null===e?Mu.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?Mu.promise:e instanceof Tu?Mu.map:e instanceof Ru?Mu.set:e instanceof Date?Mu.date:Mu.object;default:return Mu.unknown}},Bu=function(e,t,r,n){var i=zn(zn([],Wn(t)),Wn(n.path||[])),o=xu(xu({},n),{path:i});t=Du(o,{data:e,defaultError:"Invalid input"});return xu(xu({},n),{path:i,message:n.message||r(o,{data:e,defaultError:t.message}).message})},Uu=function(e){if(null===e)return[];for(var t=new Array(e.count);null!==e;)t[e.count-1]=e.component,e=e.parent;return t},Gu=function(e){for(var t=null,r=0;r<e.length;r++)t={parent:t,component:e[r],count:r+1};return t},Vu=function(){function e(e,t,r){this.path=e,this.issues=t,this.params=r}return e.prototype.stepInto=function(t){return new e(null===this.path?{parent:null,count:1,component:t}:{parent:this.path,count:this.path.count+1,component:t},this.issues,this.params)},e.prototype.addIssue=function(e,t){t=Bu(e,Uu(this.path),this.params.errorMap,t),this.issues.push(t)},e}(),Hu=Object.freeze({valid:!1}),Yu=function(e){return{valid:!0,value:e}},qu=function(e){return new ju(e)},Wu=function(e){return!1===e.valid},zu=function(e){return!0===e.valid},$u=function(e){return e instanceof ju};(Lu=Au=Au||{}).errToObj=function(e){return"string"==typeof e?{message:e}:e||{}},Lu.toString=function(e){return"string"==typeof e?e:null==e?void 0:e.message};var Ku,Zu=function(e){return e.params.async?[]:null},Xu=function(e){var t;return new Vu(Gu(e.path||[]),[],{async:null!==(t=e.async)&&void 0!==t&&t,errorMap:e.errorMap||Cu})},Ju=function(e,t,r){return zu(t)?{success:!0,data:t.value}:(null!=r&&r.addIssues(e.issues),{success:!1,error:new Nu(e.issues)})},Qu=function(){function e(e){var t=this;this.parse=function(e,r){if((r=t.safeParse(e,r)).success)return r.data;throw r.error},this.safeParse=function(e,r){var n=Xu(xu(xu({},r),{async:!1}));e=t._parseSync(n,e,Fu(e));return Ju(n,e,null==r?void 0:r.parentError)},this.parseAsync=function(e,r){return Hn(t,void 0,void 0,(function(){var t;return Yn(this,(function(n){switch(n.label){case 0:return[4,this.safeParseAsync(e,r)];case 1:if((t=n.sent()).success)return[2,t.data];throw t.error}}))}))},this.safeParseAsync=function(e,r){return Hn(t,void 0,void 0,(function(){var t,n;return Yn(this,(function(i){switch(i.label){case 0:return t=Xu(xu(xu({},r),{async:!0})),n=this._parse(t,e,Fu(e)),[4,$u(n)?n.promise:Su.resolve(n)];case 1:return n=i.sent(),[2,Ju(t,n,null==r?void 0:r.parentError)]}}))}))},this.spa=this.safeParseAsync,this.refine=function(e,r){return t._refinement((function(t,n){function i(){return n.addIssue(xu({code:Iu.custom},"string"==typeof r||void 0===r?{message:r}:"function"==typeof r?r(t):r))}var o=e(t);return o instanceof Su?o.then((function(e){return!!e||(i(),!1)})):!!o||(i(),!1)}))},this.refinement=function(e,r){return t._refinement((function(t,n){return!!e(t)||(n.addIssue("function"==typeof r?r(t,n):r),!1)}))},this.superRefine=this._refinement,this.optional=function(){return Ac.create(t)},this.nullable=function(){return Lc.create(t)},this.nullish=function(){return t.optional().nullable()},this.array=function(){return pc.create(t)},this.promise=function(){return xc.create(t)},this.isOptional=function(){return t.safeParse(void 0).success},this.isNullable=function(){return t.safeParse(null).success},this._def=e,this.transform=this.transform.bind(this),this.default=this.default.bind(this)}return e.prototype._parseSync=function(e,t,r){if(r=this._parse(e,t,r),$u(r))throw new Error("Synchronous parse encountered promise.");return r},e.prototype._refinement=function(e){return e=new jc(this instanceof jc?xu(xu({},this._def),{effects:zn(zn([],Wn(this._def.effects||[])),[{type:"refinement",refinement:e}])}):{schema:this,typeName:yc.ZodEffects,effects:[{type:"refinement",refinement:e}]})},e.prototype.or=function(e){return bc.create([this,e])},e.prototype.and=function(e){return gc.create(this,e)},e.prototype.transform=function(e){return new jc({schema:this,typeName:yc.ZodEffects,effects:[{type:"transform",transform:e}]})},e.prototype.default=function(e){return new Ic({innerType:this,defaultValue:"function"==typeof e?e:function(){return e},typeName:yc.ZodDefault})},e}(),ec=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[89ab][a-f0-9]{3}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,tc=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,rc=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r._regex=function(e,t,n){return r.refinement((function(t){return e.test(t)}),xu({validation:t,code:Iu.invalid_string},Au.errToObj(n)))},r.email=function(e){return new t(xu(xu({},r._def),{checks:zn(zn([],Wn(r._def.checks)),[xu({kind:"email"},Au.errToObj(e))])}))},r.url=function(e){return new t(xu(xu({},r._def),{checks:zn(zn([],Wn(r._def.checks)),[xu({kind:"url"},Au.errToObj(e))])}))},r.uuid=function(e){return new t(xu(xu({},r._def),{checks:zn(zn([],Wn(r._def.checks)),[xu({kind:"uuid"},Au.errToObj(e))])}))},r.regex=function(e,n){return new t(xu(xu({},r._def),{checks:zn(zn([],Wn(r._def.checks)),[xu({kind:"regex",regex:e},Au.errToObj(n))])}))},r.min=function(e,n){return new t(xu(xu({},r._def),{checks:zn(zn([],Wn(r._def.checks)),[xu({kind:"min",value:e},Au.errToObj(n))])}))},r.max=function(e,n){return new t(xu(xu({},r._def),{checks:zn(zn([],Wn(r._def.checks)),[xu({kind:"max",value:e},Au.errToObj(n))])}))},r.nonempty=function(e){return r.min(1,Au.errToObj(e))},r}return Vn(t,e),t.prototype._parse=function(e,t,r){var n,i;if(r!==Mu.string)return e.addIssue(t,{code:Iu.invalid_type,expected:Mu.string,received:r}),Hu;var o=!1;try{for(var a=qn(this._def.checks),u=a.next();!u.done;u=a.next()){var c=u.value;if("min"===c.kind)t.length<c.value&&(o=!0,e.addIssue(t,{code:Iu.too_small,minimum:c.value,type:"string",inclusive:!0,message:c.message}));else if("max"===c.kind)t.length>c.value&&(o=!0,e.addIssue(t,{code:Iu.too_big,maximum:c.value,type:"string",inclusive:!0,message:c.message}));else if("email"===c.kind)tc.test(t)||(o=!0,e.addIssue(t,{validation:"email",code:Iu.invalid_string,message:c.message}));else if("uuid"===c.kind)ec.test(t)||(o=!0,e.addIssue(t,{validation:"uuid",code:Iu.invalid_string,message:c.message}));else if("url"===c.kind)try{new ku(t)}catch(r){o=!0,e.addIssue(t,{validation:"url",code:Iu.invalid_string,message:c.message})}else"regex"===c.kind&&(c.regex.test(t)||(o=!0,e.addIssue(t,{validation:"regex",code:Iu.invalid_string,message:c.message})))}}catch(r){n={error:r}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return o?Hu:Yu(t)},t.prototype.length=function(e,t){return this.min(e,t).max(e,t)},Object.defineProperty(t.prototype,"isEmail",{get:function(){return!!this._def.checks.find((function(e){return"email"===e.kind}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isURL",{get:function(){return!!this._def.checks.find((function(e){return"url"===e.kind}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isUUID",{get:function(){return!!this._def.checks.find((function(e){return"uuid"===e.kind}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minLength",{get:function(){var e=-1/0;return this._def.checks.map((function(t){"min"===t.kind&&(null===e||t.value>e)&&(e=t.value)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxLength",{get:function(){var e=null;return this._def.checks.map((function(t){"max"===t.kind&&(null===e||t.value<e)&&(e=t.value)})),e},enumerable:!1,configurable:!0}),t.create=function(){return new t({checks:[],typeName:yc.ZodString})},t}(Qu),nc=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.gte=function(e,t){return r.setLimit("min",e,!0,Au.toString(t))},r.min=r.gte,r.gt=function(e,t){return r.setLimit("min",e,!1,Au.toString(t))},r.lte=function(e,t){return r.setLimit("max",e,!0,Au.toString(t))},r.max=r.lte,r.lt=function(e,t){return r.setLimit("max",e,!1,Au.toString(t))},r.setLimit=function(e,n,i,o){return new t(xu(xu({},r._def),{checks:zn(zn([],Wn(r._def.checks)),[{kind:e,value:n,inclusive:i,message:Au.toString(o)}])}))},r.int=function(e){return new t(xu(xu({},r._def),{checks:zn(zn([],Wn(r._def.checks)),[{kind:"int",message:Au.toString(e)}])}))},r.positive=function(e){return new t(xu(xu({},r._def),{checks:zn(zn([],Wn(r._def.checks)),[{kind:"min",value:0,inclusive:!1,message:Au.toString(e)}])}))},r.negative=function(e){return new t(xu(xu({},r._def),{checks:zn(zn([],Wn(r._def.checks)),[{kind:"max",value:0,inclusive:!1,message:Au.toString(e)}])}))},r.nonpositive=function(e){return new t(xu(xu({},r._def),{checks:zn(zn([],Wn(r._def.checks)),[{kind:"max",value:0,inclusive:!0,message:Au.toString(e)}])}))},r.nonnegative=function(e){return new t(xu(xu({},r._def),{checks:zn(zn([],Wn(r._def.checks)),[{kind:"min",value:0,inclusive:!0,message:Au.toString(e)}])}))},r}return Vn(t,e),t.prototype._parse=function(e,t,r){var n,i;if(r!==Mu.number)return e.addIssue(t,{code:Iu.invalid_type,expected:Mu.number,received:r}),Hu;var o=!1;try{for(var a=qn(this._def.checks),u=a.next();!u.done;u=a.next()){var c=u.value;"int"===c.kind?_u.isInteger(t)||(o=!0,e.addIssue(t,{code:Iu.invalid_type,expected:"integer",received:"float",message:c.message})):"min"===c.kind?(c.inclusive?t<c.value:t<=c.value)&&(o=!0,e.addIssue(t,{code:Iu.too_small,minimum:c.value,type:"number",inclusive:c.inclusive,message:c.message})):"max"===c.kind&&(c.inclusive?t>c.value:t>=c.value)&&(o=!0,e.addIssue(t,{code:Iu.too_big,maximum:c.value,type:"number",inclusive:c.inclusive,message:c.message}))}}catch(e){n={error:e}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return o?Hu:Yu(t)},Object.defineProperty(t.prototype,"minValue",{get:function(){var e,t,r=null;try{for(var n=qn(this._def.checks),i=n.next();!i.done;i=n.next()){var o=i.value;"min"===o.kind&&(null===r||o.value>r)&&(r=o.value)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxValue",{get:function(){var e,t,r=null;try{for(var n=qn(this._def.checks),i=n.next();!i.done;i=n.next()){var o=i.value;"max"===o.kind&&(null===r||o.value<r)&&(r=o.value)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isInt",{get:function(){return!!this._def.checks.find((function(e){return"int"===e.kind}))},enumerable:!1,configurable:!0}),t.create=function(){return new t({checks:[],typeName:yc.ZodNumber})},t}(Qu),ic=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vn(t,e),t.prototype._parse=function(e,t,r){return r!==Mu.bigint?(e.addIssue(t,{code:Iu.invalid_type,expected:Mu.bigint,received:r}),Hu):Yu(t)},t.create=function(){return new t({typeName:yc.ZodBigInt})},t}(Qu),oc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vn(t,e),t.prototype._parse=function(e,t,r){return r!==Mu.boolean?(e.addIssue(t,{code:Iu.invalid_type,expected:Mu.boolean,received:r}),Hu):Yu(t)},t.create=function(){return new t({typeName:yc.ZodBoolean})},t}(Qu),ac=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vn(t,e),t.prototype._parse=function(e,t,r){return r!==Mu.date?(e.addIssue(t,{code:Iu.invalid_type,expected:Mu.date,received:r}),Hu):isNaN(t.getTime())?(e.addIssue(t,{code:Iu.invalid_date}),Hu):Yu(new Date(t.getTime()))},t.create=function(){return new t({typeName:yc.ZodDate})},t}(Qu),uc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vn(t,e),t.prototype._parse=function(e,t,r){return r!==Mu.undefined?(e.addIssue(t,{code:Iu.invalid_type,expected:Mu.undefined,received:r}),Hu):Yu(t)},t.create=function(){return new t({typeName:yc.ZodUndefined})},t}(Qu),cc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vn(t,e),t.prototype._parse=function(e,t,r){return r!==Mu.null?(e.addIssue(t,{code:Iu.invalid_type,expected:Mu.null,received:r}),Hu):Yu(t)},t.create=function(){return new t({typeName:yc.ZodNull})},t}(Qu),sc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._any=!0,t}return Vn(t,e),t.prototype._parse=function(e,t,r){return Yu(t)},t.create=function(){return new t({typeName:yc.ZodAny})},t}(Qu),lc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._unknown=!0,t}return Vn(t,e),t.prototype._parse=function(e,t,r){return Yu(t)},t.create=function(){return new t({typeName:yc.ZodUnknown})},t}(Qu),fc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vn(t,e),t.prototype._parse=function(e,t,r){return e.addIssue(t,{code:Iu.invalid_type,expected:Mu.never,received:r}),Hu},t.create=function(){return new t({typeName:yc.ZodNever})},t}(Qu),hc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vn(t,e),t.prototype._parse=function(e,t,r){return r!==Mu.undefined?(e.addIssue(t,{code:Iu.invalid_type,expected:Mu.void,received:r}),Hu):Yu(t)},t.create=function(){return new t({typeName:yc.ZodVoid})},t}(Qu),dc=function(e,t,r,n){if(r!==Mu.array)return e.addIssue(t,{code:Iu.invalid_type,expected:Mu.array,received:r}),Hu;var i=!1;null!==n.minLength&&t.length<n.minLength.value&&(i=!0,e.addIssue(t,{code:Iu.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,message:n.minLength.message})),null!==n.maxLength&&t.length>n.maxLength.value&&(i=!0,e.addIssue(t,{code:Iu.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,message:n.maxLength.message}));var o=Zu(e),a=new Array(t.length),u=n.type;return t.forEach((function(t,r){!function e(t,r){zu(r)?a[t]=r.value:Wu(r)?i=!0:null!=o&&o.push(r.promise.then((function(r){return e(t,r)})))}(r,u._parse(e.stepInto(r),t,Fu(t)))})),null!==o&&0<o.length?qu(Su.all(o).then((function(){return i?Hu:Yu(a)}))):i?Hu:Yu(a)},pc=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.min=function(e,n){return new t(xu(xu({},r._def),{minLength:{value:e,message:Au.toString(n)}}))},r.max=function(e,n){return new t(xu(xu({},r._def),{maxLength:{value:e,message:Au.toString(n)}}))},r.length=function(e,t){return r.min(e,t).max(e,t)},r.nonempty=function(e){return r.min(1,e)},r}return Vn(t,e),t.prototype._parse=function(e,t,r){return dc(e,t,r,this._def)},Object.defineProperty(t.prototype,"element",{get:function(){return this._def.type},enumerable:!1,configurable:!0}),t.create=function(e){return new t({type:e,minLength:null,maxLength:null,typeName:yc.ZodArray})},t}(Qu);!function(e){e.mergeShapes=function(e,t){return xu(xu({},e),t)},e.intersectShapes=function(e,t){var r,n,i=_u.objectKeys(e),o=_u.objectKeys(t),a=(i=i.filter((function(e){return-1!==o.indexOf(e)})),{});try{for(var u=qn(i),c=u.next();!c.done;c=u.next()){var s=c.value;a[s]=gc.create(e[s],t[s])}}catch(e){r={error:e}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}return xu(xu(xu({},e),t),a)}}(Ku=Ku||{});var yc,vc=function(e){return function(t){return new mc(xu(xu({},e),{shape:function(){return xu(xu({},e.shape()),t)}}))}},mc=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r._cached=null,r.strict=function(){return new t(xu(xu({},r._def),{unknownKeys:"strict"}))},r.strip=function(){return new t(xu(xu({},r._def),{unknownKeys:"strip"}))},r.passthrough=function(){return new t(xu(xu({},r._def),{unknownKeys:"passthrough"}))},r.nonstrict=r.passthrough,r.augment=vc(r._def),r.extend=vc(r._def),r.setKey=function(e,t){var n;return r.augment(((n={})[e]=t,n))},r.merge=function(e){var n=Ku.mergeShapes(r._def.shape(),e._def.shape());return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:function(){return n},typeName:yc.ZodObject})},r.catchall=function(e){return new t(xu(xu({},r._def),{catchall:e}))},r.pick=function(e){var n={};return _u.objectKeys(e).map((function(e){n[e]=r.shape[e]})),new t(xu(xu({},r._def),{shape:function(){return n}}))},r.omit=function(e){var n={};return _u.objectKeys(r.shape).map((function(t){-1===_u.objectKeys(e).indexOf(t)&&(n[t]=r.shape[t])})),new t(xu(xu({},r._def),{shape:function(){return n}}))},r.partial=function(){var e,n={};for(e in r.shape){var i=r.shape[e];n[e]=i.isOptional()?i:i.optional()}return new t(xu(xu({},r._def),{shape:function(){return n}}))},r.deepPartial=function(){var e,n={};for(e in r.shape){var i=r.shape[e];n[e]=i instanceof t?i.isOptional()?i:i.deepPartial().optional():i.isOptional()?i:i.optional()}return new t(xu(xu({},r._def),{shape:function(){return n}}))},r.required=function(){var e,n={};for(e in r.shape){for(var i=r.shape[e];i instanceof Ac;)i=i._def.innerType;n[e]=i}return new t(xu(xu({},r._def),{shape:function(){return n}}))},r}return Vn(t,e),t.prototype._getCached=function(){if(null!==this._cached)return this._cached;var e=this._def.shape(),t=_u.objectKeys(e);return this._cached={shape:e,keys:t}},t.prototype._parse=function(e,t,r){var n,i,o,a,u;if(r!==Mu.object)return e.addIssue(t,{code:Iu.invalid_type,expected:Mu.object,received:r}),Hu;var c=(r=this._getCached()).shape,s=(r=r.keys,!1),l=Zu(e),f={},h=function e(r,n){var i;zu(n)?(void 0!==(i=n.value)||r in t)&&(f[r]=i):Wu(n)?s=!0:null!=l&&l.push(n.promise.then((function(t){return e(r,t)})))};try{for(var d=qn(r),p=d.next();!p.done;p=d.next()){var y=p.value,v=c[y],m=t[y];h(y,v._parse(e.stepInto(y),m,Fu(m)))}}catch(e){b={error:e}}finally{try{p&&!p.done&&(n=d.return)&&n.call(d)}finally{if(b)throw b.error}}if(this._def.catchall instanceof fc){var b=this._def.unknownKeys;if("passthrough"===b){var g=_u.objectKeys(t).filter((function(e){return!(e in c)}));try{for(var w=qn(g),_=w.next();!_.done;_=w.next())y=_.value,f[y]=t[y]}catch(e){i={error:e}}finally{try{_&&!_.done&&(o=w.return)&&o.call(w)}finally{if(i)throw i.error}}}else if("strict"===b)0<(g=_u.objectKeys(t).filter((function(e){return!(e in c)}))).length&&(s=!0,e.addIssue(t,{code:Iu.unrecognized_keys,keys:g}));else if("strip"!==b)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{var E=this._def.catchall;g=_u.objectKeys(t).filter((function(e){return!(e in c)}));try{for(var O=qn(g),S=O.next();!S.done;S=O.next())y=S.value,m=t[y],h(y,E._parse(e.stepInto(y),m,Fu(m)))}catch(e){a={error:e}}finally{try{S&&!S.done&&(u=O.return)&&u.call(O)}finally{if(a)throw a.error}}}return null!==l&&0<l.length?qu(Su.all(l).then((function(){return s?Hu:Yu(f)}))):s?Hu:Yu(f)},Object.defineProperty(t.prototype,"shape",{get:function(){return this._def.shape()},enumerable:!1,configurable:!0}),t.create=function(e){return new t({shape:function(){return e},unknownKeys:"strip",catchall:fc.create(),typeName:yc.ZodObject})},t.strictCreate=function(e){return new t({shape:function(){return e},unknownKeys:"strict",catchall:fc.create(),typeName:yc.ZodObject})},t.lazycreate=function(e){return new t({shape:e,unknownKeys:"strip",catchall:fc.create(),typeName:yc.ZodObject})},t}(Qu),bc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vn(t,e),t.prototype._parse=function(e,t,r){function n(r){var n=r.map((function(e){return new Nu(e)}));return 1===(r=n.filter((function(e){return"invalid_type"!==e.issues[0].code}))).length?r[0].issues.forEach((function(t){return e.issues.push(t)})):e.addIssue(t,{code:Iu.invalid_union,unionErrors:n}),Hu}var i,o,a=this._def.options;if(e.params.async){var u=a.map((function(){return new Vu(e.path,[],e.params)}));return ju.all(a.map((function(e,n){return e._parse(u[n],t,r)}))).then((function(e){var t,r;try{for(var i=qn(e),o=i.next();!o.done;o=i.next()){var a=o.value;if(zu(a))return a}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return n(u.map((function(e){return e.issues})))}))}var c=[];try{for(var s=qn(a),l=s.next();!l.done;l=s.next()){var f=l.value,h=new Vu(e.path,[],e.params),d=f._parseSync(h,t,r);if(!Wu(d))return d;c.push(h.issues)}}catch(o){i={error:o}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}return n(c)},Object.defineProperty(t.prototype,"options",{get:function(){return this._def.options},enumerable:!1,configurable:!0}),t.create=function(e){return new t({options:e,typeName:yc.ZodUnion})},t}(Qu),gc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vn(t,e),t.prototype._parse=function(e,t,r){function n(r,n){return Wu(r)||Wu(n)?Hu:(n=function e(t,r){var n,i,o=Fu(t),a=Fu(r);if(t===r)return{valid:!0,data:t};if(o!==Mu.object||a!==Mu.object)return{valid:!1};var u=_u.objectKeys(r),c=(a=_u.objectKeys(t).filter((function(e){return-1!==u.indexOf(e)})),xu(xu({},t),r));try{for(var s=qn(a),l=s.next();!l.done;l=s.next()){var f=l.value,h=e(t[f],r[f]);if(!h.valid)return{valid:!1};c[f]=h.data}}catch(t){n={error:t}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return{valid:!0,data:c}}(r.value,n.value)).valid?Yu(n.data):(e.addIssue(t,{code:Iu.invalid_intersection_types}),Hu)}return e.params.async?ju.all([this._def.left._parse(e,t,r),this._def.right._parse(e,t,r)]).then((function(e){var t;return n(e=(t=Wn(e,2))[0],t=t[1])})):n(this._def.left._parseSync(e,t,r),this._def.right._parseSync(e,t,r))},t.create=function(e,r){return new t({left:e,right:r,typeName:yc.ZodIntersection})},t}(Qu),wc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vn(t,e),t.prototype._parse=function(e,t,r){if(r!==Mu.array)return e.addIssue(t,{code:Iu.invalid_type,expected:Mu.array,received:r}),Hu;if(t.length>this._def.items.length)return e.addIssue(t,{code:Iu.too_big,maximum:this._def.items.length,inclusive:!0,type:"array"}),Hu;if(t.length<this._def.items.length)return e.addIssue(t,{code:Iu.too_small,minimum:this._def.items.length,inclusive:!0,type:"array"}),Hu;var n=Zu(e),i=(r=this._def.items,new Array(r.length)),o=!1;return r.forEach((function(r,a){!function e(t,r){zu(r)?i[t]=r.value:Wu(r)?o=!0:null!=n&&n.push(r.promise.then((function(r){return e(t,r)})))}(a,r._parse(e.stepInto(a),t[a],Fu(t[a])))})),null!==n&&0<n.length?qu(Su.all(n).then((function(){return o?Hu:Yu(i)}))):o?Hu:Yu(i)},Object.defineProperty(t.prototype,"items",{get:function(){return this._def.items},enumerable:!1,configurable:!0}),t.create=function(e){return new t({items:e,typeName:yc.ZodTuple})},t}(Qu),_c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vn(t,e),t.prototype._parse=function(e,t,r){if(r!==Mu.object)return e.addIssue(t,{code:Iu.invalid_type,expected:Mu.object,received:r}),Hu;var n,i=Zu(e),o=this._def.valueType,a={},u=!1,c=function e(t,r){zu(r)?a[t]=r.value:Wu(r)?u=!0:null!=i&&i.push(r.promise.then((function(r){return e(t,r)})))};for(n in t)c(n,o._parse(e.stepInto(n),t[n],Fu(t[n])));return null!==i&&0<i.length?qu(Su.all(i).then((function(){return u?Hu:Yu(a)}))):u?Hu:Yu(a)},t.create=function(e){return new t({valueType:e,typeName:yc.ZodRecord})},t}(Qu),Ec=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vn(t,e),t.prototype._parse=function(e,t,r){if(r!==Mu.map)return e.addIssue(t,{code:Iu.invalid_type,expected:Mu.map,received:r}),Hu;var n=this._def.keyType,i=this._def.valueType,o=(t=t,new Tu),a=Zu(e),u=!1,c=function e(t,r){$u(t)||$u(r)?null!=a&&a.push(ju.all([t,r]).promise.then((function(t){t=(r=Wn(t,2))[0];var r=r[1];return e(t,r)}))):Wu(t)||Wu(r)?u=!0:o.set(t.value,r.value)};return zn([],Wn(t.entries())).forEach((function(t,r){t=(o=Wn(t,2))[0];var o=o[1];r=e.stepInto(r),t=n._parse(r.stepInto("key"),t,Fu(t)),o=i._parse(r.stepInto("value"),o,Fu(o));c(t,o)})),null!==a&&0<a.length?qu(Su.all(a).then((function(){return u?Hu:Yu(o)}))):u?Hu:Yu(o)},t.create=function(e,r){return new t({valueType:r,keyType:e,typeName:yc.ZodMap})},t}(Qu),Oc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vn(t,e),t.prototype._parse=function(e,t,r){if(r!==Mu.set)return e.addIssue(t,{code:Iu.invalid_type,expected:Mu.set,received:r}),Hu;t=t;var n=this._def.valueType,i=new Ru,o=Zu(e),a=!1;return zn([],Wn(t.values())).forEach((function(t,r){return function e(t){zu(t)?i.add(t.value):Wu(t)?a=!0:null!=o&&o.push(t.promise.then((function(t){return e(t)})))}(n._parse(e.stepInto(r),t,Fu(t)))})),null!==o&&0<o.length?qu(Su.all(o).then((function(){return a?Hu:Yu(i)}))):a?Hu:Yu(i)},t.create=function(e){return new t({valueType:e,typeName:yc.ZodSet})},t}(Qu),Sc=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.args=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new t(xu(xu({},r._def),{args:wc.create(e)}))},r.returns=function(e){return new t(xu(xu({},r._def),{returns:e}))},r.implement=function(e){return r.parse(e)},r.strictImplement=function(e){return r.parse(e)},r.validate=r.implement,r}return Vn(t,e),t.prototype._parse=function(e,t,r){function n(t,r){if(r.success)return r.data;throw r=Bu(t,Uu(e.path),e.params.errorMap,{code:Iu.invalid_arguments,argumentsError:r.error}),new Nu([r])}function i(t,r){if(r.success)return r.data;throw r=Bu(t,Uu(e.path),e.params.errorMap,{code:Iu.invalid_return_type,returnTypeError:r.error}),new Nu([r])}var o=this;if(r!==Mu.function)return e.addIssue(t,{code:Iu.invalid_type,expected:Mu.function,received:r}),Hu;var a={errorMap:e.params.errorMap},u=t;return this._def.returns instanceof xc?Yu((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Hn(o,void 0,void 0,(function(){var t,r,o,c,s;return Yn(this,(function(l){switch(l.label){case 0:return t=n,r=[e],[4,this._def.args.spa(e,a)];case 1:return o=t.apply(void 0,r.concat([l.sent()])),[4,u.apply(void 0,zn([],Wn(o)))];case 2:return o=l.sent(),c=i,s=[o],[4,this._def.returns.spa(o,a)];case 3:return[2,c.apply(void 0,s.concat([l.sent()]))]}}))}))})):Yu((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=n(e,o._def.args.safeParse(e,a));return i(r=u.apply(void 0,zn([],Wn(r))),o._def.returns.safeParse(r,a))}))},t.prototype.parameters=function(){return this._def.args},t.prototype.returnType=function(){return this._def.returns},t.create=function(e,r){return new t({args:e||wc.create([]),returns:r||lc.create(),typeName:yc.ZodFunction})},t}(Qu),kc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vn(t,e),Object.defineProperty(t.prototype,"schema",{get:function(){return this._def.getter()},enumerable:!1,configurable:!0}),t.prototype._parse=function(e,t,r){return this._def.getter()._parse(e,t,r)},t.create=function(e){return new t({getter:e,typeName:yc.ZodLazy})},t}(Qu),Tc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vn(t,e),t.prototype._parse=function(e,t,r){return t!==this._def.value?(e.addIssue(t,{code:Iu.invalid_type,expected:this._def.value,received:t}),Hu):Yu(t)},Object.defineProperty(t.prototype,"value",{get:function(){return this._def.value},enumerable:!1,configurable:!0}),t.create=function(e){return new t({value:e,typeName:yc.ZodLiteral})},t}(Qu),Rc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vn(t,e),t.prototype._parse=function(e,t,r){return-1===this._def.values.indexOf(t)?(e.addIssue(t,{code:Iu.invalid_enum_value,options:this._def.values}),Hu):Yu(t)},Object.defineProperty(t.prototype,"options",{get:function(){return this._def.values},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enum",{get:function(){var e,t,r={};try{for(var n=qn(this._def.values),i=n.next();!i.done;i=n.next()){var o=i.value;r[o]=o}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Values",{get:function(){var e,t,r={};try{for(var n=qn(this._def.values),i=n.next();!i.done;i=n.next()){var o=i.value;r[o]=o}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Enum",{get:function(){var e,t,r={};try{for(var n=qn(this._def.values),i=n.next();!i.done;i=n.next()){var o=i.value;r[o]=o}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r},enumerable:!1,configurable:!0}),t.create=$n,t}(Qu),Pc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vn(t,e),t.prototype._parse=function(e,t,r){var n=_u.getValidEnumValues(this._def.values);return-1===n.indexOf(t)?(e.addIssue(t,{code:Iu.invalid_enum_value,options:_u.objectValues(n)}),Hu):Yu(t)},t.create=function(e){return new t({values:e,typeName:yc.ZodNativeEnum})},t}(Qu),xc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vn(t,e),t.prototype._parse=function(e,t,r){var n=this;return r!==Mu.promise&&!1===e.params.async?(e.addIssue(t,{code:Iu.invalid_type,expected:Mu.promise,received:r}),Hu):(t=r===Mu.promise?t:Su.resolve(t),Yu(t.then((function(t){return n._def.type.parseAsync(t,{path:Uu(e.path),errorMap:e.params.errorMap})}))))},t.create=function(e){return new t({type:e,typeName:yc.ZodPromise})},t}(Qu),jc=function(e){function t(t){return e.call(this,t)||this}return Vn(t,e),t.prototype.innerType=function(){return this._def.schema},t.prototype._parse=function(e,t,r){function n(e,t){switch(t.type){case"refinement":var r=t.refinement(e,u);if(r instanceof Su){if(o)throw new Error("You can't use .parse() on a schema containing async refinements. Use .parseAsync instead.");return r.then((function(t){var r=u.issueFound;return c=c||r,e}))}return r=u.issueFound,c=c||r,e;case"transform":if((r=t.transform(e))instanceof Su&&o)throw new Error("You can't use .parse() on a schema containing async transformations. Use .parseAsync instead.");return r;default:throw new Error("Invalid effect type.")}}function i(e){return(e=a.reduce((function(e,t){return e instanceof Su?e.then((function(e){return n(e,t)})):n(e,t)}),e))instanceof Su?qu(e.then((function(e){return c?Hu:Yu(e)}))):c?Hu:Yu(e)}var o=!1===e.params.async,a=this._def.effects||[],u={issueFound:!1,addIssue:function(r){this.issueFound=!0,e.addIssue(t,r)},get path(){return Uu(e.path)}},c=!1;if(o){var s=this._def.schema._parseSync(e,t,r);return zu(s)?(s=a.reduce(n,s.value),c?Hu:Yu(s)):Hu}return r=this._def.schema._parse(e,t,r),zu(r)?i(r.value):Wu(r)?Hu:qu(r.promise.then((function(e){return Wu(e)?Hu:(e=i(e.value),$u(e)?e.promise:e)})))},t.create=function(e){return new t({schema:e,typeName:yc.ZodEffects})},t}(Qu),Ac=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vn(t,e),t.prototype._parse=function(e,t,r){return r===Mu.undefined?Yu(void 0):this._def.innerType._parse(e,t,r)},t.prototype.unwrap=function(){return this._def.innerType},t.create=function(e){return new t({innerType:e,typeName:yc.ZodOptional})},t}(Qu),Lc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vn(t,e),t.prototype._parse=function(e,t,r){return r===Mu.null?Yu(null):this._def.innerType._parse(e,t,r)},t.prototype.unwrap=function(){return this._def.innerType},t.create=function(e){return new t({innerType:e,typeName:yc.ZodNullable})},t}(Qu),Ic=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vn(t,e),t.prototype._parse=function(e,t,r){return r===Mu.undefined&&(t=this._def.defaultValue()),this._def.innerType._parse(e,t,Fu(t))},t.prototype.removeDefault=function(){return this._def.innerType},t.create=function(e){return new Ac({innerType:e,typeName:yc.ZodOptional})},t}(Qu),Nc=function(e,t){return e?sc.create().refine(e,t):sc.create()},Dc={object:mc.lazycreate};!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodPromise="ZodPromise"}(yc=yc||{});var Cc,Mc=rc.create,Fc=nc.create,Bc=ic.create,Uc=oc.create,Gc=ac.create,Vc=uc.create,Hc=cc.create,Yc=sc.create,qc=lc.create,Wc=fc.create,zc=hc.create,$c=pc.create,Kc=mc.create,Zc=mc.strictCreate,Xc=bc.create,Jc=gc.create,Qc=wc.create,es=_c.create,ts=Ec.create,rs=Oc.create,ns=Sc.create,is=kc.create,os=Tc.create,as=Rc.create,us=Pc.create,cs=xc.create,ss=jc.create,ls=Ac.create,fs=Lc.create,hs=(Object.freeze({__proto__:null,ZodParsedType:Mu,getParsedType:Fu,makeIssue:Bu,EMPTY_PATH:null,pathToArray:Uu,pathFromArray:Gu,ParseContext:Vu,createRootContext:function(e){var t;return new Vu(null,[],{async:null!==(t=e.async)&&void 0!==t&&t,errorMap:e.errorMap||Cu})},INVALID:Hu,OK:Yu,ASYNC:qu,isInvalid:Wu,isOk:zu,isAsync:$u,ZodType:Qu,ZodString:rc,ZodNumber:nc,ZodBigInt:ic,ZodBoolean:oc,ZodDate:ac,ZodUndefined:uc,ZodNull:cc,ZodAny:sc,ZodUnknown:lc,ZodNever:fc,ZodVoid:hc,ZodArray:pc,get objectUtil(){return Ku},mergeObjects:function(e){return function(t){var r=Ku.mergeShapes(e._def.shape(),t._def.shape());return new mc({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:function(){return r},typeName:yc.ZodObject})}},ZodObject:mc,ZodUnion:bc,ZodIntersection:gc,ZodTuple:wc,ZodRecord:_c,ZodMap:Ec,ZodSet:Oc,ZodFunction:Sc,ZodLazy:kc,ZodLiteral:Tc,ZodEnum:Rc,ZodNativeEnum:Pc,ZodPromise:xc,ZodEffects:jc,ZodTransformer:jc,ZodOptional:Ac,ZodNullable:Lc,ZodDefault:Ic,custom:Nc,Schema:Qu,ZodSchema:Qu,late:Dc,get ZodFirstPartyTypeKind(){return yc},any:Yc,array:$c,bigint:Bc,boolean:Uc,date:Gc,effect:ss,enum:as,function:ns,instanceof:function(e,t){return void 0===t&&(t={message:"Input not instance of "+e.name}),Nc((function(t){return t instanceof e}),t)},intersection:Jc,lazy:is,literal:os,map:ts,nativeEnum:us,never:Wc,null:Hc,nullable:fs,number:Fc,object:Kc,oboolean:function(){return Uc().optional()},onumber:function(){return Fc().optional()},optional:ls,ostring:function(){return Mc().optional()},promise:cs,record:es,set:rs,strictObject:Zc,string:Mc,transformer:ss,tuple:Qc,undefined:Vc,union:Xc,unknown:qc,void:zc,ZodIssueCode:Iu,quotelessJson:function(e){return JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:")},ZodError:Nu,defaultErrorMap:Du,get overrideErrorMap(){return Cu},setErrorMap:function(e){Cu=e}}),function(e){function t(e,r){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i="object"===Xn(e)?e:{message:String(e),code:0};ai(ei(n=u.call(this,i.message||String(i.code))),"message",void 0),ai(ei(n),"messageDetails",void 0),ai(ei(n),"code",void 0),ai(ei(n),"category",void 0),ai(ei(n),"isFatal",void 0),ai(ei(n),"details",void 0),ai(ei(n),"stack",void 0),ai(ei(n),"vsid",void 0),ai(ei(n),"helpLink",void 0),la()(ei(n),t.prototype),n.message=i.message||String(i.code)||n.message,n.messageDetails=i.messageDetails,n.code=i.code;var o=Un(n.code);if(n.category=null!==i&&void 0!==i&&i.category&&o===Aa.q.DEFAULT?i.category:o,n.details=i.details,n.isFatal=void 0===i.isFatal||i.isFatal,n.stack=i.stack&&"?:?:?"!==i.stack?i.stack:n.details&&n.details.stack||function(e,t){var r=e.url,n=e.line,i=e.col,o=e.fileName,a=e.columnNumber,u=e.lineNumber;return String(t||"".concat(r||o||"?",":").concat(n||u||"?",":").concat(i||a||"?"))}(i,ei(n).stack),!n.stack||n.stack===wu.J.stack)try{throw new Error(n.message)}catch(Lu){(0,po.K)(Lu)&&(n.stack=Lu.stack||wu.J.stack)}return n.helpLink=i.helpLink||void 0,n.vsid=r||i.vsid,n}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ii(e,t)}(t,e);var r,n,i,o,a,u=(r=t,n=ni(),function(){var e,t=oi(r);if(n){var i=oi(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return Qn(this,e)});return i=t,a=[{key:"from",value:function(e){var r,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=null!==(r=null!==(n=i.code)&&void 0!==n?n:(0,uo.Y)((function(){return e.code})))&&void 0!==r?r:0;return e instanceof t?i?new t(Zn(Zn(Zn({},e),i),{},{code:o})):e:e instanceof Nu?new t(Zn(i?Zn(Zn({},e),i):Zn({},e),{},{code:o})):(0,Ou.V)(e)?new t(Zn(Zn(Zn({},e),i),{},{code:o})):(0,Ha.H)(e)?new t(Zn(Zn({message:e},i),{},{code:o})):new t(Zn(Zn({message:"UNEXPECTED_ERROR_TYPE"},i),{},{code:o}))}}],(o=[{key:"toString",value:function(){return JSON.stringify(this.toJSON())}},{key:"toJSON",value:function(){var e={message:this.message,messageDetails:this.messageDetails,code:this.code,category:this.category,isFatal:this.isFatal,details:this.details,stack:this.stack,vsid:this.vsid,helpLink:this.helpLink||void 0};return Zn(Zn({},e),{},{raw:JSON.stringify(e)})}}])&&Jn(i.prototype,o),a&&Jn(i,a),Object.defineProperty(i,"prototype",{writable:!1}),t}(ti(Error)));!function(e){e.EXPIRED_SIGNATURE="EXPIRED_SIGNATURE",e.NEED_COOKIE="NEED_COOKIE",e.NEED_YATEAM_LOGIN="NEED_YATEAM_LOGIN",e.NEED_VIEW_PERMISSION="NEED_VIEW_PERMISSION"}(Cc||(Cc={}));var ds=r(88948),ps=function(e){var t=0;return{promise:new ds((function(r){t=window.setTimeout(r,e)})),clear:function(){clearTimeout(t)},timeoutId:t}},ys=r(33125),vs=r(72390),ms=r(5052),bs=r(88948),gs=function(e){function t(e,r,n,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=y.call(this)).video=e,o.config=r,o.onEvent=i,Ei(wi(o),"session",void 0),Ei(wi(o),"initPromise",void 0),Ei(wi(o),"mainEventUnsubscribers",[]),Ei(wi(o),"currentDrmKeySystem",au.none),Ei(wi(o),"keySystem",void 0),Ei(wi(o),"requestSync",(0,vs.l)()),Ei(wi(o),"onError",void 0),o.onError=function(e){o.isDestroyed||(e.isFatal&&o.destroy(),n(e))},o.mainEventUnsubscribers.push(o.addEventListener(o.video,"encrypted",(function(e){o.logEvent("DrmEncrypted",{initDataType:e.initDataType}),o.removeSubscriptions(),o.onEncrypted(e.target)}),{once:!0})),o.mainEventUnsubscribers.push(o.addEventListener(o.video,"waitingforkey",(function(e){o.logEvent("DrmWaitingForKey",void 0),o.removeSubscriptions(),o.onEncrypted(e.target)}),{once:!0})),o.keySystem=null,o.logEvent("CreateDrmController",{config:r}),o}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mi(e,t)}(t,e);var r,n,i,o,a,u,c,s,l,f,h,d,p,y=bi(t);return r=t,n=[{key:"removeSubscriptions",value:function(){this.mainEventUnsubscribers.forEach((function(e){return e()})),this.mainEventUnsubscribers.length=0}},{key:"getMediaKeySessionInitData",value:(p=di(fi().mark((function e(){return fi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bs.resolve({}));case 1:case"end":return e.stop()}}),e)}))),function(){return p.apply(this,arguments)})},{key:"loadCertificate",value:(d=di(fi().mark((function e(t){var r,n,i,o;return fi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.keySystem!==pu.dn){e.next=2;break}return e.abrupt("return",new ArrayBuffer(0));case 2:if(!t){e.next=18;break}return e.prev=3,this.logEvent("DrmCertificateLoad",{url:t}),r=(0,ys.u)(),e.next=8,this.requestDrmProxy({method:"get",responseType:"arraybuffer",url:t,withCredentials:this.config.withCredentials},0);case 8:return n=e.sent,i=n.response,this.logEvent("DrmCertificateLoadEnd",{url:t,requestTime:Math.round(r())}),e.abrupt("return",i);case 14:e.prev=14,e.t0=e.catch(3),o=hs.from(e.t0),this.onError(new hs(li(li({},o.toJSON()),{},{code:du.DRM_CERT_LOAD_ERROR,message:"Failed to get certificate via direct link: ".concat(o),isFatal:!1})));case 18:return e.abrupt("return",new ArrayBuffer(0));case 19:case"end":return e.stop()}}),e,this,[[3,14]])}))),function(e){return d.apply(this,arguments)})},{key:"init",value:(h=di(fi().mark((function e(){return fi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.initPromise){e.next=2;break}return e.abrupt("return",this.initPromise);case 2:return this.initPromise=this.initInternal(),e.abrupt("return",this.initPromise);case 4:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"initInternal",value:(f=di(fi().mark((function e(){var r,n,i,o,a,u,c,s,l;return fi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentDrmKeySystem===au.none){e.next=2;break}return e.abrupt("return");case 2:if(this.video){e.next=4;break}return e.abrupt("return");case 4:if(this.keySystem=this.getDrmKeySystem(this.config),this.keySystem){e.next=8;break}return this.onError(new hs({code:du.DRM_NO_SUPPORTED_KEY_SYSTEM,message:"No supported drm server specified",isFatal:!0})),e.abrupt("return");case 8:if(!this.video.mediaKeys){e.next=10;break}return e.abrupt("return");case 10:return n=(null===(r=this.config.advanced)||void 0===r?void 0:r[this.keySystem])||{},i=n.serverCertificateUrl,o=this.loadCertificate(i),e.prev=12,e.next=15,t.getMediaKeySystemAccess(this.keySystem);case 15:return u=e.sent,e.next=18,u.createMediaKeys();case 18:a=e.sent,e.next=26;break;case 21:return e.prev=21,e.t0=e.catch(12),c=(0,po.K)(e.t0)?e.t0.message:(0,Ha.H)(e.t0)?e.t0:"",this.onError(hs.from(e.t0,{code:du.DRM_FAILED_TO_CREATE_CDM,message:"Failed to create mediaKeys: ".concat(c),isFatal:!0})),e.abrupt("return");case 26:if(e.prev=26,!this.isDestroyed){e.next=29;break}return e.abrupt("return");case 29:return e.next=31,this.video.setMediaKeys(a);case 31:e.next=38;break;case 33:return e.prev=33,e.t1=e.catch(26),s=(0,po.K)(e.t1)?e.t1.message:(0,Ha.H)(e.t1)?e.t1:"",this.onError(hs.from(e.t1,{code:du.DRM_FAILED_TO_SET_MEDIA_KEYS,message:"Failed set mediaKeys: ".concat(s),isFatal:!0})),e.abrupt("return");case 38:return e.next=40,o;case 40:if(!(l=e.sent).byteLength){e.next=44;break}return e.next=44,a.setServerCertificate(l);case 44:this.currentDrmKeySystem=Dn(this.keySystem);case 45:case"end":return e.stop()}}),e,this,[[12,21],[26,33]])}))),function(){return f.apply(this,arguments)})},{key:"onEncrypted",value:(l=di(fi().mark((function e(t){var r,n,i,o,a=this;return fi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isDestroyed){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.initPromise;case 4:if(t.mediaKeys&&this.keySystem){e.next=7;break}return this.onError(new hs({code:du.DRM_INIT_ERROR,message:"MediaKeys not inited",isFatal:!0})),e.abrupt("return");case 7:if(n=null===(r=this.config.servers)||void 0===r?void 0:r[this.keySystem]){e.next=11;break}return this.onError(new hs({code:du.DRM_NO_LICENSE_SERVER,message:"No valid url to license server",isFatal:!0})),e.abrupt("return");case 11:e.prev=11,this.session=t.mediaKeys.createSession(),e.next=20;break;case 15:return e.prev=15,e.t0=e.catch(11),i=(0,po.K)(e.t0)?e.t0.message:(0,Ha.H)(e.t0)?e.t0:"",this.onError(hs.from(e.t0,{code:du.DRM_FAILED_TO_CREATE_SESSION,message:"Failed to create session: ".concat(i),isFatal:!0})),e.abrupt("return");case 20:if(this.session){e.next=23;break}return this.onError(new hs({code:du.DRM_FAILED_TO_CREATE_SESSION,message:"session is ".concat(this.session),isFatal:!0})),e.abrupt("return");case 23:return this.addEventListener(this.session,"message",function(){var e=di(fi().mark((function e(t){var r,i,o,u,c,s,l;return fi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.message,e.prev=1,a.logEvent("DrmProxyRequest",{requestParams:a.config.requestParams,url:n,keySystem:a.keySystem}),i=(0,ys.u)(),e.next=6,a.handleSessionMessage(a.keySystem,n,a.config.requestParams,r);case 6:if(o=e.sent,u=o.response,a.logEvent("DrmProxyRequestEnd",{url:n,requestTime:Math.round(i()),keySystem:a.keySystem}),!a.isDestroyed){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,a.updateSession(u);case 13:e.next=20;break;case 15:e.prev=15,e.t0=e.catch(1),s=hs.from(e.t0),l=null!==(c=s.details)&&void 0!==c&&c.drmProxyError?s.code:du.DRM_SESSION_ERROR,a.onError(new hs(li(li({},s.toJSON()),{},{code:l,message:"Failed to handle session message: ".concat(s)})));case 20:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),!1),this.addEventListener(this.session,"error",(function(e){var t,r;a.onError(new hs(li(li({},e),{},{code:du.DRM_SESSION_ERROR,message:"Session error: ".concat(e.message),isFatal:null===(t=null===(r=e.details)||void 0===r?void 0:r.isFatal)||void 0===t||t})))})),e.prev=25,e.next=28,this.getMediaKeySessionInitData();case 28:return o=e.sent,e.next=31,this.generateRequest(this.session,o);case 31:e.next=37;break;case 33:return e.prev=33,e.t1=e.catch(25),this.onError(hs.from(e.t1,{code:du.DRM_UNKNOWN_ERROR})),e.abrupt("return");case 37:case"end":return e.stop()}}),e,this,[[11,15],[25,33]])}))),function(e){return l.apply(this,arguments)})},{key:"updateSession",value:(s=di(fi().mark((function e(t){var r;return fi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.keySystem!==pu.dn){e.next=5;break}return e.next=3,this.updateClearKeyLicense(t);case 3:e.next=7;break;case 5:return e.next=7,null===(r=this.session)||void 0===r?void 0:r.update(t);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"createClearKeyObject",value:function(e,t){return{kty:"oct",kid:e,k:t,alg:"A128KW"}}},{key:"updateClearKeyLicense",value:(c=di(fi().mark((function e(t){var r,n,i,o,a,u=this;return fi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.keySystem===pu.dn){e.next=2;break}return e.abrupt("return");case 2:return n=JSON.parse((new TextDecoder).decode(t)),i=n.keys,o=i.map((function(e){var t=e.key_id,r=e.key;return u.createClearKeyObject(t,r)})),a=(new TextEncoder).encode(JSON.stringify({keys:o})),e.next=8,null===(r=this.session)||void 0===r?void 0:r.update(a);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"generateRequest",value:(u=di(fi().mark((function e(t,r){var n,i,o,a;return fi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.initData,i=r.initDataType,!this.isDestroyed){e.next=3;break}return e.abrupt("return");case 3:if(n){e.next=6;break}return this.onError(new hs({code:du.DRM_NO_INIT_DATA,message:"No drm initialization data in initialization info",isFatal:!0})),e.abrupt("return");case 6:return e.prev=6,o=vu.P.fromBase64(n).buffer,e.next=10,t.generateRequest(i,o);case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(6),a=(0,po.K)(e.t0)?e.t0.message:(0,Ha.H)(e.t0)?e.t0:"",this.onError(hs.from(e.t0,{code:du.DRM_FAILED_TO_GENERATE_REQUEST,message:"Failed to generate request: ".concat(a,"}"),isFatal:!0}));case 16:case"end":return e.stop()}}),e,this,[[6,12]])}))),function(e,t){return u.apply(this,arguments)})},{key:"addEventListener",value:function(e,t,r,n){var i=(0,co.O)(e,t,r,n);return this.addDestroyHandler(i),i}},{key:"requestDrmProxy",value:function(e,t){var r=this;return this.requestSync.waitAndLock((function(){return new bs((function(n,i){(0,mu.W)(li(li({},e),{},{onSuccess:n,onError:function(e,n){var o,a=Bn(gu.x.fromUTF8(n.response),n.status),u=function(e,t){switch(e){case 429:return([500,2500,6500][t]||1e3)+1e3*Math.random();default:return 0}}(n.status,t);return r.requestSync.addLock((0,ms._)(u)),i(new hs({isFatal:(o=a).isFatal,code:ui(o),details:{drmProxyError:o.error},helpLink:o.helpLink}))}}))}))}))}},{key:"handleSessionMessage",value:function(e,t,r,n){var i=this,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=n,u=li({},r),c={method:"post",data:"",responseType:"arraybuffer",url:t,withCredentials:this.config.withCredentials};if(e===pu.xE){var s=this.unpackPlayReadyRequest(n);c.headers=li(li({},s.headers),c.headers),delete c.headers["Content-Type"],a=s.data}if(this.keySystem===pu.dn){var l=JSON.parse((new TextDecoder).decode(n));u.key_ids=l.kids}return c.data=function(){if(!r)return a;var e=li(li({},u),{},{rawLicenseRequestBase64:vu.P.toBase64(new Uint8Array(a))});return gu.x.toUTF8(JSON.stringify(e))}(),this.requestDrmProxy(c,o).catch((function(a){var u,c=hs.from(a),s=new hs(li(li({},c.toJSON()),{},{isFatal:c.isFatal||o>3,code:null!==(u=c.details)&&void 0!==u&&u.drmProxyError?c.code:du.DRM_SESSION_ERROR,message:"Failed to handle session message: ".concat(c)}));if(i.onError(s),s.isFatal)throw s;return i.handleSessionMessage(e,t,r,n,o+1)}))}},{key:"unpackPlayReadyRequest",value:function(e){var t=gu.x.fromUTF16(e,!0,!0),r={},n=e;if(!t.includes("PlayReadyKeyMessage"))return{headers:r,data:n};for(var i=(new DOMParser).parseFromString(t,"application/xml"),o=i.getElementsByTagName("HttpHeader"),a=0;a<o.length;++a){var u=o[a].getElementsByTagName("name")[0],c=o[a].getElementsByTagName("value")[0];u.textContent&&c.textContent&&(r[u.textContent]=c.textContent)}var s=i.getElementsByTagName("Challenge")[0];return s&&"base64encoded"===s.getAttribute("encoding")&&(n=vu.P.fromBase64(s.textContent).buffer),{headers:r,data:n}}},{key:"getDrmKeySystem",value:function(e){var t,r,n;return null!==(t=e.servers)&&void 0!==t&&t[pu.ly]?pu.ly:null!==(r=e.servers)&&void 0!==r&&r[pu.xE]?pu.xE:null!==(n=e.servers)&&void 0!==n&&n[pu.dn]?pu.dn:null}},{key:"destroy",value:(a=di(fi().mark((function e(){var r,n,i;return fi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yi(_i(t.prototype),"destroy",this).call(this),this.logEvent("DestroyDrmControllerCalled",void 0),this.currentDrmKeySystem=au.none,e.prev=3,i=ps(1e3).promise,e.next=7,bs.race([bs.all([null===(r=this.session)||void 0===r?void 0:r.closed,null===(n=this.session)||void 0===n?void 0:n.close()]),i]);case 7:e.next=11;break;case 9:e.prev=9,e.t0=e.catch(3);case 11:if(this.session=void 0,""!==this.video.src){e.next=20;break}return e.prev=13,e.next=16,this.video.setMediaKeys(null);case 16:e.next=20;break;case 18:e.prev=18,e.t1=e.catch(13);case 20:this.logEvent("DestroyDrmController",void 0);case 21:case"end":return e.stop()}}),e,this,[[3,9],[13,18]])}))),function(){return a.apply(this,arguments)})},{key:"logEvent",value:function(e,t){this.onEvent({name:e,data:t})}}],i=[{key:"getMediaKeySystemAccess",value:(o=di(fi().mark((function e(r){var n;return fi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.mediaKeySystemAccessMap.get(r))){e.next=3;break}return e.abrupt("return",n);case 3:return e.next=5,window.navigator.requestMediaKeySystemAccess(r,yu);case 5:return n=e.sent,t.mediaKeySystemAccessMap.set(r,n),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)})}],n&&pi(r.prototype,n),i&&pi(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Ao);Ei(gs,"mediaKeySystemAccessMap",new Map);var ws=r(88948),_s=function(e){function t(e,r,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(ji(i=u.call(this,e,r,n,(function(t){var r;null===(r=e.yaspDispatchEvent)||void 0===r||r.call(e,"yasp-event",t)}))),"drmInfoReceivedDeferred",new $a.B),i.addEventListener(i.video,"yasp-drmInfoReceived",(function(t){var r,n=t.detail.map((function(e){return e.keySystem}));null===(r=e.yaspDispatchEvent)||void 0===r||r.call(e,"yasp-event",{name:"DrmInfoReceived",data:{keySystems:n}}),i.drmInfoReceivedDeferred.resolve(t)}),{once:!0}),i}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ri(e,t)}(t,e);var r,n,i,o,a,u=Pi(t);return r=t,(n=[{key:"getMediaKeySessionInitData",value:(o=Si().mark((function e(){var t,r,n,i,o,a=this;return Si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.drmInfoReceivedDeferred.promise;case 2:if(n=e.sent,i=n.detail,o=i.find((function(e){return e.keySystem===a.keySystem}))){e.next=7;break}throw new hs({code:du.DRM_INIT_ERROR,message:"No drm initialization info",isFatal:!0});case 7:if(null!==(t=o.initData)&&void 0!==t&&null!==(r=t[0])&&void 0!==r&&r.initData){e.next=9;break}throw new hs({code:du.DRM_INIT_ERROR,message:"No drm initialization data in initialization info",isFatal:!0});case 9:return e.abrupt("return",o.initData[0]);case 10:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new ws((function(r,n){function i(e){ki(u,r,n,i,a,"next",e)}function a(e){ki(u,r,n,i,a,"throw",e)}var u=o.apply(e,t);i(void 0)}))},function(){return a.apply(this,arguments)})}])&&Ti(r.prototype,n),i&&Ti(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(gs),Es=r(88948),Os=self;Os.Ya=Os.Ya||{},Os.Ya.YaspVideoElement=ou,Os.Ya.YaspAudioElement=fu,Os.Ya.YaspDrmController=_s,Os.Ya.preloadYaspScripts=function(){return Es.resolve()},Os.Ya.applyFlags=function(e){var t=(0,uo.Y)((function(){return JSON.parse(e)}))||{};(0,pa.Vc)({flags:t})}},38636:function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n,i,o;"undefined"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView=function(e){return null!=e&&null!=e.__proto__&&e.__proto__.__proto__===Int8Array.prototype.__proto__}),"undefined"===typeof Math.imul&&(Math.imul=function(e,t){return(4294901760&e)*(65535&t)+(65535&e)*(0|t)|0}),i=[t],void 0===(o="function"===typeof(n=function(e){"use strict";function t(e){return e.length-1|0}function n(e,t){if(null==t){var r=0,n=e.length-1|0;if(r<=n)do{var i=r;if(r=r+1|0,null==e[i])return i}while(r<=n)}else{var o=0,a=e.length-1|0;if(o<=a)do{var u=o;if(o=o+1|0,at(t,e[u]))return u}while(o<=a)}return-1}function i(e,t,r,n,i,o,a){return t=t===$r?", ":t,r=r===$r?"":r,n=n===$r?"":n,i=i===$r?-1:i,o=o===$r?"...":o,a=a===$r?null:a,function(e,t,r,n,i,o,a,u){r=r===$r?", ":r,n=n===$r?"":n,i=i===$r?"":i,o=o===$r?-1:o,a=a===$r?"...":a,u=u===$r?null:u,t.a(n);var c=0,s=e.b();e:for(;s.c();){var l=s.d();if((c=c+1|0)>1&&t.a(r),!(o<0||c<=o))break e;N(t,l,u)}return o>=0&&c>o&&t.a(a),t.a(i),t}(e,Ae(),t,r,n,i,o,a).toString()}function o(e){return ae(e)}function a(e){return Gt(e,Me)?o(e):function(e,t){for(var r=e.b();r.c();){var n=r.d();t.g(n)}return t}(e,oe())}function u(e,t){return Gt(e,Me)?e.h(t):function(e,t){if(Gt(e,Ce))return e.i(t);for(var r=0,n=e.b();n.c();){var i=n.d();if(K(r),at(t,i))return r;r=r+1|0}return-1}(e,t)>=0}function c(){}function s(){wr=this}function l(){return null==wr&&new s,wr}function f(e){this.q_1=e}function h(e,t){return t===e?"(this Map)":Ve(t)}function d(e,t){var r;e:{for(var n=e.s().b();n.c();){var i=n.d();if(at(i.r(),t)){r=i;break e}}r=null}return r}function p(){_r=this}function y(){return null==_r&&new p,_r}function v(e){this.x_1=e,w.call(this)}function m(){y(),this.z_1=null,this.a1_1=null}function b(){Er=this}function g(){return null==Er&&new b,Er}function w(){g(),c.call(this)}function _(e,t){if(t<0)throw Jt("Deque is too big.");if(t<=e.k1_1.length)return U();if(e.k1_1===T().m1_1){var r,n=e;T();var i=(o=t)<(a=10)?a:o;return r=Ye(Array(i),null),n.k1_1=r,U()}var o,a;!function(e,t){var r=Ye(Array(t),null),n=e.k1_1,i=e.j1_1,o=e.k1_1.length;$(n,r,0,i,o);var a=e.k1_1,u=e.k1_1.length-e.j1_1|0,c=e.j1_1;$(a,r,u,0,c),e.j1_1=0,e.k1_1=r}(e,T().p1(e.k1_1.length,t))}function E(e,t){return t>=e.k1_1.length?t-e.k1_1.length|0:t}function O(e,r){return r===t(e.k1_1)?0:r+1|0}function S(e,r){return 0===r?t(e.k1_1):r-1|0}function k(){var e;Or=this,e=[],this.m1_1=e,this.n1_1=2147483639,this.o1_1=10}function T(){return null==Or&&new k,Or}function R(){T(),this.j1_1=0,this.l1_1=0}function P(){return null==Sr&&new x,Sr}function x(){Sr=this,this.c2_1=new yt(-1478467534,-1720727600)}function j(){kr=this}function A(e){return e.e()-1|0}function L(e,t){this.g2_1=e,this.h2_1=t}function I(){Tr=this}function N(e,t,r){var n;null!=r?e.a(r(t)):null==t||"string"===typeof(n=t)||Gt(n,C)?e.a(t):t instanceof De?e.r2(t.q2_1):e.a(Ve(t))}function D(e,t){this.k2_1=e,this.l2_1=t}function C(){}function M(){}function F(){}function B(){Rr=this}function U(){return null==Rr&&new B,Rr}function G(){Pr=this,this.MIN_VALUE=-2147483648,this.MAX_VALUE=2147483647,this.SIZE_BYTES=4,this.SIZE_BITS=32}function V(){xr=this,this.MIN_VALUE=5e-324,this.MAX_VALUE=17976931348623157e292,this.POSITIVE_INFINITY=1/0,this.NEGATIVE_INFINITY=-1/0,this.NaN=NaN,this.SIZE_BYTES=8,this.SIZE_BITS=64}function H(){return null==xr&&new V,xr}function Y(){}function q(e){for(var t=[],r=e.b();r.c();)t.push(r.d());return t}function W(e){return 0===(t=[e]).length?oe():ae(new L(t,!0));var t}function z(e){return void 0!==e.toArray?e.toArray():q(e)}function $(e,t,r,n,i){l().n(n,i,e.length);var o=i-n|0;if(l().n(r,r+o|0,t.length),Zr(t)&&Zr(e)){var a=e.subarray(n,i);t.set(a,r)}else if(e!==t||r<=n){var u=0;if(u<o)do{var c=u;u=u+1|0,t[r+c|0]=e[n+c|0]}while(u<o)}else{var s=o-1|0;if(0<=s)do{var f=s;s=s+-1|0,t[r+f|0]=e[n+f|0]}while(0<=s)}}function K(e){return e<0&&function(){throw hr("Index overflow has happened.")}(),e}function Z(){c.call(this)}function X(e){this.e3_1=e,this.c3_1=0,this.d3_1=-1}function J(){Z.call(this),this.a2_1=0}function Q(e){this.f3_1=e}function ee(e,t){this.g3_1=e,this.h3_1=t}function te(){ie.call(this)}function re(e){this.l3_1=e,ie.call(this)}function ne(){m.call(this),this.q3_1=null,this.r3_1=null}function ie(){Z.call(this)}function oe(){return e=st(ct(ce)),t=[],ce.call(e,t),e;var e,t}function ae(e){return function(e,t){var r;return r=z(e),ce.call(t,r),t}(e,st(ct(ce)))}function ue(e,t){return l().l(t,e.e()),t}function ce(e){J.call(this),this.t3_1=e,this.u3_1=!1}function se(e,r){if(function(){var e=jr;if(null!=e)return e;jr=!1;var t=[],r=0;if(r<600)do{var n=r;r=r+1|0,t.push(n)}while(r<600);t.sort(le);var i=1,o=t.length;if(i<o)do{var a=i;i=i+1|0;var u=t[a-1|0],c=t[a];if((3&u)===(3&c)&&u>=c)return!1}while(i<o);return jr=!0,!0}()){var n=(i=r,function(e,t){return i.compare(e,t)});e.sort(n)}else!function(e,t,r,n){var i,o=e.length;i=Ye(Array(o),null);var a=function e(t,r,n,i,o){if(n===i)return t;var a=(n+i|0)/2|0,u=e(t,r,n,a,o),c=e(t,r,a+1|0,i,o),s=u===r?t:r,l=n,f=a+1|0,h=n;if(h<=i)do{var d=h;if(h=h+1|0,l<=a&&f<=i){var p=u[l],y=c[f];o.compare(p,y)<=0?(s[d]=p,l=l+1|0):(s[d]=y,f=f+1|0)}else l<=a?(s[d]=u[l],l=l+1|0):(s[d]=c[f],f=f+1|0)}while(d!==i);return s}(e,i,t,r,n);if(a!==e){var u=t;if(u<=r)do{var c=u;u=u+1|0,e[c]=a[c]}while(c!==r)}}(e,0,t(e),r);var i}function le(e,t){return(3&e)-(3&t)|0}function fe(){Ar=this}function he(e){this.x3_1=e,te.call(this)}function de(e){return function(e,t){ne.call(t),pe.call(t),t.d4_1=e,t.e4_1=e.g4()}(new we((null==Ar&&new fe,Ar)),e),e}function pe(){this.f4_1=null}function ye(){}function ve(e,t){var r=be(e,e.s4_1.w3(t));if(null==r)return null;var n=r;if(null!=n&&Vt(n))return me(n,e,t);var i=n;return e.s4_1.v3(i.r(),t)?i:null}function me(e,t,r){var n;e:{for(var i=e,o=0,a=i.length;o<a;){var u=i[o];if(o=o+1|0,t.s4_1.v3(u.r(),r)){n=u;break e}}n=null}return n}function be(e,t){var r=e.t4_1[t];return void 0===r?null:r}function ge(e){this.r4_1=e,this.k4_1=-1,this.l4_1=Object.keys(e.t4_1),this.m4_1=-1,this.n4_1=null,this.o4_1=!1,this.p4_1=-1,this.q4_1=null}function we(e){this.s4_1=e,this.t4_1=this.v4(),this.u4_1=0}function _e(){}function Ee(e){this.y4_1=e,this.w4_1=null,this.x4_1=null,this.x4_1=this.y4_1.j5_1.g5_1}function Oe(e,t,r){this.o5_1=e,ee.call(this,t,r),this.m5_1=null,this.n5_1=null}function Se(e){this.j5_1=e,te.call(this)}function ke(e,t){e.m5_1===e?t.g5_1=null:(t.g5_1===e&&(t.g5_1=e.m5_1),ht(e.m5_1).n5_1=e.n5_1,ht(e.n5_1).m5_1=e.m5_1),e.m5_1=null,e.n5_1=null}function Te(e){return de(e),Pe.call(e),e.h5_1=de(st(ct(pe))),e}function Re(){return Te(st(ct(Pe)))}function Pe(){this.g5_1=null,this.i5_1=!1}function xe(){}function je(e){return!(e===e)}function Ae(){return e=st(ct(Le)),Le.call(e,""),e;var e}function Le(e){this.q5_1=void 0!==e?e:""}function Ie(e,t){return e-t|0}function Ne(){Lr=this,this.r5_1=0,this.s5_1=65535,this.t5_1=55296,this.u5_1=56319,this.v5_1=56320,this.w5_1=57343,this.x5_1=55296,this.y5_1=57343,this.z5_1=2,this.a6_1=16}function De(e){null==Lr&&new Ne,this.q2_1=e}function Ce(){}function Me(){}function Fe(){}function Be(){}function Ue(){}function Ge(){}function Ve(e){var t=null==e?null:it(e);return null==t?"null":t}function He(e){for(var t=1,r=[],n=e,i=0,o=n.length;i<o;){var a=n[i];i=i+1|0;var u=t,c=a.prototype.$imask$,s=null==c?a.$imask$:c;null!=s&&(r.push(s),u=s.length);var l,f=a.$metadata$.iid;null==f?l=null:(d=f,p=void 0,y=void 0,v=void 0,p=new Int32Array(1+(d>>5)|0),v=1<<(31&d),p[y=d>>5]=p[y]|v,l=p);var h=l;null!=h&&(r.push(h),u=Math.max(u,h.length)),u>t&&(t=u)}var d,p,y,v;return function(e,t){for(var r=0,n=e,i=new Int32Array(n);r<n;){for(var o,a=r,u=0,c=t,s=0,l=c.length;s<l;){var f=c[s];s=s+1|0,a<f.length&&(u|=f[a])}o=u,i[a]=o,r=r+1|0}return i}(t,r)}function Ye(e,t){var r=0,n=e.length-1|0;if(r<=n)do{var i=r;r=r+1|0,e[i]=t}while(i!==n);return e}function qe(e){return new We(e)}function We(e){this.d6_1=e,this.c6_1=0}function ze(){return Je(),Ir}function $e(){return Je(),Nr}function Ke(){return Je(),Dr}function Ze(){return Je(),Cr}function Xe(e){return Je(),(0|e)===e?(t=e)instanceof yt?t.q6():function(e){return e>2147483647?2147483647:e<-2147483648?-2147483648:0|e}(t):($e()[0]=e,Kr(Ke()[(Je(),Mr)],31)+Ke()[Ze()]|0);var t}function Je(){if(Fr);else{Fr=!0,Ir=new ArrayBuffer(8);var e=new Float64Array(ze());Nr=e;new Float32Array(ze());var t,r=new Int32Array(ze());Dr=r,$e()[0]=-1,t=0!==Ke()[0]?1:0,Cr=t,Mr=1-Ze()|0}}function Qe(e){return it(e)}function et(e,t){var n;switch(r(e)){case"number":n="number"===typeof t?tt(e,t):t instanceof yt?tt(e,t.g6()):rt(e,t);break;case"string":case"boolean":n=rt(e,t);break;default:n=function(e,t){return e.s2(t)}(e,t)}return n}function tt(e,t){var r;if(e<t)r=-1;else if(e>t)r=1;else if(e===t){var n;if(0!==e)n=0;else{var i=1/e;n=i===1/t?0:i<0?-1:1}r=n}else r=e!==e?t!==t?0:1:-1;return r}function rt(e,t){return e<t?-1:e>t?1:0}function nt(e){if(!("kotlinHashCodeValue$"in e)){var t=0|4294967296*Math.random(),r=new Object;r.value=t,r.enumerable=!1,Object.defineProperty(e,"kotlinHashCodeValue$",r)}return e.kotlinHashCodeValue$}function it(e){return null==e?"null":function(e){return!!Bt(e)||Zr(e)}(e)?"[...]":e.toString()}function ot(e){if(null==e)return 0;var t;switch(r(e)){case"object":t="function"===typeof e.hashCode?e.hashCode():nt(e);break;case"function":t=nt(e);break;case"number":t=Xe(e);break;case"boolean":t=e?1:0;break;default:t=function(e){var t=0,r=e.length,n=0,i=r-1|0;if(n<=i)do{var o=n;n=n+1|0;var a=e.charCodeAt(o);t=Kr(t,31)+a|0}while(o!==i);return t}(String(e))}return t}function at(e,t){if(null==e)return null==t;if(null==t)return!1;if("object"===r(e)&&"function"===typeof e.equals)return e.equals(t);if(e!==e)return t!==t;if("number"===typeof e&&"number"===typeof t){var n;if(e===t)n=0!==e||1/e===1/t;else n=!1;return n}return e===t}function ut(e,t){null!=Error.captureStackTrace?Error.captureStackTrace(e,t):e.stack=(new Error).stack}function ct(e){return e.prototype}function st(e){return Object.create(e)}function lt(e,t,r){Error.call(e),function(e,t,r){if(!ft(e,"message")){var n;if(null==t){var i;if(null!==t){var o=r,a=null==o?null:o.toString();i=null==a?$r:a}else i=$r;n=i}else n=t;e.message=n}ft(e,"cause")||(e.cause=r),e.name=Object.getPrototypeOf(e).constructor.name}(e,t,r)}function ft(e,t){return Object.getPrototypeOf(e).hasOwnProperty(t)}function ht(e){var t;return null==e?function(){throw pr()}():t=e,t}function dt(){throw vr()}function pt(){Br=this,this.h6_1=new yt(0,-2147483648),this.i6_1=new yt(-1,2147483647),this.j6_1=8,this.k6_1=64}function yt(e,t){null==Br&&new pt,F.call(this),this.e6_1=e,this.f6_1=t}function vt(){return Ct(),Ur}function mt(){return Ct(),Gr}function bt(){return Ct(),Vr}function gt(){return Ct(),Yr}function wt(){return Ct(),qr}function _t(e,t){if(Ct(),Tt(e,t))return 0;var r=Pt(e),n=Pt(t);return r&&!n?-1:!r&&n?1:Pt(Ot(e,t))?-1:1}function Et(e,t){Ct();var r=e.f6_1>>>16|0,n=65535&e.f6_1,i=e.e6_1>>>16|0,o=65535&e.e6_1,a=t.f6_1>>>16|0,u=65535&t.f6_1,c=t.e6_1>>>16|0,s=0,l=0,f=0,h=0;return s=(s=s+((l=(l=l+((f=(f=f+((h=h+(o+(65535&t.e6_1)|0)|0)>>>16|0)|0)+(i+c|0)|0)>>>16|0)|0)+(n+u|0)|0)>>>16|0)|0)+(r+a|0)|0,new yt((f&=65535)<<16|(h&=65535),(s&=65535)<<16|(l&=65535))}function Ot(e,t){return Ct(),Et(e,t.o6())}function St(e,t){if(Ct(),xt(e))return vt();if(xt(t))return vt();if(Tt(e,gt()))return jt(t)?gt():vt();if(Tt(t,gt()))return jt(e)?gt():vt();if(Pt(e))return Pt(t)?St(At(e),At(t)):At(St(At(e),t));if(Pt(t))return At(St(e,At(t)));if(Lt(e,wt())&&Lt(t,wt()))return It(kt(e)*kt(t));var r=e.f6_1>>>16|0,n=65535&e.f6_1,i=e.e6_1>>>16|0,o=65535&e.e6_1,a=t.f6_1>>>16|0,u=65535&t.f6_1,c=t.e6_1>>>16|0,s=65535&t.e6_1,l=0,f=0,h=0,d=0;return h=h+((d=d+Kr(o,s)|0)>>>16|0)|0,d&=65535,f=(f=f+((h=h+Kr(i,s)|0)>>>16|0)|0)+((h=(h&=65535)+Kr(o,c)|0)>>>16|0)|0,h&=65535,l=(l=(l=l+((f=f+Kr(n,s)|0)>>>16|0)|0)+((f=(f&=65535)+Kr(i,c)|0)>>>16|0)|0)+((f=(f&=65535)+Kr(o,u)|0)>>>16|0)|0,f&=65535,l=l+(((Kr(r,s)+Kr(n,c)|0)+Kr(i,u)|0)+Kr(o,a)|0)|0,new yt(h<<16|d,(l&=65535)<<16|f)}function kt(e){return Ct(),4294967296*e.f6_1+function(e){return Ct(),e.e6_1>=0?e.e6_1:4294967296+e.e6_1}(e)}function Tt(e,t){return Ct(),e.f6_1===t.f6_1&&e.e6_1===t.e6_1}function Rt(e){return Ct(),new yt(e,e<0?-1:0)}function Pt(e){return Ct(),e.f6_1<0}function xt(e){return Ct(),0===e.f6_1&&0===e.e6_1}function jt(e){return Ct(),1===(1&e.e6_1)}function At(e){return Ct(),e.o6()}function Lt(e,t){return Ct(),_t(e,t)<0}function It(e){return Ct(),je(e)?vt():e<=-0x8000000000000000?gt():e+1>=0x8000000000000000?(Ct(),Hr):e<0?At(It(-e)):new yt(0|e%4294967296,0|e/4294967296)}function Nt(e,t){return Ct(),_t(e,t)>0}function Dt(e,t){return Ct(),_t(e,t)>=0}function Ct(){Wr||(Wr=!0,Ur=Rt(0),Gr=Rt(1),Vr=Rt(-1),Hr=new yt(-1,2147483647),Yr=new yt(0,-2147483648),qr=Rt(16777216))}function Mt(e,t,r,n){return Ft("class",e,t,r,n,null)}function Ft(e,t,r,n,i,o){return{kind:e,simpleName:t,associatedObjectKey:r,associatedObjects:n,suspendArity:i,$kClass$:$r,iid:o}}function Bt(e){return Array.isArray(e)}function Ut(e,t,r,n,i,o,a,u){null!=n&&(e.prototype=Object.create(n.prototype),e.prototype.constructor=e);var c=r(t,o,a,null==u?[]:u);e.$metadata$=c,null!=i&&((null!=c.iid?e:e.prototype).$imask$=He(i))}function Gt(e,t){return function(e,t){var r=e.$imask$,n=r;return null!=n&&function(e,t){var r=t>>5;if(r>e.length)return!1;var n=1<<(31&t);return!(0===(e[r]&n))}(n,t)}(e,t.$metadata$.iid)}function Vt(e){return!!Bt(e)&&!e.$type$}function Ht(e){var t;switch(r(e)){case"string":case"number":case"boolean":case"function":t=!0;break;default:t=e instanceof Object}return t}function Yt(e){var t,n=r(e);return"string"===n||"boolean"===n||"number"===typeof(t=e)||t instanceof yt||Gt(e,M)}function qt(e,t,r,n){return Ft("interface",e,t,r,n,function(){null==zr&&(zr=0);var e=Wt();zr=e+1|0;var t=Wt();return t}())}function Wt(){if(null!=zr)return zr;!function(e){throw br("lateinit property "+e+" has not been initialized")}("iid")}function zt(e,t,r,n){return Ft("object",e,t,r,n,null)}function $t(e){var t=function(e,t){return ir(e,t),Kt.call(t),t}(e,st(ct(Kt)));return ut(t,$t),t}function Kt(){ut(this,Kt)}function Zt(e){var t=function(e,t){return ir(e,t),Xt.call(t),t}(e,st(ct(Xt)));return ut(t,Zt),t}function Xt(){ut(this,Xt)}function Jt(e){var t=function(e,t){return ir(e,t),Qt.call(t),t}(e,st(ct(Qt)));return ut(t,Jt),t}function Qt(){ut(this,Qt)}function er(e,t){return lt(t,e),rr.call(t),t}function tr(e){var t=er(e,st(ct(rr)));return ut(t,tr),t}function rr(){ut(this,rr)}function nr(e){return function(e){lt(e),rr.call(e)}(e),or.call(e),e}function ir(e,t){return er(e,t),or.call(t),t}function or(){ut(this,or)}function ar(){var e,t=(nr(e=st(ct(cr))),cr.call(e),e);return ut(t,ar),t}function ur(e){var t=function(e,t){return ir(e,t),cr.call(t),t}(e,st(ct(cr)));return ut(t,ur),t}function cr(){ut(this,cr)}function sr(){var e,t=(nr(e=st(ct(fr))),fr.call(e),e);return ut(t,sr),t}function lr(e){var t=function(e,t){return ir(e,t),fr.call(t),t}(e,st(ct(fr)));return ut(t,lr),t}function fr(){ut(this,fr)}function hr(e){var t=function(e,t){return ir(e,t),dr.call(t),t}(e,st(ct(dr)));return ut(t,hr),t}function dr(){ut(this,dr)}function pr(){var e,t=(nr(e=st(ct(yr))),yr.call(e),e);return ut(t,pr),t}function yr(){ut(this,yr)}function vr(){var e,t=(nr(e=st(ct(mr))),mr.call(e),e);return ut(t,vr),t}function mr(){ut(this,mr)}function br(e){var t=function(e,t){return ir(e,t),gr.call(t),t}(e,st(ct(gr)));return ut(t,br),t}function gr(){ut(this,gr)}var wr,_r,Er,Or,Sr,kr,Tr,Rr,Pr,xr,jr,Ar,Lr,Ir,Nr,Dr,Cr,Mr,Fr,Br,Ur,Gr,Vr,Hr,Yr,qr,Wr,zr,$r,Kr=Math.imul,Zr=ArrayBuffer.isView;return Ut(Me,"Collection",qt),Ut(c,"AbstractCollection",Mt,$r,[Me]),Ut(s,"Companion",zt),Ut(f,$r,Mt),Ut(p,"Companion",zt),Ut(Ge,"Set",qt,$r,[Me]),Ut(w,"AbstractSet",Mt,c,[c,Ge]),Ut(v,$r,Mt,w),Ut(Be,"Map",qt),Ut(m,"AbstractMap",Mt,$r,[Be]),Ut(b,"Companion",zt),Ut(k,"Companion",zt),Ut(Z,"AbstractMutableCollection",Mt,c,[c,Me]),Ut(Ce,"List",qt,$r,[Me]),Ut(J,"AbstractMutableList",Mt,Z,[Z,Ce,Me]),Ut(R,"ArrayDeque",Mt,J),Ut(x,"EmptyList",zt,$r,[Ce]),Ut(j,"EmptyIterator",zt),Ut(L,"ArrayAsCollection",Mt,$r,[Me]),Ut(Y,"Comparator",qt),Ut(I,"ReverseOrderComparator",zt,$r,[Y]),Ut(D,"Pair",Mt),Ut(C,"CharSequence",qt),Ut(M,"Comparable",qt),Ut(F,"Number",Mt),Ut(B,"Unit",zt),Ut(G,"IntCompanionObject",zt),Ut(V,"DoubleCompanionObject",zt),Ut(X,"IteratorImpl",Mt),Ut(Q,$r,Mt),Ut(Fe,"Entry",qt),Ut(Ue,"MutableEntry",qt,$r,[Fe]),Ut(ee,"SimpleEntry",Mt,$r,[Ue]),Ut(ie,"AbstractMutableSet",Mt,Z,[Z,Ge,Me]),Ut(te,"AbstractEntrySet",Mt,ie),Ut(re,$r,Mt,ie),Ut(ne,"AbstractMutableMap",Mt,m,[m,Be]),Ut(ce,"ArrayList",Mt,J,[J,Ce,Me]),Ut(fe,"HashCode",zt),Ut(he,"EntrySet",Mt,te),Ut(pe,"HashMap",Mt,ne,[ne,Be]),Ut(ye,"HashSet",Mt,ie,[ie,Ge,Me]),Ut(ge,$r,Mt),Ut(_e,"InternalMap",qt),Ut(we,"InternalHashCodeMap",Mt,$r,[_e]),Ut(Ee,"EntryIterator",Mt),Ut(Oe,"ChainEntry",Mt,ee),Ut(Se,"EntrySet",Mt,te),Ut(Pe,"LinkedHashMap",Mt,pe,[pe,Be]),Ut(xe,"LinkedHashSet",Mt,ye,[ye,Ge,Me]),Ut(Le,"StringBuilder",Mt,$r,[C]),Ut(Ne,"Companion",zt),Ut(De,"Char",Mt,$r,[M]),Ut(We,$r,Mt),Ut(pt,"Companion",zt),Ut(yt,"Long",Mt,F,[F,M]),Ut(rr,"Exception",Mt,Error),Ut(or,"RuntimeException",Mt,rr),Ut(Kt,"IllegalArgumentException",Mt,or),Ut(Xt,"IndexOutOfBoundsException",Mt,or),Ut(Qt,"IllegalStateException",Mt,or),Ut(cr,"NoSuchElementException",Mt,or),Ut(fr,"UnsupportedOperationException",Mt,or),Ut(dr,"ArithmeticException",Mt,or),Ut(yr,"NullPointerException",Mt,or),Ut(mr,"ClassCastException",Mt,or),Ut(gr,"UninitializedPropertyAccessException",Mt,or),ct(c).h=function(e){var t;e:if(Gt(this,Me)&&this.j())t=!1;else{for(var r=this.b();r.c();)if(at(r.d(),e)){t=!0;break e}t=!1}return t},ct(c).k=function(e){var t;e:if(Gt(e,Me)&&e.j())t=!0;else{for(var r=e.b();r.c();){var n=r.d();if(!this.h(n)){t=!1;break e}}t=!0}return t},ct(c).j=function(){return 0===this.e()},ct(c).toString=function(){return i(this,", ","[","]",$r,$r,(e=this,function(t){return t===e?"(this Collection)":Ve(t)}));var e},ct(c).toArray=function(){return q(this)},ct(s).l=function(e,t){if(e<0||e>=t)throw Zt("index: "+e+", size: "+t)},ct(s).m=function(e,t){if(e<0||e>t)throw Zt("index: "+e+", size: "+t)},ct(s).n=function(e,t,r){if(e<0||t>r)throw Zt("fromIndex: "+e+", toIndex: "+t+", size: "+r);if(e>t)throw $t("fromIndex: "+e+" > toIndex: "+t)},ct(s).o=function(e){for(var t=1,r=e.b();r.c();){var n=r.d(),i=Kr(31,t),o=null==n?null:ot(n);t=i+(null==o?0:o)|0}return t},ct(s).p=function(e,t){if(e.e()!==t.e())return!1;for(var r=t.b(),n=e.b();n.c();)if(!at(n.d(),r.d()))return!1;return!0},ct(f).c=function(){return this.q_1.c()},ct(f).d=function(){return this.q_1.d().r()},ct(p).t=function(e){var t=e.r(),r=null==t?null:ot(t),n=null==r?0:r,i=e.u(),o=null==i?null:ot(i);return n^(null==o?0:o)},ct(p).v=function(e){return Ve(e.r())+"="+Ve(e.u())},ct(p).w=function(e,t){return!(null==t||!Gt(t,Fe))&&!!at(e.r(),t.r())&&at(e.u(),t.u())},ct(v).y=function(e){return this.x_1.b1(e)},ct(v).h=function(e){return!(null!=e&&!Ht(e))&&this.y(null==e||Ht(e)?e:dt())},ct(v).b=function(){return new f(this.x_1.s().b())},ct(v).e=function(){return this.x_1.e()},ct(m).b1=function(e){return!(null==d(this,e))},ct(m).d1=function(e){if(null==e||!Gt(e,Fe))return!1;var t=e.r(),r=e.u(),n=(Gt(this,Be)?this:dt()).e1(t);return!!at(r,n)&&!(null==n&&!(Gt(this,Be)?this:dt()).b1(t))},ct(m).equals=function(e){if(e===this)return!0;if(null==e||!Gt(e,Be))return!1;if(this.e()!==e.e())return!1;var t;e:{var r=e.s();if(Gt(r,Me)&&r.j())t=!0;else{for(var n=r.b();n.c();){var i=n.d();if(!this.d1(i)){t=!1;break e}}t=!0}}return t},ct(m).e1=function(e){var t=d(this,e);return null==t?null:t.u()},ct(m).hashCode=function(){return ot(this.s())},ct(m).j=function(){return 0===this.e()},ct(m).e=function(){return this.s().e()},ct(m).f1=function(){return null==this.z_1&&(this.z_1=new v(this)),ht(this.z_1)},ct(m).toString=function(){var e;return i(this.s(),", ","{","}",$r,$r,(e=this,function(t){return e.c1(t)}))},ct(m).c1=function(e){return h(this,e.r())+"="+h(this,e.u())},ct(b).g1=function(e){for(var t=0,r=e.b();r.c();){var n=r.d(),i=t,o=null==n?null:ot(n);t=i+(null==o?0:o)|0}return t},ct(b).h1=function(e,t){return e.e()===t.e()&&e.k(t)},ct(w).equals=function(e){return e===this||!(null==e||!Gt(e,Ge))&&g().h1(this,e)},ct(w).hashCode=function(){return g().g1(this)},ct(k).p1=function(e,t){var r=e+(e>>1)|0;return(r-t|0)<0&&(r=t),(r-2147483639|0)>0&&(r=t>2147483639?(null==Pr&&new G,Pr).MAX_VALUE:2147483639),r},ct(R).e=function(){return this.l1_1},ct(R).j=function(){return 0===this.l1_1},ct(R).q1=function(e){_(this,this.l1_1+1|0),this.j1_1=S(this,this.j1_1),this.k1_1[this.j1_1]=e,this.l1_1=this.l1_1+1|0},ct(R).r1=function(e){_(this,this.l1_1+1|0);var t=this.k1_1,r=this.l1_1;t[E(this,this.j1_1+r|0)]=e,this.l1_1=this.l1_1+1|0},ct(R).s1=function(){if(this.j())throw ur("ArrayDeque is empty.");var e=this.j1_1,t=this.k1_1[e],r=null==t||Ht(t)?t:dt();return this.k1_1[this.j1_1]=null,this.j1_1=O(this,this.j1_1),this.l1_1=this.l1_1-1|0,r},ct(R).t1=function(){return this.j()?null:this.s1()},ct(R).u1=function(){if(this.j())throw ur("ArrayDeque is empty.");var e=A(this),t=E(this,this.j1_1+e|0),r=this.k1_1[t],n=null==r||Ht(r)?r:dt();return this.k1_1[t]=null,this.l1_1=this.l1_1-1|0,n},ct(R).g=function(e){return this.r1(e),!0},ct(R).v1=function(e,t){if(l().m(e,this.l1_1),e===this.l1_1)return this.r1(t),U();if(0===e)return this.q1(t),U();_(this,this.l1_1+1|0);var r=E(this,this.j1_1+e|0);if(e<(this.l1_1+1|0)>>1){var n=S(this,r),i=S(this,this.j1_1);if(n>=this.j1_1){this.k1_1[i]=this.k1_1[this.j1_1];var o=this.k1_1,a=this.k1_1;$(o,a,this.j1_1,this.j1_1+1|0,n+1|0)}else{var u=this.k1_1,c=this.k1_1;$(u,c,this.j1_1-1|0,this.j1_1,this.k1_1.length),this.k1_1[this.k1_1.length-1|0]=this.k1_1[0];var s=this.k1_1,f=this.k1_1;$(s,f,0,1,n+1|0)}this.k1_1[n]=t,this.j1_1=i}else{var h=this.l1_1,d=E(this,this.j1_1+h|0);if(r<d){var p=this.k1_1,y=this.k1_1;$(p,y,r+1|0,r,d)}else{var v=this.k1_1,m=this.k1_1;$(v,m,1,0,d),this.k1_1[0]=this.k1_1[this.k1_1.length-1|0];var b=this.k1_1,g=this.k1_1;$(b,g,r+1|0,r,this.k1_1.length-1|0)}this.k1_1[r]=t}this.l1_1=this.l1_1+1|0},ct(R).f=function(e){l().l(e,this.l1_1);var t=E(this,this.j1_1+e|0),r=this.k1_1[t];return null==r||Ht(r)?r:dt()},ct(R).w1=function(e,t){l().l(e,this.l1_1);var r=E(this,this.j1_1+e|0),n=this.k1_1[r],i=null==n||Ht(n)?n:dt();return this.k1_1[r]=t,i},ct(R).h=function(e){return!(-1===this.i(e))},ct(R).i=function(e){var t=this.l1_1,r=E(this,this.j1_1+t|0);if(this.j1_1<r){var n=this.j1_1;if(n<r)do{var i=n;if(n=n+1|0,at(e,this.k1_1[i]))return i-this.j1_1|0}while(n<r)}else if(this.j1_1>=r){var o=this.j1_1,a=this.k1_1.length;if(o<a)do{var u=o;if(o=o+1|0,at(e,this.k1_1[u]))return u-this.j1_1|0}while(o<a);var c=0;if(c<r)do{var s=c;if(c=c+1|0,at(e,this.k1_1[s]))return(s+this.k1_1.length|0)-this.j1_1|0}while(c<r)}return-1},ct(R).x1=function(e){if(l().l(e,this.l1_1),e===A(this))return this.u1();if(0===e)return this.s1();var t=E(this,this.j1_1+e|0),r=this.k1_1[t],n=null==r||Ht(r)?r:dt();if(e<this.l1_1>>1){if(t>=this.j1_1){var i=this.k1_1,o=this.k1_1;$(i,o,this.j1_1+1|0,this.j1_1,t)}else{var a=this.k1_1,u=this.k1_1;$(a,u,1,0,t),this.k1_1[0]=this.k1_1[this.k1_1.length-1|0];var c=this.k1_1,s=this.k1_1;$(c,s,this.j1_1+1|0,this.j1_1,this.k1_1.length-1|0)}this.k1_1[this.j1_1]=null,this.j1_1=O(this,this.j1_1)}else{var f=A(this),h=E(this,this.j1_1+f|0);if(t<=h){var d=this.k1_1,p=this.k1_1;$(d,p,t,t+1|0,h+1|0)}else{var y=this.k1_1,v=this.k1_1;$(y,v,t,t+1|0,this.k1_1.length),this.k1_1[this.k1_1.length-1|0]=this.k1_1[0];var m=this.k1_1,b=this.k1_1;$(m,b,0,1,h+1|0)}this.k1_1[h]=null}return this.l1_1=this.l1_1-1|0,n},ct(R).y1=function(e){var t,r=e.length>=this.l1_1?e:(t=this.l1_1,Ye(Array(t),null)),n=Vt(r)?r:dt(),i=this.l1_1,o=E(this,this.j1_1+i|0);return this.j1_1<o?$(this.k1_1,n,0,this.j1_1,o):this.j()||($(this.k1_1,n,0,this.j1_1,this.k1_1.length),$(this.k1_1,n,this.k1_1.length-this.j1_1|0,0,o)),n.length>this.l1_1&&(n[this.l1_1]=null),Vt(n)?n:dt()},ct(R).z1=function(){var e,t=this.l1_1;return e=Ye(Array(t),null),this.y1(e)},ct(R).toArray=function(){return this.z1()},ct(x).equals=function(e){return!(null==e||!Gt(e,Ce))&&e.j()},ct(x).hashCode=function(){return 1},ct(x).toString=function(){return"[]"},ct(x).e=function(){return 0},ct(x).j=function(){return!0},ct(x).d2=function(e){return!1},ct(x).h=function(e){return!1},ct(x).e2=function(e){return e.j()},ct(x).k=function(e){return this.e2(e)},ct(x).f=function(e){throw Zt("Empty list doesn't contain element at index "+e+".")},ct(x).f2=function(e){return-1},ct(x).i=function(e){return-1},ct(x).b=function(){return null==kr&&new j,kr},ct(j).c=function(){return!1},ct(j).d=function(){throw ar()},ct(L).e=function(){return this.g2_1.length},ct(L).j=function(){return 0===this.g2_1.length},ct(L).i2=function(e){return function(e,t){return n(e,t)>=0}(this.g2_1,e)},ct(L).h=function(e){return!(null!=e&&!Ht(e))&&this.i2(null==e||Ht(e)?e:dt())},ct(L).j2=function(e){var t;e:if(Gt(e,Me)&&e.j())t=!0;else{for(var r=e.b();r.c();){var n=r.d();if(!this.i2(n)){t=!1;break e}}t=!0}return t},ct(L).k=function(e){return this.j2(e)},ct(L).b=function(){return qe(this.g2_1)},ct(I).p2=function(e,t){return et(t,e)},ct(I).compare=function(e,t){var r=null!=e&&Yt(e)?e:dt();return this.p2(r,null!=t&&Yt(t)?t:dt())},ct(D).toString=function(){return"("+this.k2_1+", "+this.l2_1+")"},ct(D).m2=function(){return this.k2_1},ct(D).n2=function(){return this.l2_1},ct(D).hashCode=function(){var e=null==this.k2_1?0:ot(this.k2_1);return e=Kr(e,31)+(null==this.l2_1?0:ot(this.l2_1))|0},ct(D).equals=function(e){if(this===e)return!0;if(!(e instanceof D))return!1;var t=e instanceof D?e:dt();return!!at(this.k2_1,t.k2_1)&&!!at(this.l2_1,t.l2_1)},ct(B).toString=function(){return"kotlin.Unit"},ct(G).t2=function(){return this.MIN_VALUE},ct(G).u2=function(){return this.MAX_VALUE},ct(G).v2=function(){return this.SIZE_BYTES},ct(G).w2=function(){return this.SIZE_BITS},ct(V).t2=function(){return this.MIN_VALUE},ct(V).u2=function(){return this.MAX_VALUE},ct(V).x2=function(){return this.POSITIVE_INFINITY},ct(V).y2=function(){return this.NEGATIVE_INFINITY},ct(V).z2=function(){return this.NaN},ct(V).v2=function(){return this.SIZE_BYTES},ct(V).w2=function(){return this.SIZE_BITS},ct(Z).a3=function(e){this.b2();for(var t=this.b();t.c();)if(at(t.d(),e))return t.b3(),!0;return!1},ct(Z).toJSON=function(){return this.toArray()},ct(Z).b2=function(){},ct(X).c=function(){return this.c3_1<this.e3_1.e()},ct(X).d=function(){if(!this.c())throw ar();var e=this.c3_1;return this.c3_1=e+1|0,this.d3_1=e,this.e3_1.f(this.d3_1)},ct(X).b3=function(){if(-1===this.d3_1)throw Jt(it("Call next() or previous() before removing element from the iterator."));this.e3_1.x1(this.d3_1),this.c3_1=this.d3_1,this.d3_1=-1},ct(J).g=function(e){return this.b2(),this.v1(this.e(),e),!0},ct(J).b=function(){return new X(this)},ct(J).h=function(e){return this.i(e)>=0},ct(J).i=function(e){var t=0,r=A(this);if(t<=r)do{var n=t;if(t=t+1|0,at(this.f(n),e))return n}while(n!==r);return-1},ct(J).equals=function(e){return e===this||!(null==e||!Gt(e,Ce))&&l().p(this,e)},ct(J).hashCode=function(){return l().o(this)},ct(Q).c=function(){return this.f3_1.c()},ct(Q).d=function(){return this.f3_1.d().r()},ct(Q).b3=function(){return this.f3_1.b3()},ct(ee).r=function(){return this.g3_1},ct(ee).u=function(){return this.h3_1},ct(ee).i3=function(e){var t=this.h3_1;return this.h3_1=e,t},ct(ee).hashCode=function(){return y().t(this)},ct(ee).toString=function(){return y().v(this)},ct(ee).equals=function(e){return y().w(this,e)},ct(te).h=function(e){return this.j3(e)},ct(te).a3=function(e){return this.k3(e)},ct(re).m3=function(e){throw lr("Add is not supported on keys")},ct(re).g=function(e){return this.m3(null==e||Ht(e)?e:dt())},ct(re).y=function(e){return this.l3_1.b1(e)},ct(re).h=function(e){return!(null!=e&&!Ht(e))&&this.y(null==e||Ht(e)?e:dt())},ct(re).b=function(){return new Q(this.l3_1.s().b())},ct(re).n3=function(e){return this.b2(),!!this.l3_1.b1(e)&&(this.l3_1.n3(e),!0)},ct(re).a3=function(e){return!(null!=e&&!Ht(e))&&this.n3(null==e||Ht(e)?e:dt())},ct(re).e=function(){return this.l3_1.e()},ct(re).b2=function(){return this.l3_1.b2()},ct(ne).f1=function(){return null==this.q3_1&&(this.q3_1=new re(this)),ht(this.q3_1)},ct(ne).n3=function(e){this.b2();for(var t=this.s().b();t.c();){var r=t.d();if(at(e,r.r())){var n=r.u();return t.b3(),n}}return null},ct(ne).b2=function(){},ct(ie).equals=function(e){return e===this||!(null==e||!Gt(e,Ge))&&g().h1(this,e)},ct(ie).hashCode=function(){return g().g1(this)},ct(ce).e=function(){return this.t3_1.length},ct(ce).f=function(e){var t=this.t3_1[ue(this,e)];return null==t||Ht(t)?t:dt()},ct(ce).w1=function(e,t){this.b2(),ue(this,e);var r=this.t3_1[e];this.t3_1[e]=t;var n=r;return null==n||Ht(n)?n:dt()},ct(ce).g=function(e){this.b2(),this.t3_1.push(e);var t=this.a2_1;return this.a2_1=t+1|0,!0},ct(ce).v1=function(e,t){this.b2(),this.t3_1.splice(function(e,t){return l().m(t,e.e()),t}(this,e),0,t);var r=this.a2_1;this.a2_1=r+1|0},ct(ce).x1=function(e){this.b2(),ue(this,e);var t=this.a2_1;return this.a2_1=t+1|0,e===A(this)?this.t3_1.pop():this.t3_1.splice(e,1)[0]},ct(ce).i=function(e){return n(this.t3_1,e)},ct(ce).toString=function(){return e=this.t3_1,t=(t=", ")===$r?", ":t,r=(r="[")===$r?"":r,n=(n="]")===$r?"":n,i=(i=$r)===$r?-1:i,o=(o=$r)===$r?"...":o,a=(a=Qe)===$r?null:a,function(e,t,r,n,i,o,a,u){r=r===$r?", ":r,n=n===$r?"":n,i=i===$r?"":i,o=o===$r?-1:o,a=a===$r?"...":a,u=u===$r?null:u,t.a(n);var c=0,s=e,l=0,f=s.length;e:for(;l<f;){var h=s[l];if(l=l+1|0,(c=c+1|0)>1&&t.a(r),!(o<0||c<=o))break e;N(t,h,u)}return o>=0&&c>o&&t.a(a),t.a(i),t}(e,Ae(),t,r,n,i,o,a).toString();var e,t,r,n,i,o,a},ct(ce).z1=function(){return[].slice.call(this.t3_1)},ct(ce).toArray=function(){return this.z1()},ct(ce).b2=function(){if(this.u3_1)throw sr()},ct(fe).v3=function(e,t){return at(e,t)},ct(fe).w3=function(e){var t=null==e?null:ot(e);return null==t?0:t},ct(he).y3=function(e){throw lr("Add is not supported on entries")},ct(he).g=function(e){return this.y3(null!=e&&Gt(e,Ue)?e:dt())},ct(he).j3=function(e){return this.x3_1.d1(e)},ct(he).b=function(){return this.x3_1.d4_1.b()},ct(he).k3=function(e){return!!u(this,e)&&(this.x3_1.n3(e.r()),!0)},ct(he).e=function(){return this.x3_1.e()},ct(pe).h4=function(){this.d4_1.h4()},ct(pe).b1=function(e){return this.d4_1.y(e)},ct(pe).s=function(){return null==this.f4_1&&(this.f4_1=this.i4()),ht(this.f4_1)},ct(pe).i4=function(){return new he(this)},ct(pe).e1=function(e){return this.d4_1.e1(e)},ct(pe).o2=function(e,t){return this.d4_1.o2(e,t)},ct(pe).n3=function(e){return this.d4_1.n3(e)},ct(pe).e=function(){return this.d4_1.e()},ct(ye).g=function(e){return null==this.j4_1.o2(e,this)},ct(ye).h4=function(){this.j4_1.h4()},ct(ye).h=function(e){return this.j4_1.b1(e)},ct(ye).j=function(){return this.j4_1.j()},ct(ye).b=function(){return this.j4_1.f1().b()},ct(ye).a3=function(e){return!(null==this.j4_1.n3(e))},ct(ye).e=function(){return this.j4_1.e()},ct(ge).c=function(){return-1===this.k4_1&&(this.k4_1=function(e){if(null!=e.n4_1&&e.o4_1){var t=e.n4_1,r=t.length,n=e;if(n.p4_1=n.p4_1+1|0,n.p4_1<r)return 0}var i=e;if(i.m4_1=i.m4_1+1|0,i.m4_1<e.l4_1.length){e.n4_1=e.r4_1.t4_1[e.l4_1[e.m4_1]];var o=e,a=e.n4_1;return o.o4_1=null!=a&&Vt(a),e.p4_1=0,0}return e.n4_1=null,1}(this)),0===this.k4_1},ct(ge).d=function(){if(!this.c())throw ar();var e=this.o4_1?this.n4_1[this.p4_1]:this.n4_1;return this.q4_1=e,this.k4_1=-1,e},ct(ge).b3=function(){var e=this.q4_1;if(null==e)throw Jt(it("Required value was null."));this.r4_1.n3(ht(this.q4_1).r()),this.q4_1=null;var t=this.p4_1;this.p4_1=t-1|0},ct(we).g4=function(){return this.s4_1},ct(we).e=function(){return this.u4_1},ct(we).o2=function(e,t){var r=this.s4_1.w3(e),n=be(this,r);if(null==n)this.t4_1[r]=new ee(e,t);else{if(null==n||!Vt(n)){var i,o=n;if(this.s4_1.v3(o.r(),e))return o.i3(t);i=[o,new ee(e,t)],this.t4_1[r]=i;var a=this.u4_1;return this.u4_1=a+1|0,null}var u=n,c=me(u,this,e);if(null!=c)return c.i3(t);u.push(new ee(e,t))}var s=this.u4_1;return this.u4_1=s+1|0,null},ct(we).n3=function(e){var t=this.s4_1.w3(e),r=be(this,t);if(null==r)return null;var n=r;if(null==n||!Vt(n)){var i=n;if(this.s4_1.v3(i.r(),e)){delete this.t4_1[t],U();var o=this.u4_1;return this.u4_1=o-1|0,i.u()}return null}var a=n,u=0,c=a.length-1|0;if(u<=c)do{var s=u;u=u+1|0;var l=a[s];if(this.s4_1.v3(e,l.r())){1===a.length?(a.length=0,delete this.t4_1[t],U()):a.splice(s,1);var f=this.u4_1;return this.u4_1=f-1|0,l.u()}}while(u<=c);return null},ct(we).h4=function(){this.t4_1=this.v4(),this.u4_1=0},ct(we).y=function(e){return!(null==ve(this,e))},ct(we).e1=function(e){var t=ve(this,e);return null==t?null:t.u()},ct(we).b=function(){return new ge(this)},ct(Ee).c=function(){return!(null===this.x4_1)},ct(Ee).d=function(){if(!this.c())throw ar();var e=ht(this.x4_1);this.w4_1=e;var t,r=e.m5_1;return t=r!==this.y4_1.j5_1.g5_1?r:null,this.x4_1=t,e},ct(Ee).b3=function(){if(null==this.w4_1)throw Jt(it("Check failed."));this.y4_1.b2(),ke(ht(this.w4_1),this.y4_1.j5_1),this.y4_1.j5_1.h5_1.n3(ht(this.w4_1).r()),this.w4_1=null},ct(Oe).i3=function(e){return this.o5_1.b2(),ct(ee).i3.call(this,e)},ct(Se).y3=function(e){throw lr("Add is not supported on entries")},ct(Se).g=function(e){return this.y3(null!=e&&Gt(e,Ue)?e:dt())},ct(Se).j3=function(e){return this.j5_1.d1(e)},ct(Se).b=function(){return new Ee(this)},ct(Se).k3=function(e){return this.b2(),!!u(this,e)&&(this.j5_1.n3(e.r()),!0)},ct(Se).e=function(){return this.j5_1.e()},ct(Se).b2=function(){return this.j5_1.b2()},ct(Pe).h4=function(){this.b2(),this.h5_1.h4(),this.g5_1=null},ct(Pe).b1=function(e){return this.h5_1.b1(e)},ct(Pe).i4=function(){return new Se(this)},ct(Pe).e1=function(e){var t=this.h5_1.e1(e);return null==t?null:t.u()},ct(Pe).o2=function(e,t){this.b2();var r=this.h5_1.e1(e);if(null==r){var n=new Oe(this,e,t);return this.h5_1.o2(e,n),function(e,t){if(null!=e.m5_1||null!=e.n5_1)throw Jt(it("Check failed."));var r=t.g5_1;if(null==r)t.g5_1=e,e.m5_1=e,e.n5_1=e;else{var n=r.n5_1;if(null==n)throw Jt(it("Required value was null."));var i=n;e.n5_1=i,e.m5_1=r,r.n5_1=e,i.m5_1=e}}(n,this),null}return r.i3(t)},ct(Pe).n3=function(e){this.b2();var t=this.h5_1.n3(e);return null!=t?(ke(t,this),t.u()):null},ct(Pe).e=function(){return this.h5_1.e()},ct(Pe).b2=function(){if(this.i5_1)throw sr()},ct(xe).b2=function(){return this.j4_1.b2()},ct(Le).r2=function(e){return this.q5_1=this.q5_1+new De(e),this},ct(Le).a=function(e){return this.q5_1=this.q5_1+Ve(e),this},ct(Le).toString=function(){return this.q5_1},ct(De).b6=function(e){return Ie(this.q2_1,e)},ct(De).s2=function(e){return function(e,t){return Ie(e.q2_1,t instanceof De?t.q2_1:dt())}(this,e)},ct(De).equals=function(e){return function(e,t){return t instanceof De&&e===t.q2_1}(this.q2_1,e)},ct(De).hashCode=function(){return this.q2_1},ct(De).toString=function(){return e=this.q2_1,String.fromCharCode(e);var e},ct(We).c=function(){return!(this.c6_1===this.d6_1.length)},ct(We).d=function(){if(this.c6_1===this.d6_1.length)throw ur(""+this.c6_1);var e=this.c6_1;return this.c6_1=e+1|0,this.d6_1[e]},ct(yt).l6=function(e){return _t(this,e)},ct(yt).s2=function(e){return this.l6(e instanceof yt?e:dt())},ct(yt).m6=function(e){return Et(this,e)},ct(yt).n6=function(e){return function(e,t){if(Ct(),xt(t))throw tr("division by zero");if(xt(e))return vt();if(Tt(e,gt())){if(Tt(t,mt())||Tt(t,bt()))return gt();if(Tt(t,gt()))return mt();var r=function(e,t){Ct();var r=63&t;return 0===r?e:r<32?new yt(e.e6_1<<r,e.f6_1<<r|e.e6_1>>>(32-r|0)|0):new yt(0,e.e6_1<<(r-32|0))}(function(e,t){Ct();var r=63&t;return 0===r?e:r<32?new yt(e.e6_1>>>r|0|e.f6_1<<(32-r|0),e.f6_1>>r):new yt(e.f6_1>>(r-32|0),e.f6_1>=0?0:-1)}(e,1).n6(t),1);if(Tt(r,vt()))return Pt(t)?mt():bt();var n=Ot(e,St(t,r));return Et(r,n.n6(t))}if(Tt(t,gt()))return vt();if(Pt(e))return Pt(t)?At(e).n6(At(t)):At(At(e).n6(t));if(Pt(t))return At(e.n6(At(t)));for(var i=vt(),o=e;Dt(o,t);){for(var a=kt(o)/kt(t),u=Math.max(1,Math.floor(a)),c=Math.ceil(Math.log(u)/Math.LN2),s=c<=48?1:Math.pow(2,c-48),l=It(u),f=St(l,t);Pt(f)||Nt(f,o);)l=It(u-=s),f=St(l,t);xt(l)&&(l=mt()),i=Et(i,l),o=Ot(o,f)}return i}(this,e)},ct(yt).o6=function(){return this.p6().m6(new yt(1,0))},ct(yt).p6=function(){return new yt(~this.e6_1,~this.f6_1)},ct(yt).q6=function(){return this.e6_1},ct(yt).g6=function(){return kt(this)},ct(yt).valueOf=function(){return this.g6()},ct(yt).equals=function(e){return e instanceof yt&&Tt(this,e)},ct(yt).hashCode=function(){return e=this,Ct(),e.e6_1^e.f6_1;var e},ct(yt).toString=function(){return function e(t,r){if(Ct(),r<2||36<r)throw tr("radix out of range: "+r);if(xt(t))return"0";if(Pt(t)){if(Tt(t,gt())){var n=Rt(r),i=t.n6(n),o=Ot(St(i,n),t).q6(),a=e(i,r),u=o.toString(r);return a+u}return"-"+e(At(t),r)}for(var c=2===r?31:r<=10?9:r<=21?7:r<=35?6:5,s=It(Math.pow(r,c)),l=t,f="";;){var h=l.n6(s),d=Ot(l,St(h,s)).q6(),p=d.toString(r),y=p;if(xt(l=h))return y+f;for(;y.length<c;)y="0"+y;f=y+f}}(this,10)},ct(we).v4=function(){var e=Object.create(null);return e.foo=1,delete e.foo,U(),e},jr=null,e.$_$=e.$_$||{},e.$_$.a=function(){return e=st(ct(R)),J.call(e),R.call(e),e.k1_1=T().m1_1,e;var e},e.$_$.b=oe,e.$_$.c=Re,e.$_$.d=function(){return e=st(ct(xe)),function(e,t){ie.call(t),ye.call(t),t.j4_1=e}(Re(),e),xe.call(e),e;var e},e.$_$.e=ar,e.$_$.f=function e(t){var r=ir(t,st(ct(or)));return ut(r,e),r},e.$_$.g=H,e.$_$.h=U,e.$_$.i=z,e.$_$.j=function(e){return n=(t=[e]).length,function(e,t){for(var r=t,n=0,i=r.length;n<i;){var o=r[n];n=n+1|0;var a=o.m2(),u=o.n2();e.o2(a,u)}}(r=function(e,t){return function(e,t,r){if(de(r),!(e>=0))throw $t(it("Negative initial capacity: "+e));if(!(t>=0))throw $t(it("Non-positive load factor: "+t))}(e,0,t),t}(n,st(ct(pe))),t),r;var t,r,n},e.$_$.k=function(e){return function(e,t){if(Gt(e,Me)){if(e.e()<=1)return function(e){if(Gt(e,Me)){var t;switch(e.e()){case 0:t=P();break;case 1:var r;r=Gt(e,Ce)?e.f(0):e.b().d(),t=W(r);break;default:t=o(e)}return t}return function(e){switch(e.e()){case 0:return P();case 1:return W(e.f(0));default:return e}}(a(e))}(e);var r=z(e),n=Vt(r)?r:dt();return function(e,t){e.length>1&&se(e,t)}(n,t),function(e){return new ce(e)}(n)}var i=a(e);return function(e,t){!function(e,t){if(e.e()<=1)return U();var r=z(e);se(r,t);var n=0,i=r.length;if(n<i)do{var o=n;n=n+1|0,e.w1(o,r[o])}while(n<i)}(e,t)}(i,t),i}(e,(null==Tr&&new I,Gt(t=Tr,Y)?t:dt()));var t},e.$_$.l=qe,e.$_$.m=Mt,e.$_$.n=et,e.$_$.o=function(e,t,r,n){return Object.defineProperty(e,t,{configurable:!0,get:r,set:n})},e.$_$.p=at,e.$_$.q=qt,e.$_$.r=function(e){return e instanceof yt?e:It(e)},e.$_$.s=zt,e.$_$.t=ct,e.$_$.u=Ut,e.$_$.v=it,e.$_$.w=function(e){if(e%.5!==0)return Math.round(e);var t,r,n=Math.floor(e);n%2===0?t=n:(r=Math.ceil(e),t=r);return t},e.$_$.x=yt,e.$_$.y=function(e){return!function(e){var t;return H(),e===1/0?t=!0:(H(),t=e===-1/0),t}(e)&&!je(e)},e.$_$.z=je,e.$_$.a1=function(e,t){return new D(e,t)},e.$_$.b1=$r,e})?n.apply(t,i):n)||(e.exports=o)},19459:function(e,t,r){var n,i,o;i=[t,r(38636)],void 0===(o="function"===typeof(n=function(e,t){"use strict";function r(e,t){return e=e===_e?null:e,this.h7(e)}function n(){Q=this,this.x6_1=(new Y).getValue()}function i(){return null==Q&&new n,Q}function o(e){i(),this.t6_1=e;var t=this.t6_1;this.u6_1=null==t?null:t.flags;var r=this.t6_1;this.v6_1=new v(null==r?null:r.skippableFragments),this.w6_1=function(e){var t,r=e.t6_1;if(null!=(null==r?null:r.rules)){for(var n=me(),i=e.t6_1.rules,o=be(i);o.c();){var a=o.d(),u=a.priority,c=a.rules;n.o2(u,c)}t=n}else{var s=[e.v6_1,new m];t=ve(ye(0,s))}return t}(this)}function a(e,t,r){this.disableDynamicBuffer=e,this.lowBufferBeforeStart=t,this.defaultBuffer=r}function u(e,t,r){this.skippableFragments=e,this.flags=t,this.rules=r}function c(){}function s(e,t,r){r=r!==_e&&r,this.startTime=e,this.endTime=t,this.autoSkip=r}function l(e,t,r){this.watchedTime=e,this.currentTime=t,this.flags=r}function f(){return ee}function h(e){e=e===_e?null:e,this.n7_1=e}function d(e){e=e===_e?null:e,this.o7_1=e}function p(e,t){this.watchedTime=e,this.currentTime=t}function y(e,t){this.priority=e,this.rules=t}function v(e){e=e===_e?null:e,this.y6_1=e}function m(){}function b(){ue=this,this.q7_1=null,this.r7_1=new X}function g(){return null==ue&&new b,ue}function w(e){var t,r,n;g(),e===_e?(xe(),t=NaN):t=e,e=t,r=je(),this.w7_1=r,this.x7_1=new S(e,!0),this.y7_1=(n=this,function(e){return n.sample(e.durationMs,e.sizeBytes),pe()})}function _(e){xe(),this.z7_1=NaN,this.a8_1=0,this.b8_1=0,this.c8(e)}function E(){se=this,this.f8_1=new k(5,2),this.g8_1=new k(2,1)}function O(){return null==se&&new E,se}function S(e,t){var r;O(),e===_e?(xe(),r=NaN):r=e,e=r,t=t!==_e&&t,this.h8_1=e,this.i8_1=t,this.j8_1=new _(O().f8_1.fast),this.k8_1=new _(O().f8_1.slow),this.l8_1=0,this.m8_1=new $}function k(e,t){this.slow=e,this.fast=t}function T(e,t){e=e===_e?null:e,t=t===_e?null:t,this.okMessage=e,this.errorMessage=t}function R(e,t){this.value=e,this.source=t}function P(){fe=this,this.MAX="max",this.MIN="min",this.DEFAULT="default"}function x(){return null==fe&&new P,fe}function j(){x()}function A(e,t){Ce(t)&&function(e,t){for(e.b9_1.g(t);e.b9_1.l1_1>20;)e.b9_1.t1()}(e,t)}function L(e){var t=e.b9_1.b();if(!t.c())throw Me();for(var r=t.d();t.c();){var n=t.d(),i=r;r=Math.max(i,n)}return r}function I(){this.b9_1=Fe()}function N(e,t,r){this.hasGoodEstimate=e,this.value=t,this.history=r}function D(e,t,r){r=r!==_e&&r,this.durationMs=e,this.sizeBytes=t,this.isLowLatency=r}function C(e,t){var r,n=G().h9_1;if(Z().t7_1){var i,o=t.sizeBytes;if(Ce(o)){var a=e;a.j9_1=a.j9_1.m6(Ie(Ue(o))),i=pe()}r=i}else{var u;e:{var c=n.u7_1;try{if(c.v7_1.h(c))throw Pe("runLocked: recursion lock error");c.v7_1.g(c);var s,l=t.sizeBytes;if(Ce(l)){var f=e;f.j9_1=f.j9_1.m6(Ie(Ue(l))),s=pe()}u=s;break e}finally{c.v7_1.a3(c)}}r=u}return r}function M(e,t){var r,n=G().h9_1;if(Z().t7_1){var i=e.o9_1.e1(t),o=null==i?null:i.p9_1,a=null==o?0:o,u=e.o9_1.e1(t);null==u||(u.p9_1=a+1|0);var c=e,s=c.k9_1;if(c.k9_1=s+1|0,e.l9_1)return pe();e.l9_1=!0,e.m9_1=e.i9_1.create(),r=pe()}else{var l;e:{var f=n.u7_1;try{if(f.v7_1.h(f))throw Pe("runLocked: recursion lock error");f.v7_1.g(f);var h=e.o9_1.e1(t),d=null==h?null:h.p9_1,p=null==d?0:d,y=e.o9_1.e1(t);null==y||(y.p9_1=p+1|0);var v=e,m=v.k9_1;if(v.k9_1=m+1|0,e.l9_1)return pe();e.l9_1=!0,e.m9_1=e.i9_1.create(),l=pe();break e}finally{f.v7_1.a3(f)}}r=l}return r}function F(e,t){var r,n=G().h9_1;if(Z().t7_1){var i=e.o9_1.e1(t),o=null==i?null:i.p9_1,a=null==o?0:o,u=e.o9_1.e1(t);if(null==u);else{var c,s=u,l=a-1|0;c=Math.max(l,0),s.p9_1=c}var f,h=e,d=e.k9_1-1|0;f=Math.max(d,0),h.k9_1=f,r=pe()}else{var p;e:{var y=n.u7_1;try{if(y.v7_1.h(y))throw Pe("runLocked: recursion lock error");y.v7_1.g(y);var v=e.o9_1.e1(t),m=null==v?null:v.p9_1,b=null==m?0:m,g=e.o9_1.e1(t);if(null==g);else{var w,_=g,E=b-1|0;w=Math.max(E,0),_.p9_1=w}var O,S=e,k=e.k9_1-1|0;O=Math.max(k,0),S.k9_1=O,p=pe();break e}finally{y.v7_1.a3(y)}}r=p}return r}function B(e,t,r){e=e===_e?0:e,this.p9_1=e,this.q9_1=t,this.r9_1=r}function U(){he=this,this.h9_1=new X}function G(){return null==he&&new U,he}function V(e){var t;G(),this.i9_1=e,this.j9_1=new De(0,0),this.k9_1=0,this.l9_1=!1,this.m9_1=null,this.n9_1=new z,t=me(),this.o9_1=t}function H(){this.u9_1=null,this.v9_1=null,this.w9_1=null}function Y(e){e=e===_e?null:e,this.x9_1=e}function q(e){e=e===_e?null:e,this.y9_1=e}function W(e){e=e===_e?null:e,this.z9_1=e}function z(){var e;e=je(),this.s9_1=e}function $(e){var t;e=e===_e?null:e,this.o8_1=e,t=je(),this.p8_1=t}function K(){de=this,this.t7_1=!1}function Z(){return null==de&&new K,de}function X(){Z(),this.u7_1=new J}function J(){var e;e=je(),this.v7_1=e}var Q,ee,te,re,ne,ie,oe,ae,ue,ce,se,le,fe,he,de,pe=t.$_$.h,ye=t.$_$.a1,ve=t.$_$.j,me=t.$_$.c,be=t.$_$.l,ge=t.$_$.t,we=t.$_$.s,_e=t.$_$.b1,Ee=t.$_$.u,Oe=t.$_$.m,Se=t.$_$.k,ke=t.$_$.b,Te=t.$_$.n,Re=t.$_$.q,Pe=t.$_$.f,xe=t.$_$.g,je=t.$_$.d,Ae=t.$_$.o,Le=t.$_$.z,Ie=t.$_$.r,Ne=t.$_$.v,De=t.$_$.x,Ce=t.$_$.y,Me=t.$_$.e,Fe=t.$_$.a,Be=t.$_$.i,Ue=t.$_$.w,Ge=t.$_$.p;return Ee(n,"Companion",we),Ee(o,"BufferGoalManager",Oe),Ee(a,"BufferGoalManagerFlags",Oe),Ee(u,"BufferGoalManagerProps",Oe),Ee(c,"BufferGoalRule",Re),Ee(s,"SkippableFragment",Oe),Ee(l,"BufferGoalRuleProps",Oe),Ee(h,"WatchedTime",Oe),Ee(d,"CurrentTime",Oe),Ee(p,"GetBufferGoalProps",Oe),Ee(y,"Rules",Oe),Ee(v,"SkippableFragmentsRule",Oe,_e,[c]),Ee(m,"WatchedTimeRule",Oe,_e,[c]),Ee(b,"Companion",we),Ee(w,"BandwidthEstimator",Oe),Ee(_,"EWMA",Oe),Ee(E,"Companion",we),Ee(S,"EwmaBandwidthEstimatorV2",Oe),Ee(k,"HalfLife",Oe),Ee(T,"Result",Oe),Ee(R,"TtfbEstimate",Oe),Ee(P,"Companion",we),Ee(j,"TtfbEstimateSource",Oe),Ee(I,"TtfbEstimator",Oe),Ee(N,"TtfbEstimatorDebugInfo",Oe),Ee(D,"BandwidthInfo",Oe),Ee(B,"FetcherInfo",Oe),Ee(U,"Companion",we),Ee(V,"FetcherProgressAccumulator",Oe),Ee(H,"SingleListenerFetcher",Oe),Ee(Y,"DefaultBuffer",Oe),Ee(q,"DisableDynamicBuffer",Oe),Ee(W,"LowBufferBeforeStart",Oe),Ee(z,"EventEmitter",Oe),Ee($,"Signal",Oe),Ee(K,"Companion",we),Ee(X,"Mutex",Oe),Ee(J,"PlatformMutex",Oe),ge(o).getBufferGoal=function(e){var t=this.u6_1,r=null==t?null:t.defaultBuffer,n=null==r?null:r.getValue(),o=null==n?i().x6_1:n,a=this.u6_1,u=null==a?null:a.disableDynamicBuffer;if(!0===(null==u?null:u.getValue()))return o;var c=null==e?null:e.watchedTime,s=null==c?null:c.getValue(),f=null==e?null:e.currentTime,h=new l(s,null==f?null:f.getValue(),this.u6_1),d=function(e,t){for(var r=Se(e.f1()).b();r.c();){var n,i=r.d(),o=e.e1(i);if(null==o)n=null;else{for(var a=ke(),u=be(o);u.c();){var c=u.d(),s=c.getBufferGoal(t);null==s||(a.g(s),pe())}n=a}var l,f=n;if(null==f)l=null;else{var h,d=f.b();if(d.c()){var p=d.d();if(d.c()){var y=p;do{var v=d.d(),m=v;Te(y,m)>0&&(p=v,y=m)}while(d.c());h=p}else h=p}else h=null;l=h}var b=l;if(null!=b)return b}return null}(this.w6_1,h);return null==d?o:d},ge(o).setSkippableFragments=function(e){this.v6_1.z6(e)},ge(o).getSkippableFragments=function(){return this.v6_1.a7()},ge(a).b7=function(){return this.disableDynamicBuffer},ge(a).c7=function(){return this.lowBufferBeforeStart},ge(a).d7=function(){return this.defaultBuffer},ge(u).e7=function(){return this.skippableFragments},ge(u).f7=function(){return this.flags},ge(u).g7=function(){return this.rules},ge(s).i7=function(){return this.startTime},ge(s).j7=function(){return this.endTime},ge(s).k7=function(){return this.autoSkip},ge(l).l7=function(){return this.watchedTime},ge(l).m7=function(){return this.currentTime},ge(l).f7=function(){return this.flags},ge(h).getValue=function(){return this.n7_1},ge(d).getValue=function(){return this.o7_1},ge(p).l7=function(){return this.watchedTime},ge(p).m7=function(){return this.currentTime},ge(y).p7=function(){return this.priority},ge(y).g7=function(){return this.rules},ge(v).h7=function(e){var t,r,n,i,o=null==e?null:e.currentTime,a=null==o?0:o,u=this.y6_1;if(null==u)return null;e:{for(var c=be(u);c.c();){var s=c.d();if(s.startTime<=a&&a<s.endTime){r=s;break e}}r=null}if(null!=(t=r))return a-t.startTime<f()?re:ne;e:{for(var l=be(u);l.c();){var h=l.d();if(a<h.startTime){i=h;break e}}i=null}return null!=(n=i)?n.startTime-a+ie:null},ge(v).z6=function(e){this.y6_1=e},ge(v).a7=function(){return this.y6_1},ge(m).h7=function(e){var t=null==e?null:e.watchedTime,r=null==t?0:t,n=null==e?null:e.flags,i=null==n?null:n.lowBufferBeforeStart;return!0===(null==i?null:i.getValue())&&r<=0?oe:r<f()?te:null},ge(b).s7=function(e){var t=this.q7_1;if(null!=t)return t;var r=this.r7_1;if(Z().t7_1){var n=g().q7_1;if(null!=n)return n;var i=new w(e);return g().q7_1=i,i}var o=r.u7_1;try{if(o.v7_1.h(o))throw Pe("runLocked: recursion lock error");o.v7_1.g(o);var a=g().q7_1;if(null!=a)return a;var u=new w(e);return g().q7_1=u,u}finally{o.v7_1.a3(o)}},ge(b).getInstance=function(e,t){var r;return e===_e?(xe(),r=NaN):r=e,e=r,this.s7(e)},ge(w).appendFetcher=function(e){this.w7_1.g(e),e.addProgressListener(this.y7_1)},ge(w).removeFetcher=function(e){this.w7_1.a3(e),e.removeProgressListener(this.y7_1)},ge(w).sample=function(e,t){return this.x7_1.sample(e,t,!1,le,(ce||(ce=!0,ae=new k(5,.45)),ae))},ge(w).getBandwidthEstimate=function(){return this.x7_1.getBandwidthEstimate()},ge(w).hasGoodEstimate=function(){return this.x7_1.hasGoodEstimate()},ge(w).setDefaultEstimate=function(e){this.x7_1.setDefaultEstimate(e)},ge(w).addListener=function(e){this.x7_1.addListener(e)},ge(w).removeListener=function(e){this.x7_1.removeListener(e)},ge(w).removeAllListeners=function(){this.x7_1.removeAllListeners()},ge(w).destroy=function(){for(var e=this.w7_1.b();e.c();)e.d().removeProgressListener(this.y7_1)},ge(_).d8=function(e,t){var r=function(e,t,r){var n,i=e.z7_1;return n=Math.pow(i,t),r*(1-n)+n*e.a8_1}(this,e,t);Le(r)||(this.a8_1=r,this.b8_1=this.b8_1+e)},ge(_).e8=function(){var e=this.z7_1,t=this.b8_1,r=1-Math.pow(e,t);return this.a8_1/r},ge(_).c8=function(e){var t,r=Math.log(.5)/e;t=Math.exp(r),this.z7_1=t},ge(S).n8=function(e,t,r,n,i){if(e<=0)return new T(_e,"Sample ["+Ne(Ie(t))+"]/["+Ne(Ie(e))+"] not applied. Reason: durationMs <= 0");if(t<(r?2e3:n))return new T(_e,"Sample ["+Ne(Ie(t))+"]/["+Ne(Ie(e))+"] not applied. Reason: too small sample. Min length = "+Ne(r?new De(2e3,0):Ie(n)));var o=i;!function(e,t){e.j8_1.c8(t.fast),e.k8_1.c8(t.slow)}(this,null==o?r?O().g8_1:O().f8_1:o);var a=8*t/(e/1e3),u=this.i8_1?.1:e/1e3;return this.l8_1=this.l8_1+t,this.j8_1.d8(u,a),this.k8_1.d8(u,a),this.m8_1.q8(this.getBandwidthEstimate()),new T("ok")},ge(S).sample=function(e,t,r,n,i,o){return r=r!==_e&&r,n=n===_e?16e3:n,i=i===_e?null:i,this.n8(e,t,r,n,i)},ge(S).getBandwidthEstimate=function(){return this.hasGoodEstimate()?(t=(e=this).j8_1.e8(),r=e.k8_1.e8(),Math.min(t,r)):this.h8_1;var e,t,r},ge(S).hasGoodEstimate=function(){return this.l8_1>=128e3},ge(S).setDefaultEstimate=function(e){this.h8_1=e},ge(S).addListener=function(e){this.m8_1.r8(e)},ge(S).removeListener=function(e){this.m8_1.s8(e)},ge(S).removeAllListeners=function(){this.m8_1.h4()},ge(k).t8=function(){return this.slow},ge(k).u8=function(){return this.fast},ge(T).v8=function(){return this.okMessage},ge(T).w8=function(){return this.errorMessage},ge(R).u=function(){return this.value},ge(R).x8=function(){return this.source},ge(P).y8=function(){return this.MAX},ge(P).z8=function(){return this.MIN},ge(P).a9=function(){return this.DEFAULT},ge(I).appendFetcher=function(e){var t,r;e.addRequestTtfbListener((t=this,(r=function(e){return A(t,e),pe()}).callableName="handleTtfb",r))},ge(I).removeFetcher=function(e){var t,r;e.removeRequestTtfbListener((t=this,(r=function(e){return A(t,e),pe()}).callableName="handleTtfb",r))},ge(I).getMinTtfbEstimate=function(e){if(!this.hasGoodEstimate())return e;var t=this.b9_1.b();if(!t.c())throw Me();for(var r=t.d();t.c();){var n=t.d(),i=r;r=Math.min(i,n)}var o=r;return x(),new R(o,"min")},ge(I).getTtfbEstimate=function(e){if(!this.hasGoodEstimate())return e;var t=L(this);return x(),new R(t,"max")},ge(I).hasGoodEstimate=function(){return this.b9_1.l1_1>1},ge(I).getDebugInfo=function(){var e=this.hasGoodEstimate(),t=L(this),r=this.b9_1;return new N(e,t,Be(r))},ge(N).c9=function(){return this.hasGoodEstimate},ge(N).u=function(){return this.value},ge(N).d9=function(){return this.history},ge(D).e9=function(){return this.durationMs},ge(D).f9=function(){return this.sizeBytes},ge(D).g9=function(){return this.isLowLatency},ge(V).appendFetcher=function(e){var t,r,n,i,o,a=G().h9_1;if(Z().t7_1){var u=(i=this,o=e,function(){return M(i,o),pe()}),c=new B(_e,u,function(e,t){return function(){return F(e,t),pe()}}(this,e));this.o9_1.o2(e,c),e.addProgressListener((r=this,(n=function(e){return C(r,e),pe()}).callableName="handleProgress",n)),e.addResponseStartListener(c.q9_1),e.addResponseEndListener(c.r9_1),t=pe()}else{var s;e:{var l=a.u7_1;try{if(l.v7_1.h(l))throw Pe("runLocked: recursion lock error");l.v7_1.g(l);var f=function(e,t){return function(){return M(e,t),pe()}}(this,e),h=new B(_e,f,function(e,t){return function(){return F(e,t),pe()}}(this,e));this.o9_1.o2(e,h),e.addProgressListener(function(e){var t=function(t){return C(e,t),pe()};return t.callableName="handleProgress",t}(this)),e.addResponseStartListener(h.q9_1),e.addResponseEndListener(h.r9_1),s=pe();break e}finally{l.v7_1.a3(l)}}t=s}return t},ge(V).removeFetcher=function(e){var t,r,n,i=G().h9_1;if(Z().t7_1){var o=this.o9_1.n3(e);if(null==o);else{var a,u=this.k9_1-o.p9_1|0;a=Math.max(u,0),this.k9_1=a,e.removeProgressListener((r=this,(n=function(e){return C(r,e),pe()}).callableName="handleProgress",n)),e.removeResponseStartListener(o.q9_1),e.removeResponseEndListener(o.r9_1),pe()}t=pe()}else{var c;e:{var s=i.u7_1;try{if(s.v7_1.h(s))throw Pe("runLocked: recursion lock error");s.v7_1.g(s);var l=this.o9_1.n3(e);if(null==l);else{var f,h=this.k9_1-l.p9_1|0;f=Math.max(h,0),this.k9_1=f,e.removeProgressListener(function(e){var t=function(t){return C(e,t),pe()};return t.callableName="handleProgress",t}(this)),e.removeResponseStartListener(l.q9_1),e.removeResponseEndListener(l.r9_1),pe()}c=pe();break e}finally{s.v7_1.a3(s)}}t=c}return t},ge(V).process=function(){var e,t=G().h9_1;if(Z().t7_1){if(!this.l9_1)return pe();if(0===this.k9_1&&this.j9_1.equals(new De(0,0)))return this.l9_1=!1,this.m9_1=null,pe();var r=this.j9_1;if(r.equals(new De(0,0)))return pe();this.j9_1=new De(0,0);var n=this.m9_1,i=null==n?null:n.getDurationMs(),o=null==i?0:i;this.m9_1=this.i9_1.create(),this.n9_1.t9(new D(o,r.g6(),!1)),e=pe()}else{var a;e:{var u=t.u7_1;try{if(u.v7_1.h(u))throw Pe("runLocked: recursion lock error");if(u.v7_1.g(u),!this.l9_1)return pe();if(0===this.k9_1&&this.j9_1.equals(new De(0,0)))return this.l9_1=!1,this.m9_1=null,pe();var c=this.j9_1;if(c.equals(new De(0,0)))return pe();this.j9_1=new De(0,0);var s=this.m9_1,l=null==s?null:s.getDurationMs(),f=null==l?0:l;this.m9_1=this.i9_1.create(),this.n9_1.t9(new D(f,c.g6(),!1)),a=pe();break e}finally{u.v7_1.a3(u)}}e=a}return e},ge(V).addProgressListener=function(e){var t,r=G().h9_1;if(Z().t7_1)this.n9_1.r8(e),t=pe();else{var n;e:{var i=r.u7_1;try{if(i.v7_1.h(i))throw Pe("runLocked: recursion lock error");i.v7_1.g(i),this.n9_1.r8(e),n=pe();break e}finally{i.v7_1.a3(i)}}t=n}return t},ge(V).removeProgressListener=function(e){var t,r=G().h9_1;if(Z().t7_1)this.n9_1.s8(e),t=pe();else{var n;e:{var i=r.u7_1;try{if(i.v7_1.h(i))throw Pe("runLocked: recursion lock error");i.v7_1.g(i),this.n9_1.s8(e),n=pe();break e}finally{i.v7_1.a3(i)}}t=n}return t},ge(H).responseStart=function(){var e=this.u9_1;null==e||e()},ge(H).responseEnd=function(){var e=this.v9_1;null==e||e()},ge(H).responseProgress=function(e){var t=this.w9_1;null==t||t(e)},ge(H).addResponseStartListener=function(e){null==this.u9_1&&(this.u9_1=e)},ge(H).removeResponseStartListener=function(e){this.u9_1=null},ge(H).addResponseEndListener=function(e){null==this.v9_1&&(this.v9_1=e)},ge(H).removeResponseEndListener=function(e){this.v9_1=null},ge(H).addProgressListener=function(e){null==this.w9_1&&(this.w9_1=e)},ge(H).removeProgressListener=function(e){this.w9_1=null},ge(Y).getValue=function(){var e=this.x9_1;return null==e?30:e},ge(q).getValue=function(){var e=this.y9_1;return null!=e&&e},ge(W).getValue=function(){var e=this.z9_1;return null!=e&&e},ge(z).r8=function(e){this.s9_1.g(e)},ge(z).s8=function(e){this.s9_1.a3(e)},ge(z).t9=function(e){for(var t=this.s9_1.b();t.c();)t.d()(e)},ge($).r8=function(e){this.p8_1.g(e)},ge($).s8=function(e){this.p8_1.a3(e)},ge($).h4=function(){this.p8_1.h4()},ge($).q8=function(e){if(Ge(this.o8_1,e))return pe();this.o8_1=e;for(var t=this.p8_1.b();t.c();)t.d()(e)},ge(v).getBufferGoal=r,ge(m).getBufferGoal=r,ee=15,te=15,re=3,ne=3,ie=5,oe=5,le=2e3,function(e){var t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={});(f=r.bgm||(r.bgm={})).BufferGoalManager=o,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(f=r.bgm||(r.bgm={})).BufferGoalManagerFlags=a,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(f=r.bgm||(r.bgm={})).BufferGoalManagerProps=u;var n,i=e.ru||(e.ru={}),c=(t=i.yandex||(i.yandex={})).videoplayer||(t.videoplayer={}),f=(r=c.multiplatform||(c.multiplatform={})).bgm||(r.bgm={});t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(f=r.bgm||(r.bgm={})).SkippableFragment=s,f.BufferGoalRuleProps=l,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(f=r.bgm||(r.bgm={})).WatchedTime=h,f.CurrentTime=d,f.GetBufferGoalProps=p,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(f=r.bgm||(r.bgm={})).Rules=y,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(n=r.estimate||(r.estimate={})).BandwidthEstimator=w,Ae(n.BandwidthEstimator,"Companion",g),t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(n=r.estimate||(r.estimate={})).EwmaBandwidthEstimatorV2=S,n.HalfLife=k,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(n=r.estimate||(r.estimate={})).Result=T,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(n=r.estimate||(r.estimate={})).TtfbEstimate=R,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(n=r.estimate||(r.estimate={})).TtfbEstimateSource=j,Ae(n.TtfbEstimateSource,"Companion",x),t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(n=r.estimate||(r.estimate={})).TtfbEstimator=I,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(n=r.estimate||(r.estimate={})).TtfbEstimatorDebugInfo=N,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(v=r.fetcher||(r.fetcher={})).BandwidthInfo=D,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(v=r.fetcher||(r.fetcher={})).FetcherProgressAccumulator=V,Ae(v.FetcherProgressAccumulator,"Companion",G),t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(v=r.fetcher||(r.fetcher={})).SingleListenerFetcher=H,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),((r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={})).flags||(r.flags={})).DefaultBuffer=Y,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),((r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={})).flags||(r.flags={})).DisableDynamicBuffer=q,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),((r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={})).flags||(r.flags={})).LowBufferBeforeStart=W,i=e.ru||(e.ru={}),c=(t=i.yandex||(i.yandex={})).videoplayer||(t.videoplayer={});var v=(r=c.multiplatform||(c.multiplatform={})).fetcher||(r.fetcher={});i=e.ru||(e.ru={}),c=(t=i.yandex||(i.yandex={})).videoplayer||(t.videoplayer={}),v=(r=c.multiplatform||(c.multiplatform={})).fetcher||(r.fetcher={}),i=e.ru||(e.ru={}),c=(t=i.yandex||(i.yandex={})).videoplayer||(t.videoplayer={}),v=(r=c.multiplatform||(c.multiplatform={})).fetcher||(r.fetcher={}),i=e.ru||(e.ru={}),c=(t=i.yandex||(i.yandex={})).videoplayer||(t.videoplayer={}),(r=c.multiplatform||(c.multiplatform={})).utils||(r.utils={}),i=e.ru||(e.ru={}),c=(t=i.yandex||(i.yandex={})).videoplayer||(t.videoplayer={}),(r=c.multiplatform||(c.multiplatform={})).utils||(r.utils={})}(e),e})?n.apply(t,i):n)||(e.exports=o)},93106:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.identity=void 0,t.identity=function(e){return e}},97881:function(e,t,r){"use strict";r(53850),r(14423),r(62968)},62968:function(e,t){"use strict"},16285:function(e,t,r){"use strict";function n(e){return Math.max(e,0)}function i(e){return Math.floor(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.toUnsignedInt=t.toUnsignedFloat=t.toInt=t.toUnsigned=t.toFloat=void 0;var o=r(93106);t.toFloat=o.identity,t.toUnsigned=n,t.toInt=i,t.toUnsignedFloat=function(e){return n((0,t.toFloat)(e))},t.toUnsignedInt=function(e){return n(i(e))}},93849:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toTimestamp=t.toMilliseconds=t.toMbps=t.toMegaBitsPerSeconds=t.toKbps=t.toKiloBitsPerSeconds=t.toBps=t.toBitsPerSeconds=t.toMegabits=t.toKilobits=void 0;var n=r(93106),i=r(52008);t.toKilobits=n.identity,t.toMegabits=n.identity,t.toBitsPerSeconds=n.identity,t.toBps=t.toBitsPerSeconds,t.toKiloBitsPerSeconds=n.identity,t.toKbps=t.toKiloBitsPerSeconds,t.toMegaBitsPerSeconds=n.identity,t.toMbps=t.toMegaBitsPerSeconds,t.toMilliseconds=n.identity,t.toTimestamp=i.toMoment},52008:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toPixels=t.toPerSeconds=t.toPercent=t.toPortion=t.toDays=t.toHours=t.toMinutes=t.toSeconds=t.toDuration=t.toMoment=t.toBytes=t.toBits=void 0;var n=r(93106);t.toBits=n.identity,t.toBytes=n.identity,t.toMoment=n.identity,t.toDuration=n.identity,t.toSeconds=n.identity,t.toMinutes=n.identity,t.toHours=n.identity,t.toDays=n.identity,t.toPortion=n.identity,t.toPercent=n.identity,t.toPerSeconds=n.identity,t.toPixels=n.identity},14423:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(16285),t),i(r(52008),t),i(r(93849),t)},40963:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},92846:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},94957:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},53850:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(40963),t),i(r(94957),t),i(r(92846),t)},31299:function(e,t){"use strict";function r(e,t){try{return t(e)}catch(r){return e}}t.parse=function(e,t){if("string"!==typeof e)throw new TypeError("argument str must be a string");for(var i={},a=t||{},u=e.split(o),c=a.decode||n,s=0;s<u.length;s++){var l=u[s],f=l.indexOf("=");if(!(f<0)){var h=l.substr(0,f).trim(),d=l.substr(++f,l.length).trim();'"'==d[0]&&(d=d.slice(1,-1)),void 0==i[h]&&(i[h]=r(d,c))}}return i},t.serialize=function(e,t,r){var n=r||{},o=n.encode||i;if("function"!==typeof o)throw new TypeError("option encode is invalid");if(!a.test(e))throw new TypeError("argument name is invalid");var u=o(t);if(u&&!a.test(u))throw new TypeError("argument val is invalid");var c=e+"="+u;if(null!=n.maxAge){var s=n.maxAge-0;if(isNaN(s))throw new Error("maxAge should be a Number");c+="; Max-Age="+Math.floor(s)}if(n.domain){if(!a.test(n.domain))throw new TypeError("option domain is invalid");c+="; Domain="+n.domain}if(n.path){if(!a.test(n.path))throw new TypeError("option path is invalid");c+="; Path="+n.path}if(n.expires){if("function"!==typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");c+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(c+="; HttpOnly"),n.secure&&(c+="; Secure"),n.sameSite)switch("string"===typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:c+="; SameSite=Strict";break;case"lax":c+="; SameSite=Lax";break;case"strict":c+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}return c};var n=decodeURIComponent,i=encodeURIComponent,o=/; */,a=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/},86386:function(e){e.exports=function(e){e||(e=window);var t=e.navigator.userAgent,r=t.indexOf("MSIE ");if(r>0)return parseInt(t.substring(r+5,t.indexOf(".",r)),10);if(t.indexOf("Trident/")>0){var n=t.indexOf("rv:");return parseInt(t.substring(n+3,t.indexOf(".",n)),10)}var i=t.indexOf("Edge/");return i>0&&parseInt(t.substring(i+5,t.indexOf(".",i)),10)}},20502:function(e,t,r){"use strict";function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.hasCookies=function(){var e=new l;try{e.setItem("__test","1");var t=e.getItem("__test");return e.removeItem("__test"),"1"===t}catch(r){return!1}};var a,u=r(31299),c=(a=u)&&a.__esModule?a:{default:a},s="lS_",l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.cookieOptions=n({path:"/"},t),s=void 0===t.prefix?s:t.prefix}return o(e,[{key:"getItem",value:function(e){var t=c.default.parse(document.cookie);return t&&t.hasOwnProperty(s+e)?t[s+e]:null}},{key:"setItem",value:function(e,t){return document.cookie=c.default.serialize(s+e,t,this.cookieOptions),t}},{key:"removeItem",value:function(e){var t=n({},this.cookieOptions,{maxAge:-1});return document.cookie=c.default.serialize(s+e,"",t),null}},{key:"clear",value:function(){var e=c.default.parse(document.cookie);for(var t in e)0===t.indexOf(s)&&this.removeItem(t.substr(s.length));return null}}]),e}();t.default=l},64585:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data={}}return r(e,[{key:"getItem",value:function(e){return this._data.hasOwnProperty(e)?this._data[e]:null}},{key:"setItem",value:function(e,t){return this._data[e]=String(t)}},{key:"removeItem",value:function(e){return delete this._data[e]}},{key:"clear",value:function(){return this._data={}}}]),e}();t.default=n},52741:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=n(r(41402)),o=n(r(20502)),a=n(r(64585)),u=null;u=(0,i.default)("localStorage")?window.localStorage:(0,i.default)("sessionStorage")?window.sessionStorage:(0,i.default)("cookieStorage")?new o.default:new a.default,t.ZP=u,i.default,o.default,a.default},41402:function(e,t,r){"use strict";function n(e){try{var t=window[e];return t.setItem("__test","1"),t.removeItem("__test"),!0}catch(r){return!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"localStorage",t=String(e).replace(/storage$/i,"").toLowerCase();if("local"===t)return n("localStorage");if("session"===t)return n("sessionStorage");if("cookie"===t)return(0,i.hasCookies)();if("memory"===t)return!0;throw new Error("Storage method `"+e+"` is not available.\n    Please use one of the following: localStorage, sessionStorage, cookieStorage, memoryStorage.")};var i=r(20502)},28139:function(e){"use strict";e.exports=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){return e.__proto__=t,e}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(e,r)||(e[r]=t[r]);return e})},63741:function(e,t){function r(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o,a,u;!function(r,n){"object"==i(t)?n(t):(a=[t],void 0===(u="function"===typeof(o=n)?o.apply(t,a):o)||(e.exports=u))}(0,(function(e){"use strict";function t(e,t){function i(t){for(var n=[];e[f];)if(e.charCodeAt(f)==p){if(e.charCodeAt(f+1)===m){var i=f+2;if(f=e.indexOf(">",f),-1==e.substring(i,f).indexOf(t)){var o=e.substring(0,f).split("\n");throw new Error("Unexpected close tag\nLine: "+(o.length-1)+"\nColumn: "+(o[o.length-1].length+1)+"\nChar: "+e[f])}return f+1&&(f+=1),n}if(e.charCodeAt(f+1)===b){if(e.charCodeAt(f+2)==v){for(var u=f;-1!==f&&(e.charCodeAt(f)!==y||e.charCodeAt(f-1)!=v||e.charCodeAt(f-2)!=v||-1==f);)f=e.indexOf(">",f+1);-1===f&&(f=e.length),h&&n.push(e.substring(u,f+1))}else{if(e.charCodeAt(f+2)===_&&e.charCodeAt(f+8)===_&&"cdata"===e.substr(f+3,5).toLowerCase()){var s=e.indexOf("]]>",f);-1==s?(n.push(e.substr(f+9)),f=e.length):(n.push(e.substring(f+9,s)),f=s+3);continue}var l=f+1;f+=2;for(var g=!1;(e.charCodeAt(f)!==y||!0===g)&&e[f];)e.charCodeAt(f)===_?g=!0:!0===g&&e.charCodeAt(f)===E&&(g=!1),f++;n.push(e.substring(l,f))}f++;continue}var w=c();n.push(w),"?"===w.tagName[0]&&(n.push.apply(n,r(w.children)),w.children=[])}else{var O=a();if(d)O.length>0&&n.push(O);else{var S=O.trim();S.length>0&&n.push(S)}f++}return n}function a(){var t=f;return-2===(f=e.indexOf("<",f)-1)&&(f=e.length),e.slice(t,f+1)}function u(){for(var t=f;-1==="\r\n\t>/= ".indexOf(e[f])&&e[f];)f++;return e.slice(t,f)}function c(){f++;for(var t=u(),r={},n=[];e.charCodeAt(f)!==y&&e[f];){var o=e.charCodeAt(f);if(o>64&&o<91||o>96&&o<123){for(var a=u(),c=e.charCodeAt(f);c&&c!==g&&c!==w&&!(c>64&&c<91||c>96&&c<123)&&c!==y;)f++,c=e.charCodeAt(f);if(c===g||c===w){var l=s();if(-1===f)return{tagName:t,attributes:r,children:n}}else l=null,f--;r[a]=l}f++}if(e.charCodeAt(f-1)!==m)if("script"==t){var h=f+1;f=e.indexOf("<\/script>",f),n=[e.slice(h,f)],f+=9}else"style"==t?(h=f+1,f=e.indexOf("</style>",f),n=[e.slice(h,f)],f+=8):-1===O.indexOf(t)?(f++,n=i(t)):f++;else f++;return{tagName:t,attributes:r,children:n}}function s(){var t=e[f],r=f+1;return f=e.indexOf(t,r),e.slice(r,f)}var l,f=(t=t||{}).pos||0,h=!!t.keepComments,d=!!t.keepWhitespace,p="<".charCodeAt(0),y=">".charCodeAt(0),v="-".charCodeAt(0),m="/".charCodeAt(0),b="!".charCodeAt(0),g="'".charCodeAt(0),w='"'.charCodeAt(0),_="[".charCodeAt(0),E="]".charCodeAt(0),O=t.noChildNodes||["img","br","input","meta","link","hr"],S=null;if(void 0!==t.attrValue)for(t.attrName=t.attrName||"id",S=[];-1!==(void 0,l=new RegExp("\\s"+t.attrName+"\\s*=['\"]"+t.attrValue+"['\"]").exec(e),f=l?l.index:-1);)-1!==(f=e.lastIndexOf("<",f))&&S.push(c()),e=e.substr(f),f=0;else S=t.parseNode?c():i("");return t.filter&&(S=o(S,t.filter)),t.simplify?n(Array.isArray(S)?S:[S]):(t.setPos&&(S.pos=f),S)}function n(e){var t={};if(!e.length)return"";if(1===e.length&&"string"==typeof e[0])return e[0];for(var r in e.forEach((function(e){if("object"==i(e)){t[e.tagName]||(t[e.tagName]=[]);var r=n(e.children);t[e.tagName].push(r),Object.keys(e.attributes).length&&"string"!=typeof r&&(r._attributes=e.attributes)}})),t)1==t[r].length&&(t[r]=t[r][0]);return t}function o(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=[];return e.forEach((function(e,u){if("object"==i(e)&&t(e,u,r,n)&&a.push(e),e.children){var c=o(e.children,t,r+1,(n?n+".":"")+u+"."+e.tagName);a=a.concat(c)}})),a}e.filter=o,e.getElementById=function(e,r,n){var i=t(e,{attrValue:r});return n?tXml.simplify(i):i[0]},e.getElementsByClassName=function(e,r,n){var i=t(e,{attrName:"class",attrValue:"[a-zA-Z0-9- ]*"+r+"[a-zA-Z0-9- ]*"});return n?tXml.simplify(i):i},e.parse=t,e.simplify=n,e.simplifyLostLess=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};return t.length?1===t.length&&"string"==typeof t[0]?Object.keys(r).length?{_attributes:r,value:t[0]}:t[0]:(t.forEach((function(t){if("object"==i(t)){n[t.tagName]||(n[t.tagName]=[]);var r=e(t.children||[],t.attributes);n[t.tagName].push(r),Object.keys(t.attributes).length&&(r._attributes=t.attributes)}})),n):n},e.stringify=function(e){function t(e){if(e)for(var t=0;t<e.length;t++)"string"==typeof e[t]?n+=e[t].trim():r(e[t])}function r(e){for(var r in n+="<"+e.tagName,e.attributes)null===e.attributes[r]?n+=" "+r:-1===e.attributes[r].indexOf('"')?n+=" "+r+'="'+e.attributes[r].trim()+'"':n+=" "+r+"='"+e.attributes[r].trim()+"'";"?"!==e.tagName[0]?(n+=">",t(e.children),n+="</"+e.tagName+">"):n+="?>"}var n="";return t(e),n},e.toContentString=function e(t){if(Array.isArray(t)){var r="";return t.forEach((function(t){r=(r+=" "+e(t)).trim()})),r}return"object"==i(t)?e(t.children):" "+t},Object.defineProperty(e,"__esModule",{value:!0})}))},88891:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i="object"===("undefined"===typeof self?"undefined":n(self))?self.URL:window.URL,o=!1;try{var a=new i("b","http://a");a.pathname="c%20d",o="http://a/c%20d"===a.href}catch(c){}if(o)e.exports=i;else{var u=r(12756).J;u.createObjectURL=function(e){return i.createObjectURL(e)},u.revokeObjectURL=function(e){return i.revokeObjectURL(e)},e.exports=u}},88948:function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(){for(;c.length;)c[0](),c.shift()}function n(e){this.a=s,this.b=void 0,this.f=[];var r=this;try{e((function(e){!function e(r,n){if(r.a==s){if(n==r)throw new TypeError;var i=!1;try{var u=n&&n.then;if(null!=n&&"object"===t(n)&&"function"===typeof u)return void u.call(n,(function(t){i||e(r,t),i=!0}),(function(e){i||o(r,e),i=!0}))}catch(c){return void(i||o(r,c))}r.a=0,r.b=n,a(r)}}(r,e)}),(function(e){o(r,e)}))}catch(n){o(r,n)}}function i(e){return new n((function(t){t(e)}))}function o(e,t){if(e.a==s){if(t==e)throw new TypeError;e.a=1,e.b=t,a(e)}}function a(e){!function(e){c.push(e),1==c.length&&u()}((function(){if(e.a!=s)for(;e.f.length;){var t=(i=e.f.shift())[0],r=i[1],n=i[2],i=i[3];try{0==e.a?n("function"===typeof t?t.call(void 0,e.b):e.b):1==e.a&&("function"===typeof r?n(r.call(void 0,e.b)):i(e.b))}catch(o){i(o)}}}))}var u,c=[];u=function(){setTimeout(r)};var s=2;n.prototype.g=function(e){return this.c(void 0,e)},n.prototype.c=function(e,t){var r=this;return new n((function(n,i){r.f.push([e,t,n,i]),a(r)}))},n.resolve=i,n.reject=function(e){return new n((function(t,r){r(e)}))},n.race=function(e){return new n((function(t,r){for(var n=0;n<e.length;n+=1)i(e[n]).c(t,r)}))},n.all=function(e){return new n((function(t,r){function n(r){return function(n){a[r]=n,(o+=1)==e.length&&t(a)}}var o=0,a=[];0==e.length&&t(a);for(var u=0;u<e.length;u+=1)i(e[u]).c(n(u),r)}))},n.prototype.then=n.prototype.c,n.prototype.catch=n.prototype.g,e.exports=("object"===("undefined"===typeof self?"undefined":t(self))?self.Promise:window.Promise)||n},29840:function(e,t){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s={};try{new(function(e){function t(){return i(this,t),r.apply(this,arguments)}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(t,e);var r=a(t);return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}((new EventTarget).constructor)),s.EventTarget=(new EventTarget).constructor}catch(EventTarget){!function(e,t){function r(){t.set(this,o(null))}function n(e,t,r){a(e,t,{configurable:!0,writable:!0,value:r})}function i(e){var t=e.options;return t&&t.once&&e.target.removeEventListener(this.type,e.listener),"function"===typeof e.listener?e.listener.call(e.target,this):e.listener.handleEvent(this),this._stopImmediatePropagationFlag}var o=e.create,a=e.defineProperty,u=r.prototype;n(u,"addEventListener",(function(e,r,n){for(var i=t.get(this),o=i[e]||(i[e]=[]),a=0,u=o.length;a<u;a++)if(o[a].listener===r)return;o.push({target:this,listener:r,options:n})})),n(u,"dispatchEvent",(function(e){var r=t.get(this)[e.type];return r&&(n(e,"target",this),n(e,"currentTarget",this),r.slice(0).some(i,e),delete e.currentTarget,delete e.target),!0})),n(u,"removeEventListener",(function(e,r){for(var n=t.get(this),i=n[e]||(n[e]=[]),o=0,a=i.length;o<a;o++)if(i[o].listener===r)return void i.splice(o,1)})),s.EventTarget=r}(Object,new WeakMap)}t.Z=s.EventTarget},12756:function(e,t,r){"use strict";function n(e,t,r){throw(r=new TypeError(e)).code=t,r}function i(e){n("Invalid URL: "+e,"ERR_INVALID_URL")}function o(e,t,r,i){r='The "name" ',i="argument",e&&(r+='and "value" ',i+="s"),t<++e&&n(r+i+" must be specified","ERR_MISSING_ARGS")}function a(e,t){var r=0,n={next:function(){return{value:e[r++],done:r>e.length}}};return t&&(n[Symbol.iterator]=function(){return n}),n}function u(e,t){function r(e,t){for(o(1,arguments.length),t=String(t),f=!1,l=y.length;l--;)(d=y[l])[0]==e&&(f?y.splice(l,1):(d[1]=t,f=!0));f||y.push([e,t]),c()}function i(e,t){o(1,arguments.length),y.push([e,String(t)]),c()}function u(){for(d="",l=0;l<y.length;l++)d&&(d+="&"),d+=encodeURIComponent(y[l][0])+"="+encodeURIComponent(y[l][1]);return d.replace(/%20/g,"+")}function c(){t&&(t.search=y.length?"?"+u().replace(/=$/,""):"")}var s,l,f,h,d,p=this,y=[];try{h=!!Symbol.iterator}catch(v){h=!1}if(e)if(e.keys&&e.getAll)e.forEach((function(e,t){i(t,e)}));else if(e.pop)for(l=0;l<e.length;l++)i.apply(0,e[l]);else if("object"==typeof e)for(s in e)r(s,e[s]);else if("string"==typeof e)for("?"==e[0]&&(e=e.substring(1)),f=decodeURIComponent(e).split("&");s=f.shift();)~(l=s.indexOf("="))||(l=s.length),i(s.substring(0,l),s.substring(++l));return p.append=i,p.delete=function(e){for(o(0,arguments.length),l=y.length;l--;)y[l][0]==e&&y.splice(l,1);c()},p.entries=function(){return a(y,h)},p.forEach=function(e){for("function"!=typeof e&&n("Callback must be a function","ERR_INVALID_CALLBACK"),l=0;l<y.length;l++)e(y[l][1],y[l][0])},p.get=function(e){for(o(0,arguments.length),l=0;l<y.length;l++)if(y[l][0]==e)return y[l][1];return null},p.getAll=function(e){for(o(0,arguments.length),d=[],l=0;l<y.length;l++)y[l][0]==e&&d.push(y[l][1]);return d},p.has=function(e){for(o(0,arguments.length),l=0;l<y.length;l++)if(y[l][0]==e)return!0;return!1},p.keys=function(){for(d=[],l=0;l<y.length;l++)d.push(y[l][0]);return a(d,h)},p.set=r,p.sort=function(){for(f=[],d=[],l=0;l<y.length;f.push(y[l++][0]));for(f.sort();s=f.shift();)for(l=0;l<y.length;l++)if(y[l][0]==s){d.push(y.splice(l,1).shift());break}y=d,c()},p.toString=u,p.values=function(){for(d=[],l=0;l<y.length;l++)d.push(y[l][1]);return a(d,h)},h&&(p[Symbol.iterator]=p.entries),p}function c(e,t){function r(e,t,r,n){return n={enumerable:!0},t||(n.set=function(t){null!=t&&(c[e]=String(t),"href"!=e&&"search"!=e||(o=new u(c.search,c)))}),n.get=r||function(){return function(e){return a.href=c.href,a.protocol="http:","protocol"==e||"href"==e||f.test(c.protocol)?c[e]:"origin"==e?f.test(c.protocol)?c[e]:"null":a[e]}(e)},n}var n,o,a=document.createElement("a"),c=document.createElement("a"),s=document.createElement("input"),l=this,f=/(blob|ftp|wss?|https?):/;if(s.type="url",t=String(t||"").trim(),(s.value=t)&&!s.checkValidity())return i(t);if(e=String(e).trim(),s.value=e||0,s.checkValidity())c.href=e;else{if(!t)return i(e);c.href=t,e&&((o=e.match(/^\/+/))&&2==o[0].length?c.href=c.protocol+e:/[?#]/.test(e[0])?c.href+=e:"/"==e[0]||"/"==c.pathname?c.href=c.origin+"/"+e.replace(/^\/+/,""):(n=c.pathname.split("/"),t=e.replace(/^(\.\/)?/,"").split("../"),c.href=c.origin+n.slice(0,Math.max(1,n.length-t.length)).concat(t.pop()).join("/")))}return o=new u(c.search,c),l.toString=l.toJSON=c.toString.bind(c),Object.defineProperties(l,{href:r("href"),protocol:r("protocol"),username:r("username"),password:r("password"),hostname:r("hostname"),host:r("host"),port:r("port"),search:r("search"),hash:r("hash"),pathname:r("pathname"),origin:r("origin",1),searchParams:r("searchParams",1,(function(){return o}))})}r.d(t,{J:function(){return c}})}},r={};e.m=t,e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,{a:r}),r},e.d=function(t,r){for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};e(88765)}();